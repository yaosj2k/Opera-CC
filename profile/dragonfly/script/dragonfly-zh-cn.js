/**
 *    Copyright 2006 - 2011 Opera Software ASA
 *
 *    Licensed under the Apache License, Version 2.0 (the "License");
 *    you may not use this file except in compliance with the License.
 *    You may obtain a copy of the License at
 *
 *        http://www.apache.org/licenses/LICENSE-2.0
 *
 *    Unless required by applicable law or agreed to in writing, software
 *    distributed under the License is distributed on an "AS IS" BASIS,
 *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *    See the License for the specific language governing permissions and
 *    limitations under the License.
 *
 **/


function ContextMenu(){if(ContextMenu._instance)return ContextMenu._instance;ContextMenu._instance=this;this._registered_menus={};this._current_items=null;this._broker=ActionBroker.get_instance();this.register=function(a,b,c){if(b){this._registered_menus[a]&&c&&b.extend(this._registered_menus[a]);this._registered_menus[a]=b}};this.oncontextmenu=function(a){var b=[],c=a.target;while(c)b.push(c=c.parentNode);this.dismiss();Tooltips.handle_contextmenu_event(a);CstSelectBase.close_opened_select();if(!a.shiftKey){a.preventDefault();var d=a.target;if(!document.documentElement.contains(d)){var e=null;while(e=b.shift())if(document.documentElement.contains(e))break;if(e){var f=document.createEvent("MouseEvent");f.initMouseEvent(a.type,a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);e.dispatchEvent(f)}return}var g=[],h=null,i="",j=[],k=null;while(d&&d!=document&&(h=d.getAttribute("data-menu"))!==""){k=null;h&&(i=h);if(j.indexOf(h)==-1){j.push(h);var l=this._registered_menus[h];if(l&&l.length){var k=this._expand_all_items(l,a,h);if(k.length){g.length&&g.push(ContextMenu.separator);g=g.concat(k)}}}d=d.parentNode}var m=a.target.get_attr("parent-node-chain","data-spec");if(m){var n=SpecLinks.get_instance(),o=n.get_spec_links(m);if(o.length){k=o.map(function(a){return{label:ui_strings.M_CONTEXTMENU_SPEC_LINK.replace("%s",a.prop),handler:function(b,c){n.open_spec_link(a.url)},id:a.prop,menu_id:"spec"}});this.register("spec",k);g.length&&g.push(ContextMenu.separator)}k&&(g=g.concat(k))}Clipboard.populate_menu(a,g);this._current_items=g;if(g.length){window.onmousewheel=function(a){a.preventDefault()};this._current_event=a;this.show(g,a.clientX,a.clientY);this.is_visible=!0}}};this.show=function(a,b,c){if(a){var d=document.documentElement.render(window.templates.contextmenu(a));const e=2;var f=0,g=d.getBoundingClientRect();if(g.height+e*2>window.innerHeight){c=e;f=window.innerHeight-e*2-2}else if(c+g.height+e>window.innerHeight)if(g.height+e<c)c-=g.height;else{var h=window.innerHeight-c-g.height;c+=h-e}b+g.width+e>window.innerWidth&&(b-=g.width);d.style.cssText=["left:"+b+"px","top:"+c+"px","max-height:"+(f?f+"px":"100%"),"visibility:visible"].join(";")}};this.dismiss=function(){var a=document.getElementById("contextmenu");a&&a.parentElement.removeChild(a);this.is_visible=!1};this._expand_all_items=function(a,b,c){var d=[];for(var e=0,f;f=a[e];e++)if(typeof f.callback=="function"){var g=f.callback(b,b.target);g&&(d=d.concat(g))}else d.push(f);for(var e=0,f;f=d[e];e++){f.id="item_"+e;c&&(f.menu_id=c)}return d};this.modal_click_handler=function(a){var b=a.target,c=document.getElementById("contextmenu");window.onmousewheel=null;a.stopPropagation();a.preventDefault();while(b!=c&&b!=document){var d=b.getAttribute("data-handler-id");if(d){var e=b.getAttribute("data-menu-id"),f=this._current_items;for(var g=0,h;h=f[g];g++)if(h.id==d&&h.menu_id==e){if(h.disabled)return;var i=this._current_event.target;while(i){if(e=="spec"&&i.getAttribute("data-spec"))break;if(e=="resource"&&i.getAttribute("data-resource-url"))break;if(e=="resource"&&i.getAttribute("data-resource-id"))break;if(i.getAttribute("data-menu")==e)break;i=i.parentNode}h.handler(this._current_event,i);break}}b=b.parentNode}this.dismiss();this._broker.clear_setter_click_handler(this)}.bind(this)}function AlertDialogPrototype(){this._init=function(a,b){var c=[{label:ui_strings.S_BUTTON_OK,handler:b}];BaseDialog.prototype._init.call(this,a,c)}}function AlertDialog(a,b){this._init(a,b||function(){})}function ConfirmDialogPrototype(){this._init=function(a,b,c,d){var e=0,f=1,g=b,h=c;if(Array.isArray(b)){g=b[0];h=b[1];d=c}d||(d=ConfirmDialog.OK_CANCEL);if(!ConfirmDialog.labels[d])throw"Not a valid type in ConfirmDialog";var i=[{label:ConfirmDialog.labels[d][e],handler:g},{label:ConfirmDialog.labels[d][f],handler:h}];BaseDialog.prototype._init.call(this,a,i)}}function ConfirmDialog(a,b,c,d){this._init(a,b,c,d)}function BaseDialog(){}function SpecLinks(){if(SpecLinks._instance)return SpecLinks._instance;SpecLinks._instance=this}function ObjectRegistry(){if(ObjectRegistry.instance)return ObjectRegistry.instance;ObjectRegistry.instance=this;this._objects={};this._make_id=function(){return"oid_"+(new Date).getTime()};this.set_object=function(a){var b=this._make_id();this._objects[b]=a;return b};this.get_object=function(a){return this._objects[a]};this.del_object=function(a){}}window.ui_strings||(window.ui_strings={});window.ui_strings.lang_code="en";ui_strings.D_REDO_SEARCH="The searched document no longer exists.\nRepeat search in the current document?";ui_strings.D_REFORMAT_SCRIPTS="Reload the page to reformat the scripts now?";ui_strings.D_RELOAD_SCRIPTS="Not all scripts are loaded. Do you want to reload the page?";ui_strings.D_SHORTCUTS_UPDATE_FAILED="Failed to sync custom shortcuts. The shortcuts are reset to the default ones.";ui_strings.M_CONTEXTMENU_ADD_ATTRIBUTE="Add attribute";ui_strings.M_CONTEXTMENU_ADD_BREAKPOINT="Add breakpoint";ui_strings.M_CONTEXTMENU_ADD_COLOR="Add color";ui_strings.M_CONTEXTMENU_ADD_CONDITION="Add condition";ui_strings.M_CONTEXTMENU_ADD_DECLARATION="Add declaration";ui_strings.M_CONTEXTMENU_ADD_WATCH='Watch "%s"';ui_strings.M_CONTEXTMENU_COLLAPSE_SUBTREE="Collapse subtree";ui_strings.M_CONTEXTMENU_COPY="Copy";ui_strings.M_CONTEXTMENU_COPY_URL="Copy URL";ui_strings.M_CONTEXTMENU_DELETE="Delete";ui_strings.M_CONTEXTMENU_DELETE_ALL="Delete all";ui_strings.M_CONTEXTMENU_DELETE_ALL_BREAKPOINTS="Delete all breakpoints";ui_strings.M_CONTEXTMENU_DELETE_BREAKPOINT="Delete breakpoint";ui_strings.M_CONTEXTMENU_DELETE_COLOR="Delete color";ui_strings.M_CONTEXTMENU_DELETE_CONDITION="Delete condition";ui_strings.M_CONTEXTMENU_DISABLE_ALL="Disable all";ui_strings.M_CONTEXTMENU_DISABLE_ALL_BREAKPOINTS="Disable all breakpoints";ui_strings.M_CONTEXTMENU_DISABLE_BREAKPOINT="Disable breakpoint";ui_strings.M_CONTEXTMENU_DISABLE_DECLARATIONS="Disable all declarations";ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE="Edit attribute";ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE_VALUE="Edit attribute value";ui_strings.M_CONTEXTMENU_EDIT_COLOR="Edit color";ui_strings.M_CONTEXTMENU_EDIT_CONDITION="Edit condition";ui_strings.M_CONTEXTMENU_EDIT_DECLARATION="Edit declaration";ui_strings.M_CONTEXTMENU_EDIT_MARKUP="Edit markup";ui_strings.M_CONTEXTMENU_EDIT_TEXT="Edit text";ui_strings.M_CONTEXTMENU_ENABLE_BREAKPOINT="Enable breakpoint";ui_strings.M_CONTEXTMENU_EXPAND_SUBTREE="Expand subtree";ui_strings.M_CONTEXTMENU_OPEN_COLOR_PICKER="Open color picker";ui_strings.M_CONTEXTMENU_REMOVE_DECLARATION="Delete declaration";ui_strings.M_CONTEXTMENU_REMOVE_NODE="Delete node";ui_strings.M_CONTEXTMENU_SHOW_RESOURCE="Show resource";ui_strings.M_CONTEXTMENU_SPEC_LINK='Specification for "%s"';ui_strings.M_CONTEXTMENU_STORAGE_ADD="Add item";ui_strings.M_CONTEXTMENU_STORAGE_DELETE="Delete item";ui_strings.M_CONTEXTMENU_STORAGE_DELETE_ALL_FROM="Delete all from %s";ui_strings.M_CONTEXTMENU_STORAGE_DELETE_PLURAL="Delete items";ui_strings.M_CONTEXTMENU_STORAGE_EDIT="Edit item";ui_strings.M_LABEL_CLEAR_ALL_ERRORS="Clear all errors";ui_strings.M_LABEL_UI_LANGUAGE="User interface language";ui_strings.M_NETWORK_CRAFTER_FAILED_PARSE_REQUEST="Could not parse request";ui_strings.M_NETWORK_CRAFTER_SEND="Send request";ui_strings.M_NETWORK_REQUEST_DETAIL_DURATION="Duration";ui_strings.M_NETWORK_REQUEST_DETAIL_GET_RESPONSE_BODY_LABEL="Get response body";ui_strings.M_NETWORK_REQUEST_DETAIL_STATUS="Status";ui_strings.M_SETTING_LABEL_GENERAL="General";ui_strings.M_SORTABLE_TABLE_CONTEXT_GROUP_BY='Group by "%s"';ui_strings.M_SORTABLE_TABLE_CONTEXT_NO_GROUPING="No grouping";ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_COLUMNS="Reset columns";ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_SORT="Reset sorting";ui_strings.M_VIEW_LABEL_ALL_RESOURCES="All resources";ui_strings.M_VIEW_LABEL_BREAKPOINTS="Breakpoints";ui_strings.M_VIEW_LABEL_CALLSTACK="Call Stack";ui_strings.M_VIEW_LABEL_COLOR_MAGNIFIER_AND_PICKER="Pixel Magnifier and Color Picker";ui_strings.M_VIEW_LABEL_COLOR_PALETTE="Color Palette";ui_strings.M_VIEW_LABEL_COLOR_PALETTE_SHORT="Palette";ui_strings.M_VIEW_LABEL_COLOR_PICKER="Color Picker";ui_strings.M_VIEW_LABEL_COLOR_SELECT="Color Select";ui_strings.M_VIEW_LABEL_COMMAND_LINE="Console";ui_strings.M_VIEW_LABEL_COMPOSITE_DOM="Documents";ui_strings.M_VIEW_LABEL_COMPOSITE_ERROR_CONSOLE="Errors";ui_strings.M_VIEW_LABEL_COMPOSITE_EXPORTS="Export";ui_strings.M_VIEW_LABEL_COMPOSITE_SCRIPTS="Scripts";ui_strings.M_VIEW_LABEL_COMPUTED_STYLE="Computed Style";ui_strings.M_VIEW_LABEL_CONSOLE="Error Panels";ui_strings.M_VIEW_LABEL_COOKIES="Cookies";ui_strings.M_VIEW_LABEL_DOM="DOM Panel";ui_strings.M_VIEW_LABEL_DOM_ATTR="Properties";ui_strings.M_VIEW_LABEL_ENVIRONMENT="Environment";ui_strings.M_VIEW_LABEL_ERROR_ALL="All";ui_strings.M_VIEW_LABEL_ERROR_BITTORRENT="BitTorrent";ui_strings.M_VIEW_LABEL_ERROR_CSS="CSS";ui_strings.M_VIEW_LABEL_ERROR_HTML="HTML";ui_strings.M_VIEW_LABEL_ERROR_JAVA="Java";ui_strings.M_VIEW_LABEL_ERROR_LOCATION_TITLE="Line %(LINE)s in %(URI)s";ui_strings.M_VIEW_LABEL_ERROR_M2="Mail";ui_strings.M_VIEW_LABEL_ERROR_NETWORK="Network";ui_strings.M_VIEW_LABEL_ERROR_OTHER="Other";ui_strings.M_VIEW_LABEL_ERROR_SCRIPT="JavaScript";ui_strings.M_VIEW_LABEL_ERROR_STORAGE="Storage";ui_strings.M_VIEW_LABEL_ERROR_SVG="SVG";ui_strings.M_VIEW_LABEL_ERROR_WIDGET="Widgets";ui_strings.M_VIEW_LABEL_ERROR_XML="XML";ui_strings.M_VIEW_LABEL_ERROR_XSLT="XSLT";ui_strings.M_VIEW_LABEL_EVENT_BREAKPOINTS="Event Breakpoints";ui_strings.M_VIEW_LABEL_EVENT_LISTENERS="Listeners";ui_strings.M_VIEW_LABEL_EVENT_LISTENERS_ALL="All";ui_strings.M_VIEW_LABEL_EVENT_LISTENERS_SELECTED_NODE="Selected Node";ui_strings.M_VIEW_LABEL_EXPORT="Export";ui_strings.M_VIEW_LABEL_FRAME_INSPECTION="Inspection";ui_strings.M_VIEW_LABEL_GO_TO_LINE="Go to line";ui_strings.M_VIEW_LABEL_LAYOUT="Layout";ui_strings.M_VIEW_LABEL_LOCAL_STORAGE="Local Storage";ui_strings.M_VIEW_LABEL_MONOSPACE_FONT="Monospace Font";ui_strings.M_VIEW_LABEL_NETWORK="Network";ui_strings.M_VIEW_LABEL_NETWORK_LOG="Network log";ui_strings.M_VIEW_LABEL_NETWORK_OPTIONS="Network options";ui_strings.M_VIEW_LABEL_NEW_STYLE="New Style";ui_strings.M_VIEW_LABEL_NOT_STOPPED="Not stopped";ui_strings.M_VIEW_LABEL_NO_BREAKPOINT="No breakpoint";ui_strings.M_VIEW_LABEL_NO_INSPECTION="No inspection";ui_strings.M_VIEW_LABEL_NO_RETURN_VALUES="No return values";ui_strings.M_VIEW_LABEL_NO_WATCHES="No watches";ui_strings.M_VIEW_LABEL_PROFILER="Profiler";ui_strings.M_VIEW_LABEL_RAW_REQUEST_INFO="Raw request";ui_strings.M_VIEW_LABEL_RAW_RESPONSE_INFO="Raw Response";ui_strings.M_VIEW_LABEL_REQUEST_CRAFTER="Make request";ui_strings.M_VIEW_LABEL_REQUEST_HEADERS="Request Headers";ui_strings.M_VIEW_LABEL_REQUEST_LOG="Request log";ui_strings.M_VIEW_LABEL_REQUEST_SUMMARY="Request Summary";ui_strings.M_VIEW_LABEL_RESOURCES="Resources";ui_strings.M_VIEW_LABEL_RESPONSE_BODY="Response body";ui_strings.M_VIEW_LABEL_RESPONSE_HEADERS="Response Headers";ui_strings.M_VIEW_LABEL_RETURN_VALUES="Return Values";ui_strings.M_VIEW_LABEL_RUNTIME_STATE="State";ui_strings.M_VIEW_LABEL_SCRIPTS="Scripts";ui_strings.M_VIEW_LABEL_SEARCH="Search";ui_strings.M_VIEW_LABEL_SESSION_STORAGE="Session Storage";ui_strings.M_VIEW_LABEL_SOURCE="Source";ui_strings.M_VIEW_LABEL_STORAGE="Storage";ui_strings.M_VIEW_LABEL_STORED_COLORS="Color Palette";ui_strings.M_VIEW_LABEL_STYLES="Styles";ui_strings.M_VIEW_LABEL_STYLESHEET="Style Sheet";ui_strings.M_VIEW_LABEL_STYLESHEETS="Style Sheets";ui_strings.M_VIEW_LABEL_THREAD_LOG="Thread Log";ui_strings.M_VIEW_LABEL_UTILITIES="Utilities";ui_strings.M_VIEW_LABEL_VIEWS="Views";ui_strings.M_VIEW_LABEL_WATCHES="Watches";ui_strings.M_VIEW_LABEL_WIDGET_PREFERNCES="Widget Preferences";ui_strings.M_VIEW_SUB_LABEL_METRICS="Metrics";ui_strings.M_VIEW_SUB_LABEL_OFFSET_VALUES="Offset Values";ui_strings.M_VIEW_SUB_LABEL_PARENT_OFFSETS="Parent Offsets";ui_strings.S_ANONYMOUS_FUNCTION_NAME="(anonymous)";ui_strings.S_ATTRIBUTE_LISTENER="Event handler";ui_strings.S_BUTTON_CANCEL="Cancel";ui_strings.S_BUTTON_CANCEL_REMOTE_DEBUG="Cancel Remote Debug";ui_strings.S_BUTTON_COLOR_RESTORE_DEFAULTS="Restore defaults";ui_strings.S_BUTTON_EDIT_CUSTOM_EVENT="Edit";ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH="More";ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH_TOOLTIP="Show advanced search";ui_strings.S_BUTTON_EXPAND_ALL_SECTIONS="Expand all sections";ui_strings.S_BUTTON_LABEL_AT_ABORT="Stop when encountering an abort message";ui_strings.S_BUTTON_LABEL_AT_ERROR="Show parse errors and break on exceptions";ui_strings.S_BUTTON_LABEL_AT_EXCEPTION="Break when an exception is thrown";ui_strings.S_BUTTON_LABEL_CLEAR_LOG="Clear visible errors";ui_strings.S_BUTTON_LABEL_CLEAR_THREAD_LOG="Clear thread log";ui_strings.S_BUTTON_LABEL_CLOSE_WINDOW="Close window";ui_strings.S_BUTTON_LABEL_CONTINUE="Continue (%s)";ui_strings.S_BUTTON_LABEL_EXPORT_DOM="Export the current DOM panel";ui_strings.S_BUTTON_LABEL_EXPORT_LOG="Export thread log";ui_strings.S_BUTTON_LABEL_GET_THE_WOHLE_TREE="Expand the DOM tree";ui_strings.S_BUTTON_LABEL_HELP="Help";ui_strings.S_BUTTON_LABEL_HIDE_DEFAULT_PROPS_IN_GLOBAL_SCOPE="Show default properties in global scope";ui_strings.S_BUTTON_LABEL_LOG_THREADS="Log threads";ui_strings.S_BUTTON_LABEL_REFETCH_EVENT_LISTENERS="Refetch event listeners";ui_strings.S_BUTTON_LABEL_REFORMAT_JAVASCRIPT="Pretty-print JavaScript";ui_strings.S_BUTTON_LABEL_RELOAD_HOST="Reload the selected window in the browser";ui_strings.S_BUTTON_LABEL_SELECT_WINDOW="Select the debugging context you want to debug";ui_strings.S_BUTTON_LABEL_SETTINGS="Settings";ui_strings.S_BUTTON_LABEL_STEP_INTO="Step into (%s)";ui_strings.S_BUTTON_LABEL_STEP_OUT="Step out (%s)";ui_strings.S_BUTTON_LABEL_STEP_OVER="Step over (%s)";ui_strings.S_BUTTON_LABEL_STOP_AT_THREAD="Break on first statement of a new script";ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH="Less";ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH_TOOLTIP="Show search bar";ui_strings.S_BUTTON_LOAD_PO_FILE="Load PO file";ui_strings.S_BUTTON_NO="No";ui_strings.S_BUTTON_OK="OK";ui_strings.S_BUTTON_REMOVE_ALL_BREAKPOINTS="Delete all event breakpoints";ui_strings.S_BUTTON_RESET_ALL_TO_DEFAULTS="Reset all to defaults";ui_strings.S_BUTTON_RESET_TO_DEFAULTS="Reset default values";ui_strings.S_BUTTON_SAVE="Save";ui_strings.S_BUTTON_SEARCH_EVENT="Search for an event";ui_strings.S_BUTTON_SEARCH_SHORTCUT="Search keyboard shortcuts";ui_strings.S_BUTTON_SET_DEFAULT_VALUE="Reset default value";ui_strings.S_BUTTON_SHOW_REQUEST_HEADERS="Headers";ui_strings.S_BUTTON_SHOW_REQUEST_RAW="Raw";ui_strings.S_BUTTON_SHOW_REQUEST_SUMMARY="Summary";ui_strings.S_BUTTON_SPOTLIGHT_RESET_DEFAULT_COLORS="Reset default colors";ui_strings.S_BUTTON_START_PROFILER="Start profiling";ui_strings.S_BUTTON_STOP_PROFILER="Stop profiling";ui_strings.S_BUTTON_STORAGE_DELETE_ALL="Delete All";ui_strings.S_BUTTON_STORE_COLOR="Store color";ui_strings.S_BUTTON_SWITCH_TO_NETWORK_PROFILER="Improve accuracy of timing information";ui_strings.S_BUTTON_TAKE_SCREENSHOT="Take screenshot";ui_strings.S_BUTTON_TEXT_APPLY="Apply";ui_strings.S_BUTTON_TOGGLE_CONSOLE="Toggle console";ui_strings.S_BUTTON_TOGGLE_REMOTE_DEBUG="Remote debug configuration";ui_strings.S_BUTTON_TOGGLE_SETTINGS="Settings";ui_strings.S_BUTTON_UPDATE_SCREESHOT="Update screenshot";ui_strings.S_BUTTON_YES="Yes";ui_strings.S_BYTES_UNIT="bytes";ui_strings.S_CLEAR_COMMAND_LINE_LOG="Clear console";ui_strings.S_CLEAR_NETWORK_LOG="Clear network log";ui_strings.S_CLOSE_COMMAND_LINE="Close console";ui_strings.S_COLOR_NOTATION="Color format";ui_strings.S_COLOR_PICKER_AVERAGE_COLOR_OF="Average color of";ui_strings.S_COLUMN_LABEL_ERROR="Error";ui_strings.S_COLUMN_LABEL_FILE="File";ui_strings.S_COLUMN_LABEL_LINE="Line";ui_strings.S_CONFIRM_LOAD_COMPATIBLE_VERSION="The protocol version of Opera does not match the one which Opera Dragonfly is using.\n\nTry to load a compatible version?";ui_strings.S_CONFIRM_SWITCH_TO_NETWORK_PROFILER="To improve the accuracy of timing information, other features are turned off. You may lose changes you made.";ui_strings.S_CONSOLE_TRACE_LABEL="Stack trace:";ui_strings.S_COOKIE_MANAGER_IN_1_HOUR="In 1 hour";ui_strings.S_COOKIE_MANAGER_IN_1_MINUTE="In 1 minute";ui_strings.S_COOKIE_MANAGER_IN_1_MONTH="In 1 month";ui_strings.S_COOKIE_MANAGER_IN_1_WEEK="In 1 week";ui_strings.S_COOKIE_MANAGER_IN_1_YEAR="In 1 year";ui_strings.S_COOKIE_MANAGER_IN_X_DAYS="In %s days";ui_strings.S_COOKIE_MANAGER_IN_X_HOURS="In %s hours";ui_strings.S_COOKIE_MANAGER_IN_X_MINUTES="In %s minutes";ui_strings.S_COOKIE_MANAGER_IN_X_MONTHS="In %s months";ui_strings.S_COOKIE_MANAGER_IN_X_WEEKS="In %s weeks";ui_strings.S_COOKIE_MANAGER_IN_X_YEARS="In %s years";ui_strings.S_COOKIE_MANAGER_SOONER_THEN_1_MINUTE="< 1 minute";ui_strings.S_COOKIE_MANAGER_TOMORROW="Tomorrow";ui_strings.S_DISABLE_DECLARATION="Disable";ui_strings.S_DRAGONFLY_INFO_MESSAGE="Opera Dragonfly info message:\n";ui_strings.S_ENABLE_DECLARATION="Enable";ui_strings.S_ERRORS_MAXIMUM_REACHED="Displaying %(MAX)s of %(COUNT)s errors";ui_strings.S_ERROR_LOG_CSS_FILTER="Use CSS filter";ui_strings.S_EVENT_LISTENER_ADDED_IN="Added in %s";ui_strings.S_EVENT_LISTENER_SET_AS_MARKUP_ATTR="Set as markup attribute";ui_strings.S_EVENT_TARGET_LISTENER="Event listener";ui_strings.S_EVENT_TYPE_CSS_PARSING="CSS parsing";ui_strings.S_EVENT_TYPE_CSS_SELECTOR_MATCHING="CSS selector matching";ui_strings.S_EVENT_TYPE_DOCUMENT_PARSING="Document parsing";ui_strings.S_EVENT_TYPE_GENERIC="Generic";ui_strings.S_EVENT_TYPE_LAYOUT="Layout";ui_strings.S_EVENT_TYPE_PAINT="Paint";ui_strings.S_EVENT_TYPE_PROCESS="Process";ui_strings.S_EVENT_TYPE_REFLOW="Reflow";ui_strings.S_EVENT_TYPE_SCRIPT_COMPILATION="Script compilation";ui_strings.S_EVENT_TYPE_STYLE_RECALCULATION="Style recalculation";ui_strings.S_EVENT_TYPE_THREAD_EVALUATION="Thread evaluation";ui_strings.S_EXPAND_SHORTHANDS="Expand shorthands";ui_strings.S_GLOBAL_KEYBOARD_SHORTCUTS_SECTION_TITLE="Global";ui_strings.S_GLOBAL_SCOPE_NAME="(global)";ui_strings.S_HELP_COMMAND_LINE="Help";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORTING_REQUEST="Request aborted";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORT_RETRYING="Sequence terminated, retry";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_CLOSING_RESPONSE_PHASE="Closing response phase";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING="Processing";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING_RESPONSE="Processing response";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_READING_LOCAL_DATA="Reading local data";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_REDIRECTING="Redirecting";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_SCHEDULING="Scheduling request";ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_BODY="Reading response body";ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_HEADER="Reading response header";ui_strings.S_HTTP_EVENT_SEQUENCE_WAITING_FOR_RESPONSE="Waiting for response";ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_BODY="Writing request body";ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_HEADER="Writing request header";ui_strings.S_HTTP_INCOMPLETE_LOADING_GRAPH="Reload to show all page requests";ui_strings.S_HTTP_LABEL_DATA_VIEW="Data view";ui_strings.S_HTTP_LABEL_DURATION="Duration";ui_strings.S_HTTP_LABEL_FILTER_ALL="All";ui_strings.S_HTTP_LABEL_FILTER_IMAGES="Images";ui_strings.S_HTTP_LABEL_FILTER_MARKUP="Markup";ui_strings.S_HTTP_LABEL_FILTER_OTHER="Other";ui_strings.S_HTTP_LABEL_FILTER_SCRIPTS="Scripts";ui_strings.S_HTTP_LABEL_FILTER_STYLESHEETS="Stylesheets";ui_strings.S_HTTP_LABEL_FILTER_XHR="XHR";ui_strings.S_HTTP_LABEL_GRAPH="Graph";ui_strings.S_HTTP_LABEL_GRAPH_VIEW="Graph view";ui_strings.S_HTTP_LABEL_HOST="Host";ui_strings.S_HTTP_LABEL_METHOD="Method";ui_strings.S_HTTP_LABEL_PATH="Path";ui_strings.S_HTTP_LABEL_QUERY_ARGS="Query arguments";ui_strings.S_HTTP_LABEL_RESPONSE="Response";ui_strings.S_HTTP_LABEL_RESPONSECODE="Status";ui_strings.S_HTTP_LABEL_STARTED="Started";ui_strings.S_HTTP_LABEL_URL="URL";ui_strings.S_HTTP_LABEL_WAITING="Waiting";ui_strings.S_HTTP_NOT_REQUESTED="Cached";ui_strings.S_HTTP_REQUESTED_HEADLINE="Requested at %s";ui_strings.S_HTTP_SERVED_OVER_FILE="Local";ui_strings.S_HTTP_TOOLTIP_DURATION="Time spent between starting and finishing this request";ui_strings.S_HTTP_TOOLTIP_FILTER_ALL="Show all requests";ui_strings.S_HTTP_TOOLTIP_FILTER_IMAGES="Show only images";ui_strings.S_HTTP_TOOLTIP_FILTER_MARKUP="Show only markup";ui_strings.S_HTTP_TOOLTIP_FILTER_OTHER="Show requests of other types";ui_strings.S_HTTP_TOOLTIP_FILTER_SCRIPTS="Show only scripts";ui_strings.S_HTTP_TOOLTIP_FILTER_STYLESHEETS="Show only stylesheets";ui_strings.S_HTTP_TOOLTIP_FILTER_XHR="Show only XMLHttpRequests";ui_strings.S_HTTP_TOOLTIP_GRAPH="Graph of the loading sequence";ui_strings.S_HTTP_TOOLTIP_MIME="MIME type";ui_strings.S_HTTP_TOOLTIP_PROTOCOL="Protocol";ui_strings.S_HTTP_TOOLTIP_RESPONSECODE="HTTP status code";ui_strings.S_HTTP_TOOLTIP_SIZE="Content-length of the response in bytes";ui_strings.S_HTTP_TOOLTIP_SIZE_PRETTYPRINTED="Content-length of the response";ui_strings.S_HTTP_TOOLTIP_STARTED="Starting time, relative to the main document";ui_strings.S_HTTP_TOOLTIP_WAITING="Time spent requesting this resource";ui_strings.S_HTTP_UNREFERENCED="Unreferenced";ui_strings.S_INFO_DOCUMENT_HAS_NO_STYLESHEETS="This document has no style sheets";ui_strings.S_INFO_DOCUMNENT_LOADING="Updating Opera Dragonfly…";ui_strings.S_INFO_ERROR_LISTENING="There was an error. Please check that port %s is not in use.";ui_strings.S_INFO_HTTP_PROFILER_MODE="The debugger is in HTTP profiler mode. All other features are disabled.";ui_strings.S_INFO_INVALID_REGEXP="Invalid regular expression.";ui_strings.S_INFO_INVERT_ELEMENT_HIGHLIGHT='The element highlight color can be inverted with the "%s" shortcut.';ui_strings.S_INFO_IS_SEARCHING="Searching…";ui_strings.S_INFO_MISSING_JS_SOURCE_FILE="(Missing source file)";ui_strings.S_INFO_NETWORK_UPDATES_PAUSED="Updating of network log is paused.";ui_strings.S_INFO_NO_COMPATIBLE_VERSION="There is no compatible Opera Dragonfly version.";ui_strings.S_INFO_NO_JAVASCRIPT_IN_CONTEXT="There is no JavaScript environment in the active window";ui_strings.S_INFO_NO_VALID_PORT_NUMBER="Please select a port number between %s and %s.";ui_strings.S_INFO_PROFILER_MODE="The debugger is in profiler mode. All other features are disabled.";ui_strings.S_INFO_REGEXP_MATCHES_EMPTY_STRING="RegExp matches empty string. No search was performed.";ui_strings.S_INFO_RELOAD_FOR_SCRIPT="Click the reload button above to fetch the scripts for the selected debugging context";ui_strings.S_INFO_REQUEST_FAILED="The request failed.";ui_strings.S_INFO_RUNTIME_HAS_NO_SCRIPTS="This document has no scripts";ui_strings.S_INFO_STORAGE_TYPE_DOES_NOT_EXIST="%s does not exist.";ui_strings.S_INFO_STYLESHEET_HAS_NO_RULES="This style sheet has no rules";ui_strings.S_INFO_TOO_MANY_SEARCH_RESULTS="Displaying %(MAX)s of %(COUNT)s";ui_strings.S_INFO_WAITING_FORHOST_CONNECTION="Waiting for a host connection on port %s.";ui_strings.S_INFO_WINDOW_HAS_NO_RUNTIME="This window has no runtime";ui_strings.S_INHERITED_FROM="Inherited from";ui_strings.S_INPUT_DEFAULT_TEXT_FILTER="Filter";ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH="Search";ui_strings.S_KEYBOARD_SHORTCUTS_CONFIGURATION="Configuration";ui_strings.S_LABEL_ADD_WATCH="Add watch";ui_strings.S_LABEL_CHANGE_UI_LANGUAGE_INFO="Change %s to one of";ui_strings.S_LABEL_COLLAPSED_INSPECTED_PROTOTYPES="Default collapsed prototype objects (a list of prototypes, e.g. Object, Array, etc. * will collapse all): ";ui_strings.S_LABEL_COLOR_HUE="Hue";ui_strings.S_LABEL_COLOR_LUMINOSITY="Luminosity";ui_strings.S_LABEL_COLOR_OPACITY="Opacity";ui_strings.S_LABEL_COLOR_PICKER_SAMPLE_SIZE="Sample Size";ui_strings.S_LABEL_COLOR_PICKER_ZOOM="Zoom";ui_strings.S_LABEL_COLOR_SATURATION="Saturation";ui_strings.S_LABEL_COOKIE_MANAGER_ADD_COOKIE="Add cookie";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_DOMAIN="Domain";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRED="(expired)";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES="Expires";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE="When session ends, e.g. the tab is closed";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE_SHORT="Session";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_NAME="Name";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_PATH="Path";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_VALUE="Value";ui_strings.S_LABEL_COOKIE_MANAGER_EDIT_COOKIE="Edit cookie";ui_strings.S_LABEL_COOKIE_MANAGER_GROUPER_RUNTIME="runtime";ui_strings.S_LABEL_COOKIE_MANAGER_HTTP_ONLY="HTTPOnly";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIE="Delete cookie";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES="Delete cookies";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES_OF="Delete cookies from %s";ui_strings.S_LABEL_COOKIE_MANAGER_SECURE_CONNECTIONS_ONLY="Secure";ui_strings.S_LABEL_DEFAULT_SELECTION="Default";ui_strings.S_LABEL_DELETE_ALL_WATCHES="Delete all watches";ui_strings.S_LABEL_DELETE_WATCH="Delete watch";ui_strings.S_LABEL_DIALOG_DONT_SHOW_AGAIN="Do not show again";ui_strings.S_LABEL_EDIT_WATCH="Edit watch";ui_strings.S_LABEL_ENABLE_DEFAULT_FEATURES="Enable the default debugger features";ui_strings.S_LABEL_FONT_SELECTION_FACE="Font face";ui_strings.S_LABEL_FONT_SELECTION_LINE_HEIGHT="Line height";ui_strings.S_LABEL_FONT_SELECTION_SIZE="Font size";ui_strings.S_LABEL_KEYBOARDCONFIG_FOR_VIEW="Keyboard shortcuts %s";ui_strings.S_LABEL_KEYBOARDCONFIG_INVALID_SHORTCUT="Invalid keyboard shortcut";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT="Default";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT="Edit";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_ATTR_AND_TEXT="Edit Attributes and Text";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_MARKUP="Edit markup";ui_strings.S_LABEL_MAX_SEARCH_HITS="Maximum number of search results";ui_strings.S_LABEL_MOVE_HIGHLIGHT_DOWN="Find next";ui_strings.S_LABEL_MOVE_HIGHLIGHT_UP="Find previous";ui_strings.S_LABEL_NETWORK_POST_DATA_NAME="Name";ui_strings.S_LABEL_NETWORK_POST_DATA_VALUE="Value";ui_strings.S_LABEL_PORT="Port";ui_strings.S_LABEL_REPL_BACKLOG_LENGTH="Number of lines of stored history";ui_strings.S_LABEL_REPL_MODE_AUTOCOMPLETE="Autocomplete";ui_strings.S_LABEL_REPL_MODE_DEFAULT="Default";ui_strings.S_LABEL_REPL_MODE_MULTILINE="Multi-line edit";ui_strings.S_LABEL_REPL_MODE_SINGLELINE="Single-line edit";ui_strings.S_LABEL_SCOPE_CHAIN="Scope Chain";ui_strings.S_LABEL_SEARCH_ALL_FILES="All files";ui_strings.S_LABEL_SEARCH_FLAG_IGNORE_CASE="Ignore case";ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS="Injected";ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS_TOOLTIP="Search in all injected scripts, including Browser JS, Extension JS and User JS";ui_strings.S_LABEL_SEARCH_TYPE_CSS="Selector";ui_strings.S_LABEL_SEARCH_TYPE_REGEXP="RegExp";ui_strings.S_LABEL_SEARCH_TYPE_TEXT="Text";ui_strings.S_LABEL_SEARCH_TYPE_XPATH="XPath";ui_strings.S_LABEL_SHOW_JS_TOOLTIP="Show inspection tooltip";ui_strings.S_LABEL_SMART_REFORMAT_JAVASCRIPT="Smart JavaScript pretty-printing";ui_strings.S_LABEL_SPOTLIGHT_TITLE="Element Highlight";ui_strings.S_LABEL_STORAGE_ADD="Add";ui_strings.S_LABEL_STORAGE_ADD_STORAGE_TYPE="Add %s";ui_strings.S_LABEL_STORAGE_DELETE="Delete";ui_strings.S_LABEL_STORAGE_DOUBLE_CLICK_TO_EDIT="Double-click to edit";ui_strings.S_LABEL_STORAGE_KEY="Key";ui_strings.S_LABEL_STORAGE_UPDATE="Update";ui_strings.S_LABEL_TAB_SIZE="Tab Size";ui_strings.S_LABEL_UTIL_AREA="Area";ui_strings.S_LABEL_UTIL_SCALE="Scale";ui_strings.S_LISTENER_BUBBLING_PHASE="bubbling";ui_strings.S_LISTENER_CAPTURING_PHASE="capturing";ui_strings.S_MENU_DEBUG_CONTEXT="Select the debugging context";ui_strings.S_MENU_RELOAD_DEBUG_CONTEXT="Reload Debugging Context";ui_strings.S_MENU_RELOAD_DEBUG_CONTEXT_SHORT="Reload";ui_strings.S_MENU_SELECT_ACTIVE_WINDOW="Select Active Window";ui_strings.S_NETWORK_BODY_NOT_AVAILABLE="Request body not available. Enable resource tracking and reload the page to view the resource.";ui_strings.S_NETWORK_CACHING_SETTING_DEFAULT_LABEL="Standard browser caching behavior";ui_strings.S_NETWORK_CACHING_SETTING_DESC="This setting controls how caching works when Opera Dragonfly is running. When caching is disabled, Opera always reloads the page.";ui_strings.S_NETWORK_CACHING_SETTING_DISABLED_LABEL="Disable all caching";ui_strings.S_NETWORK_CACHING_SETTING_TITLE="Caching behavior";ui_strings.S_NETWORK_CANT_DISPLAY_TYPE="Cannot display content of type %s";ui_strings.S_NETWORK_CONTENT_TRACKING_SETTING_TRACK_LABEL="Track content (affects speed/memory)";ui_strings.S_NETWORK_ENABLE_CONTENT_TRACKING_FOR_REQUEST='Enable content tracking in the "network options" panel to see request bodies';ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_NAME="Header-name";ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_VALUE="Header-value";ui_strings.S_NETWORK_HEADER_OVERRIDES_DESC="Headers in the override box will be used for all requests in the debugged browser. They will override normal headers.";ui_strings.S_NETWORK_HEADER_OVERRIDES_LABEL="Enable global header overrides";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_LABEL="Presets";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_SAVE="Save";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESET_NONE="None";ui_strings.S_NETWORK_HEADER_OVERRIDES_TITLE="Global header overrides";ui_strings.S_NETWORK_MULTIPART_REQUEST_TITLE="Request - multipart";ui_strings.S_NETWORK_NOT_REQUESTED="No request made.";ui_strings.S_NETWORK_N_BYTE_BODY="Request body of %s bytes";ui_strings.S_NETWORK_RAW_VIEW_LABEL="Show raw requests and responses";ui_strings.S_NETWORK_REQUEST="Request";ui_strings.S_NETWORK_REQUESTS="Requests";ui_strings.S_NETWORK_REQUEST_DETAIL_BODY_DESC='Response body not tracked. To always fetch response bodies, toggle the "Track content" option in Settings. To retrieve only this body, click the button.';ui_strings.S_NETWORK_REQUEST_DETAIL_BODY_UNFINISHED="Response body not available until the request is finished.";ui_strings.S_NETWORK_REQUEST_DETAIL_NO_RESPONSE_BODY='Response body not available. Enable the "Track content" option in Settings and reload the page to view the resource.';ui_strings.S_NETWORK_REQUEST_DETAIL_REQUEST_TITLE="Request";ui_strings.S_NETWORK_REQUEST_DETAIL_RESPONSE_TITLE="Response";ui_strings.S_NETWORK_REQUEST_DETAIL_UNDISPLAYABLE_BODY_LABEL="Unable to show data of type %s";ui_strings.S_NETWORK_REQUEST_NO_HEADERS_LABEL="No headers";ui_strings.S_NETWORK_SERVED_FROM_CACHE="No request made. All data was retrieved from cache without accessing the network.";ui_strings.S_NETWORK_UNKNOWN_MIME_TYPE="MIME type not known for request data";ui_strings.S_NONE="None";ui_strings.S_NO_EVENT_LISTENER="No event listeners";ui_strings.S_PROFILER_AREA_DIMENSION="Area";ui_strings.S_PROFILER_AREA_LOCATION="Location";ui_strings.S_PROFILER_CALCULATING="Calculating…";ui_strings.S_PROFILER_DURATION="Duration";ui_strings.S_PROFILER_NO_DATA="No data";ui_strings.S_PROFILER_NO_DETAILS="No details";ui_strings.S_PROFILER_PROFILING="Profiling…";ui_strings.S_PROFILER_PROFILING_FAILED="Profiling failed";ui_strings.S_PROFILER_RELOAD="To get accurate data from the profiler, all other features have to be disabled and the document has to be reloaded.";ui_strings.S_PROFILER_SELF_TIME="Self time";ui_strings.S_PROFILER_START_MESSAGE="Press the Record button to start profiling";ui_strings.S_PROFILER_START_TIME="Start";ui_strings.S_PROFILER_TOTAL_SELF_TIME="Total self time";ui_strings.S_PROFILER_TYPE_EVENT="Event name";ui_strings.S_PROFILER_TYPE_SCRIPT="Script type";ui_strings.S_PROFILER_TYPE_SELECTOR="Selector";ui_strings.S_PROFILER_TYPE_THREAD="Thread type";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_HEADER="Steps to enable remote debugging:";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_1="Specify the port number you wish to connect to, or leave as the default";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_2='Click "Apply"';ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_HEADER="On the remote device:";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_1="Enter opera:debug in the URL field";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_2="Enter the IP address of the machine running Opera Dragonfly";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_3="Enter the port number %s";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_4='Click "Connect"';ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_5="Once connected navigate to the page you wish to debug";ui_strings.S_REPL_HELP_COMMAND_DESC="Show a list of all available commands";ui_strings.S_REPL_JQUERY_COMMAND_DESC="Load jQuery in the active tab";ui_strings.S_REPL_WELCOME_TEXT="Type %(CLEAR_COMMAND)s to clear the console.\nType %(HELP_COMMAND)s for more information.";ui_strings.S_RESOURCE_ALL_NOT_APPLICABLE="n/a";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_HOST="Host";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_MIME="MIME";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PATH="Path"
;ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PPSIZE="Size (pretty printed)";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PROTOCOL="Protocol";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_SIZE="Size";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_TYPE="Type";ui_strings.S_RESOURCE_ALL_TABLE_GROUP_GROUPS="Groups";ui_strings.S_RESOURCE_ALL_TABLE_GROUP_HOSTS="Hosts";ui_strings.S_RESOURCE_ALL_TABLE_NO_FILENAME="(no name)";ui_strings.S_RESOURCE_ALL_TABLE_NO_HOST="No host";ui_strings.S_RESOURCE_ALL_TABLE_UNKNOWN_GROUP="Unknown";ui_strings.S_RESOURCE_CLICK_BUTTON_TO_FETCH_RESOURCES="Click the reload button above to reload the debugged window and fetch its resources";ui_strings.S_RETURN_VALUES_FUNCTION_FROM="Returned from %s:%s";ui_strings.S_RETURN_VALUES_FUNCTION_TO="Returned to %s:%s";ui_strings.S_SCOPE_GLOBAL="Global";ui_strings.S_SCOPE_INNER="Scope %s";ui_strings.S_SCRIPT_SELECT_SECTION_BROWSER_AND_USER_JS="Browser JS and User JS";ui_strings.S_SCRIPT_SELECT_SECTION_INLINE_AND_EVALS="Inline, eval, timeout and event-handler scripts";ui_strings.S_SCRIPT_TYPE_BROWSERJS="BrowserJS";ui_strings.S_SCRIPT_TYPE_DEBUGGER="Debugger";ui_strings.S_SCRIPT_TYPE_EVAL="Eval";ui_strings.S_SCRIPT_TYPE_EVENT_HANDLER="Event";ui_strings.S_SCRIPT_TYPE_EXTENSIONJS="Extension";ui_strings.S_SCRIPT_TYPE_GENERATED="document.write()";ui_strings.S_SCRIPT_TYPE_INLINE="Inline";ui_strings.S_SCRIPT_TYPE_LINKED="External";ui_strings.S_SCRIPT_TYPE_TIMEOUT="Timeout or interval";ui_strings.S_SCRIPT_TYPE_UNKNOWN="Unknown";ui_strings.S_SCRIPT_TYPE_URI="javascript: URL";ui_strings.S_SCRIPT_TYPE_USERJS="UserJS";ui_strings.S_SEARCH_INPUT_TOOLTIP="text search";ui_strings.S_SETTINGS_HEADER_ABOUT="About";ui_strings.S_SETTINGS_HEADER_CONSOLE="Error Log";ui_strings.S_SETTINGS_HEADER_DOCUMENT="Documents";ui_strings.S_SETTINGS_HEADER_GENERAL="General";ui_strings.S_SETTINGS_HEADER_KEYBOARD_SHORTCUTS="Keyboard shortcuts";ui_strings.S_SETTINGS_HEADER_NETWORK="Network";ui_strings.S_SETTINGS_HEADER_SCRIPT="Scripts";ui_strings.S_STYLE_ORIGIN_LOCAL="user stylesheet";ui_strings.S_STYLE_ORIGIN_SVG="presentation attributes";ui_strings.S_STYLE_ORIGIN_USER_AGENT="user agent stylesheet";ui_strings.S_SWITCH_ATTACH_WINDOW="Dock to main window";ui_strings.S_SWITCH_AUTO_SCROLL_REQUEST_LIST="Auto-scroll request log";ui_strings.S_SWITCH_CHANGE_START_TO_FIRST_EVENT="Change start time to first event";ui_strings.S_SWITCH_DETACH_WINDOW="Undock into separate window";ui_strings.S_SWITCH_EXPAND_ALL="Expand all";ui_strings.S_SWITCH_EXPAND_OBJECTS_INLINE="Expand objects inline in the console";ui_strings.S_SWITCH_FIND_ELEMENT_BY_CLICKING="Select an element in the page to inspect it";ui_strings.S_SWITCH_FRIENDLY_PRINT="Enable smart-printing for Element objects in the console";ui_strings.S_SWITCH_HIDE_EMPTY_STRINGS="Show empty strings and null values";ui_strings.S_SWITCH_HIGHLIGHT_SELECTED_OR_HOVERED_ELEMENT="Highlight selected element";ui_strings.S_SWITCH_IS_ELEMENT_SENSITIVE="Display Element objects in the DOM panel when selected in the console";ui_strings.S_SWITCH_LOCK_SELECTED_ELEMENTS="Keep elements highlighted";ui_strings.S_SWITCH_RELOAD_SCRIPTS_AUTOMATICALLY="Reload new debugging contexts automatically";ui_strings.S_SWITCH_REMOTE_DEBUG="Remote debug";ui_strings.S_SWITCH_SCROLL_INTO_VIEW_ON_FIRST_SPOTLIGHT="Scroll into view on first highlight";ui_strings.S_SWITCH_SHOW_COMMENT_NODES="Show comment nodes";ui_strings.S_SWITCH_SHOW_DOM_INTREE_VIEW="Represent the DOM as a node tree";ui_strings.S_SWITCH_SHOW_ECMA_ERRORS_IN_COMMAND_LINE="Show JavaScript errors in the console";ui_strings.S_SWITCH_SHOW_FEFAULT_NULLS_AND_EMPTY_STRINGS="Show default values if they are null or empty strings";ui_strings.S_SWITCH_SHOW_ID_AND_CLASSES_IN_BREAD_CRUMB="Show id's and classes in breadcrumb trail";ui_strings.S_SWITCH_SHOW_INITIAL_VALUES="Show initial values";ui_strings.S_SWITCH_SHOW_NON_ENUMERABLES="Show non-enumerable properties";ui_strings.S_SWITCH_SHOW_ONLY_NORMAL_AND_GADGETS_TYPE_WINDOWS="Hide browser-specific contexts, such as mail and feed windows";ui_strings.S_SWITCH_SHOW_PROTOTYPES="Show prototypes";ui_strings.S_SWITCH_SHOW_PSEUDO_ELEMENTS="Show pseudo-elements";ui_strings.S_SWITCH_SHOW_SIBLINGS_IN_BREAD_CRUMB="Show siblings in breadcrumb trail";ui_strings.S_SWITCH_SHOW_TAB_ALL="All";ui_strings.S_SWITCH_SHOW_TAB_BITTORRENT="BitTorrent";ui_strings.S_SWITCH_SHOW_TAB_CSS="CSS";ui_strings.S_SWITCH_SHOW_TAB_HTML="HTML";ui_strings.S_SWITCH_SHOW_TAB_JAVA="Java";ui_strings.S_SWITCH_SHOW_TAB_M2="Mail";ui_strings.S_SWITCH_SHOW_TAB_NETWORK="Network";ui_strings.S_SWITCH_SHOW_TAB_SCRIPT="JavaScript";ui_strings.S_SWITCH_SHOW_TAB_SVG="SVG";ui_strings.S_SWITCH_SHOW_TAB_VOICE="Voice";ui_strings.S_SWITCH_SHOW_TAB_WIDGET="Widgets";ui_strings.S_SWITCH_SHOW_TAB_XML="XML";ui_strings.S_SWITCH_SHOW_TAB_XSLT="XSLT";ui_strings.S_SWITCH_SHOW_VIEWS_MENU="Show Views menu";ui_strings.S_SWITCH_SHOW_WHITE_SPACE_NODES="Show whitespace nodes";ui_strings.S_SWITCH_TAKE_SCREENSHOT_AUTOMATICALLY="Take a screenshot automatically when opening Utilities";ui_strings.S_SWITCH_TRACK_USAGE="Track usage. Sends a randomly-generated user ID to the Opera Dragonfly servers each time Opera Dragonfly is started.";ui_strings.S_SWITCH_UNPACK_LIST_ALIKES="Unpack objects which have list-like behavior in the console";ui_strings.S_SWITCH_UPDATE_DOM_ON_NODE_REMOVE="Update DOM when a node is removed";ui_strings.S_SWITCH_UPDATE_GLOBAL_SCOPE="Automatically update global scope";ui_strings.S_SWITCH_USE_LOWER_CASE_TAG_NAMES="Use lower case tag names for text/html";ui_strings.S_TABLE_HEADER_HITS="Hits";ui_strings.S_TABLE_HEADER_TIME="Time";ui_strings.S_TEXT_CALL_STACK_FRAME_LINE="%(FUNCTION_NAME)s: %(SCRIPT_ID)s:%(LINE_NUMBER)s";ui_strings.S_TEXT_ECMA_SCRIPT_SCRIPT_ID="Script id";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_INLINE="Inline";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_LINKED="Linked";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_UNKNOWN="Unknown";ui_strings.S_TEXT_ENVIRONMENT_DRAGONFLY_VERSION="Opera Dragonfly Version";ui_strings.S_TEXT_ENVIRONMENT_OPERATING_SYSTEM="Operating System";ui_strings.S_TEXT_ENVIRONMENT_PLATFORM="Platform";ui_strings.S_TEXT_ENVIRONMENT_PROTOCOL_VERSION="Protocol Version";ui_strings.S_TEXT_ENVIRONMENT_REVISION_NUMBER="Revision Number";ui_strings.S_TEXT_ENVIRONMENT_USER_AGENT="User Agent";ui_strings.S_TEXT_STATUS_SEARCH='Matches for "%(SEARCH_TERM)s": Match %(SEARCH_COUNT_INDEX)s out of %(SEARCH_COUNT_TOTAL)s';ui_strings.S_TEXT_STATUS_SEARCH_NO_MATCH='No match for "%(SEARCH_TERM)s"';ui_strings.S_THREAD_TYPE_COMMON="Common";ui_strings.S_THREAD_TYPE_DEBUGGER_EVAL="Debugger";ui_strings.S_THREAD_TYPE_EVENT="Event";ui_strings.S_THREAD_TYPE_HISTORY_NAVIGATION="History navigation";ui_strings.S_THREAD_TYPE_INLINE_SCRIPT="Inline script";ui_strings.S_THREAD_TYPE_JAVASCRIPT_URL="javascript: URL";ui_strings.S_THREAD_TYPE_JAVA_EVAL="Java (LiveConnect)";ui_strings.S_THREAD_TYPE_TIMEOUT="Timeout or interval";ui_strings.S_THREAD_TYPE_UNKNOWN="Unknown";ui_strings.S_TOGGLE_DOM_MODEBAR="Show breadcrumb trail";ui_strings.S_TOGGLE_DOM_MODEBAR_HEADER="Breadcrumb Trail";ui_strings.S_TOGGLE_PAUSED_UPDATING_NETWORK_VIEW="Pause updating network activity";ui_strings.S_UNKNOWN_SCRIPT="(Unknown script)";window.ui_strings||(window.ui_strings={});window.ui_strings.lang_code="zh-cn";ui_strings.S_ANONYMOUS_FUNCTION_NAME="<匿名函数>";ui_strings.S_BUTTON_CANCEL="取消";ui_strings.S_BUTTON_CANCEL_REMOTE_DEBUG="取消远程调试";ui_strings.S_BUTTON_COLOR_RESTORE_DEFAULTS="恢复为默认值";ui_strings.S_BUTTON_EDIT_CUSTOM_EVENT="编辑";ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH="更多";ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH_TOOLTIP="显示高级搜索";ui_strings.S_BUTTON_EXPAND_ALL_SECTIONS="全部展开";ui_strings.S_BUTTON_LABEL_AT_ABORT="收到退出消息时停止执行";ui_strings.S_BUTTON_LABEL_AT_ERROR="显示语法分析错误并在遇到异常时停止";ui_strings.S_BUTTON_LABEL_AT_EXCEPTION="出现异常的时候设置断点";ui_strings.S_BUTTON_LABEL_CLEAR_LOG="清除错误显示";ui_strings.S_BUTTON_LABEL_CLEAR_THREAD_LOG="清除线程日志";ui_strings.S_BUTTON_LABEL_CLOSE_WINDOW="关闭窗口";ui_strings.S_BUTTON_LABEL_CONTINUE="继续(%s)";ui_strings.S_BUTTON_LABEL_EXPORT_DOM="导出当前 DOM";ui_strings.S_BUTTON_LABEL_EXPORT_LOG="导出线程日志";ui_strings.S_BUTTON_LABEL_GET_THE_WOHLE_TREE="展开DOM树";ui_strings.S_BUTTON_LABEL_HELP="帮助";ui_strings.S_BUTTON_LABEL_HIDE_DEFAULT_PROPS_IN_GLOBAL_SCOPE="在全局环境中显示默认属性";ui_strings.S_BUTTON_LABEL_LOG_THREADS="记录线程日志";ui_strings.S_BUTTON_LABEL_RELOAD_HOST="在浏览器中重载选中的窗口";ui_strings.S_BUTTON_LABEL_SELECT_WINDOW="选择调试环境";ui_strings.S_BUTTON_LABEL_SETTINGS="设置";ui_strings.S_BUTTON_LABEL_STEP_INTO="跳进(%s)";ui_strings.S_BUTTON_LABEL_STEP_OUT="跳出(%s)";ui_strings.S_BUTTON_LABEL_STEP_OVER="跳过(%s)";ui_strings.S_BUTTON_LABEL_STOP_AT_THREAD="在新脚本的第一个声明处设置断点";ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH="简单";ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH_TOOLTIP="显示搜索条";ui_strings.S_BUTTON_LOAD_PO_FILE="载入语言文件";ui_strings.S_BUTTON_OK="确定";ui_strings.S_BUTTON_REMOVE_ALL_BREAKPOINTS="删除所有事件断点";ui_strings.S_BUTTON_RESET_ALL_TO_DEFAULTS="全部恢复为默认值";ui_strings.S_BUTTON_RESET_TO_DEFAULTS="恢复为默认值";ui_strings.S_BUTTON_SAVE="保存";ui_strings.S_BUTTON_SEARCH_EVENT="搜索事件";ui_strings.S_BUTTON_SEARCH_SHORTCUT="搜索键盘快捷键";ui_strings.S_BUTTON_SET_DEFAULT_VALUE="恢复为默认值";ui_strings.S_BUTTON_SHOW_REQUEST_HEADERS="信头";ui_strings.S_BUTTON_SHOW_REQUEST_RAW="原始请求";ui_strings.S_BUTTON_SHOW_REQUEST_SUMMARY="摘要";ui_strings.S_BUTTON_SPOTLIGHT_RESET_DEFAULT_COLORS="恢复为默认颜色";ui_strings.S_BUTTON_STORAGE_DELETE_ALL="全部删除";ui_strings.S_BUTTON_STORE_COLOR="保存颜色";ui_strings.S_BUTTON_TAKE_SCREENSHOT="截图";ui_strings.S_BUTTON_TEXT_APPLY="应用";ui_strings.S_BUTTON_TOGGLE_CONSOLE="控制台开关";ui_strings.S_BUTTON_TOGGLE_REMOTE_DEBUG="远程调试设置";ui_strings.S_BUTTON_TOGGLE_SETTINGS="设置";ui_strings.S_BUTTON_UPDATE_SCREESHOT="更新屏幕截图";ui_strings.S_CLEAR_COMMAND_LINE_LOG="清除控制台";ui_strings.S_CLEAR_NETWORK_LOG="清除网络日志";ui_strings.S_CLOSE_COMMAND_LINE="关闭控制台";ui_strings.S_COLOR_NOTATION="颜色格式";ui_strings.S_COLOR_PICKER_AVERAGE_COLOR_OF="平均颜色";ui_strings.S_COLUMN_LABEL_ERROR="错误";ui_strings.S_COLUMN_LABEL_FILE="文件";ui_strings.S_COLUMN_LABEL_LINE="行号";ui_strings.S_CONFIRM_LOAD_COMPATIBLE_VERSION="Opera 使用的协议和 Opera Dragonfly 使用的协议版本不同。\n\n尝试载入兼容的版本？";ui_strings.S_CONSOLE_TRACE_LABEL="Trace栈：";ui_strings.S_COOKIE_MANAGER_IN_1_HOUR="1小时后";ui_strings.S_COOKIE_MANAGER_IN_1_MINUTE="1分钟后";ui_strings.S_COOKIE_MANAGER_IN_1_MONTH="1月后";ui_strings.S_COOKIE_MANAGER_IN_1_WEEK="1周后";ui_strings.S_COOKIE_MANAGER_IN_1_YEAR="1年后";ui_strings.S_COOKIE_MANAGER_IN_X_DAYS="%s天后";ui_strings.S_COOKIE_MANAGER_IN_X_HOURS="%s小时后";ui_strings.S_COOKIE_MANAGER_IN_X_MINUTES="%s分钟后";ui_strings.S_COOKIE_MANAGER_IN_X_MONTHS="%s月后";ui_strings.S_COOKIE_MANAGER_IN_X_WEEKS="%s周后";ui_strings.S_COOKIE_MANAGER_IN_X_YEARS="%s年后";ui_strings.S_COOKIE_MANAGER_SOONER_THEN_1_MINUTE="小于1分钟";ui_strings.S_COOKIE_MANAGER_TOMORROW="明天";ui_strings.S_DISABLE_DECLARATION="停用";ui_strings.S_DRAGONFLY_INFO_MESSAGE="Opera Dragonfly 信息消息：\n";ui_strings.S_ENABLE_DECLARATION="启用";ui_strings.S_ERROR_LOG_CSS_FILTER="使用CSS过滤器";ui_strings.S_ERRORS_MAXIMUM_REACHED="显示%(MAX)s个错误（共%(COUNT)s个）";ui_strings.S_EXPAND_SHORTHANDS="展开缩写";ui_strings.S_GLOBAL_KEYBOARD_SHORTCUTS_SECTION_TITLE="全局";ui_strings.S_GLOBAL_SCOPE_NAME="<全局>";ui_strings.S_HELP_COMMAND_LINE="帮助";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORTING_REQUEST="请求被取消";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORT_RETRYING="序列被终止，重试";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_CLOSING_RESPONSE_PHASE="关闭反应期";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING="正在处理";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING_RESPONSE="处理响应";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_READING_LOCAL_DATA="读取本地数据";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_REDIRECTING="重定向";ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_SCHEDULING="安排请求";ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_BODY="读取响应正文";ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_HEADER="读取响应报头";ui_strings.S_HTTP_EVENT_SEQUENCE_WAITING_FOR_RESPONSE="等待响应";ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_BODY="写请求正文";ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_HEADER="写请求报头";ui_strings.S_HTTP_INCOMPLETE_LOADING_GRAPH="重载以显示所有网页请求";ui_strings.S_HTTP_LABEL_DATA_VIEW="数据视图";ui_strings.S_HTTP_LABEL_DURATION="持续时间";ui_strings.S_HTTP_LABEL_FILTER_ALL="全部";ui_strings.S_HTTP_LABEL_FILTER_IMAGES="图像";ui_strings.S_HTTP_LABEL_FILTER_MARKUP="标记";ui_strings.S_HTTP_LABEL_FILTER_OTHER="其它";ui_strings.S_HTTP_LABEL_FILTER_SCRIPTS="脚本";ui_strings.S_HTTP_LABEL_FILTER_STYLESHEETS="样式表";ui_strings.S_HTTP_LABEL_FILTER_XHR="XHR";ui_strings.S_HTTP_LABEL_GRAPH="图表";ui_strings.S_HTTP_LABEL_GRAPH_VIEW="图表视图";ui_strings.S_HTTP_LABEL_HOST="主机";ui_strings.S_HTTP_LABEL_METHOD="方法";ui_strings.S_HTTP_LABEL_PATH="路径";ui_strings.S_HTTP_LABEL_QUERY_ARGS="查询参数";ui_strings.S_HTTP_LABEL_RESPONSE="响应";ui_strings.S_HTTP_LABEL_RESPONSECODE="状态";ui_strings.S_HTTP_LABEL_STARTED="起始于";ui_strings.S_HTTP_LABEL_URL="网址";ui_strings.S_HTTP_LABEL_WAITING="等待时间";ui_strings.S_HTTP_NOT_REQUESTED="已缓存得";ui_strings.S_HTTP_REQUESTED_HEADLINE="请求于%s";ui_strings.S_HTTP_SERVED_OVER_FILE="本地";ui_strings.S_HTTP_TOOLTIP_DURATION="开始处理此URL至处理结束之间的时间";ui_strings.S_HTTP_TOOLTIP_FILTER_ALL="显示所有请求";ui_strings.S_HTTP_TOOLTIP_FILTER_IMAGES="只显示图像请求";ui_strings.S_HTTP_TOOLTIP_FILTER_MARKUP="只显示标记请求";ui_strings.S_HTTP_TOOLTIP_FILTER_OTHER="显示其它请求";ui_strings.S_HTTP_TOOLTIP_FILTER_SCRIPTS="只显示脚本请求";ui_strings.S_HTTP_TOOLTIP_FILTER_STYLESHEETS="只显示样式表请求";ui_strings.S_HTTP_TOOLTIP_FILTER_XHR="只显示XMLHttpRequests";ui_strings.S_HTTP_TOOLTIP_GRAPH="载入序列图表";ui_strings.S_HTTP_TOOLTIP_MIME="MIME类型";ui_strings.S_HTTP_TOOLTIP_PROTOCOL="网络协议";ui_strings.S_HTTP_TOOLTIP_RESPONSECODE="HTTP状态码";ui_strings.S_HTTP_TOOLTIP_SIZE="响应的内容长度（字节）";ui_strings.S_HTTP_TOOLTIP_SIZE_PRETTYPRINTED="响应的内容长度";ui_strings.S_HTTP_TOOLTIP_STARTED="起始时间，相对主文档";ui_strings.S_HTTP_TOOLTIP_WAITING="请求此资源所花费的时间";ui_strings.S_HTTP_UNREFERENCED="未引用的";ui_strings.S_INFO_DOCUMENT_HAS_NO_STYLESHEETS="此文档没有样式表";ui_strings.S_INFO_DOCUMNENT_LOADING="正在更新Opera Dragonfly…";ui_strings.S_INFO_ERROR_LISTENING="出现错误。请检查端口 %s 没有被占用。";ui_strings.S_INFO_INVALID_REGEXP="无效的正规表达式。";ui_strings.S_INFO_INVERT_ELEMENT_HIGHLIGHT='可以使用 "%s" 快捷键反转高亮显示的颜色。';ui_strings.S_INFO_IS_SEARCHING="搜索中……";ui_strings.S_INFO_NETWORK_UPDATES_PAUSED="网络更新暂停。";ui_strings.S_INFO_NO_COMPATIBLE_VERSION="找不到合适的 Opera Dragonfly 版本。";ui_strings.S_INFO_NO_JAVASCRIPT_IN_CONTEXT="当前窗口没有 JavaScript 环境";ui_strings.S_INFO_NO_VALID_PORT_NUMBER="请选择 %s 到 %s 之间的数字作为端口号。";ui_strings.S_INFO_REGEXP_MATCHES_EMPTY_STRING="未找到和正则表达式未匹配的字符串。";ui_strings.S_INFO_RELOAD_FOR_SCRIPT="点击上方的重载键以获得所调试环境的脚本";ui_strings.S_INFO_REQUEST_FAILED="请求失败。";ui_strings.S_INFO_RUNTIME_HAS_NO_SCRIPTS="此文档没有任何脚本";ui_strings.S_INFO_STORAGE_TYPE_DOES_NOT_EXIST="%s不存在。";ui_strings.S_INFO_STYLESHEET_HAS_NO_RULES="此样式表没有规则";ui_strings.S_INFO_TOO_MANY_SEARCH_RESULTS="显示%(MAX)s，共%(COUNT)s";ui_strings.S_INFO_WAITING_FORHOST_CONNECTION="在端口%s上等待主机连接。";ui_strings.S_INFO_WINDOW_HAS_NO_RUNTIME="此窗口没有运行环境";ui_strings.S_INHERITED_FROM="继承于：";ui_strings.S_INPUT_DEFAULT_TEXT_FILTER="过滤器";ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH="搜索";ui_strings.S_KEYBOARD_SHORTCUTS_CONFIGURATION="配置";ui_strings.S_LABEL_ADD_WATCH="添加观察点";ui_strings.S_LABEL_CHANGE_UI_LANGUAGE_INFO="将 %s 更改为";ui_strings.S_LABEL_COLLAPSED_INSPECTED_PROTOTYPES="默认折叠的原型对象（原型列表，比如对象、数组，* 折叠所有对象）：";ui_strings.S_LABEL_COLOR_HUE="色相";ui_strings.S_LABEL_COLOR_LUMINOSITY="明度";ui_strings.S_LABEL_COLOR_OPACITY="透明度";ui_strings.S_LABEL_COLOR_PICKER_SAMPLE_SIZE="范例";ui_strings.S_LABEL_COLOR_PICKER_ZOOM="缩放";ui_strings.S_LABEL_COLOR_SATURATION="色度";ui_strings.S_LABEL_COOKIE_MANAGER_ADD_COOKIE="添加Cookie";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_DOMAIN="域名";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRED="(过期)";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES="过期";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE="当会话结束时（比如标签页关闭的时候）";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE_SHORT="会话";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_NAME="名称";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_PATH="路径";ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_VALUE="值";ui_strings.S_LABEL_COOKIE_MANAGER_EDIT_COOKIE="编辑 Cookie";ui_strings.S_LABEL_COOKIE_MANAGER_GROUPER_RUNTIME="运行环境";ui_strings.S_LABEL_COOKIE_MANAGER_HTTP_ONLY="HTTPOnly";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIE="删除 Cookie";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES="删除 Cookie";ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES_OF="删除来自 %s 的Cookie";ui_strings.S_LABEL_COOKIE_MANAGER_SECURE_CONNECTIONS_ONLY="安全";ui_strings.S_LABEL_DEFAULT_SELECTION="默认";ui_strings.S_LABEL_DELETE_ALL_WATCHES="删除全部观察点";ui_strings.S_LABEL_DELETE_WATCH="删除观察点";ui_strings.S_LABEL_DIALOG_DONT_SHOW_AGAIN="不再显示此对话框";ui_strings.S_LABEL_EDIT_WATCH="编辑观察点";ui_strings.S_LABEL_FONT_SELECTION_FACE="字体";ui_strings.S_LABEL_FONT_SELECTION_LINE_HEIGHT="线高";ui_strings.S_LABEL_FONT_SELECTION_SIZE="字号";ui_strings.S_LABEL_KEYBOARDCONFIG_FOR_VIEW="键盘快捷键 %s";ui_strings.S_LABEL_KEYBOARDCONFIG_INVALID_SHORTCUT="无效的键盘快捷键";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT="默认";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT="编辑";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_ATTR_AND_TEXT="编辑属性和文本";ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_MARKUP="编辑标记";ui_strings.S_LABEL_MAX_SEARCH_HITS="搜索结果上限";ui_strings.S_LABEL_MOVE_HIGHLIGHT_DOWN="查找下一个";ui_strings.S_LABEL_MOVE_HIGHLIGHT_UP="查找上一个";ui_strings.S_LABEL_NETWORK_POST_DATA_NAME="名称";ui_strings.S_LABEL_NETWORK_POST_DATA_VALUE="值";ui_strings.S_LABEL_PORT="端口";ui_strings.S_LABEL_REPL_BACKLOG_LENGTH="保存历史的行数";ui_strings.S_LABEL_REPL_MODE_AUTOCOMPLETE="自动补全";ui_strings.S_LABEL_REPL_MODE_DEFAULT="默认";ui_strings.S_LABEL_REPL_MODE_MULTILINE="多行编辑";ui_strings.S_LABEL_REPL_MODE_SINGLELINE="单行编辑";ui_strings.S_LABEL_SCOPE_CHAIN="作用域链";ui_strings.S_LABEL_SEARCH_ALL_FILES="所有文件";ui_strings.S_LABEL_SEARCH_FLAG_IGNORE_CASE="忽略大小写";ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS="注入脚本";ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS_TOOLTIP="搜索所有的注入脚本，包括浏览器JS，扩展JS和用户JS";ui_strings.S_LABEL_SEARCH_TYPE_CSS="选择器";ui_strings.S_LABEL_SEARCH_TYPE_REGEXP="正则表达式";ui_strings.S_LABEL_SEARCH_TYPE_TEXT="文本";ui_strings.S_LABEL_SEARCH_TYPE_XPATH="XPath";ui_strings.S_LABEL_SHOW_JS_TOOLTIP="鼠标划过时显示工具提示";ui_strings.S_LABEL_SPOTLIGHT_TITLE="高亮显示元素";ui_strings.S_LABEL_STORAGE_ADD="添加";ui_strings.S_LABEL_STORAGE_ADD_STORAGE_TYPE="添加%s";ui_strings.S_LABEL_STORAGE_DELETE="删除";ui_strings.S_LABEL_STORAGE_DOUBLE_CLICK_TO_EDIT="双击编辑";ui_strings.S_LABEL_STORAGE_KEY="键";ui_strings.S_LABEL_STORAGE_UPDATE="更新";ui_strings.S_LABEL_TAB_SIZE="制表键大小";ui_strings.S_LABEL_UTIL_AREA="面积";ui_strings.S_LABEL_UTIL_SCALE="比例";ui_strings.S_MENU_DEBUG_CONTEXT="选择环境";ui_strings.S_MENU_RELOAD_DEBUG_CONTEXT="重载调试环境";ui_strings.S_MENU_RELOAD_DEBUG_CONTEXT_SHORT="重新载入";ui_strings.S_MENU_SELECT_ACTIVE_WINDOW="选择活动窗口";ui_strings.S_NETWORK_BODY_NOT_AVAILABLE="无法获取请求的资源。请启用资源追踪并重新载入此页然后再查看此资源。";ui_strings.S_NETWORK_CACHING_SETTING_DEFAULT_LABEL="使用浏览器的默认设置";ui_strings.S_NETWORK_CACHING_SETTING_DESC="控制当 Opera Dragonfly 运行时缓存的设置。如果禁用缓存，Opera 每次都将重新载入网页。";ui_strings.S_NETWORK_CACHING_SETTING_DISABLED_LABEL="禁用全部缓存";ui_strings.S_NETWORK_CACHING_SETTING_TITLE="缓存设置";ui_strings.S_NETWORK_CANT_DISPLAY_TYPE="无法显示%s类别的内容";ui_strings.S_NETWORK_CONTENT_TRACKING_SETTING_TRACK_LABEL="追踪内容（影响内存和速度）";ui_strings.S_NETWORK_ENABLE_CONTENT_TRACKING_FOR_REQUEST='在"网络选项"面板中启用内容追踪以查看请求体';ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_NAME="信头名";ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_VALUE="信头值";ui_strings.S_NETWORK_HEADER_OVERRIDES_DESC="重载框内的心头将被用于调试浏览器的所有请求。它们将重载普通信头。";ui_strings.S_NETWORK_HEADER_OVERRIDES_LABEL="启用全局信头重载";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESET_NONE="无";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_LABEL="预置";ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_SAVE="保存";ui_strings.S_NETWORK_HEADER_OVERRIDES_TITLE="全局信头重载";ui_strings.S_NETWORK_MULTIPART_REQUEST_TITLE="请求-多部分";ui_strings.S_NETWORK_N_BYTE_BODY="%s字节的请求体";ui_strings.S_NETWORK_REQUEST="请求";ui_strings.S_NETWORK_REQUEST_DETAIL_BODY_DESC="没有追踪响应正文。如果您希望一直获取响应正文，请在设置中选中“跟踪正文“选项。如果您只是希望获取这次响应的正文，请点击按钮。";ui_strings.S_NETWORK_REQUEST_DETAIL_BODY_UNFINISHED="请求完成前响应正文不可用。";ui_strings.S_NETWORK_REQUEST_DETAIL_NO_RESPONSE_BODY="无法获取响应正文。请启用设置中的“追踪正文”选项并重载此页面。";ui_strings.S_NETWORK_REQUEST_DETAIL_REQUEST_TITLE="请求";ui_strings.S_NETWORK_REQUEST_DETAIL_RESPONSE_TITLE="响应";ui_strings.S_NETWORK_REQUEST_DETAIL_UNDISPLAYABLE_BODY_LABEL="无法显示 %s 类型的文件";ui_strings.S_NETWORK_REQUEST_NO_HEADERS_LABEL="没有信头";ui_strings.S_NETWORK_REQUESTS="请求";ui_strings.S_NETWORK_REQUESTS_INCOMPLETE_SETTING_LABEL="当有未显示的网络请时显示通知";ui_strings.S_NETWORK_SERVED_FROM_CACHE="所有数据都来自于缓存而不是网络。";ui_strings.S_NETWORK_UNKNOWN_MIME_TYPE="所请求数据的MIME类别未知";ui_strings.S_NONE="无";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_HEADER="启用远程调试的步骤：";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_1="指定要连接的端口，或者使用默认值";ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_2='点击"应用"';ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_HEADER="在远程设备上：";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_1="在地址栏中输入 opera:debug";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_2="输入运行 Opera Drangonfly 的机器的 IP 地址：";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_3="输入端口号 %s";ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_4='点击"连接"';ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_5="成功连接之后，导航到需要调试的页面";ui_strings.S_REPL_HELP_COMMAND_DESC="显示所有可用命令列表";ui_strings.S_REPL_JQUERY_COMMAND_DESC="在活动标签页中载入 jQuery";ui_strings.S_REPL_WELCOME_TEXT="键入%(CLEAR_COMMAND)s 清除控制台。\n键入%(HELP_COMMAND)s 获取更多信息。";ui_strings.S_RESOURCE_ALL_NOT_APPLICABLE="n/a";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_HOST="主机";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_MIME="Mime";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PATH="路径";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PPSIZE="大小（美化显示）";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PROTOCOL="网络协议";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_SIZE="大小";ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_TYPE="类型";ui_strings.S_RESOURCE_ALL_TABLE_GROUP_GROUPS="组";ui_strings.S_RESOURCE_ALL_TABLE_GROUP_HOSTS="主机";ui_strings.S_RESOURCE_ALL_TABLE_NO_FILENAME="<无名称>";ui_strings.S_RESOURCE_ALL_TABLE_NO_HOST="没有主机";ui_strings.S_RESOURCE_ALL_TABLE_UNKNOWN_GROUP="未知";ui_strings.S_RESOURCE_CLICK_BUTTON_TO_FETCH_RESOURCES="点击上方的重载键以重载正在调试的窗口并获取其资源";ui_strings.S_SCOPE_GLOBAL="全局";ui_strings.S_SCOPE_INNER="%s域";ui_strings.S_SCRIPT_SELECT_SECTION_BROWSER_AND_USER_JS="Browser JS 和 User JS";ui_strings.S_SCRIPT_SELECT_SECTION_INLINE_AND_EVALS="内联、求值、超时和事件处理脚本";ui_strings.S_SEARCH_INPUT_TOOLTIP="文本搜索";ui_strings.S_SETTINGS_HEADER_ABOUT="关于";ui_strings.S_SETTINGS_HEADER_CONSOLE="错误日志";ui_strings.S_SETTINGS_HEADER_DOCUMENT="文档";ui_strings.S_SETTINGS_HEADER_GENERAL="常规";ui_strings.S_SETTINGS_HEADER_KEYBOARD_SHORTCUTS="键盘快捷键";ui_strings.S_SETTINGS_HEADER_NETWORK="网络";ui_strings.S_SETTINGS_HEADER_SCRIPT="脚本";ui_strings.S_STYLE_ORIGIN_LOCAL="用户样式表";ui_strings.S_STYLE_ORIGIN_SVG="全屏模式属性";ui_strings.S_STYLE_ORIGIN_USER_AGENT="用户代理样式表";ui_strings.S_SWITCH_ATTACH_WINDOW="与主窗口结合";ui_strings.S_SWITCH_AUTO_SCROLL_REQUEST_LIST="自动滚动请求日志";ui_strings.S_SWITCH_DETACH_WINDOW="与主窗口分离";ui_strings.S_SWITCH_EXPAND_ALL="全部展开";ui_strings.S_SWITCH_EXPAND_OBJECTS_INLINE="在控制台内展开所有对象";ui_strings.S_SWITCH_FIND_ELEMENT_BY_CLICKING="选择要检查的元素";ui_strings.S_SWITCH_FRIENDLY_PRINT="在控制台中对元素对象启用智能打印";ui_strings.S_SWITCH_HIDE_EMPTY_STRINGS="显示空字符串和空值";ui_strings.S_SWITCH_HIGHLIGHT_SELECTED_OR_HOVERED_ELEMENT="高亮显示选择的元素";ui_strings.S_SWITCH_IS_ELEMENT_SENSITIVE="在 DOM 面板显示在控制台中选中的元素";ui_strings.S_SWITCH_LOCK_SELECTED_ELEMENTS="高亮显示选中元素";ui_strings.S_SWITCH_RELOAD_SCRIPTS_AUTOMATICALLY="自动重载新调试环境";ui_strings.S_SWITCH_REMOTE_DEBUG="远程调试";ui_strings.S_SWITCH_SCROLL_INTO_VIEW_ON_FIRST_SPOTLIGHT="第一次高亮显示时滚动到此元素";ui_strings.S_SWITCH_SHOW_COMMENT_NODES="显示注释节点";ui_strings.S_SWITCH_SHOW_DOM_INTREE_VIEW="使用节点树显示 DOM";ui_strings.S_SWITCH_SHOW_ECMA_ERRORS_IN_COMMAND_LINE="在控制台显示 JavaScript 错误";ui_strings.S_SWITCH_SHOW_FEFAULT_NULLS_AND_EMPTY_STRINGS="显示为空值或者空字符串的默认值";ui_strings.S_SWITCH_SHOW_ID_AND_CLASSES_IN_BREAD_CRUMB="在浏览路径记录中 id 和 class";ui_strings.S_SWITCH_SHOW_INITIAL_VALUES="显示初始值";ui_strings.S_SWITCH_SHOW_NON_ENUMERABLES="显示不可列举的性质";ui_strings.S_SWITCH_SHOW_ONLY_NORMAL_AND_GADGETS_TYPE_WINDOWS="隐藏基于浏览器特性的环境，比如邮件和网源窗口";ui_strings.S_SWITCH_SHOW_PROTOTYPES="显示工具提示";ui_strings.S_SWITCH_SHOW_PSEUDO_ELEMENTS="显示伪元素";ui_strings.S_SWITCH_SHOW_SIBLINGS_IN_BREAD_CRUMB="在导航路径中显示兄弟节点";ui_strings.S_SWITCH_SHOW_TAB_ALL="全部";ui_strings.S_SWITCH_SHOW_TAB_BITTORRENT="BitTorrent";ui_strings.S_SWITCH_SHOW_TAB_CSS="CSS";ui_strings.S_SWITCH_SHOW_TAB_HTML="HTML";ui_strings.S_SWITCH_SHOW_TAB_JAVA="Java";ui_strings.S_SWITCH_SHOW_TAB_M2="邮件";ui_strings.S_SWITCH_SHOW_TAB_NETWORK="网络";ui_strings.S_SWITCH_SHOW_TAB_SCRIPT="JavaScript";ui_strings.S_SWITCH_SHOW_TAB_SVG="SVG";ui_strings.S_SWITCH_SHOW_TAB_VOICE="语音";ui_strings.S_SWITCH_SHOW_TAB_WIDGET="Widget";ui_strings.S_SWITCH_SHOW_TAB_XML="XML";ui_strings.S_SWITCH_SHOW_TAB_XSLT="XSLT";ui_strings.S_SWITCH_SHOW_VIEWS_MENU="显示“查看”菜单";ui_strings.S_SWITCH_SHOW_WHITE_SPACE_NODES="显示空白节点";ui_strings.S_SWITCH_TAKE_SCREENSHOT_AUTOMATICALLY="打开应用的时候自动屏幕截图。";ui_strings.S_SWITCH_TRACK_USAGE="记录使用次数。发送一个随机生成的用户ID以记录使用次数";ui_strings.S_SWITCH_UNPACK_LIST_ALIKES="在控制台显展开示列表类的对象";ui_strings.S_SWITCH_UPDATE_DOM_ON_NODE_REMOVE="删除节点时更新DOM";ui_strings.S_SWITCH_UPDATE_GLOBAL_SCOPE="自动更新全局环境";ui_strings.S_SWITCH_USE_LOWER_CASE_TAG_NAMES="text/html 标签使用小写字母";ui_strings.S_TEXT_CALL_STACK_FRAME_LINE="%(FUNCTION_NAME)s：第%(LINE_NUMBER)s行(脚本ID %(SCRIPT_ID)s)";ui_strings.S_TEXT_ECMA_SCRIPT_SCRIPT_ID="脚本 id";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_INLINE="内联的";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_LINKED="链接的";ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_UNKNOWN="未知的";ui_strings.S_TEXT_ENVIRONMENT_DRAGONFLY_VERSION="Opera Dragonfly 版本";ui_strings.S_TEXT_ENVIRONMENT_OPERATING_SYSTEM="操作系统";ui_strings.S_TEXT_ENVIRONMENT_PLATFORM="平台";ui_strings.S_TEXT_ENVIRONMENT_PROTOCOL_VERSION="协议版本";ui_strings.S_TEXT_ENVIRONMENT_REVISION_NUMBER="修订版本号";ui_strings.S_TEXT_ENVIRONMENT_USER_AGENT="浏览器";ui_strings.S_TEXT_STATUS_SEARCH='"%(SEARCH_TERM)s"匹配结果：%(SEARCH_COUNT_TOTAL)s中%(SEARCH_COUNT_INDEX)s个匹配';ui_strings.S_TEXT_STATUS_SEARCH_NO_MATCH='没有匹配 "%(SEARCH_TERM)s" 的结果';ui_strings.S_TOGGLE_DOM_MODEBAR="显示浏览路径记录";ui_strings.S_TOGGLE_DOM_MODEBAR_HEADER="浏览路径记录";ui_strings.S_TOGGLE_PAUSED_UPDATING_NETWORK_VIEW="暂停更新网络活动";ui_strings.D_REDO_SEARCH="搜索的文档已经不存在了。\n是否在当前文档中搜索？";ui_strings.D_RELOAD_SCRIPTS="尚未载入所有脚本。您是否希望重载网页？";ui_strings.M_CONTEXTMENU_ADD_ATTRIBUTE="添加属性";ui_strings.M_CONTEXTMENU_ADD_BREAKPOINT="添加断点";ui_strings.M_CONTEXTMENU_ADD_COLOR="添加颜色";ui_strings.M_CONTEXTMENU_ADD_CONDITION="添加条件";ui_strings.M_CONTEXTMENU_ADD_DECLARATION="添加声明";ui_strings.M_CONTEXTMENU_ADD_WATCH='观察 "%s"';ui_strings.M_CONTEXTMENU_COLLAPSE_SUBTREE="折叠子树";ui_strings.M_CONTEXTMENU_DELETE="删除";ui_strings.M_CONTEXTMENU_DELETE_ALL="全部删除";ui_strings.M_CONTEXTMENU_DELETE_ALL_BREAKPOINTS="删除所有断点";ui_strings.M_CONTEXTMENU_DELETE_BREAKPOINT="删除断点";ui_strings.M_CONTEXTMENU_DISABLE_BREAKPOINT="禁用断点";ui_strings.M_CONTEXTMENU_DELETE_COLOR="删除颜色";ui_strings.M_CONTEXTMENU_DELETE_CONDITION="删除条件";ui_strings.M_CONTEXTMENU_DISABLE_ALL="全部禁用";ui_strings.M_CONTEXTMENU_DISABLE_ALL_BREAKPOINTS="禁用所有断点";ui_strings.M_CONTEXTMENU_DISABLE_DECLARATIONS="禁用所有声明";ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE="编辑属性";ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE_VALUE="编辑属性值";ui_strings.M_CONTEXTMENU_EDIT_COLOR="编辑颜色";ui_strings.M_CONTEXTMENU_EDIT_CONDITION="编辑条件";ui_strings.M_CONTEXTMENU_EDIT_DECLARATION="编辑声明";ui_strings.M_CONTEXTMENU_EDIT_MARKUP="编辑标记";ui_strings.M_CONTEXTMENU_EDIT_TEXT="编辑文本";ui_strings.M_CONTEXTMENU_ENABLE_BREAKPOINT="启用断点";ui_strings.M_CONTEXTMENU_EXPAND_SUBTREE="展开子树";ui_strings.M_CONTEXTMENU_OPEN_COLOR_PICKER="打开颜色选择工具";ui_strings.M_CONTEXTMENU_REMOVE_DECLARATION="删除声明";ui_strings.M_CONTEXTMENU_REMOVE_NODE="删除笔记";ui_strings.M_CONTEXTMENU_SHOW_RESOURCE="显示资源";ui_strings.M_CONTEXTMENU_SPEC_LINK='"%s" 的规范';ui_strings.M_CONTEXTMENU_STORAGE_ADD="添加";ui_strings.M_CONTEXTMENU_STORAGE_DELETE="删除";ui_strings.M_CONTEXTMENU_STORAGE_DELETE_ALL_FROM="删除来自%s的所有内容";ui_strings.M_CONTEXTMENU_STORAGE_DELETE_PLURAL="删除项目";ui_strings.M_CONTEXTMENU_STORAGE_EDIT="编辑";ui_strings.M_LABEL_CLEAR_ALL_ERRORS="清除错误记录";ui_strings.M_LABEL_UI_LANGUAGE="用户界面语言";ui_strings.M_NETWORK_CRAFTER_REQUEST_BODY="请求体";ui_strings.M_NETWORK_CRAFTER_RESPONSE_BODY="响应";ui_strings.M_NETWORK_CRAFTER_SEND="发送请求";ui_strings.M_NETWORK_REQUEST_DETAIL_DURATION="持续时间";ui_strings.M_NETWORK_REQUEST_DETAIL_GET_RESPONSE_BODY_LABEL="获取响应体";ui_strings.M_NETWORK_REQUEST_DETAIL_STATUS="状态";ui_strings.M_SETTING_LABEL_GENERAL="常规";ui_strings.M_SORTABLE_TABLE_CONTEXT_GROUP_BY='按照 "%s" 分组';ui_strings.M_SORTABLE_TABLE_CONTEXT_NO_GROUPING="不分组";ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_COLUMNS="重置列";ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_SORT="重置排序";ui_strings.M_VIEW_LABEL_ALL_RESOURCES="所有资源";ui_strings.M_VIEW_LABEL_BREAKPOINTS="断点";ui_strings.M_VIEW_LABEL_CALLSTACK="调用栈";ui_strings.M_VIEW_LABEL_COLOR_MAGNIFIER_AND_PICKER="像素放大和颜色选择工具";ui_strings.M_VIEW_LABEL_COLOR_PALETTE="调色板";ui_strings.M_VIEW_LABEL_COLOR_PALETTE_SHORT="调色板";ui_strings.M_VIEW_LABEL_COLOR_PICKER="颜色选择工具";ui_strings.M_VIEW_LABEL_COLOR_SELECT="选择颜色";ui_strings.M_VIEW_LABEL_COMMAND_LINE="控制台";ui_strings.M_VIEW_LABEL_COMPOSITE_DOM="文档";ui_strings.M_VIEW_LABEL_COMPOSITE_ERROR_CONSOLE="错误";ui_strings.M_VIEW_LABEL_COMPOSITE_EXPORTS="导出";ui_strings.M_VIEW_LABEL_COMPOSITE_SCRIPTS="脚本";ui_strings.M_VIEW_LABEL_COMPUTED_STYLE="计算样式";ui_strings.M_VIEW_LABEL_CONSOLE="错误面板";ui_strings.M_VIEW_LABEL_COOKIES="Cookie";ui_strings.M_VIEW_LABEL_DOM="DOM 面板";ui_strings.M_VIEW_LABEL_DOM_ATTR="属性";ui_strings.M_VIEW_LABEL_ENVIRONMENT="环境";ui_strings.M_VIEW_LABEL_ERROR_ALL="全部";ui_strings.M_VIEW_LABEL_ERROR_BITTORRENT="BitTorrent";ui_strings.M_VIEW_LABEL_ERROR_CSS="CSS";ui_strings.M_VIEW_LABEL_ERROR_HTML="HTML";ui_strings.M_VIEW_LABEL_ERROR_JAVA="Java";ui_strings.M_VIEW_LABEL_ERROR_LOCATION_TITLE="%(URI)s中第%(LINE)s行";ui_strings.M_VIEW_LABEL_ERROR_M2="邮件";ui_strings.M_VIEW_LABEL_ERROR_NETWORK="网络";ui_strings.M_VIEW_LABEL_ERROR_OTHER="其它";ui_strings.M_VIEW_LABEL_ERROR_SCRIPT="JavaScript";ui_strings.M_VIEW_LABEL_ERROR_STORAGE="存储";ui_strings.M_VIEW_LABEL_ERROR_SVG="SVG";ui_strings.M_VIEW_LABEL_ERROR_WIDGET="Widget";ui_strings.M_VIEW_LABEL_ERROR_XML="XML";ui_strings.M_VIEW_LABEL_ERROR_XSLT="XSLT";ui_strings.M_VIEW_LABEL_EVENT_BREAKPOINTS="事件断点";ui_strings.M_VIEW_LABEL_EXPORT="导出";ui_strings.M_VIEW_LABEL_FRAME_INSPECTION="检查";ui_strings.M_VIEW_LABEL_GO_TO_LINE="跳到行";ui_strings.M_VIEW_LABEL_LAYOUT="布局";ui_strings.M_VIEW_LABEL_LOCAL_STORAGE="本地存储";ui_strings.M_VIEW_LABEL_MONOSPACE_FONT="等宽字体";ui_strings.M_VIEW_LABEL_NETWORK="网络";ui_strings.M_VIEW_LABEL_NETWORK_LOG="网络记录";ui_strings.M_VIEW_LABEL_NETWORK_OPTIONS="网络选项：";ui_strings.M_VIEW_LABEL_NEW_STYLE="新样式";ui_strings.M_VIEW_LABEL_NO_BREAKPOINT="没有断点";ui_strings.M_VIEW_LABEL_NO_INSPECTION="没有检查";ui_strings.M_VIEW_LABEL_NOT_STOPPED="未停止";ui_strings.M_VIEW_LABEL_NO_WATCHES="没有观察";ui_strings.M_VIEW_LABEL_RAW_REQUEST_INFO="原始请求";ui_strings.M_VIEW_LABEL_RAW_RESPONSE_INFO="原始响应";ui_strings.M_VIEW_LABEL_REQUEST_CRAFTER="发起请求";ui_strings.M_VIEW_LABEL_REQUEST_HEADERS="请求头";ui_strings.M_VIEW_LABEL_REQUEST_LOG="请求日志";ui_strings.M_VIEW_LABEL_REQUEST_SUMMARY="请求摘要";ui_strings.M_VIEW_LABEL_RESOURCES="资源";ui_strings.M_VIEW_LABEL_RESPONSE_BODY="响应体";ui_strings.M_VIEW_LABEL_RESPONSE_HEADERS="响应头";ui_strings.M_VIEW_LABEL_RUNTIME_STATE="状态";ui_strings.M_VIEW_LABEL_SCRIPTS="脚本";ui_strings.M_VIEW_LABEL_SEARCH="搜索";ui_strings.M_VIEW_LABEL_SESSION_STORAGE="进程存储";ui_strings.M_VIEW_LABEL_SOURCE="源代码";ui_strings.M_VIEW_LABEL_STORAGE="存储";ui_strings.M_VIEW_LABEL_STORED_COLORS="调色板";ui_strings.M_VIEW_LABEL_STYLES="样式";ui_strings.M_VIEW_LABEL_STYLESHEET="样式表";ui_strings.M_VIEW_LABEL_STYLESHEETS="样式表";ui_strings.M_VIEW_LABEL_THREAD_LOG="线程日志";ui_strings.M_VIEW_LABEL_UTILITIES="应用";ui_strings.M_VIEW_LABEL_VIEWS="查看";ui_strings.M_VIEW_LABEL_WATCHES="观察";ui_strings.M_VIEW_LABEL_WIDGET_PREFERNCES="Widget 首选项";ui_strings.M_VIEW_SUB_LABEL_METRICS="单位";ui_strings.M_VIEW_SUB_LABEL_OFFSET_VALUES="偏移值";ui_strings.M_VIEW_SUB_LABEL_PARENT_OFFSETS="上一级偏移";var ini={protocol_version:"5",max_frames:100,debug:!1,dragonfly_version:"Opera Dragonfly 1.2012.08.23.1",revision_number:"2012.08.23:6836bb2733e2, experimental, HEAD",mercurial_revision:"",browser:window.opera?"opera":window.chrome?"chrome":"firefox",default_shortcuts_os:{generic:{global:{"default":{"ctrl a":"select-all","ctrl i":"invert-spotlight-colors",f3:"show-search",f8:"continue-run",f10:"continue-step-next-line",f11:"continue-step-into-call","shift f11":"continue-step-out-of-call",escape:"toggle-console","ctrl tab":"navigate-next-top-tab","ctrl shift tab":"navigate-previous-top-tab","ctrl f":"show-search","ctrl r":"reload-context","ctrl f3":"show-script-dropdown"},edit:{f8:"continue-run",f10:"continue-step-next-line",f11:"continue-step-into-call","shift f11":"continue-step-out-of-call",enter:"highlight-next-match",f3:"highlight-next-match","shift enter":"highlight-previous-match","shift f3"
:"highlight-previous-match","ctrl enter":"show-script",escape:"toggle-console","ctrl tab":"navigate-next-top-tab","ctrl shift tab":"navigate-previous-top-tab","ctrl f":"show-search","ctrl f3":"show-script-dropdown",up:"up",down:"down","shift up":"shift-up","shift down":"shift-down"}},dom:{"default":{up:"nav-up",down:"nav-down",left:"nav-left",right:"nav-right",enter:"dispatch-click","shift enter":"dispatch-click","ctrl enter":"dispatch-dbl-click","delete":"remove-node"},"edit-attributes-and-text":{"shift tab":"edit-previous",tab:"edit-next",enter:"submit-edit",escape:"exit-edit"},"edit-markup":{"shift tab":"edit-previous",tab:"edit-next","ctrl enter":"submit-edit",escape:"exit-edit"}},"css-inspector":{"default":{up:"nav-up",down:"nav-down",left:"nav-up",right:"nav-down","ctrl enter":"dispatch-dbl-click"},edit:{up:"autocomplete-next",down:"autocomplete-previous","shift tab":"edit-previous",tab:"edit-next",enter:"submit-edit-and-new-edit",escape:"exit-edit"}},command_line:{"default":{"ctrl l":"clear"},"single-line-edit":{up:"backlog-prev",down:"backlog-next",tab:"autocomplete",enter:"eval","shift enter":"enter-multiline-mode","ctrl l":"clear","ctrl p":"backlog-prev","ctrl n":"backlog-next","ctrl k":"kill-to-end-of-line","ctrl u":"kill-to-beginning-of-line","ctrl e":"move-to-end-of-line","ctrl a":"move-to-beginning-of-line","ctrl w":"kill-word-backwards","ctrl y":"yank"},"multi-line-edit":{"shift enter":"exit-multiline-mode","ctrl enter":"eval",tab:"insert-tab-at-point","ctrl k":"kill-to-end-of-line","ctrl u":"kill-to-beginning-of-line","ctrl w":"kill-word-backwards","ctrl y":"yank"},autocomplete:{left:"prev-completion",right:"next-completion",tab:"next-completion","shift tab":"prev-completion",enter:"commit","[":"commit-and-insert","]":"commit-and-insert",".":"commit-and-insert","(":"commit-and-insert",")":"commit-and-insert",escape:"cancel-completion","ctrl l":"clear","ctrl k":"kill-to-end-of-line","ctrl u":"kill-to-beginning-of-line","ctrl w":"kill-word-backwards","ctrl y":"yank"}},js_source:{"default":{up:"scroll-arrow-up",down:"scroll-arrow-down","page-up":"scroll-page-up","page-down":"scroll-page-down","ctrl g":"show-window-go-to-line"}},"go-to-line":{"default":{enter:"submit"}},watches:{"default":{},edit:{enter:"submit",escape:"cancel"}},breakpoints:{"default":{},edit:{enter:"submit",escape:"cancel"}},storage:{"default":{"delete":"remove-item"},edit:{enter:"submit",escape:"cancel"}},network_logger:{details:{escape:"close-details",up:"select-previous-entry",down:"select-next-entry"}},search:{"default":{enter:"highlight-next-match","shift enter":"highlight-previous-match","ctrl enter":"show-script"}}},mac:{global:{"default":{"cmd shift a":"select-all","cmd i":"invert-spotlight-colors",f5:"continue-run",f6:"continue-step-next-line",f7:"continue-step-into-call","shift f7":"continue-step-out-of-call",escape:"toggle-console",f3:"show-search","cmd r":"reload-context","cmd f3":"show-script-dropdown"},edit:{f5:"continue-run",f6:"continue-step-next-line",f7:"continue-step-into-call","shift f7":"continue-step-out-of-call",enter:"highlight-next-match",f3:"highlight-next-match","shift f3":"highlight-previous-match","shift enter":"highlight-previous-match","cmd enter":"show-script",escape:"toggle-console","cmd f3":"show-script-dropdown",up:"up",down:"down","shift up":"shift-up","shift down":"shift-down"}},dom:{"default":{up:"nav-up",down:"nav-down",left:"nav-left",right:"nav-right",enter:"dispatch-click","shift enter":"dispatch-click","cmd enter":"dispatch-dbl-click","delete":"remove-node","cmd backspace":"remove-node"},"edit-attributes-and-text":{"shift tab":"edit-previous",tab:"edit-next",enter:"submit-edit",escape:"exit-edit"},"edit-markup":{"shift tab":"edit-previous",tab:"edit-next","cmd enter":"submit-edit",escape:"exit-edit"}},"css-inspector":{"default":{up:"nav-up",down:"nav-down",left:"nav-up",right:"nav-down","cmd enter":"dispatch-dbl-click"},edit:{up:"autocomplete-next",down:"autocomplete-previous","shift tab":"edit-previous",tab:"edit-next",enter:"submit-edit-and-new-edit",escape:"exit-edit"}},command_line:{"default":{"cmd k":"clear"},"single-line-edit":{up:"backlog-prev",down:"backlog-next",tab:"autocomplete",enter:"eval","shift enter":"enter-multiline-mode","cmd k":"clear"},"multi-line-edit":{"shift enter":"exit-multiline-mode","cmd enter":"eval",tab:"insert-tab-at-point"},autocomplete:{left:"prev-completion",right:"next-completion",tab:"next-completion","shift tab":"prev-completion",enter:"commit","[":"commit-and-insert","]":"commit-and-insert",".":"commit-and-insert","(":"commit-and-insert",")":"commit-and-insert",escape:"cancel-completion","cmd k":"clear"}},js_source:{"default":{up:"scroll-arrow-up",down:"scroll-arrow-down","page-up":"scroll-page-up","page-down":"scroll-page-down","cmd l":"show-window-go-to-line"}},"go-to-line":{"default":{enter:"submit"}},watches:{"default":{},edit:{enter:"submit",escape:"cancel"}},breakpoints:{"default":{},edit:{enter:"submit",escape:"cancel"}},storage:{"default":{enter:"submit","delete":"remove-item","cmd backspace":"remove-item"},edit:{enter:"submit",escape:"cancel"}},network_logger:{details:{escape:"close-details",up:"select-previous-entry",down:"select-next-entry"}},search:{"default":{enter:"highlight-next-match","shift enter":"highlight-previous-match","cmd enter":"show-script"}}}},spotlight_color:"3875d7",monospacefont:{font_face:"",font_size:"11px",line_height:"15px"}};window.ini.default_shortcuts=navigator.platform.toLowerCase().indexOf("mac")==-1?ini.default_shortcuts_os.generic:ini.default_shortcuts_os.mac;Element.prototype.contains||(Element.prototype.contains=function(a){while(a&&a!=this)a=a.parentNode;return Boolean(a)});Element.prototype.insertAdjacentHTML||(Element.prototype.insertAdjacentHTML=function(a,b){if(a=="beforeend"){var c=this.appendChild(document.createElement("div"));c.innerHTML=b;var d=document.createRange();d.selectNodeContents(c);this.replaceChild(d.extractContents(),c);return this.firstElementChild}});Element.prototype.render=Document.prototype.render=function(a,b){var c=typeof a=="string";if(this.nodeType==1&&c||a.length==1&&typeof a[0]=="string"&&/</.test(a[0])){this.insertAdjacentHTML("beforeend",c?a:a[0]);return this.firstElementChild}var d=this.nodeType==9?this:this.ownerDocument,e=0,f=this,g=a[0],h=null,i=-1;if(a.length){if(g){if(typeof g=="string"){if((i=g.indexOf(":"))!=-1){b=d.lookupNamespaceURI(g.slice(0,i));if(!b)throw"namespace not defined in call Node.prototype.___add";f=d.createElementNS(b,g.slice(i+1))}else b?f=d.createElementNS(b,g.slice(i+1)):f=g in CustomElements?CustomElements[g].create():d.createElement(g);e++}h=a[e];for(;;)if(h instanceof Array){f.render(h,b);h=a[++e]}else{if(typeof h!="string"||!((a.length-e)%2||a[e+1]instanceof Array))break;f.appendChild(d.createTextNode(h));h=a[++e]}for(;a[e];e+=2){if(typeof a[e]!="string")throw"TemplateSyntaxError, expected 'string', got "+typeof a[e]+" for TEXT or KEY";typeof a[e+1]=="string"?f.setAttribute(a[e],a[e+1]):f[a[e]]=a[e+1]}this.nodeType==1&&this!=f&&this.appendChild(f);return f}return this.appendChild(d.createTextNode(a[1]))}return null};Element.prototype.re_render=function(a){var b=this.parentNode,c=[];if(b){var d=document.createElement("div"),e=document.createDocumentFragment();d.render(a);while(d.firstChild)c.push(e.appendChild(d.firstChild));b.replaceChild(e,this);return c}return null};Element.prototype.clearAndRender=function(a){this.innerHTML="";return this.render(a)};Element.prototype.hasClass=function(a){return a&&this.classList.contains(a)};Element.prototype.addClass=function(a){a&&this.classList.add(a);return this};Element.prototype.removeClass=function(a){a&&this.classList.remove(a);return this};Element.prototype.toggleClass=function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)};Element.prototype.swapClass=function(a,b){if(this.hasClass(a)){this.removeClass(a);this.addClass(b)}};Element.prototype.insertAfter=function(a,b){var c=b.nextSibling;while(c&&c.nodeType!=1)c=c.nextSibling;c?this.insertBefore(a,c):this.appendChild(a);return a};Element.prototype.releaseEvent=function(a,b){var c=document.createEvent("Events"),d="";c.initEvent(a,!0,!0);if(b)for(d in b)c[d]=b[d];this.dispatchEvent(c)};Element.prototype.dispatchMouseEvent=function(a,b,c,d){var e=document.createEvent("MouseEvents"),f=this.getBoundingClientRect(),g=f.left+f.width*.5,h=f.top+f.height*.5;e.initMouseEvent(a,!0,!0,window,1,window.screenLeft+g,window.screenTop+h,g,h,b,c,d,!1,0,null);this.dispatchEvent(e)};Element.prototype.get_scroll_container=function(){var a=this;while(a&&a.scrollHeight<=a.offsetHeight)a=a.parentNode;return a==document.documentElement||a==document?null:a};Element.ScrollPosition=function(a){this._scroll_container=a.get_scroll_container();this._scroll_top=0;this._scroll_left=0;this._delta_top=0;this._delta_left=0;if(this._scroll_container){this._scroll_top=this._scroll_container.scrollTop;this._scroll_left=this._scroll_container.scrollLeft;var b=a.getBoundingClientRect(),c=this._scroll_container.getBoundingClientRect();this._container_top=c.top;this._container_left=c.left;this._delta_top=b.top-c.top;this._delta_left=b.left-c.left}};Element.ScrollPosition.prototype.reset=function(a,b){if(this._scroll_container)if(a){var c=a.getBoundingClientRect();this._scroll_container.scrollTop-=this._delta_top-(c.top-this._container_top);this._scroll_container.scrollTop-=this._delta_left-(c.left-this._container_left)}else{this._scroll_container.scrollTop=this._scroll_top;this._scroll_container.scrollLeft=this._scroll_left}else if(b){var d=b.get_scroll_container();if(d){d.scrollTop=0;d.scrollLeft=0}}};Element.prototype.getNextWithFilter=function(a,b){var c=this;while((c=c.getNextInFlow(a))&&!b(c,this));return c};Element.prototype.getPreviousWithFilter=function(a,b){var c=this;while((c=c.getPreviousInFlow(a))&&!b(c,this));return c};Element.prototype.getNextInFlow=function(a){var b=this.firstElementChild||this.nextElementSibling,c=this;while(!b&&(c=c.parentNode)&&c!=a)b=c.nextElementSibling;return b};Element.prototype.getPreviousInFlow=function(a){var b=this.previousElementSibling,c=this.parentNode,d=b;while(d&&d.lastElementChild&&(d=d.lastElementChild));return d||b||c!=a&&c||null};Element.prototype.has_attr=function(a,b){switch(a){case"parent-node-chain":var c=this;while(c&&c.nodeType==1&&!c.hasAttribute(b))c=c.parentNode;return c&&c.nodeType==1&&c||null}return null};Element.prototype.get_ancestor_attr=function(a){var b=this;while(b&&!b.hasAttribute(a))b=b.parentElement;return b&&b.hasAttribute(a)?b.getAttribute(a):null};Element.prototype.get_attr=function(a,b){switch(a){case"parent-node-chain":return this.get_ancestor_attr(b)}return null};Element.prototype.matchesSelector||(Element.prototype.matchesSelector=Element.prototype.oMatchesSelector?Element.prototype.oMatchesSelector:function(a){var b=this.parentNode.querySelectorAll(a);for(var c=0;b[c]&&b[c]!=this;c++);return Boolean(b[c])});Element.prototype.get_ancestor=function(a){var b=this;while(b){if(b.matchesSelector(a))return b;b=b.parentElement}return null};Element.prototype.scrollSoftIntoView=function(){var a=this.offsetParent,b=20;a&&a.offsetHeight<a.scrollHeight&&(this.offsetTop<a.scrollTop+b?a.scrollTop=this.offsetTop-b:this.offsetTop+this.offsetHeight>a.scrollTop+a.offsetHeight-b&&(a.scrollTop=this.offsetTop+this.offsetHeight-a.offsetHeight+b))};Element.prototype.scrollSoftIntoContainerView=function(){var a=this.offsetParent;while(a&&a!=document.body&&a.nodeName.toLowerCase()!="container")a=a.offsetParent;var b=20;a&&a.offsetHeight<a.scrollHeight&&(this.offsetTop<a.scrollTop+b?a.scrollTop=this.offsetTop-b:this.offsetTop+this.offsetHeight>a.scrollTop+a.offsetHeight-b&&(a.scrollTop=this.offsetTop+this.offsetHeight-a.offsetHeight+b))};Element.prototype.hasTextNodeChild=function(){for(var a=0,b;b=this.childNodes[a];a++)if(b.nodeType==document.TEXT_NODE)return!0;return!1};window.CustomElements=new function(){this._init_queue=[];this._init_listener=function(a){var b=CustomElements._init_queue,c=[],d=null,e=0,f=a.target;for(;d=b[e];e++)f.contains(d.ele)?CustomElements[d.type].init(d.ele):c.push(d);CustomElements._init_queue=c;c.length||document.removeEventListener("DOMNodeInserted",CustomElements._init_listener,!1)};this.add=function(a){a.prototype=this.Base;var b=new a,c="",d=1;if(b.type){for(;c=arguments[d];d++)c in this&&this[c].apply(b);this[b.type]=b}}};window.CustomElements.Base=new function(){this.create=function(){var a=document.createElement(this.html_name);CustomElements._init_queue.length||document.addEventListener("DOMNodeInserted",CustomElements._init_listener,!1);CustomElements._init_queue.push({ele:a,type:this.type});return a};this.init=function(a){if(this._inits)for(var b=null,c=0;b=this._inits[c];c++)b.call(this,a)}};window.CustomElements.PlaceholderFeature=function(){this.set_placeholder=function(){var a=this.getAttribute("data-placeholder");if(!this.value&&a){this.value=a;this.addClass("placeholder")}};this.clear_placeholder=function(){if(this.hasClass("placeholder")){this.removeClass("placeholder");this.value=""}};this.get_value=function(){return this.hasClass("placeholder")?"":this._get_value()};(this._inits||(this._inits=[])).push(function(a){if(!a._get_value){var b=a.toString().slice(8).replace("]","");window[b].prototype._get_value=a.__lookupGetter__("value");window[b].prototype._set_value=a.__lookupSetter__("value")}a.__defineSetter__("value",a._set_value);a.__defineGetter__("value",this.get_value);this.set_placeholder.call(a);a.addEventListener("focus",this.clear_placeholder,!1);a.addEventListener("blur",this.set_placeholder,!1)})};window.CustomElements.AutoScrollHeightFeature=function(){this._adjust_height=function(a,b){if(!this.value)this.style.height="auto";else{this.style.height="0";this.style.height=this.scrollHeight+a+"px"}};this._get_delta=function(a){var b=window.getComputedStyle(a,null),c=b.getPropertyValue("box-sizing")=="border-box",d=c?"border":"padding",e=c?1:-1;return(e*parseInt(b.getPropertyValue(d+"-bottom"))||0)+(e*parseInt(b.getPropertyValue(d+"-top"))||0)};(this._inits||(this._inits=[])).push(function(a){a.setAttribute("rows","1");var b=this._get_delta(a),c=this._adjust_height.bind(a,b);c();a.addEventListener("input",c,!1);a.addEventListener("heightadjust",c,!1)})};CustomElements.add(function(){this.type="_html5_input";this.html_name="input"},"PlaceholderFeature");CustomElements.add(function(){this.type="_html5_textarea";this.html_name="textarea"},"PlaceholderFeature");CustomElements.add(function(){this.type="_auto_height_textarea";this.html_name="textarea"},"AutoScrollHeightFeature");Array.prototype.sum=function(a){if(a)return this.map(a).sum();var b=0;this.forEach(function(a){b+=a});return b};Array.prototype.unique=function(){return this.reduce(function(a,b){a.indexOf(b)==-1&&a.push(b);return a},[])};Array.prototype.__defineGetter__("last",function(){return this[this.length-1]});Array.prototype.__defineSetter__("last",function(){});Array.prototype.extend=function(a){this.push.apply(this,a);return this};Array.prototype.insert=function(a,b,c){this.splice.apply(this,[a,c||0].extend(b));return this};Array.prototype.contains=function(a){return this.indexOf(a)!=-1};CanvasRenderingContext2D.prototype.draw_2d_gradient=function(a,b,c){if(typeof b=="boolean"){c=b;b=null}if(!this._src_canvas){this._src_canvas=document.createElement("canvas");this._src_ctx=this._src_canvas.getContext("2d")}var d=this._src_canvas.width=this.canvas.width,e=this._src_canvas.height=this.canvas.height,f=function(a,b,c){this.addColorStop(1/(c.length-1||1)*b,a)},g=c?this._src_ctx.createLinearGradient(0,0,0,e):this._src_ctx.createLinearGradient(0,0,d,0);this._src_ctx.clearRect(0,0,d,e);a.forEach(f,g);this._src_ctx.fillStyle=g;this._src_ctx.globalCompositeOperation="source-over";this._src_ctx.fillRect(0,0,d,e);this.drawImage(this._src_canvas,0,0);if(b){this._src_ctx.clearRect(0,0,d,e);g=c?this._src_ctx.createLinearGradient(0,0,d,0):this._src_ctx.createLinearGradient(0,0,0,e);g.addColorStop(0,"hsla(0, 0%, 0%, 0)");g.addColorStop(1,"hsla(0, 0%, 0%, 1)");this._src_ctx.fillStyle=g;this._src_ctx.fillRect(0,0,d,e);this._src_ctx.globalCompositeOperation="source-in";g=c?this._src_ctx.createLinearGradient(0,0,0,e):this._src_ctx.createLinearGradient(0,0,d,0);b.forEach(f,g);this._src_ctx.fillStyle=g;this._src_ctx.fillRect(0,0,d,e);this.drawImage(this._src_canvas,0,0)}};Date.prototype.toLocaleISOString=function(){return(new Date(this.getTime()-this.getTimezoneOffset()*1e3*60)).toISOString().replace("Z","")};NodeList.prototype.indexOf=function(a){for(var b=null,c=0;b=this[c];c++)if(b==a)return c;return-1};Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b});window.opera||(window.opera={postError:function(a){console.log(a)},stpVersion:!0});Date.fromLocaleISOString=function(a){var b=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(\.\d+)?)?$/.test(a);if(!b)return NaN;var c=new Date(a),d=c.getTime();if(d===(new Date(a+"Z")).getTime()){var e=c.getTimezoneOffset()*1e3*60;d+=e}return d};"".trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});String.prototype.isdigit=function(){return this.length&&!/\D/.test(this)};String.prototype.startswith=function(a){return this.slice(0,a.length)===a};String.prototype.endswith=function(a){return this.slice(this.length-a.length)===a};String.prototype.zfill=function(a){return this.replace(/(^[+-]?)(.+)/,function(b,c,d){var e=Array(Math.max(a-b.length+1,0)).join(0);return c+e+d})};String.prototype.ljust=function(a,b){return this+Array(Math.max(a-this.length+1,0)).join(b||" ")};String.prototype.capitalize=function(a){var b=this.slice(1);a||(b=b.toLowerCase());return this[0].toUpperCase()+b};String.prototype.contains=function(a){return this.indexOf(a)!=-1};StyleSheetList.prototype.getDeclaration=function(a){var b=null,c=0,d=0,e=null,f=null;for(;b=this[c];c++){e=b.cssRules;for(d=0;(f=e[d])&&(f.type!=1||f.selectorText!=a);d++);if(f)return f.style}return null};StyleSheetList.prototype.getPropertyValue=function(a,b){var c=this.getDeclaration(a);return c&&c.getPropertyValue(b)||""};if(!function(){}.bind)Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}};XMLHttpRequest.prototype.loadResource=function(a,b,c){this.onload=function(){b(this,c)};this.open("GET",a);this.send(null)};Storage.prototype.get_and_parse_item=function(a,b){var c=this.getItem(a),d=null;try{d=JSON.parse(c)}catch(e){d=b}return d==null?b:d};Storage.prototype.stringify_and_set_item=function(a,b){this.setItem(a,JSON.stringify(b))};var Dict=function(a){this._init(a)};Dict.prototype=new function(){var a="$",b=Object.prototype.toString.call.bind(Object.prototype.toString);this.get=function(b){return this._dict[a+b]};this.set=function(b,c){this._dict[a+b]=c};this.delete=function(b){delete this._dict[a+b]};this.get_chain=function(a){for(var b=0,c=this;b<a.length&&(c=c.get(a[b]));b++);return c};this.keys=function(){var b=[];for(var c in this._dict)b.push(c.slice(a.length));return b};this.setdefault=function(b,c){if(this._dict.hasOwnProperty(a+b))return this.get(b);this.set(b,c);return c};this.toString=function(){var b=[];for(var c in this._dict){var d=this._dict[c];d=typeof d=="string"?'"'+d+'"':String(d);c=c.slice(a.length);b.push(b.length?", ":"",'"',c,'": ',d)}return"{"+b.join("")+"}"};this._init=function(a){this._dict=Object.create?Object.create(null):{};for(var c in a){var d=a[c];b(d)=="[object Object]"&&!(d instanceof Dict)&&(d=new Dict(d));this.set(c,d)}}};var Clipboard=function(){};(function(){var a=null;this.set_string=function(c){a||(a=document.querySelector("#contenteditable"));a.contentEditable=!0;var d=b.bind(null,c);document.addEventListener("copy",d,!1);document.execCommand("copy");setTimeout(function(){document.removeEventListener("copy",d,!1);a.contentEditable=!1},0)};this.populate_menu=function(a,b){var c=a.target.get_ancestor_attr("data-copy");if(c){var d=a.target.get_ancestor_attr("data-copy-label")||ui_strings.M_CONTEXTMENU_COPY;b.length&&b.push(ContextMenu.separator);b.push({label:d,handler:this.set_string.bind(this,c),id:"copy-clipboard"})}};var b=function(a,b){b.clipboardData.setData("text/plain",a);b.preventDefault()}}).apply(Clipboard);var Timeouts=function(){var a=[];this.set=function(){this.clear();a[a.length]=setTimeout.apply(window,arguments)};this.clear=function(){while(a.length)clearTimeout(a.pop())}},Color=function(){this.__rgb=[0,0,0];this.__hsl=[0,50,50];this.__hsv=[0,50,50]};Color.KEYWORD="keyword";Color.HEX="hex";Color.RGB="rgb";Color.RGBA="rgba";Color.HSL="hsl";Color.HSLA="hsla";Color.prototype=new function(){this.setHue=function(g){g=this._fix_range(g,360,0);this.__hsl[d]=parseInt(g);this.__rgb=this.hsl_to_rgb(this.__hsl[d],this.__hsl[e],this.__hsl[f]);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setSaturation=function(g){g=this._fix_range(g,100,0);this.__hsl[e]=parseFloat(g);this.__rgb=this.hsl_to_rgb(this.__hsl[d],this.__hsl[e],this.__hsl[f]);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setLuminosity=function(g){g=this._fix_range(g,100,0);this.__hsl[f]=parseFloat(g);this.__rgb=this.hsl_to_rgb(this.__hsl[d],this.__hsl[e],this.__hsl[f]);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setHueV=function(g){g=this._fix_range(g,360,0);this.__hsv[d]=parseInt(g);this.__rgb=this.hsv_to_rgb(this.__hsv[d],this.__hsv[e],this.__hsv[f]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setSaturationV=function(g){g=this._fix_range(g,100,0);this.__hsv[e]=parseFloat(g);this.__rgb=this.hsv_to_rgb(this.__hsv[d],this.__hsv[e],this.__hsv[f]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setValue=function(g){g=this._fix_range(g,100,0);this.__hsv[f]=parseFloat(g);this.__rgb=this.hsv_to_rgb(this.__hsv[d],this.__hsv[e],this.__hsv[f]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setRed=function(d){d=this._fix_range(d,255,0);this.__rgb[a]=parseInt(d);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setGreen=function(d){d=this._fix_range(d,255,0);this.__rgb[b]=parseInt(d);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setRGB=function(d){var e=0;for(;e<3;e++)this.__rgb[e]=d[e]>255?255:d[e];this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setBlue=function(d){d=this._fix_range(d,255,0);this.__rgb[c]=parseInt(d);this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c]);return this};this.setHex=function(d){d=/^[0-9a-f]*$/i.test(d)?d:"";if(d){d=d.slice(0,6);var e=parseInt(d,16);this.__rgb=[e>>16,e>>8&255,e&255];this.__hsv=this.rgb_to_hsv(this.__rgb[a],this.__rgb[b],this.__rgb[c]);this.__hsl=this.rgb_to_hsl(this.__rgb[a],this.__rgb[b],this.__rgb[c])}return this};this._css_color_keywords={black:"000000",silver:"C0C0C0",gray:"808080",white:"FFFFFF",maroon:"800000",red:"FF0000",purple:"800080",fuchsia:"FF00FF",green:"008000",lime:"00FF00",olive:"808000",yellow:"FFFF00",navy:"000080",blue:"0000FF",teal:"008080",aqua:"00FFFF",aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};this.KEYWORD=Color.KEYWORD;this.HEX=Color.HEX;this.RGB=Color.RGB;this.RGBA=Color.RGBA;this.HSL=Color.HSL;this.HSLA=Color.HSLA;this._double_hex=function(a){return a+a};this._trim_int=function(a){return parseInt(a.trim())};this._re_hex6=/^#[0-9a-fA-F]{6}$/;this._re_hex3=/^#[0-9a-fA-F]{3}$/;(function(){var a="\\s*(?:[0-1]?\\d{1,2}|2[0-4]\\d|25[0-5])\\s*",b="\\s*(?:0|0?\\.\\d+|1(?:\\.0+)?)\\s*",c="(?:\\.\\d+)?",d="\\s*(?:[0-2]?\\d{1,2}"+c+"|3[0-5]\\d"+c+"|360(?:\\.0+)?)\\s*",e="\\s*(?:[0]?\\d{1,2}"+c+"|100(?:\\.0+)?)%\\s*";this._re_rgb=new RegExp("^rgb\\("+[a,a,a].join(",")+"\\)$");this._re_rgba=new RegExp("^rgba\\("+[a,a,a,b].join(",")+"\\)$");this._re_hsl=new RegExp("^hsl\\("+[d,e,e].join(",")+"\\)$");this._re_hsla=new RegExp("^hsla\\("+[d,e,e,b].join(",")+"\\)$")}).apply(this);this.parseCSSColor=function(a){var b=a.trim(),c=null;this.cssvalue=a;this.alpha=1;this.type="";if(b=="transparent"){this.setHex("000000");this.alpha=0;this.type=this.KEYWORD;return this}if(a in this._css_color_keywords){this.setHex(this._css_color_keywords[a]);this.type=this.KEYWORD;return this}if(this._re_hex6.test(b)){this.setHex(b.slice(1));this.type=this.HEX;return this}if(this._re_hex3.test(b)){this.setHex(b.slice(1).split("").map(this._double_hex).join(""));this.type=this.HEX;return this}if(this._re_rgb.test(b)){this.setRGB(b.slice(4,b.length-1).split(",").map(this._trim_int));this.type=this.RGB;return this}if(this._re_rgba.test(b)){c=b.slice(5,b.length-1).split(",");this.alpha=parseFloat(c.pop().trim());this.setRGB(c.map(this._trim_int));this.type=this.RGBA;return this}if(this._re_hsl.test(b)){c=b.slice(4,b.length-1).split(",").map(this._trim_int);this.setHue(c[0]);this.setSaturation(c[1]);this.setLuminosity(c[2]);this.type=this.HSL;return this}if(this._re_hsla.test(b)){c=b.slice(5,b.length-1).split(",");this.setHue(parseInt(c[0].trim()));this.setSaturation(parseFloat(c[1].trim()));this.setLuminosity(parseFloat(c[2].trim()));this.alpha=parseFloat(c[3].trim());this.type=this.HSLA;return this}return null};this.serializeToCSSColor=function(a){switch(a){case Color.HEX:return this.hhex;case Color.RGB:return this.rgb;case Color.RGBA:return this.rgba;case Color.HSL:return this.hsl;case Color.HSLA:return this.hsla}throw new Error("NOT_VALID_COLOR_TYPE")};this.invert=function(){this.setHue((this.__hsl[d]+180)%360);return this};this.getGrayValue=function(){return.2126*this.__rgb[a]+.7152*this.__rgb[b]+.0722*this.__rgb[c]};this.getHue=function(){return this._round_val(this.__hsl[d],360,0)};this.getSaturation=function(){return this._round_val(this.__hsl[e],100,0)};this.getLuminosity=function(){return this._round_val(this.__hsl[f],100,0)};this.getHSL=function(){return[this._round_val(this.__hsl[0],360,0),this._round_val(this.__hsl[1],100,0),this._round_val(this.__hsl[2],100,0)]};this.getHueV=function(){return this._round_val(this.__hsv[d],360,0)};this.getSaturationV=function(){return this._round_val(this.__hsv[e],100,0)};this.getValue=function(){return this._round_val(this.__hsv[f],100,0)};this.getRed=function(){return this._round_val(this.__rgb[a],255,0)};this.getGreen=function(){return this._round_val(this.__rgb[b],255,0)};this.getBlue=function(){return this._round_val(this.__rgb[c],255,0)};this.getRGB=function(){return[this._round_val(this.__rgb[0],255,0),this._round_val(this.__rgb[1],255,0),this._round_val(this.__rgb[2],255,0)]};this.clone=function(a){if(a instanceof Color){this.__rgb[0]=a.__rgb[0];this.__rgb[1]=a.__rgb[1];this.__rgb[2]=a.__rgb[2];this.__hsl[0]=a.__hsl[0];this.__hsl[1]=a.__hsl[1];this.__hsl[2]=a.__hsl[2];this.__hsv[0]=a.__hsv[0];this.__hsv[1]=a.__hsv[1];this.__hsv[2]=a.__hsv[2];this.alpha=a.alpha;this.type=a.type;this.cssvalue=a.cssvalue}};this.getHex=function(){return this.rgb_to_hex_c(this.__rgb).toUpperCase()};this.getLuminance=function(){var a=this.__rgb.map(function(a){var b=a/255;return b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4)});return.2126*a[0]+.7152*a[1]+.0722*a[2]};this.getContrastRatio=function(a){var b=this.getLuminance(),c=a.getLuminance();return b>c?(b+.05)/(c+.05):(c+.05)/(b+.05)};this._alpha2string=function(){if(typeof this.alpha=="number"){if(this.alpha==1)return"1";if(this.alpha==0)return"0";return this.alpha.toFixed(3)}return"1"};this.__property=function(a,b,c){this.__defineGetter__(a,function(){return this[c]()});this.__defineSetter__(a,function(a){this[b](a)})};this.__defineGetter__("hsl",function(){return"hsl("+this.getHue()+", "+this.getSaturation()+"%, "+this.getLuminosity()+"%"+")"});this.__defineSetter__("hsl",function(a){});this.__defineGetter__("hsla",function(){return"hsla("+this.getHue()+", "+this.getSaturation()+"%, "+this.getLuminosity()+"%, "+this._alpha2string()+")"});this.__defineSetter__("hsla",function(a){});this.__defineGetter__("hsv",function(){return"hsv("+this.getHue()+", "+this.getSaturationV()+"%, "+this.getValue()+"%"+")"});this.__defineSetter__("hsv",function(a){});this.__defineGetter__("rgb",function(){return"rgb("+this.getRed()+", "+this.getGreen()+", "+this.getBlue()+")"});this.__defineSetter__("rgb",function(a){});this.__defineGetter__("rgba",function(){return"rgba("+this.getRed()+", "+this.getGreen()+", "+this.getBlue()+", "+this._alpha2string()+")"});this.__defineSetter__("rgba",function(a){});this.__defineGetter__("hhex",function(){return"#"+this.getHex()});this.__defineSetter__("hhex",function(a){});[["h","setHueV","getHueV"],["s","setSaturationV","getSaturationV"],["v","setValue","getValue"],["r","setRed","getRed"],["g","setGreen","getGreen"],["b","setBlue","getBlue"],["hex","setHex","getHex"],["l","setLuminosity","getLuminosity"]].forEach(function(a){const b=0,c=1,d=2;this.__property(a[b],a[c],a[d])},this);const a=0,b=1,c=2,d=0,e=1,f=2;this._fix_range=function(a,b,c){typeof a=="string"&&(a=parseFloat(a));return a>b?b:a<c?c:a};this._round_val=function(a,b,c){a=Math.round(a);return a>b?b:a<c?c:a};this._hsl_or_hsv_to_rgb=function(a,b,c,d){var e=this.hue_to_rgb(a),f=0;if(d){e=this.mix_rgb(e,[127.5,127.5,127.5],1-b/100);c<=50?e=this.mix_rgb([0,0,0],e,c/50):e=this.mix_rgb(e,[255,255,255],(c-50)/50)}else{e=this.mix_rgb(e,[255,255,255],1-b/100);e=this.mix_rgb([0,0,0],e,c/100)}return e};this._rgb_to_hsl_or_hsv=function(a,b,c,e){a/=255;b/=255;c/=255;var f=0,g=0,h=0,i=Math.max(a,b,c),j=Math.min(a,b,c),k=i-j,l=i+j;e?h=l/2:h=i;if(k==0)g=f=0;else{e?h<.5?g=k/l:g=k/(2-l):g=k/i;a==i?f=(b-c)/k:b==i?f=2+(c-a
)/k:f=4+(a-b)/k}f*=60;f>360?f=360:f<0?f+=360:f==0&&(e&&this.__hsv[d]==360||!e&&this.__hsl[d]==360)&&(f=360);g*=100;g>100&&(g=100);h*=100;h>100&&(h=100);return[f,g,h]};this.rgb_c_to_hex_c=function(a){a=this._round_val(a,255,0);return(a<16?"0":"")+a.toString(16)};this.rgb_to_hex_c=function(a){var b="",c=0,d=0;for(;c<3;c++){d=this._round_val(a[c],255,0);d>255&&(d=255);b+=(d<16?"0":"")+d.toString(16)}return b};this.mix_rgb=function(a,b,c){var d=[],e=0;for(;e<3;e++)d[e]=a[e]+c*(b[e]-a[e]);return d};this.hue_to_rgb=function(a){a=a%360;var b=a%60;a-=b;b=4.25*b>>0;if(a<60)return[255,b,0];if(a<120)return[255-b,255,0];if(a<180)return[0,255,b];if(a<240)return[0,255-b,255];if(a<300)return[b,0,255];if(a<360)return[255,0,255-b]};this.hsl_to_rgb=function(a,b,c){return this._hsl_or_hsv_to_rgb(a,b,c,!0)};this.hsv_to_rgb=function(a,b,c){return this._hsl_or_hsv_to_rgb(a,b,c,!1)};this.rgb_to_hsv=function(a,b,c){return this._rgb_to_hsl_or_hsv(a,b,c,!1)};this.rgb_to_hsl=function(a,b,c){return this._rgb_to_hsl_or_hsv(a,b,c,!0)}};Color.prototype.constructor=Color;var ColorSpace=function(){this.__rgb=[0,0,0];this.__hsl=[0,50,50];this.__hsv=[0,50,50]};ColorSpacePrototype=function(){this.property=function(a,b,c,d){};this.xyz=function(a,b,c){};this.property=function(a,b,c,d){this.__defineSetter__(a,function(a){this[c](b*a)});this.__defineGetter__(a,function(){return this[d]()/b})};this.xyz=function(a,b,c){this.x=this.y=this.z=.5;this.x=a;this.y=b;this.z=c;return this}};ColorSpacePrototype.prototype=Color.prototype;ColorSpace.prototype=new ColorSpacePrototype;ColorSpace.prototype.constructor=ColorSpace;var messages=new function(){var a={},b={};this.addListener=function(c,d,e){var f=[a];e&&f.push(b);for(var g=0,h;h=f[g];g++)h[c]?h[c].indexOf(d)==-1&&h[c].push(d):h[c]=[d]};this.add_listener=this.addListener;this.removeListener=function(c,d){var e=[a,b];for(var f=0,g;g=e[f];f++){var h=g[c];if(h)for(var i=h.length-1,j;j=h[i];i--)j==d&&h.splice(i,1)}};this.remove_listener=this.removeListener;this.post=function(b,c){c||(c={});var d=a[b];c.type=b;if(d)for(var e=null,f=0;e=d[f];f++)e(c)};this.clear_session_listeners=function(){a={};for(var c in b)a[c]=b[c].slice()}};ObjectRegistry.get_instance=function(){return this.instance||new ObjectRegistry};SpecLinks.get_instance=function(){return this._instance||new SpecLinks};SpecLinks.prototype.get_spec_links=function(a){var b=[];a=a.replace(/\s+/g,"").split(",");a.forEach(function(a){var c=this.get_spec_link(a);c&&b.push(c)},this);return b};SpecLinks.prototype.get_spec_link=function(a){var b=a.indexOf("#");if(b>0){var c=a.slice(0,b),d=a.slice(b+1),e=SpecLinks.specs[c];if(e){var f=null;for(var g in e)if(g.toLowerCase()==d.toLowerCase()){f=e[g];break}if(f)return{spec:c,prop:d,url:f}}}return null};SpecLinks.prototype.open_spec_link=function(a){a?window.open(a):alert("No specification found.")};SpecLinks.specs={css:{azimuth:"http://www.w3.org/TR/CSS2/aural.html#propdef-azimuth","background-attachment":"http://www.w3.org/TR/CSS2/colors.html#propdef-background-attachment","background-color":"http://www.w3.org/TR/CSS2/colors.html#propdef-background-color","background-image":"http://www.w3.org/TR/CSS2/colors.html#propdef-background-image","background-position":"http://www.w3.org/TR/CSS2/colors.html#propdef-background-position","background-repeat":"http://www.w3.org/TR/CSS2/colors.html#propdef-background-repeat",background:"http://www.w3.org/TR/CSS2/colors.html#propdef-background","border-collapse":"http://www.w3.org/TR/CSS2/tables.html#propdef-border-collapse","border-color":"http://www.w3.org/TR/CSS2/box.html#propdef-border-color","border-spacing":"http://www.w3.org/TR/CSS2/tables.html#propdef-border-spacing","border-style":"http://www.w3.org/TR/CSS2/box.html#propdef-border-style","border-top":"http://www.w3.org/TR/CSS2/box.html#propdef-border-top","border-right":"http://www.w3.org/TR/CSS2/box.html#propdef-border-right","border-bottom":"http://www.w3.org/TR/CSS2/box.html#propdef-border-bottom","border-left":"http://www.w3.org/TR/CSS2/box.html#propdef-border-left","border-top-color":"http://www.w3.org/TR/CSS2/box.html#propdef-border-top-color","border-right-color":"http://www.w3.org/TR/CSS2/box.html#propdef-border-right-color","border-bottom-color":"http://www.w3.org/TR/CSS2/box.html#propdef-border-bottom-color","border-left-color":"http://www.w3.org/TR/CSS2/box.html#propdef-border-left-color","border-top-style":"http://www.w3.org/TR/CSS2/box.html#propdef-border-top-style","border-right-style":"http://www.w3.org/TR/CSS2/box.html#propdef-border-right-style","border-bottom-style":"http://www.w3.org/TR/CSS2/box.html#propdef-border-bottom-style","border-left-style":"http://www.w3.org/TR/CSS2/box.html#propdef-border-left-style","border-top-width":"http://www.w3.org/TR/CSS2/box.html#propdef-border-top-width","border-right-width":"http://www.w3.org/TR/CSS2/box.html#propdef-border-right-width","border-bottom-width":"http://www.w3.org/TR/CSS2/box.html#propdef-border-bottom-width","border-left-width":"http://www.w3.org/TR/CSS2/box.html#propdef-border-left-width","border-width":"http://www.w3.org/TR/CSS2/box.html#propdef-border-width",border:"http://www.w3.org/TR/CSS2/box.html#propdef-border",bottom:"http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom","caption-side":"http://www.w3.org/TR/CSS2/tables.html#propdef-caption-side",clear:"http://www.w3.org/TR/CSS2/visuren.html#propdef-clear",clip:"http://www.w3.org/TR/CSS2/visufx.html#propdef-clip",color:"http://www.w3.org/TR/CSS2/colors.html#propdef-color",content:"http://www.w3.org/TR/CSS2/generate.html#propdef-content","counter-increment":"http://www.w3.org/TR/CSS2/generate.html#propdef-counter-increment","counter-reset":"http://www.w3.org/TR/CSS2/generate.html#propdef-counter-reset","cue-after":"http://www.w3.org/TR/CSS2/aural.html#propdef-cue-after","cue-before":"http://www.w3.org/TR/CSS2/aural.html#propdef-cue-before",cue:"http://www.w3.org/TR/CSS2/aural.html#propdef-cue",cursor:"http://www.w3.org/TR/CSS2/ui.html#propdef-cursor",direction:"http://www.w3.org/TR/CSS2/visuren.html#propdef-direction",display:"http://www.w3.org/TR/CSS2/visuren.html#propdef-display",elevation:"http://www.w3.org/TR/CSS2/aural.html#propdef-elevation","empty-cells":"http://www.w3.org/TR/CSS2/tables.html#propdef-empty-cells","float":"http://www.w3.org/TR/CSS2/visuren.html#propdef-float","font-family":"http://www.w3.org/TR/CSS2/fonts.html#propdef-font-family","font-size":"http://www.w3.org/TR/CSS2/fonts.html#propdef-font-size","font-style":"http://www.w3.org/TR/CSS2/fonts.html#propdef-font-style","font-variant":"http://www.w3.org/TR/CSS2/fonts.html#propdef-font-variant","font-weight":"http://www.w3.org/TR/CSS2/fonts.html#propdef-font-weight",font:"http://www.w3.org/TR/CSS2/fonts.html#propdef-font",height:"http://www.w3.org/TR/CSS2/visudet.html#propdef-height",left:"http://www.w3.org/TR/CSS2/visuren.html#propdef-left","letter-spacing":"http://www.w3.org/TR/CSS2/text.html#propdef-letter-spacing","line-height":"http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height","list-style-image":"http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-image","list-style-position":"http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-position","list-style-type":"http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-type","list-style":"http://www.w3.org/TR/CSS2/generate.html#propdef-list-style","margin-right":"http://www.w3.org/TR/CSS2/box.html#propdef-margin-right","margin-left":"http://www.w3.org/TR/CSS2/box.html#propdef-margin-left","margin-top":"http://www.w3.org/TR/CSS2/box.html#propdef-margin-top","margin-bottom":"http://www.w3.org/TR/CSS2/box.html#propdef-margin-bottom",margin:"http://www.w3.org/TR/CSS2/box.html#propdef-margin","max-height":"http://www.w3.org/TR/CSS2/visudet.html#propdef-max-height","max-width":"http://www.w3.org/TR/CSS2/visudet.html#propdef-max-width","min-height":"http://www.w3.org/TR/CSS2/visudet.html#propdef-min-height","min-width":"http://www.w3.org/TR/CSS2/visudet.html#propdef-min-width",orphans:"http://www.w3.org/TR/CSS2/page.html#propdef-orphans","outline-color":"http://www.w3.org/TR/CSS2/ui.html#propdef-outline-color","outline-style":"http://www.w3.org/TR/CSS2/ui.html#propdef-outline-style","outline-width":"http://www.w3.org/TR/CSS2/ui.html#propdef-outline-width",outline:"http://www.w3.org/TR/CSS2/ui.html#propdef-outline",overflow:"http://www.w3.org/TR/CSS2/visufx.html#propdef-overflow","padding-top":"http://www.w3.org/TR/CSS2/box.html#propdef-padding-top","padding-right":"http://www.w3.org/TR/CSS2/box.html#propdef-padding-right","padding-bottom":"http://www.w3.org/TR/CSS2/box.html#propdef-padding-bottom","padding-left":"http://www.w3.org/TR/CSS2/box.html#propdef-padding-left",padding:"http://www.w3.org/TR/CSS2/box.html#propdef-padding","page-break-after":"http://www.w3.org/TR/CSS2/page.html#propdef-page-break-after","page-break-before":"http://www.w3.org/TR/CSS2/page.html#propdef-page-break-before","page-break-inside":"http://www.w3.org/TR/CSS2/page.html#propdef-page-break-inside","pause-after":"http://www.w3.org/TR/CSS2/aural.html#propdef-pause-after","pause-before":"http://www.w3.org/TR/CSS2/aural.html#propdef-pause-before",pause:"http://www.w3.org/TR/CSS2/aural.html#propdef-pause","pitch-range":"http://www.w3.org/TR/CSS2/aural.html#propdef-pitch-range",pitch:"http://www.w3.org/TR/CSS2/aural.html#propdef-pitch","play-during":"http://www.w3.org/TR/CSS2/aural.html#propdef-play-during",position:"http://www.w3.org/TR/CSS2/visuren.html#propdef-position",quotes:"http://www.w3.org/TR/CSS2/generate.html#propdef-quotes",richness:"http://www.w3.org/TR/CSS2/aural.html#propdef-richness",right:"http://www.w3.org/TR/CSS2/visuren.html#propdef-right","speak-header":"http://www.w3.org/TR/CSS2/aural.html#propdef-speak-header","speak-numeral":"http://www.w3.org/TR/CSS2/aural.html#propdef-speak-numeral","speak-punctuation":"http://www.w3.org/TR/CSS2/aural.html#propdef-speak-punctuation",speak:"http://www.w3.org/TR/CSS2/aural.html#propdef-speak","speech-rate":"http://www.w3.org/TR/CSS2/aural.html#propdef-speech-rate",stress:"http://www.w3.org/TR/CSS2/aural.html#propdef-stress","table-layout":"http://www.w3.org/TR/CSS2/tables.html#propdef-table-layout","text-align":"http://www.w3.org/TR/CSS2/text.html#propdef-text-align","text-decoration":"http://www.w3.org/TR/CSS2/text.html#propdef-text-decoration","text-indent":"http://www.w3.org/TR/CSS2/text.html#propdef-text-indent","text-transform":"http://www.w3.org/TR/CSS2/text.html#propdef-text-transform",top:"http://www.w3.org/TR/CSS2/visuren.html#propdef-top","unicode-bidi":"http://www.w3.org/TR/CSS2/visuren.html#propdef-unicode-bidi","vertical-align":"http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align",visibility:"http://www.w3.org/TR/CSS2/visufx.html#propdef-visibility","voice-family":"http://www.w3.org/TR/CSS2/aural.html#propdef-voice-family",volume:"http://www.w3.org/TR/CSS2/aural.html#propdef-volume","white-space":"http://www.w3.org/TR/CSS2/text.html#propdef-white-space",widows:"http://www.w3.org/TR/CSS2/page.html#propdef-widows",width:"http://www.w3.org/TR/CSS2/visudet.html#propdef-width","word-spacing":"http://www.w3.org/TR/CSS2/text.html#propdef-word-spacing","z-index":"http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index","font-family":"http://www.w3.org/TR/css3-fonts/#font-family-the-font-family-property","font-weight":"http://www.w3.org/TR/css3-fonts/#font-weight-the-font-weight-property","font-style":"http://www.w3.org/TR/css3-fonts/#font-style-the-font-style-property","font-variant":"http://www.w3.org/TR/css3-fonts/#small-caps-the-font-variant-property",font:"http://www.w3.org/TR/css3-fonts/#shorthand-font-property-the-font-propert","font-family":"http://www.w3.org/TR/css3-fonts/#font-family-the-font-family-descriptor",src:"http://www.w3.org/TR/css3-fonts/#src","font-style":"http://www.w3.org/TR/css3-fonts/#font-style0","font-weight":"http://www.w3.org/TR/css3-fonts/#font-weight0","background-color":"http://www.w3.org/TR/css3-background/#the-background-color","background-image":"http://www.w3.org/TR/css3-background/#the-background-image","background-repeat":"http://www.w3.org/TR/css3-background/#the-background-repeat","background-attachment":"http://www.w3.org/TR/css3-background/#the-background-attachment","background-position":"http://www.w3.org/TR/css3-background/#the-background-position","background-clip":"http://www.w3.org/TR/css3-background/#the-background-clip","background-origin":"http://www.w3.org/TR/css3-background/#the-background-origin","background-size":"http://www.w3.org/TR/css3-background/#background-size",background:"http://www.w3.org/TR/css3-background/#the-background","border-color":"http://www.w3.org/TR/css3-background/#border-color","border-style":"http://www.w3.org/TR/css3-background/#border-style","border-width":"http://www.w3.org/TR/css3-background/#border-width","border-radius":"http://www.w3.org/TR/css3-background/#border-radius","border-bottom-left-radius":"http://www.w3.org/TR/css3-background/#the-border-radius","border-bottom-right-radius":"http://www.w3.org/TR/css3-background/#the-border-radius","border-top-left-radius":"http://www.w3.org/TR/css3-background/#the-border-radius","border-top-right-radius":"http://www.w3.org/TR/css3-background/#the-border-radius","-o-border-image":"http://www.w3.org/TR/css3-background/#the-border-image",border:"http://www.w3.org/TR/css3-background/#the-border-shorthands","box-decoration-break":"http://www.w3.org/TR/css3-background/#box-decoration-break","box-shadow":"http://www.w3.org/TR/css3-background/#box-shadow",clear:"http://www.w3.org/TR/css3-box/#clear",display:"http://www.w3.org/TR/css3-box/#display","float":"http://www.w3.org/TR/css3-box/#float",height:"http://www.w3.org/TR/css3-box/#height",margin:"http://www.w3.org/TR/css3-box/#margin1","margin-top":"http://www.w3.org/TR/css3-box/#margin-top","margin-right":"http://www.w3.org/TR/css3-box/#margin-right","margin-bottom":"http://www.w3.org/TR/css3-box/#margin-bottom","margin-left":"http://www.w3.org/TR/css3-box/#margin-left","max-width":"http://www.w3.org/TR/css3-box/#max-width","max-height":"http://www.w3.org/TR/css3-box/#max-height","min-width":"http://www.w3.org/TR/css3-box/#min-width","min-height":"http://www.w3.org/TR/css3-box/#min-width",overflow:"http://www.w3.org/TR/css3-box/#overflow0","overflow-x":"http://www.w3.org/TR/css3-box/#overflow-x","overflow-y":"http://www.w3.org/TR/css3-box/#overflow-y",padding:"http://www.w3.org/TR/css3-box/#padding1","padding-top":"http://www.w3.org/TR/css3-box/#padding-top","padding-right":"http://www.w3.org/TR/css3-box/#padding-right","padding-bottom":"http://www.w3.org/TR/css3-box/#padding-bottom","padding-left":"http://www.w3.org/TR/css3-box/#padding-left",visibility:"http://www.w3.org/TR/css3-box/#visibility",width:"http://www.w3.org/TR/css3-box/#width","box-sizing":"http://www.w3.org/TR/css3-ui/#box-sizing0",content:"http://www.w3.org/TR/css3-ui/#content",cursor:"http://www.w3.org/TR/css3-ui/#cursor0",font:"http://www.w3.org/TR/css3-ui/#font","nav-index":"http://www.w3.org/TR/css3-ui/#nav-index0","nav-up":"http://www.w3.org/TR/css3-ui/#nav-up","nav-right":"http://www.w3.org/TR/css3-ui/#nav-right","nav-down":"http://www.w3.org/TR/css3-ui/#nav-down","nav-left":"http://www.w3.org/TR/css3-ui/#nav-left",outline:"http://www.w3.org/TR/css3-ui/#outline0","outline-width":"http://www.w3.org/TR/css3-ui/#outline-width0","outline-style":"http://www.w3.org/TR/css3-ui/#outline-style0","outline-color":"http://www.w3.org/TR/css3-ui/#outline-color0","outline-offset":"http://www.w3.org/TR/css3-ui/#outline-offset0",color:"http://www.w3.org/TR/css3-color/#color0",opacity:"http://www.w3.org/TR/css3-color/#opacity","letter-spacing":"http://www.w3.org/TR/css3-text/#letter-spacing","text-align":"http://www.w3.org/TR/css3-text/#text-align","text-indent":"http://www.w3.org/TR/css3-text/#text-indent","text-overflow":"http://www.w3.org/TR/css3-text/#text-overflow","text-shadow":"http://www.w3.org/TR/css3-text/#text-shadow","word-spacing":"http://www.w3.org/TR/css3-text/#word-spacing","word-wrap":"http://www.w3.org/TR/css3-text/#word-wrap0","-o-transition-property":"http://www.w3.org/TR/css3-transitions/#the-transition-property-property-","-o-transition-duration":"http://www.w3.org/TR/css3-transitions/#transition-duration","-o-transition-timing-function":"http://www.w3.org/TR/css3-transitions/#transition-timing-function","-o-transition-delay":"http://www.w3.org/TR/css3-transitions/#transition-delay","-o-transition":"http://www.w3.org/TR/css3-transitions/#transition","-o-transform":"http://www.w3.org/TR/css3-2d-transforms/#transform-property","-o-transform-origin":"http://www.w3.org/TR/css3-2d-transforms/#transform-origin","-o-object-fit":"http://dev.w3.org/csswg/css3-images/#object-fit","-o-object-position":"http://dev.w3.org/csswg/css3-images/#object-position","font-stretch":"http://www.w3.org/TR/css3-fonts/#font-width-the-font-stretch-property","font-size-adjust":"http://www.w3.org/TR/css3-fonts/#relative-sizing-the-font-size-adjust-pro","font-stretch":"http://www.w3.org/TR/css3-fonts/#font-stretch0","unicode-range":"http://www.w3.org/TR/css3-fonts/#unicode-range","border-image-source":"http://www.w3.org/TR/css3-background/#the-border-image-source","border-image-slice":"http://www.w3.org/TR/css3-background/#border-image-slice","border-image-width":"http://www.w3.org/TR/css3-background/#border-image-width","border-image-outset":"http://www.w3.org/TR/css3-background/#border-image-outset","border-image-repeat":"http://www.w3.org/TR/css3-background/#border-image-repeat",apparence:"http://www.w3.org/TR/css3-ui/#appearance0",icon:"http://www.w3.org/TR/css3-ui/#icon",resize:"http://www.w3.org/TR/css3-ui/#resize0",zoom:"http://dev.w3.org/csswg/css-device-adapt/#the-lsquozoomrsquo-property","min-zoom":"http://dev.w3.org/csswg/css-device-adapt/#min-zoom","max-zoom":"http://dev.w3.org/csswg/css-device-adapt/#max-zoom","user-zoom":"http://dev.w3.org/csswg/css-device-adapt/#user-zoom","clip-path":"http://www.w3.org/TR/SVG11/masking.html#ClipPathProperty","clip-rule":"http://www.w3.org/TR/SVG11/masking.html#ClipRuleProperty",mask:"http://www.w3.org/TR/SVG11/masking.html#MaskProperty","enable-background":"http://www.w3.org/TR/SVG11/filters.html#EnableBackgroundProperty",filter:"http://www.w3.org/TR/SVG11/filters.html#FilterProperty","flood-color":"http://www.w3.org/TR/SVG11/filters.html#FloodColorProperty","flood-opacity":"http://www.w3.org/TR/SVG11/filters.html#FloodOpacityProperty","lighting-color":"http://www.w3.org/TR/SVG11/filters.html#LightingColorProperty","stop-color":"http://www.w3.org/TR/SVG11/pservers.html#StopColorProperty","stop-opacity":"http://www.w3.org/TR/SVG11/pservers.html#StopOpacityProperty","pointer-events":"http://www.w3.org/TR/SVG11/interact.html#PointerEventsProperty","color-interpolation":"http://www.w3.org/TR/SVG11/painting.html#ColorInterpolationProperty","color-interpolation-filters":"http://www.w3.org/TR/SVG11/painting.html#ColorInterpolationFiltersProperty","color-profile":"http://www.w3.org/TR/SVG11/color.html#ColorProfileProperty","color-rendering":"http://www.w3.org/TR/SVG11/painting.html#ColorRenderingProperty","shape-rendering":"http://www.w3.org/TR/SVG11/painting.html#ShapeRenderingProperty","text-rendering":"http://www.w3.org/TR/SVG11/painting.html#TextRenderingProperty","image-rendering":"http://www.w3.org/TR/SVG11/painting.html#ImageRenderingProperty",fill:"http://www.w3.org/TR/SVG11/painting.html#FillProperty","fill-rule":"http://www.w3.org/TR/SVG11/painting.html#FillRuleProperty","fill-opacity":"http://www.w3.org/TR/SVG11/painting.html#FillOpacityProperty",marker:"http://www.w3.org/TR/SVG11/painting.html#MarkerProperty","marker-end":"http://www.w3.org/TR/SVG11/painting.html#MarkerEndProperty","marker-mid":"http://www.w3.org/TR/SVG11/painting.html#MarkerMidProperty","marker-start":"http://www.w3.org/TR/SVG11/painting.html#MarkerStartProperty",stroke:"http://www.w3.org/TR/SVG11/painting.html#StrokeProperty","stroke-width":"http://www.w3.org/TR/SVG11/painting.html#StrokeWidthProperty","stroke-linecap":"http://www.w3.org/TR/SVG11/painting.html#StrokeLinecapProperty","stroke-linejoin":"http://www.w3.org/TR/SVG11/painting.html#StrokeLinejoinProperty","stroke-miterlimit":"http://www.w3.org/TR/SVG11/painting.html#StrokeMiterlimitProperty","stroke-dasharray":"http://www.w3.org/TR/SVG11/painting.html#StrokeDasharrayProperty","stroke-dashoffset":"http://www.w3.org/TR/SVG11/painting.html#StrokeDashoffsetProperty","stroke-opacity":"http://www.w3.org/TR/SVG11/painting.html#StrokeOpacityProperty","alignment-baseline":"http://www.w3.org/TR/SVG11/text.html#AlignmentBaselineProperty","baseline-shift":"http://www.w3.org/TR/SVG11/text.html#BaselineShiftProperty","dominant-baseline":"http://www.w3.org/TR/SVG11/text.html#DominantBaselineProperty","glyph-orientation-horizontal":"http://www.w3.org/TR/SVG11/text.html#GlyphOrientationHorizontalProperty","glyph-orientation-vertical":"http://www.w3.org/TR/SVG11/text.html#GlyphOrientationVerticalProperty",kerning:"http://www.w3.org/TR/SVG11/text.html#KerningProperty","text-anchor":"http://www.w3.org/TR/SVG11/text.html#TextAnchorProperty","writing-mode":"http://www.w3.org/TR/SVG11/text.html#WritingModeProperty","audio-level":"http://www.w3.org/TR/SVGTiny12/multimedia.html#AudioLevelProperty","buffered-rendering":"http://www.w3.org/TR/SVGTiny12/painting.html#BufferedRenderingProperty","display-align":"http://www.w3.org/TR/SVGTiny12/text.html#DisplayAlignProperty","line-increment":"http://www.w3.org/TR/SVGTiny12/text.html#LineIncrementProperty","solid-color":"http://www.w3.org/TR/SVGTiny12/painting.html#SolidColorProperty","solid-opacity":"http://www.w3.org/TR/SVGTiny12/painting.html#SolidOpacityProperty","vector-effect":"http://www.w3.org/TR/SVGTiny12/painting.html#VectorEffectProperty","viewport-fill":"http://www.w3.org/TR/SVGTiny12/painting.html#viewport-fill-property","viewport-fill-opacity":"http://www.w3.org/TR/SVGTiny12/painting.html#viewport-fill-opacity-property"},dom:{doctype:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-B63ED1A31",implementation:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1B793EBA",documentElement:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-87CD092",nodeName:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-F68D095",nodeValue:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-F68D080",nodeType:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-111237558",childNodes:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1451460987",attributes:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-84CF096",ownerDocument:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#node-ownerDoc",specified:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-862529273",value:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-221662474",tagName:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-104682815",entities:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1788794630",notations:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-D46829EF",publicId:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-54F2B4D0",systemId:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-E8AAB1D0",publicId:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-D7303025",systemId:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-D7C29F3E",notationName:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-6ABAEB38",target:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1478689192",DOMString:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#DOMString",DOMTimeStamp:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#DOMTimeStamp",DOMException:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-17189187",ExceptionCode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-258A00AF",DOMImplementation:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490",hasFeature:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-5CED94D7",createDocumentType:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType",createDocument:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument",DocumentFragment:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-B63ED1A3",Document:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document",data:"http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-837822393",createAttribute:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1084891198",createAttributeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-DocCrAttrNS",createCDATASection:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-D26C0AF8",createComment:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1334481328",createDocumentFragment:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-35CB04B5",createElement:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-2141741547",createElementNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-DocCrElNS",createEntityReference:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-392B75AE",createProcessingInstruction:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-135944439",createTextNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1975348127",getElementById:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId",getElementsByTagName:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-A6C9094",getElementsByTagNameNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBTNNS",importNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#Core-Document-importNode",appendChild:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107",cloneNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3A0ED0A4",hasAttributes:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-NodeHasAttrs",hasChildNodes:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-810594187",insertBefore:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-952280727",isSupported:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-Node-supports",normalize:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-normalize",removeChild:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1734834066",replaceChild:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-785887307",removeChild:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1734834066",appendChild:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-184E7107",hasChildNodes:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-810594187",cloneNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3A0ED0A4",normalize:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-normalize",isSupported:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-Node-supports",hasAttributes:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-NodeHasAttrs",NodeList:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-536297177",NamedNodeMap:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1780488922",getNamedItem:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1074577549",item:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-844377136",getNamedItem:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1074577549",getNamedItemNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getNamedItemNS",removeNamedItem:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-D58B193",removeNamedItemNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-removeNamedItemNS",setNamedItem:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1025163788",setNamedItemNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-setNamedItemNS",appendData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-32791A2F",deleteData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-7C603781",insertData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3EDB695F",replaceData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-E5CBA7FB",substringData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-6531BCCF",getAttribute:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-666EE0F9",getAttributeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElGetAttrNS",getAttributeNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-217A91B8",getAttributeNodeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElGetAtNodeNS",getElementsByTagName:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1938918D",getElementsByTagNameNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-A6C90942",hasAttribute:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElHasAttr",hasAttributeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElHasAttrNS",removeAttribute:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-6D6AC0F9",removeAttributeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElRemAtNS",removeAttributeNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-D589198",setAttribute:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-F68F082",setAttributeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElSetAttrNS",setAttributeNode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-887236154",setAttributeNodeNS:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-ElSetAtNodeNS",splitText:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-38853C1D",HTMLDocument:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26809268",Attr:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-637646024",Text:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772",CDATASection:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-667469212",Comment:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1728279322",CDATASection:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-667469212",DocumentType:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-412266927",Notation:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-5431D1B9",Entity:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-527DCFF2",EntityReference:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-11C98490",ProcessingInstruction:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1004215813",DOMUserData:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMUserData",DOMObject:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMObject",DOMStringList:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMStringList",NameList:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#NameList",getName:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#NameList-getName",getNamespaceURI:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#NameList-getNamespaceURI",containsNS:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#NameList-containsNS",DOMImplementationList:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMImplementationList",DOMImplementationSource:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMImplementationSource",getDOMImplementation:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-getDOMImpl",getDOMImplementationList:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-getDOMImpls",getFeature:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMImplementation3-getFeature",normalizeDocument:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Document3-normalizeDocument",renameNode:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Document3-renameNode",compareDocumentPosition:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-compareDocumentPosition",baseURI:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-baseURI",isSameNode:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isSameNode",lookupPrefix:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix",isDefaultNamespace:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isDefaultNamespace",lookupNamespaceURI:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI",isEqualNode:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isEqualNode",getFeature:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-getFeature",setUserData:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-setUserData",getUserData:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-getUserData",setIdAttribute:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-ElSetIdAttr",setIdAttributeNS:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-ElSetIdAttrNS",setIdAttributeNode:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-ElSetIdAttrNode",replaceWholeText:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Text3-replaceWholeText",TypeInfo:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#TypeInfo",isDerivedFrom:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#TypeInfo-isDerivedFrom",UserDataHandler:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#UserDataHandler",handle:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-handleUserDataEvent"
,DOMError:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ERROR-Interfaces-DOMError",DOMErrorHandler:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ERROR-Interfaces-DOMErrorHandler",handleError:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-ERRORS-DOMErrorHandler-handleError",DOMLocator:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#Interfaces-DOMLocator",DOMConfiguration:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMConfiguration",setParameter:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMConfiguration-property",getParameter:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMConfiguration-getParameter",canSetParameter:"http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMConfiguration-canSetParameter",EventTarget:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget",addEventListener:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener",dispatchEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-dispatchEvent",removeEventListener:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-removeEventListener",EventListener:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener",handleEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener-handleEvent",DocumentFragment:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-B63ED1A3",NodeList:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-536297177",NamedNodeMap:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1780488922",Event:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event",initEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-initEvent",preventDefault:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-preventDefault",stopPropagation:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-stopPropagation",EventException:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventException",DocumentEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-DocumentEvent",createEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-DocumentEvent-createEvent",UIEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-UIEvent",initUIEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-initUIEvent",MouseEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MouseEvent",initMouseEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-initMouseEvent",MutationEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent",initMutationEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event-initMutationEvent",stopImmediatePropagation:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-stopImmediatePropagation",CustomEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#interface-CustomEvent",initCustomEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-initCustomEvent",getModifierState:"http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-getModifierState",WheelEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-WheelEvent",initWheelEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-initWheelEvent",TextEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-TextEvent",initTextEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-initTextEvent",KeyboardEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent",initKeyboardEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent-initKeyboardEvent",CompositionEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-CompositionEvent",initCompositionEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-initCompositionEvent",MutationNameEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-MutationNameEvent",initMutationNameEvent:"http://www.w3.org/TR/DOM-Level-3-Events/#events-event-type-initMutationNameEvent",HTMLCollection:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-75708506",HTMLOptionsCollection:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#HTMLOptionsCollection",HTMLDocument:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26809268",document:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26809268",getElementsByName:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-71555259",HTMLElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-58190037",HTMLHtmlElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-33759296",HTMLHeadElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-77253168",HTMLLinkElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-35143001",HTMLTitleElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-79243169",HTMLMetaElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-37041454",HTMLBaseElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-73629039",HTMLStyleElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-16428977",HTMLBodyElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-62018039",HTMLIsIndexElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-85283003",HTMLFormElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-40002357",HTMLSelectElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-94282980",HTMLOptGroupElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-38450247",HTMLOptionElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-70901257",HTMLInputElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-6043025",HTMLTextAreaElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-24874179",HTMLButtonElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-34812697",HTMLLabelElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-13691394",HTMLFieldSetElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-7365882",HTMLLegendElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-21482039",HTMLUListElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-86834457",HTMLOListElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-58056027",HTMLDListElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-52368974",HTMLDirectoryElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-71600284",HTMLMenuElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-72509186",HTMLLIElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-74680021",HTMLDivElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-22445964",HTMLParagraphElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-84675076",HTMLHeadingElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-43345119",HTMLQuoteElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-70319763",HTMLPreElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-11383425",HTMLBRElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-56836063",HTMLBaseFontElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-32774408",HTMLFontElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-43943847",HTMLHRElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-68228811",HTMLModElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-79359609",HTMLAnchorElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-48250443",HTMLImageElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-17701901",HTMLObjectElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-9893177",HTMLParamElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-64077273",HTMLAppletElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-31006348",HTMLMapElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-94109203",HTMLAreaElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-26019118",HTMLScriptElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-81598695",HTMLTableElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-64060425",HTMLTableCaptionElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-12035137",HTMLTableColElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-84150186",HTMLTableSectionElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-67417573",HTMLTableRowElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-6986576",HTMLTableCellElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-82915075",HTMLFrameSetElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-43829095",HTMLFrameElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-97790553",HTMLIFrameElement:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-50708718",HTMLCollection:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-75708506",HTMLOptionsCollection:"http://www.w3.org/TR/DOM-Level-2-HTML/html.html#HTMLOptionsCollection",DOMException:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-17189187",ExceptionCode:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-258A00AF",DOMImplementation:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490",Document:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document",Node:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247",CharacterData:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-FF21A306",Element:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-745549614",DocumentType:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-412266927",Notation:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-5431D1B9",Entity:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-527DCFF2",EntityReference:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-11C98490",ProcessingInstruction:"http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1004215813",DocumentEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-DocumentEvent",EventTarget:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget",EventListener:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener",UIEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-UIEvent",MouseEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MouseEvent",MutationEvent:"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent",StyleSheet:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-StyleSheet",StyleSheetList:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-StyleSheetList",MediaList:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-MediaList",appendMedium:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-MediaList-appendMedium",deleteMedium:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-MediaList-deleteMedium",LinkStyle:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-LinkStyle",DocumentStyle:"http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html#StyleSheets-StyleSheet-DocumentStyle",CSSStyleSheet:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleSheet",CSSRuleList:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSRuleList",CSSRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSRule",CSSStyleRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleRule",CSSMediaRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSMediaRule",CSSFontFaceRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSFontFaceRule",CSSPageRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSPageRule",CSSImportRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSImportRule",CSSCharsetRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSCharsetRule",CSSUnknownRule:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSUnknownRule",CSSStyleDeclaration:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration",getPropertyCSSValue:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration-getPropertyCSSValue",getPropertyPriority:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration-getPropertyPriority",getPropertyValue:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration-getPropertyValue",removeProperty:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration-removeProperty",setProperty:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSStyleDeclaration-setProperty",CSSValue:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSValue",CSSPrimitiveValue:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSPrimitiveValue",CSSValueList:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSSValueList",RGBColor:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-RGBColor",Rect:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-Rect",Counter:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-Counter",ViewCSS:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-ViewCSS",DocumentCSS:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-DocumentCSS",DOMImplementationCSS:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-DOMImplementationCSS",ElementCSSInlineStyle:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-ElementCSSInlineStyle",CSS2Properties:"http://www.w3.org/TR/DOM-Level-2-Style/css#CSS-CSS2Properties",AbstractView:"http://www.w3.org/TR/DOM-Level-2-Views/views.html#Views-AbstractView",DocumentView:"http://www.w3.org/TR/DOM-Level-2-Views/views.html#Views-DocumentView",NodeIterator:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-NodeIterator",NodeFilter:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-NodeFilter",TreeWalker:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker",firstChild:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker-firstChild",lastChild:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker-lastChild",nextSibling:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker-nextSibling",parentNode:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker-parentNode",previousSibling:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-TreeWalker-previousSibling",DocumentTraversal:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/traversal.html#Traversal-Document",Range:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-idl",cloneContents:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-cloneContents",cloneRange:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-clone",collapse:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-collapse",compareBoundaryPoints:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-compareBoundaryPoints",deleteContents:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-deleteContents",extractContents:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-extractContents",insertNode:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-insertNode",selectNode:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-selectNode",setEnd:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-setEnd",selectNodeContents:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-selectNodeContents",setEndAfter:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-setEndAfter",setStartBefore:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-setStartBefore",surroundContents:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level2-Range-method-surroundContents",DocumentRange:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-DocumentRange-idl",RangeException:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#RangeException",RangeExceptionCode:"http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#RangeExceptionCode",LSException:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSException",LSExceptionCode:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSException-LSExceptionCode","LS-DOMImplementation":"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-DOMImplementation",LSParser:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSParser",parseURI:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSParser-parseURI",parseWithContext:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSParser-parseWithContext",LSInput:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSInput",LSResourceResolver:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSResourceResolver",LSParserFilter:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSParserFilter",startElement:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSParserFilter-startElement",LSProgressEvent:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSProgressEvent",LSLoadEvent:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSLoadEvent",LSSerializer:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSSerializer",writeToURI:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSSerializer-writeToURI",writeToString:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSSerializer-writeToString",LSOutput:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSOutput",LSSerializerFilter:"http://www.w3.org/TR/DOM-Level-3-LS/load-save.html#LS-LSSerializerFilter",ExceptionVAL:"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#ExceptionVAL","ExceptionVAL-codes":"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#ExceptionVAL-codes",DocumentEditVAL:"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#VAL-Interfaces-DocumentEditVAL",NodeEditVAL:"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#VAL-Interfaces-NodeEditVAL",ElementEditVAL:"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#VAL-Interfaces-ElementEditVAL",CharacterDataEditVAL:"http://www.w3.org/TR/DOM-Level-3-Val/validation.html#VAL-Interfaces-CharacterDataEditVAL",XPathException:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathException",XPathExceptionCode:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExceptionCode",XPathEvaluator:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator",XPathExpression:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathExpression",XPathNSResolver:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNSResolver",XPathResult:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult",XPathNamespace:"http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathNamespace",View:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View",createSegment:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-createSegment",matchFirstSegment:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-matchFirstSegment",getIntegerProperty:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-getIntegerProperty",getStringProperty:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-getStringProperty",getBooleanProperty:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-getBooleanProperty",getContentPropertyNode:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-getContentPropertyNode",getContentPropertyOffset:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-View-getContentPropertyOffset",Segment:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment",addItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-addItem",createMatchString:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createMatchString",createMatchInteger:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createMatchInteger",createMatchBoolean:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createMatchBoolean",createMatchContent:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createMatchContent",createMatchSet:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createMatchSet",createStringItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createStringItem",createIntegerItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createIntegerItem",createBooleanItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createBooleanItem",createContentItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createContentItem",Match:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Match",MatchString:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-MatchString",MatchInteger:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-MatchInteger",MatchBoolean:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-MatchBoolean",MatchContent:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-MatchContent",MatchSet:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-MatchSet",Item:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Item",StringItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-StringItem",IntegerItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-IntegerItem",BooleanItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-BooleanItem",ContentItem:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-ContentItem",VisualView:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualView",createVisualCharacter:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualCharacter",createVisualCharacterRun:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualCharacterRun",createVisualFrame:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualFrame",createVisualImage:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualImage",createVisualFormButton:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualFormButton",createVisualFormField:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-createVisualFormField",matchSegment:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#Views-Segment-matchSegment",VisualResource:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualResource",VisualFont:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualFont",VisualSegment:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualSegment",VisualCharacter:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualCharacter",VisualCharacterRun:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualCharacterRun",VisualFrame:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualFrame",VisualImage:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualImage",VisualFormButton:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualFormButton",VisualFormField:"http://www.w3.org/TR/DOM-Level-3-Views/views-formatting.html#VisualFormField",ASConstants:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASConstants",ASObject:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASObject",ASDataType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASDataType-PrimitiveType",ASObjectList:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjectList",ASNamedObjectMap:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASNamedObjectMap",getNamedItem:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASNamedObjectMap-getNamedItem",getNamedItemNS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASNamedObjectMap-getNamedItemNS",ASModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASModel",ASContentModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASContentModel",ASElementDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASElementDecl",ASAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASAttributeDecl",ASEntityDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#Interface-ASEntityDecl","AS-NotationDecl":"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-NotationDecl",ASWModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel",setLocation:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-setLocation",setHint:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-setHint",addComponent:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-addComponent",removeComponent:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-removeComponent",addASModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-addASModel",removeASModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-removeASModel",getASModels:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-getASModels",importASObject:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-importASObject",insertASObject:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-insertASObject",createASWElementDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-createASWElementDecl",createASWAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-createASWAttributeDecl",createASWNotationDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-createASWNotationDecl",createASWEntityDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWModel-createASWEntityDecl",createASWContentModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-createASWContentModel",ASWNamedObjectMap:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWNamedObjectMap",ASWElementDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASWElementDecl",setNamespace:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWElement-setNamespace",setStrictMixedContent:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWElementDecl-setStrictMixedContent",setType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWElementDecl-setElementType",setContentType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWElementDecl-setContentType",setContentModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWElementDecl-setContentModel",addAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjectType-ElementDecl-addAttributeDecl",removeAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjectType-ElementDecl-removeASWAttributeDecl",ASWContentModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjecType-ASWContentModel",setContentModelType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-setContentModelType",setMinOccurs:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-setMinOccurs",setMaxOccurs:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-setMaxOccurs",removeSubModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-removesubModel",insertBeforeSubModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-insertBeforeSubModel",appendSubModel:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWCM-appendsubModel",ASWAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjectType-AttributeDecl",setType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWAttr-setType",setValue:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWAttr-setDataValue",setEnumAttr:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWAttr-setEnumAttr",setDefaultType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWAttr-setConstraint",ASWEntityDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-ASObjectType-EntityDecl",setEntityType:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWEntity-setEntityType",setEntityValue:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASWEntity-setEntityValue",ASException:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASException","ASException-codes":"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#ASException-codes",DocumentAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-DocumentAS",getInternalAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-getInternalAS",setInternalAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-setInternalAS",addAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-addAS",removeAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-removeAS",getElementDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-getElementDecl",getAttributeDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-getAttributeDecl",getEntityDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-getEntityDecl",getNotationDecl:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#DocumentAS-getNotationDecl",DomImplementationAS:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#AS-Interfaces-DomImplementationAS","AS-Interfaces-ASDOMBuilde":"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#LS-AS-Interfaces-ASDOMBuilder",ASDOMWriter:"http://www.w3.org/TR/DOM-Level-3-AS/abstract-schemas.html#LS-AS-Interfaces-ASDOMWriter",DOMActivate:"http://www.w3.org/TR/html5/infrastructure.html#event-domactivate",HTMLAllCollection:"http://www.w3.org/TR/html5/common-dom-interfaces.html#htmlallcollection",HTMLFormControlsCollection:"http://www.w3.org/TR/html5/common-dom-interfaces.html#htmlformcontrolscollection",RadioNodeList:"http://www.w3.org/TR/html5/common-dom-interfaces.html#radionodelist",DOMTokenList:"http://www.w3.org/TR/html5/common-dom-interfaces.html#domtokenlist",toggle:"http://www.w3.org/TR/html5/common-dom-interfaces.html#dom-tokenlist-toggle",DOMSettableTokenList:"http://www.w3.org/TR/html5/common-dom-interfaces.html#domsettabletokenlist",DOMStringMap:"http://www.w3.org/TR/html5/common-dom-interfaces.html#domstringmap",hashchange:"http://www.w3.org/TR/html5/history.html#event-hashchange",offline:"http://www.w3.org/TR/html5/offline.html#event-offline",online:"http://www.w3.org/TR/html5/offline.html#event-online",pagehide:"http://www.w3.org/TR/html5/history.html#event-pagehide",pageshow:"http://www.w3.org/TR/html5/history.html#event-pageshow",popstate:"http://www.w3.org/TR/html5/history.html#event-popstate",readystatechange:"http://www.w3.org/TR/html5/dom.html#event-readystatechange",dataset:"http://www.w3.org/TR/html5/elements.html#dom-dataset",opener:"http://www.w3.org/TR/html5/browsers.html#dom-opener",WindowProxy:"http://www.w3.org/TR/html5/browsers.html#windowproxy",redo:"http://www.w3.org/TR/html5/dnd.html#event-redo",undo:"http://www.w3.org/TR/html5/dnd.html#event-undo",HTMLVideoElement:"http://www.w3.org/TR/html5/video.html#htmlvideoelement",HTMLMediaElement:"http://www.w3.org/TR/html5/video.html#htmlmediaelement",HTMLSourceElement:"http://www.w3.org/TR/html5/video.html#htmlsourceelement",HTMLAudioElement:"http://www.w3.org/TR/html5/video.html#htmlaudioelement",HTMLTimeElement:"http://www.w3.org/TR/html5/text-level-semantics.html#htmltimeelement",dateTime:"http://www.w3.org/TR/html5/text-level-semantics.html#dom-time-datetime",pubDate:"http://www.w3.org/TR/html5/text-level-semantics.html#dom-time-pubdate",valueAsDate:"http://www.w3.org/TR/html5/text-level-semantics.html#dom-time-valueasdate",HTMLProgressElement:"http://www.w3.org/TR/html5/the-button-element.html#htmlprogresselement",HTMLMeterElement:"http://www.w3.org/TR/html5/the-button-element.html#htmlmeterelement",HTMLKeygenElement:"http://www.w3.org/TR/html5/the-button-element.html#htmlkeygenelement",HTMLDetailsElement:"http://www.w3.org/TR/html5/interactive-elements.html#htmldetailselement"
,HTMLDataListElement:"http://www.w3.org/TR/html5/the-button-element.html#htmldatalistelement",HTMLCanvasElement:"http://www.w3.org/TR/html5/the-canvas-element.html#htmlcanvaselement",Image:"http://www.w3.org/TR/html5/embedded-content-1.html#dom-image",HTMLEmbedElement:"http://www.w3.org/TR/html5/the-iframe-element.html#htmlembedelement",Option:"http://www.w3.org/TR/html5/the-button-element.html#dom-option-t",classList:"http://www.w3.org/TR/html5/elements.html#dom-classlist",History:"http://www.w3.org/TR/html5/history.html#history-0",history:"http://www.w3.org/TR/html5/history.html#dom-history",go:"http://www.w3.org/TR/html5/history.html#dom-history-go",back:"http://www.w3.org/TR/html5/history.html#dom-history-back",forward:"http://www.w3.org/TR/html5/history.html#dom-history-forward",pushState:"http://www.w3.org/TR/html5/history.html#dom-history-pushstate",replaceState:"http://www.w3.org/TR/html5/history.html#dom-history-replacestate",Location:"http://www.w3.org/TR/html5/history.html#location",assign:"http://www.w3.org/TR/html5/history.html#dom-location-assign",resolveURL:"http://www.w3.org/TR/html5/history.html#dom-location-resolveurl",PopStateEvent:"http://www.w3.org/TR/html5/history.html#popstateevent",initPopStateEvent:"http://www.w3.org/TR/html5/history.html#dom-popstateevent-initpopstateevent",popstate:"http://www.w3.org/TR/html5/history.html#event-popstate",HashChangeEvent:"http://www.w3.org/TR/html5/history.html#hashchangeevent",initHashChangeEvent:"http://www.w3.org/TR/html5/history.html#dom-hashchangeevent-inithashchangeevent",hashchange:"http://www.w3.org/TR/html5/history.html#event-hashchange",pagehide:"http://www.w3.org/TR/html5/history.html#event-pagehide",pageshow:"http://www.w3.org/TR/html5/history.html#event-pageshow",PageTransitionEvent:"http://www.w3.org/TR/html5/history.html#pagetransitionevent",initPageTransitionEvent:"http://www.w3.org/TR/html5/history.html#dom-pagetransitionevent-initpagetransitionevent",BeforeUnloadEvent:"http://www.w3.org/TR/html5/history.html#beforeunloadevent",ApplicationCache:"http://www.w3.org/TR/html5/offline.html#applicationcache",applicationCache:"http://www.w3.org/TR/html5/offline.html#dom-applicationcache",update:"http://www.w3.org/TR/html5/offline.html#dom-appcache-update",swapCache:"http://www.w3.org/TR/html5/offline.html#dom-appcache-swapcache",offline:"http://www.w3.org/TR/html5/offline.html#event-offline",online:"http://www.w3.org/TR/html5/offline.html#event-online",hidden:"http://www.w3.org/TR/html5/editing.html#dom-hidden",tabIndex:"http://www.w3.org/TR/html5/editing.html#dom-tabindex",accessKey:"http://www.w3.org/TR/html5/editing.html#dom-accesskey",contentEditable:"http://www.w3.org/TR/html5/editing.html#dom-contenteditable",spellcheck:"http://www.w3.org/TR/html5/editing.html#dom-spellcheck",hidden:"http://www.w3.org/TR/html5/editing.html#the-hidden-attribute",tabIndex:"http://www.w3.org/TR/html5/editing.html#attr-tabindex",accesskey:"http://www.w3.org/TR/html5/editing.html#the-accesskey-attribute",contenteditable:"http://www.w3.org/TR/html5/editing.html#attr-contenteditable",spellcheck:"http://www.w3.org/TR/html5/editing.html#attr-spellcheck",click:"http://www.w3.org/TR/html5/editing.html#dom-click",scrollIntoView:"http://www.w3.org/TR/html5/editing.html#dom-scrollintoview",hasFocus:"http://www.w3.org/TR/html5/editing.html#dom-document-hasfocus",isContentEditable:"http://www.w3.org/TR/html5/editing.html#dom-iscontenteditable",activeElement:"http://www.w3.org/TR/html5/editing.html#dom-document-activeelement",designmode:"http://www.w3.org/TR/html5/editing.html#designMode",DragEvent:"http://www.w3.org/TR/html5/dnd.html#dragevent",DataTransfer:"http://www.w3.org/TR/html5/dnd.html#datatransfer",UndoManager:"http://www.w3.org/TR/html5/dnd.html#undomanager",UndoManagerEvent:"http://www.w3.org/TR/html5/dnd.html#undomanagerevent",draggable:"http://www.w3.org/TR/html5/dnd.html#the-draggable-attribute",dragstart:"http://www.w3.org/TR/html5/dnd.html#event-dragstart",dragenter:"http://www.w3.org/TR/html5/dnd.html#event-dragenter",drag:"http://www.w3.org/TR/html5/dnd.html#event-drag",dragleave:"http://www.w3.org/TR/html5/dnd.html#event-dragleave",dragover:"http://www.w3.org/TR/html5/dnd.html#event-dragover",drop:"http://www.w3.org/TR/html5/dnd.html#event-drop",dragend:"http://www.w3.org/TR/html5/dnd.html#event-dragend",dropEffect:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-dropeffect",effectAllowed:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-effectallowed",types:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-types",clearData:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-cleardata",setData:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-setdata",getData:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-getdata",files:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-files",setDragImage:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-setdragimage",addElement:"http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-addelement",undoManager:"http://www.w3.org/TR/html5/dnd.html#dom-undomanager",position:"http://www.w3.org/TR/html5/dnd.html#dom-undomanager-position",clearUndo:"http://www.w3.org/TR/html5/dnd.html#dom-undomanager-clearundo",clearRedo:"http://www.w3.org/TR/html5/dnd.html#dom-undomanager-clearredo",UndoManagerEvent:"http://www.w3.org/TR/html5/dnd.html#undomanagerevent",initUndoManagerEvent:"http://www.w3.org/TR/html5/dnd.html#dom-undomanagerevent-initundomanagerevent",draggable:"http://www.w3.org/TR/html5/dnd.html#the-draggable-attribute",dragstart:"http://www.w3.org/TR/html5/dnd.html#event-dragstart",dragenter:"http://www.w3.org/TR/html5/dnd.html#event-dragenter",drag:"http://www.w3.org/TR/html5/dnd.html#event-drag",dragleave:"http://www.w3.org/TR/html5/dnd.html#event-dragleave",dragover:"http://www.w3.org/TR/html5/dnd.html#event-dragover",drop:"http://www.w3.org/TR/html5/dnd.html#event-drop",dragend:"http://www.w3.org/TR/html5/dnd.html#event-dragend",execCommand:"http://www.w3.org/TR/html5/dnd.html#execCommand",queryCommandEnabled:"http://www.w3.org/TR/html5/dnd.html#dom-document-querycommandenabled",queryCommandIndeterm:"http://www.w3.org/TR/html5/dnd.html#dom-document-querycommandindeterm",queryCommandState:"http://www.w3.org/TR/html5/dnd.html#dom-document-querycommandstate",queryCommandSupported:"http://www.w3.org/TR/html5/dnd.html#dom-document-querycommandsupported",queryCommandValue:"http://www.w3.org/TR/html5/dnd.html#dom-document-querycommandvalue",data:"http://www.w3.org/TR/html5/dnd.html#dom-undomanagerevent-data",write:"http://www.w3.org/TR/html5/apis-in-html-documents.html#document.write",writeln:"http://www.w3.org/TR/html5/apis-in-html-documents.html#document.writeln",innerHTML:"http://www.w3.org/TR/html5/apis-in-html-documents.html#innerhtml",outerHTML:"http://www.w3.org/TR/html5/apis-in-html-documents.html#outerhtml",insertAdjacentHTML:"http://www.w3.org/TR/html5/apis-in-html-documents.html#insertadjacenthtml",WindowTimers:"http://www.w3.org/TR/html5/timers.html#windowtimers",showModalDialog:"http://www.w3.org/TR/html5/timers.html#dom-showmodaldialog",WindowModal:"http://www.w3.org/TR/html5/timers.html#windowmodal",alert:"http://www.w3.org/TR/html5/timers.html#dom-alert",confirm:"http://www.w3.org/TR/html5/timers.html#dom-confirm",prompt:"http://www.w3.org/TR/html5/timers.html#dom-prompt",print:"http://www.w3.org/TR/html5/timers.html#dom-print",Navigator:"http://www.w3.org/TR/html5/timers.html#navigator",navigator:"http://www.w3.org/TR/html5/timers.html#dom-navigator",NavigatorID:"http://www.w3.org/TR/html5/timers.html#navigatorid",NavigatorOnLine:"http://www.w3.org/TR/html5/timers.html#navigatoronline",NavigatorAbilities:"http://www.w3.org/TR/html5/timers.html#navigatorabilities",registerProtocolHandler:"http://www.w3.org/TR/html5/timers.html#dom-navigator-registerprotocolhandler",registerContentHandler:"http://www.w3.org/TR/html5/timers.html#dom-navigator-registercontenthandler",yieldForStorageUpdates:"http://www.w3.org/TR/html5/timers.html#dom-navigator-yieldforstorageupdates",all:"http://www.w3.org/TR/html5/obsolete.html#dom-document-all",HTMLMarqueeElement:"http://www.w3.org/TR/html5/obsolete.html#htmlmarqueeelement",Window:"http://www.w3.org/TR/Window/#dfn-window-interface",window:"http://www.w3.org/TR/Window/#dfn-window-attribute",self:"http://www.w3.org/TR/Window/#dfn-self-attribute",parent:"http://www.w3.org/TR/Window/#dfn-parent",top:"http://www.w3.org/TR/Window/#dfn-top",frameElement:"http://www.w3.org/TR/Window/#dfn-frameelement",DocumentWindow:"http://www.w3.org/TR/Window/#document-location",location:"http://www.w3.org/TR/Window/#dfn-location2",Location:"http://www.w3.org/TR/Window/#location",href:"http://www.w3.org/TR/Window/#dfn-href",hash:"http://www.w3.org/TR/Window/#dfn-hash",host:"http://www.w3.org/TR/Window/#dfn-host",hostname:"http://www.w3.org/TR/Window/#dfn-hostname",pathname:"http://www.w3.org/TR/Window/#dfn-pathname",port:"http://www.w3.org/TR/Window/#dfn-port",protocol:"http://www.w3.org/TR/Window/#dfn-protocol",EmbeddingElement:"http://www.w3.org/TR/Window/#embeddingelt",TimerListener:"http://www.w3.org/TR/Window/#timerlistener",firstElementChild:"http://www.w3.org/TR/ElementTraversal/#attribute-firstElementChild",lastElementChild:"http://www.w3.org/TR/ElementTraversal/#attribute-lastElementChild",previousElementSibling:"http://www.w3.org/TR/ElementTraversal/#attribute-previousElementSibling",nextElementSibling:"http://www.w3.org/TR/ElementTraversal/#attribute-nextElementSibling",childElementCount:"http://www.w3.org/TR/ElementTraversal/#attribute-childElementCount",querySelector:"http://www.w3.org/TR/selectors-api/#queryselector",querySelectorAll:"http://www.w3.org/TR/selectors-api/#queryselectorall",oMatchesSelector:"http://www.w3.org/TR/selectors-api2/#matchesselector",XMLHttpRequest:"http://www.w3.org/TR/XMLHttpRequest/#the-xmlhttprequest-interface",setRequestHeader:"http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method",getResponseHeader:"http://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader-method",getAllResponseHeaders:"http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders-method",CanvasRenderingContext2D:"http://www.w3.org/TR/2dcontext/#canvasrenderingcontext2d",save:"http://www.w3.org/TR/2dcontext/#dom-context-2d-save",restore:"http://www.w3.org/TR/2dcontext/#dom-context-2d-restore",scale:"http://www.w3.org/TR/2dcontext/#dom-context-2d-scale",rotate:"http://www.w3.org/TR/2dcontext/#dom-context-2d-rotate",transform:"http://www.w3.org/TR/2dcontext/#dom-context-2d-transform",setTransform:"http://www.w3.org/TR/2dcontext/#dom-context-2d-settransform",createLinearGradient:"http://www.w3.org/TR/2dcontext/#dom-context-2d-createlineargradient",createRadialGradient:"http://www.w3.org/TR/2dcontext/#dom-context-2d-createradialgradient",createPattern:"http://www.w3.org/TR/2dcontext/#dom-context-2d-createpattern",clearRect:"http://www.w3.org/TR/2dcontext/#dom-context-2d-clearrect",fillRect:"http://www.w3.org/TR/2dcontext/#dom-context-2d-fillrect",strokeRect:"http://www.w3.org/TR/2dcontext/#dom-context-2d-strokerect",beginPath:"http://www.w3.org/TR/2dcontext/#dom-context-2d-beginpath",closePath:"http://www.w3.org/TR/2dcontext/#dom-context-2d-closepath",moveTo:"http://www.w3.org/TR/2dcontext/#dom-context-2d-moveto",lineTo:"http://www.w3.org/TR/2dcontext/#dom-context-2d-lineto",quadraticCurveTo:"http://www.w3.org/TR/2dcontext/#dom-context-2d-quadraticcurveto",bezierCurveTo:"http://www.w3.org/TR/2dcontext/#dom-context-2d-beziercurveto",arcTo:"http://www.w3.org/TR/2dcontext/#dom-context-2d-arcto",arc:"http://www.w3.org/TR/2dcontext/#dom-context-2d-arc",rect:"http://www.w3.org/TR/2dcontext/#dom-context-2d-rect",fill:"http://www.w3.org/TR/2dcontext/#dom-context-2d-fill",stroke:"http://www.w3.org/TR/2dcontext/#dom-context-2d-stroke",clip:"http://www.w3.org/TR/2dcontext/#dom-context-2d-clip",isPointInPath:"http://www.w3.org/TR/2dcontext/#dom-context-2d-ispointinpath",drawFocusRing:"http://www.w3.org/TR/2dcontext/#dom-context-2d-drawfocusring",fillText:"http://www.w3.org/TR/2dcontext/#dom-context-2d-filltext",strokeText:"http://www.w3.org/TR/2dcontext/#dom-context-2d-stroketext",drawImage:"http://www.w3.org/TR/2dcontext/#dom-context-2d-drawimage",createImageData:"http://www.w3.org/TR/2dcontext/#dom-context-2d-createimagedata",getImageData:"http://www.w3.org/TR/2dcontext/#dom-context-2d-getimagedata",putImageData:"http://www.w3.org/TR/2dcontext/#dom-context-2d-putimagedata",CanvasGradient:"http://www.w3.org/TR/2dcontext/#canvasgradient",addColorStop:"http://www.w3.org/TR/2dcontext/#dom-canvasgradient-addcolorstop",CanvasPattern:"http://www.w3.org/TR/2dcontext/#canvaspattern",TextMetrics:"http://www.w3.org/TR/2dcontext/#textmetrics",ImageData:"http://www.w3.org/TR/2dcontext/#imagedata",CanvasPixelArray:"http://www.w3.org/TR/2dcontext/#canvaspixelarray",WorkerGlobalScope:"http://www.w3.org/TR/workers/#workerglobalscope",DedicatedWorkerGlobalScope:"http://www.w3.org/TR/workers/#dedicatedworkerglobalscope",SharedWorkerGlobalScope:"http://www.w3.org/TR/workers/#sharedworkerglobalscope",ErrorEvent:"http://www.w3.org/TR/workers/#errorevent",initErrorEvent:"http://www.w3.org/TR/workers/#dom-errorevent-initerrorevent",AbstractWorker:"http://www.w3.org/TR/workers/#abstractworker",Worker:"http://www.w3.org/TR/workers/#worker",terminate:"http://www.w3.org/TR/workers/#dom-worker-terminate",SharedWorker:"http://www.w3.org/TR/workers/#sharedworker",WorkerUtils:"http://www.w3.org/TR/workers/#workerutils",importScripts:"http://www.w3.org/TR/workers/#dom-workerglobalscope-importscripts",WorkerNavigator:"http://www.w3.org/TR/workers/#workernavigator",WorkerLocation:"http://www.w3.org/TR/workers/#workerlocation",WebSocket:"http://www.w3.org/TR/websockets/#websocket",EventSource:"http://www.w3.org/TR/eventsource/#eventsource",MessageEvent:"http://www.w3.org/TR/webmessaging/#messageevent",initMessageEvent:"http://www.w3.org/TR/webmessaging/#dom-messageevent-initmessageevent",MessageChannel:"http://www.w3.org/TR/webmessaging/#messagechannel",MessagePort:"http://www.w3.org/TR/webmessaging/#messageport",Storage:"http://www.w3.org/TR/webstorage/#storage",key:"http://www.w3.org/TR/webstorage/#dom-storage-key",setItem:"http://www.w3.org/TR/webstorage/#dom-storage-setitem",WindowSessionStorage:"http://www.w3.org/TR/webstorage/#the-sessionstorage-attribute",sessionStorage:"http://www.w3.org/TR/webstorage/#dom-sessionstorage",WindowLocalStorage:"http://www.w3.org/TR/webstorage/#the-localstorage-attribute",localStorage:"http://www.w3.org/TR/webstorage/#dom-localstorage",StorageEvent:"http://www.w3.org/TR/webstorage/#storageevent",initStorageEvent:"http://www.w3.org/TR/webstorage/#dom-storageevent-initstorageevent",WindowDatabase:"http://www.w3.org/TR/webdatabase/#databases",WorkerUtilsDatabase:"http://www.w3.org/TR/webdatabase/#databases",openDatabase:"http://www.w3.org/TR/webdatabase/#dom-opendatabase",openDatabaseSync:"http://www.w3.org/TR/webdatabase/#dom-opendatabase-sync",DatabaseCallback:"http://www.w3.org/TR/webdatabase/#databasecallback",Database:"http://www.w3.org/TR/webdatabase/#database",changeVersion:"http://www.w3.org/TR/webdatabase/#dom-database-changeversion",SQLVoidCallback:"http://www.w3.org/TR/webdatabase/#sqlvoidcallback",SQLTransactionCallback:"http://www.w3.org/TR/webdatabase/#sqltransactioncallback",SQLTransactionErrorCallback:"http://www.w3.org/TR/webdatabase/#sqltransactionerrorcallback",SQLTransaction:"http://www.w3.org/TR/webdatabase/#sqltransaction",SQLStatementCallback:"http://www.w3.org/TR/webdatabase/#sqlstatementcallback",SQLStatementErrorCallback:"http://www.w3.org/TR/webdatabase/#sqlstatementerrorcallback",DatabaseSync:"http://www.w3.org/TR/webdatabase/#databasesync",SQLTransactionSyncCallback:"http://www.w3.org/TR/webdatabase/#sqltransactionsynccallback",SQLTransactionSync:"http://www.w3.org/TR/webdatabase/#sqltransactionsync",SQLResultSet:"http://www.w3.org/TR/webdatabase/#sqlresultset",SQLResultSetRowList:"http://www.w3.org/TR/webdatabase/#sqlresultsetrowlist",SQLError:"http://www.w3.org/TR/webdatabase/#sqlerror",SQLException:"http://www.w3.org/TR/webdatabase/#sqlexception",NavigatorGeolocation:"http://www.w3.org/TR/geolocation-API/#navi-geo",Geolocation:"http://www.w3.org/TR/geolocation-API/#geolocation",geolocation:"http://www.w3.org/TR/geolocation-API/#geolocation",getCurrentPosition:"http://www.w3.org/TR/geolocation-API/#get-current-position",watchPosition:"http://www.w3.org/TR/geolocation-API/#watch-position",clearWatch:"http://www.w3.org/TR/geolocation-API/#clear-watch",PositionCallback:"http://www.w3.org/TR/geolocation-API/#position-callback",PositionErrorCallback:"http://www.w3.org/TR/geolocation-API/#error-callback",PositionOptions:"http://www.w3.org/TR/geolocation-API/#position_options_interface",Position:"http://www.w3.org/TR/geolocation-API/#position_interface",Coordinates:"http://www.w3.org/TR/geolocation-API/#coordinates_interface",PositionError:"http://www.w3.org/TR/geolocation-API/#position_error_interface",Blob:"http://www.w3.org/TR/FileAPI/#blob",File:"http://www.w3.org/TR/FileAPI/#file",lastModifiedDate:"http://www.w3.org/TR/FileAPI/#dfn-lastModifiedDate",FileReader:"http://www.w3.org/TR/FileAPI/#FileReader-interface",readAsArrayBuffer:"http://www.w3.org/TR/FileAPI/#dfn-readAsArrayBuffer",readAsBinaryString:"http://www.w3.org/TR/FileAPI/#dfn-readAsBinaryStringAsync",readAsText:"http://www.w3.org/TR/FileAPI/#dfn-readAsText",readAsDataURL:"http://www.w3.org/TR/FileAPI/#dfn-readAsDataURL",FileReaderSync:"http://www.w3.org/TR/FileAPI/#FileReaderSync",FileError:"http://www.w3.org/TR/FileAPI/#FileErrorInterface",FileException:"http://www.w3.org/TR/FileAPI/#FileException",NaN:"http://es5.github.com/#x15.1.1.1",Infinity:"http://es5.github.com/#x15.1.1.2","undefined":"http://es5.github.com/#x15.1.1.3",eval:"http://es5.github.com/#x15.1.2.1",parseInt:"http://es5.github.com/#x15.1.2.2",parseFloat:"http://es5.github.com/#x15.1.2.3",isNaN:"http://es5.github.com/#x15.1.2.4",isFinite:"http://es5.github.com/#x15.1.2.4",decodeURI:"http://es5.github.com/#x15.1.3.1",decodeURIComponent:"http://es5.github.com/#x15.1.3.2",encodeURI:"http://es5.github.com/#x15.1.3.3",encodeURIComponent:"http://es5.github.com/#x15.1.3.4",Object:"http://es5.github.com/#x15.2",getPrototypeOf:"http://es5.github.com/#x15.2.3.2",getOwnPropertyDescriptor:"http://es5.github.com/#x15.2.3.3",getOwnPropertyNames:"http://es5.github.com/#x15.2.3.4",create:"http://es5.github.com/#x15.2.3.5",defineProperty:"http://es5.github.com/#x15.2.3.6",defineProperties:"http://es5.github.com/#x15.2.3.7",seal:"http://es5.github.com/#x15.2.3.8",freeze:"http://es5.github.com/#x15.2.3.9",preventExtensions:"http://es5.github.com/#x15.2.3.10",isSealed:"http://es5.github.com/#x15.2.3.11",isFrozen:"http://es5.github.com/#x15.2.3.12",isExtensible:"http://es5.github.com/#x15.2.3.13",keys:"http://es5.github.com/#x15.2.3.14",toLocaleString:"http://es5.github.com/#x15.2.4.3",hasOwnProperty:"http://es5.github.com/#x15.2.4.5",isPrototypeOf:"http://es5.github.com/#x15.2.4.6",propertyIsEnumerable:"http://es5.github.com/#x15.2.4.7",Function:"http://es5.github.com/#x15.3",apply:"http://es5.github.com/#x15.3.4.3",call:"http://es5.github.com/#x15.3.4.4",bind:"http://es5.github.com/#x15.3.4.5",Array:"http://es5.github.com/#x15.4",isArray:"http://es5.github.com/#x15.4.3.2",toLocaleString:"http://es5.github.com/#x15.4.4.3",concat:"http://es5.github.com/#x15.4.4.4",join:"http://es5.github.com/#x15.4.4.5",pop:"http://es5.github.com/#x15.4.4.6",push:"http://es5.github.com/#x15.4.4.7",reverse:"http://es5.github.com/#x15.4.4.8",shift:"http://es5.github.com/#x15.4.4.9",sort:"http://es5.github.com/#x15.4.4.11",splice:"http://es5.github.com/#x15.4.4.12",unshift:"http://es5.github.com/#x15.4.4.13",indexOf:"http://es5.github.com/#x15.4.4.14",lastIndexOf:"http://es5.github.com/#x15.4.4.15",every:"http://es5.github.com/#x15.4.4.16",some:"http://es5.github.com/#x15.4.4.17",forEach:"http://es5.github.com/#x15.4.4.18",map:"http://es5.github.com/#x15.4.4.19",filter:"http://es5.github.com/#x15.4.4.20",reduce:"http://es5.github.com/#x15.4.4.21",reduceRight:"http://es5.github.com/#x15.4.4.22",String:"http://es5.github.com/#x15.5",fromCharCode:"http://es5.github.com/#x15.5.3.2",charAt:"http://es5.github.com/#x15.5.4.4",charCodeAt:"http://es5.github.com/#x15.5.4.5",concat:"http://es5.github.com/#x15.5.4.6",indexOf:"http://es5.github.com/#x15.5.4.7",lastIndexOf:"http://es5.github.com/#x15.5.4.8",localeCompare:"http://es5.github.com/#x15.5.4.9",match:"http://es5.github.com/#x15.5.4.10",split:"http://es5.github.com/#x15.5.4.14",substring:"http://es5.github.com/#x15.5.4.15",toLowerCase:"http://es5.github.com/#x15.5.4.16",toLocaleLowerCase:"http://es5.github.com/#x15.5.4.17",toUpperCase:"http://es5.github.com/#x15.5.4.18",toLocaleUpperCase:"http://es5.github.com/#x15.5.4.19",trim:"http://es5.github.com/#x15.5.4.20",Boolean:"http://es5.github.com/#x15.6",Number:"http://es5.github.com/#x15.7",MAX_VALUE:"http://es5.github.com/#x15.7.3.2",MIN_VALUE:"http://es5.github.com/#x15.7.3.3",NaN:"http://es5.github.com/#x15.7.3.4",NEGATIVE_INFINITY:"http://es5.github.com/#x15.7.3.5",POSITIVE_INFINITY:"http://es5.github.com/#x15.7.3.6",toLocaleString:"http://es5.github.com/#x15.7.4.3",toFixed:"http://es5.github.com/#x15.7.4.5",toExponential:"http://es5.github.com/#x15.7.4.6",toPrecision:"http://es5.github.com/#x15.7.4.7",Math:"http://es5.github.com/#x15.8",E:"http://es5.github.com/#x15.8.1.1",LN10:"http://es5.github.com/#x15.8.1.2",LN2:"http://es5.github.com/#x15.8.1.3",LOG2E:"http://es5.github.com/#x15.8.1.4",LOG10E:"http://es5.github.com/#x15.8.1.5",PI:"http://es5.github.com/#x15.8.1.6",SQRT1_2:"http://es5.github.com/#x15.8.1.7",SQRT2:"http://es5.github.com/#x15.8.1.8",abs:"http://es5.github.com/#x15.8.2.1",acos:"http://es5.github.com/#x15.8.2.2",asin:"http://es5.github.com/#x15.8.2.3",atan:"http://es5.github.com/#x15.8.2.4",atan2:"http://es5.github.com/#x15.8.2.5",ceil:"http://es5.github.com/#x15.8.2.6",cos:"http://es5.github.com/#x15.8.2.7",exp:"http://es5.github.com/#x15.8.2.8",floor:"http://es5.github.com/#x15.8.2.9",max:"http://es5.github.com/#x15.8.2.11",min:"http://es5.github.com/#x15.8.2.12",pow:"http://es5.github.com/#x15.8.2.13",random:"http://es5.github.com/#x15.8.2.14",round:"http://es5.github.com/#x15.8.2.15",sin:"http://es5.github.com/#x15.8.2.16",sqrt:"http://es5.github.com/#x15.8.2.17",tan:"http://es5.github.com/#x15.8.2.18",Date:"http://es5.github.com/#x15.9",UTC:"http://es5.github.com/#x15.9.4.3",now:"http://es5.github.com/#x15.9.4.4",toDateString:"http://es5.github.com/#x15.9.5.3",toTimeString:"http://es5.github.com/#x15.9.5.4",toLocaleString:"http://es5.github.com/#x15.9.5.5",toLocaleDateString:"http://es5.github.com/#x15.9.5.6",toLocaleTimeString:"http://es5.github.com/#x15.9.5.7",getTime:"http://es5.github.com/#x15.9.5.9",getFullYear:"http://es5.github.com/#x15.9.5.10",getUTCFullYear:"http://es5.github.com/#x15.9.5.11",getMonth:"http://es5.github.com/#x15.9.5.12",getUTCMonth:"http://es5.github.com/#x15.9.5.13",getDate:"http://es5.github.com/#x15.9.5.14",getUTCDate:"http://es5.github.com/#x15.9.5.15",getDay:"http://es5.github.com/#x15.9.5.16",getUTCDay:"http://es5.github.com/#x15.9.5.17",getHours:"http://es5.github.com/#x15.9.5.18",getUTCHours:"http://es5.github.com/#x15.9.5.19",getMinutes:"http://es5.github.com/#x15.9.5.20",getUTCMinutes:"http://es5.github.com/#x15.9.5.21",getSeconds:"http://es5.github.com/#x15.9.5.22",getUTCSeconds:"http://es5.github.com/#x15.9.5.23",getMilliseconds:"http://es5.github.com/#x15.9.5.24",getUTCMilliseconds:"http://es5.github.com/#x15.9.5.25",getTimezoneOffset:"http://es5.github.com/#x15.9.5.26",setTime:"http://es5.github.com/#x15.9.5.27",setMilliseconds:"http://es5.github.com/#x15.9.5.28",setUTCMilliseconds:"http://es5.github.com/#x15.9.5.29",setSeconds:"http://es5.github.com/#x15.9.5.30",setUTCSeconds:"http://es5.github.com/#x15.9.5.31",setMinutes:"http://es5.github.com/#x15.9.5.32",setUTCMinutes:"http://es5.github.com/#x15.9.5.33",setHours:"http://es5.github.com/#x15.9.5.34",setUTCHours:"http://es5.github.com/#x15.9.5.35",setDate:"http://es5.github.com/#x15.9.5.36",setUTCDate:"http://es5.github.com/#x15.9.5.37",setMonth:"http://es5.github.com/#x15.9.5.38",setUTCMonth:"http://es5.github.com/#x15.9.5.39",setFullYear:"http://es5.github.com/#x15.9.5.40",setUTCFullYear:"http://es5.github.com/#x15.9.5.41",toUTCString:"http://es5.github.com/#x15.9.5.42",toISOString:"http://es5.github.com/#x15.9.5.43",toJSON:"http://es5.github.com/#x15.9.5.44",RegExp:"http://es5.github.com/#x15.10",exec:"http://es5.github.com/#x15.10.6.2",test:"http://es5.github.com/#x15.10.6.3",source:"http://es5.github.com/#x15.10.7.1",global:"http://es5.github.com/#x15.10.7.2",igoreCase:"http://es5.github.com/#x15.10.7.3",multiline:"http://es5.github.com/#x15.10.7.4",lastIndex:"http://es5.github.com/#x15.10.7.5",Error:"http://es5.github.com/#x15.11",EvalError:"http://es5.github.com/#x15.11.6.1",RangeError:"http://es5.github.com/#x15.11.6.2",ReferenceError:"http://es5.github.com/#x15.11.6.3",SyntaxError:"http://es5.github.com/#x15.11.6.4",TypeError:"http://es5.github.com/#x15.11.6.5",URIError:"http://es5.github.com/#x15.11.6.6",NativeError:"http://es5.github.com/#x15.11.7",JSON:"http://es5.github.com/#x15.12",stringify:"http://es5.github.com/#x15.12.3",Screen:"http://dev.w3.org/csswg/cssom-view/#the-screen-interface",screen:"http://dev.w3.org/csswg/cssom-view/#dom-window-screen",innerWidth:"http://dev.w3.org/csswg/cssom-view/#dom-window-innerwidth",innerHeight:"http://dev.w3.org/csswg/cssom-view/#dom-window-innerheight",scrollX:"http://dev.w3.org/csswg/cssom-view/#dom-window-scrollx",pageXOffset:"http://dev.w3.org/csswg/cssom-view/#dom-window-pagexoffset",scrollY:"http://dev.w3.org/csswg/cssom-view/#dom-window-scrolly",pageYOffset:"http://dev.w3.org/csswg/cssom-view/#dom-window-pageyoffset",scroll:"http://dev.w3.org/csswg/cssom-view/#dom-window-scroll",scrollTo:"http://dev.w3.org/csswg/cssom-view/#dom-window-scrollto",scrollBy:"http://dev.w3.org/csswg/cssom-view/#dom-window-scrollby",screenX:"http://dev.w3.org/csswg/cssom-view/#dom-window-screenx",screenY:"http://dev.w3.org/csswg/cssom-view/#dom-window-screeny",outerWidth:"http://dev.w3.org/csswg/cssom-view/#dom-window-outerwidth",outerHeight:"http://dev.w3.org/csswg/cssom-view/#dom-window-outerheight",MediaQueryList:"http://dev.w3.org/csswg/cssom-view/#mediaquerylist",media:"http://dev.w3.org/csswg/cssom-view/#dom-MediaQueryList-media",matches:"http://dev.w3.org/csswg/cssom-view/#dom-MediaQueryList-matches",addListener:"http://dev.w3.org/csswg/cssom-view/#dom-mediaquerylist-addlistener",removeListener:"http://dev.w3.org/csswg/cssom-view/#mediaquerylist",MediaQueryListListener:"http://dev.w3.org/csswg/cssom-view/#mediaquerylistlistener",SVGElement:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGElement",SVGAnimatedBoolean:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedBoolean",SVGAnimatedString:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedString",SVGStringList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGStringList",SVGAnimatedEnumeration:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedEnumeration",SVGAnimatedInteger:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedInteger",SVGNumber:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGNumber",SVGAnimatedNumber:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedNumber",SVGNumberList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGNumberList",SVGAnimatedNumberList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedNumberList",SVGLength:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGLength",SVGAnimatedLength:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedLength",SVGLengthList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGLengthList",SVGAnimatedLengthList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedLengthList",SVGAngle:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAngle",SVGAnimatedAngle:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedAngle",SVGColor:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGColor",SVGICCColor:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGICCColor",SVGRect:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGRect",SVGAnimatedRect:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGAnimatedRect",SVGUnitTypes:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGUnitTypes",SVGStylable:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGStylable",SVGLocatable:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGLocatable",SVGTransformable:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGTransformable",SVGTests:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGTests",SVGLangSpace:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGLangSpace",SVGExternalResourcesRequired:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGExternalResourcesRequired",SVGFitToViewBox:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGFitToViewBox",SVGZoomAndPan:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGZoomAndPan",SVGViewSpec:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGViewSpec",SVGURIReference:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGURIReference",SVGCSSRule:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGCSSRule",SVGRenderingIntent:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGRenderingIntent",ElementTimeControl:"http://www.w3.org/TR/SVG/animate.html#InterfaceElementTimeControl",TimeEvent:"http://www.w3.org/TR/SVG/animate.html#InterfaceTimeEvent",SVGAnimationElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGAnimationElement",SVGAnimateElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGAnimateElement",SVGSetElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGSetElement",SVGAnimateMotionElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGAnimateMotionElement",SVGMPathElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGMPathElement",SVGAnimateColorElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGAnimateColorElement",SVGAnimateTransformElement:"http://www.w3.org/TR/SVG/animate.html#InterfaceSVGAnimateTransformElement",SVGRectElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGRectElement",SVGCircleElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGCircleElement",SVGEllipseElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGEllipseElement",SVGLineElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGLineElement",SVGAnimatedPoints:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGAnimatedPoints",SVGPolylineElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGPolylineElement",SVGPolygonElement:"http://www.w3.org/TR/SVG/shapes.html#InterfaceSVGPolygonElement",SVGClipPathElement:"http://www.w3.org/TR/SVG/masking.html#InterfaceSVGClipPathElement",SVGMaskElement:"http://www.w3.org/TR/SVG/masking.html#InterfaceSVGMaskElement",SVGColorProfileElement:"http://www.w3.org/TR/SVG/color.html#InterfaceSVGColorProfileElement",SVGColorProfileRule:"http://www.w3.org/TR/SVG/color.html#InterfaceSVGColorProfileRule",SVGDocument:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGDocument",SVGSVGElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGSVGElement",SVGGElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGGElement",SVGDefsElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGDefsElement",SVGDescElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGDescElement",SVGTitleElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGTitleElement",SVGSymbolElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGSymbolElement",SVGUseElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGUseElement",SVGElementInstance:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGElementInstance",SVGElementInstanceList:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGElementInstanceList",SVGImageElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGImageElement",SVGSwitchElement:"http://www.w3.org/TR/SVG/struct.html#InterfaceSVGSwitchElement",GetSVGDocument:"http://www.w3.org/TR/SVG/struct.html#InterfaceGetSVGDocument",SVGStyleElement:"http://www.w3.org/TR/SVG/styling.html#InterfaceSVGStyleElement",SVGPoint:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGPoint",SVGPointList:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGPointList",SVGStringList:"http://www.w3.org/TR/SVG/types.html#InterfaceSVGStringList",SVGMatrix:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGMatrix",multiply:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__multiply",inverse:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__inverse",scale:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__scale",scaleNonUniform:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__scaleNonUniform",rotate:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__rotate"
,rotateFromVector:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__rotateFromVector",flipX:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__flipX",flipY:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__flipY",skewX:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__skewX",skewY:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGMatrix__skewY",SVGTransform:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGTransform",SVGTransformList:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGTransformList",createSVGTransformFromMatrix:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransformList__createSVGTransformFromMatrix",consolidate:"http://www.w3.org/TR/SVG/coords.html#__svg__SVGTransformList__consolidate",SVGAnimatedTransformList:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGAnimatedTransformList",SVGPreserveAspectRatio:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGPreserveAspectRatio",SVGAnimatedPreserveAspectRatio:"http://www.w3.org/TR/SVG/coords.html#InterfaceSVGAnimatedPreserveAspectRatio",SVGPathSeg:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSeg",SVGPathSegClosePath:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegClosePath",SVGPathSegMovetoAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegMovetoAbs",SVGPathSegMovetoRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegMovetoRel",SVGPathSegLinetoAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoAbs",SVGPathSegLinetoRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoRel",SVGPathSegCurvetoCubicAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoCubicAbs",SVGPathSegCurvetoCubicRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoCubicRel",SVGPathSegCurvetoQuadraticAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoQuadraticAbs",SVGPathSegCurvetoQuadraticRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoQuadraticRel",SVGPathSegArcAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegArcAbs",SVGPathSegArcRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegArcRel",SVGPathSegLinetoHorizontalAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoHorizontalAbs",SVGPathSegLinetoHorizontalRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoHorizontalRel",SVGPathSegLinetoVerticalAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoVerticalAbs",SVGPathSegLinetoVerticalRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegLinetoVerticalRel",SVGPathSegCurvetoCubicSmoothAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoCubicSmoothAbs",SVGPathSegCurvetoCubicSmoothRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoCubicSmoothRel",SVGPathSegCurvetoQuadraticSmoothAbs:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoQuadraticSmoothAbs",SVGPathSegCurvetoQuadraticSmoothRel:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegCurvetoQuadraticSmoothRel",SVGPathSegList:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathSegList",SVGAnimatedPathData:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGAnimatedPathData",SVGPathElement:"http://www.w3.org/TR/SVG/paths.html#InterfaceSVGPathElement",SVGTextContentElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTextContentElement",SVGTextPositioningElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTextPositioningElement",SVGTextElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTextElement",SVGTSpanElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTSpanElement",SVGTRefElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTRefElement",SVGTextPathElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGTextPathElement",SVGAltGlyphElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGAltGlyphElement",SVGAltGlyphDefElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGAltGlyphDefElement",SVGAltGlyphItemElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGAltGlyphItemElement",SVGGlyphRefElement:"http://www.w3.org/TR/SVG/text.html#InterfaceSVGGlyphRefElement",SVGPaint:"http://www.w3.org/TR/SVG/painting.html#InterfaceSVGPaint",SVGMarkerElement:"http://www.w3.org/TR/SVG/painting.html#InterfaceSVGMarkerElement",SVGGradientElement:"http://www.w3.org/TR/SVG/pservers.html#InterfaceSVGGradientElement",SVGLinearGradientElement:"http://www.w3.org/TR/SVG/pservers.html#InterfaceSVGLinearGradientElement",SVGRadialGradientElement:"http://www.w3.org/TR/SVG/pservers.html#InterfaceSVGRadialGradientElement",SVGStopElement:"http://www.w3.org/TR/SVG/pservers.html#InterfaceSVGStopElement",SVGPatternElement:"http://www.w3.org/TR/SVG/pservers.html#InterfaceSVGPatternElement",SVGFilterElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFilterElement",SVGFilterPrimitiveStandardAttributes:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFilterPrimitiveStandardAttributes",SVGFEBlendElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEBlendElement",SVGFEColorMatrixElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEColorMatrixElement",SVGFEComponentTransferElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEComponentTransferElement",SVGComponentTransferFunctionElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGComponentTransferFunctionElement",SVGFEFuncRElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEFuncRElement",SVGFEFuncGElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEFuncGElement",SVGFEFuncBElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEFuncBElement",SVGFEFuncAElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEFuncAElement",SVGFECompositeElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFECompositeElement",SVGFEConvolveMatrixElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEConvolveMatrixElement",SVGFEDiffuseLightingElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEDiffuseLightingElement",SVGFEDistantLightElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEDistantLightElement",SVGFEPointLightElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEPointLightElement",SVGFESpotLightElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFESpotLightElement",SVGFEDisplacementMapElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEDisplacementMapElement",SVGFEFloodElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEFloodElement",SVGFEGaussianBlurElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEGaussianBlurElement",SVGFEImageElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEImageElement",SVGFEMergeElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEMergeElement",SVGFEMergeNodeElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEMergeNodeElement",SVGFEMorphologyElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEMorphologyElement",SVGFEOffsetElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFEOffsetElement",SVGFESpecularLightingElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFESpecularLightingElement",SVGFETileElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFETileElement",SVGFETurbulenceElement:"http://www.w3.org/TR/SVG/filters.html#InterfaceSVGFETurbulenceElement",SVGCursorElement:"http://www.w3.org/TR/SVG/interact.html#InterfaceSVGCursorElement",SVGFontElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontElement",SVGGlyphElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGGlyphElement",SVGMissingGlyphElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGMissingGlyphElement",SVGHKernElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGHKernElement",SVGVKernElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGVKernElement",SVGFontFaceElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontFaceElement",SVGFontFaceSrcElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontFaceSrcElement",SVGFontFaceUriElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontFaceUriElement",SVGFontFaceFormatElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontFaceFormatElement",SVGFontFaceNameElement:"http://www.w3.org/TR/SVG/fonts.html#InterfaceSVGFontFaceNameElement",SVGMetadataElement:"http://www.w3.org/TR/SVG/metadata.html#InterfaceSVGMetadataElement",SVGForeignObjectElement:"http://www.w3.org/TR/SVG/extend.html#InterfaceSVGForeignObjectElement",SVGException:"http://www.w3.org/TR/SVG/svgdom.html#ExceptionSVGException",Console:"http://getfirebug.com/wiki/index.php/Console_API",assert:"http://getfirebug.com/wiki/index.php/Console_API#console.assert.28expression.5B.2C_object.2C_....5D.29",count:"http://getfirebug.com/wiki/index.php/Console_API#console.count.28.5Btitle.5D.29",debug:"http://getfirebug.com/wiki/index.php/Console_API#console.debug.28object.5B.2C_object.2C_....5D.29",dir:"http://getfirebug.com/wiki/index.php/Console_API#console.dir.28object.29",dirXML:"http://getfirebug.com/wiki/index.php/Console_API#console.dirxml.28node.29",error:"http://getfirebug.com/wiki/index.php/Console_API#console.error.28object.5B.2C_object.2C_....5D.29",group:"http://getfirebug.com/wiki/index.php/Console_API#console.group.28object.5B.2C_object.2C_....5D.29",groupCollapsed:"http://getfirebug.com/wiki/index.php/Console_API#console.groupCollapsed.28object.5B.2C_object.2C_....5D.29",groupEnd:"http://getfirebug.com/wiki/index.php/Console_API#console.groupEnd.28.29",info:"http://getfirebug.com/wiki/index.php/Console_API#console.info.28object.5B.2C_object.2C_....5D.29",profile:"http://getfirebug.com/wiki/index.php/Console_API#console.profile.28.5Btitle.5D.29",profileEnd:"http://getfirebug.com/wiki/index.php/Console_API#console.profileEnd.28.29",table:"http://getfirebug.com/wiki/index.php/Console_API#console.table.28data.5B.2C_columns.5D.29",time:"http://getfirebug.com/wiki/index.php/Console_API#console.time.28name.29",timeEnd:"http://getfirebug.com/wiki/index.php/Console_API#console.timeEnd.28name.29",trace:"http://getfirebug.com/wiki/index.php/Console_API#console.trace.28.29",warn:"http://getfirebug.com/wiki/index.php/Console_API#console.warn.28object.5B.2C_object.2C_....5D.29",postError:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i8",Extension:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#opext",extension:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i2",ondisconnect:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i29",onmessage:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i30",attachEvent:"http://msdn.microsoft.com/en-us/library/ms536343(VS.85).aspx",detachEvent:"http://msdn.microsoft.com/en-us/library/ms536411(VS.85).aspx",navigate:"http://msdn.microsoft.com/en-us/library/ms536638(VS.85).aspx",event:"http://msdn.microsoft.com/en-us/library/ms535863(VS.85).aspx",DOMParser:"https://developer.mozilla.org/en/DOMParser",atob:"https://developer.mozilla.org/En/DOM/Window.atob",btoa:"https://developer.mozilla.org/en/DOM/window.btoa",releaseEvents:"https://developer.mozilla.org/en/window.releaseEvents",captureEvents:"https://developer.mozilla.org/en/DOM/window.captureEvents",XMLSerializer:"https://developer.mozilla.org/en/XMLSerializer",getSelection:"https://developer.mozilla.org/en/window.getSelection",screenLeft:"http://msdn.microsoft.com/en-us/library/ms534389(VS.85).aspx",screenTop:"http://msdn.microsoft.com/en-us/library/ms534390(VS.85).aspx",status:"http://msdn.microsoft.com/en-us/library/ms534648(VS.85).aspx",closed:"http://msdn.microsoft.com/en-us/library/ms533574(VS.85).aspx",defaultStatus:"http://msdn.microsoft.com/en-us/library/ms533717(VS.85).aspx",unescape:"http://msdn.microsoft.com/en-us/library/dz4x90hk(VS.85).aspx",Widget:"http://www.w3.org/TR/widgets-apis/#the-widget-interface",WindowWidget:"http://www.w3.org/TR/widgets-apis/#windowwidget",abort:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-abort",blur:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-blur",click:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-click",compositionstart:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-compositionstart",compositionupdate:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-compositionupdate",compositionend:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-compositionend",dblclick:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-dblclick",DOMActivate:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMActivate",DOMAttributeNameChanged:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttributeNameChanged",DOMAttrModified:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttrModified",DOMCharacterDataModified:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMCharacterDataModified",DOMElementNameChanged:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMElementNameChanged",DOMFocusIn:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMFocusIn",DOMFocusOut:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMFocusOut",DOMNodeInserted:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted",DOMNodeInsertedIntoDocument:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInsertedIntoDocument",DOMNodeRemoved:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved",DOMNodeRemovedFromDocument:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemovedFromDocument",DOMSubtreeModified:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMSubtreeModified",error:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-error",focus:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focus",focusin:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focusIn",focusout:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-focusout",keydown:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keydown",keypress:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keypress",keyup:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keyup",load:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-load",mousedown:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mousedown",mouseenter:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mouseenter",mouseleave:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mouseleave",mousemove:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mousemove",mouseout:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mouseout",mouseover:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mouseover",mouseup:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-mouseup",resize:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-resize",scroll:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-scroll",select:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-select",textInput:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-textInput",unload:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-unload",wheel:"http://www.w3.org/TR/DOM-Level-3-Events/#event-type-wheel",loadstart:"http://dev.w3.org/html5/spec/video.html#event-media-loadstart",progress:"http://dev.w3.org/html5/spec/video.html#event-media-progress",suspend:"http://dev.w3.org/html5/spec/video.html#event-media-suspend",abort:"http://dev.w3.org/html5/spec/video.html#event-media-abort",error:"http://dev.w3.org/html5/spec/video.html#event-media-error",emptied:"http://dev.w3.org/html5/spec/video.html#event-media-emptied",stalled:"http://dev.w3.org/html5/spec/video.html#event-media-stalled",play:"http://dev.w3.org/html5/spec/video.html#event-media-play",pause:"http://dev.w3.org/html5/spec/video.html#event-media-pause",loadedmetadata:"http://dev.w3.org/html5/spec/video.html#event-media-loadedmetadata",loadeddata:"http://dev.w3.org/html5/spec/video.html#event-media-loadeddata",waiting:"http://dev.w3.org/html5/spec/video.html#event-media-waiting",playing:"http://dev.w3.org/html5/spec/video.html#event-media-playing",canplay:"http://dev.w3.org/html5/spec/video.html#event-media-canplay",canplaythrough:"http://dev.w3.org/html5/spec/video.html#event-media-canplaythrough",seeking:"http://dev.w3.org/html5/spec/video.html#event-media-seeking",seeked:"http://dev.w3.org/html5/spec/video.html#event-media-seeked",timeupdate:"http://dev.w3.org/html5/spec/video.html#event-media-timeupdate",ended:"http://dev.w3.org/html5/spec/video.html#event-media-ended",ratechange:"http://dev.w3.org/html5/spec/video.html#event-media-ratechange",durationchange:"http://dev.w3.org/html5/spec/video.html#event-media-durationchange",volumechange:"http://dev.w3.org/html5/spec/video.html#event-media-volumechange",checking:"http://dev.w3.org/html5/spec/offline.html#event-appcache-checking",noupdate:"http://dev.w3.org/html5/spec/offline.html#event-appcache-noupdate",downloading:"http://dev.w3.org/html5/spec/offline.html#event-appcache-downloading",progress:"http://dev.w3.org/html5/spec/offline.html#event-appcache-progress",cached:"http://dev.w3.org/html5/spec/offline.html#event-appcache-cached",updateready:"http://dev.w3.org/html5/spec/offline.html#event-appcache-updateready",obsolete:"http://dev.w3.org/html5/spec/offline.html#event-appcache-obsolete",error:"http://dev.w3.org/html5/spec/offline.html#event-appcache-error",dragstart:"http://dev.w3.org/html5/spec/dnd.html#event-dragstart",drag:"http://dev.w3.org/html5/spec/dnd.html#event-drag",dragenter:"http://dev.w3.org/html5/spec/dnd.html#event-dragenter",dragleave:"http://dev.w3.org/html5/spec/dnd.html#event-dragleave",dragover:"http://dev.w3.org/html5/spec/dnd.html#event-dragover",drop:"http://dev.w3.org/html5/spec/dnd.html#event-drop",dragend:"http://dev.w3.org/html5/spec/dnd.html#event-dragend",BeforeExternalScript:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i10",BeforeScript:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i11",AfterScript:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i12",BeforeEvent:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i13",AfterEvent:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i15",BeforeEventListener:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i17",AfterEventListener:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i19",BeforeJavascriptURL:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i21",AfterJavascriptURL:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i22",pluginInitialized:"http://www.opera.com/docs/apis/extensions/injectedscriptsguide/#i23"},http:{OPTIONS:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.2",GET:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3",HEAD:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4",POST:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5",PUT:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.6",DELETE:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.7",TRACE:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.8",CONNECT:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.9",100:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.1.1",101:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.1.2",200:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1",201:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2",202:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3",203:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.4",204:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5",205:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.6",206:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.7",300:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.1",301:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2",302:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3",303:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4",304:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5",305:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.6",306:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.7",307:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.8",400:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1",401:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2",402:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.3",403:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4",404:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5",405:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.6",406:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.7",407:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.8",408:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.9",409:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.10",410:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.11",411:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.12",412:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.13",413:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.14",414:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.15",415:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.16",416:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.17",417:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.18",418:"http://www.apps.ietf.org/rfc/rfc2324.html#sec-2.3.2",500:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1",501:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.2",502:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.3",503:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.4",504:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.5",505:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.6",Accept:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1","Accept-Charset":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2","Accept-Encoding":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3","Accept-Language":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4","Accept-Ranges":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.5",Age:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.6",Allow:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.7",Authorization:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8","Cache-Control":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9",Connection:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10","Content-Disposition":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1","Content-Encoding":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11","Content-Language":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.12","Content-Length":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13","Content-Location":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.14","Content-MD5":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.15","Content-Range":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16","Content-Type":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17",Date:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18",ETag:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19",Expect:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.20",Expires:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21",From:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.22",Host:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23","If-Match":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24","If-Modified-Since":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25","If-None-Match":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26","If-Range":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.27","If-Unmodified-Since":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.28","Last-Modified":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29",Location:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30","Max-Forwards":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.31",Pragma:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32","Proxy-Authenticate":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.33","Proxy-Authorization":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.34",Range:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35",Referer:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.36","Retry-After":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.37",Server:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.38",TE:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.39",Trailer:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.40","Transfer-Encoding":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41",Upgrade:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.42","User-Agent":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43",Vary:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44",Via:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.45",Warning:"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.46","WWW-Authenticate":"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.47",Cookie:"http://www.ietf.org/rfc/rfc2965.txt",Cookie2:"http://www.ietf.org/rfc/rfc2965.txt","Set-Cookie2":"http://www.ietf.org/rfc/rfc2965.txt"}};var Queue=function(a){this.queue=function(a){};this.stop_processing=function(){};this.continue_processing=function(){};this._msg_queue=[];this._is_processing=!1;this._queue_msg_with_handler=function(a){var b=Array.prototype.slice.call(arguments,1);this._is_processing?this._msg_queue.push([a,b]):a.apply(this._handler_object,b)};this._process_msg_queue=function(){const a=0,b=1;var c=null;while(!this._is_processing&&this._msg_queue.length){c=this._msg_queue.shift();c[a].apply(this._handler_object,c[b])}};this.queue=function(a){return this._queue_msg_with_handler.bind(this,a)};this.stop_processing=function(){this._is_processing=!0};this.continue_processing=function(){if(this._is_processing){this._is_processing=!1;this._process_msg_queue()}};this.init=function(a){this._handler_object=a};this.init(a)};window.potools={parse:function(a,b){return this._parser.parseString(a,b)},malformed_interpolation_markers:function(a){var b=/%\(\w+\)(?:[^s]|$)/g;return a.filter(function(a){return a.msgstr.match(b)})},missing_interpolation_markers:function(a){var b=/%\((\w+\))s/g;return a.filter(function(a){return(a.msgstr.match(b)||[]).sort().join("")==(a.msgid.match(b)||[]).sort().join("")?null:a})},_parser:function(){var a,b=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},c=Array.prototype.slice;a=new(function(){function d(){}var a;a=function(a){var b;return(b=a[0]+a.slice(-1))==='""'||b==="''"?a.slice(1,-1):a};d.prototype.parseString=function(a,c){var d,e,f;f=function(){var b,c,e,f;e=this._getEntryBlocks(a);f=[];for(b=0,c=e.length;b<c;b++){d=e[b];f.push(this._parseEntry(d))}return f}.call(this).filter(Boolean);c&&(f=function(){var a,d,g;g=[];for(a=0,d=f.length;a<d;a++){e=f[a];b.call(e.scopes,c)>=0&&g.push(e)}return g}());return f};d.prototype._getEntryBlocks=function(a){var b,c,d,e,f;e=a.split(/\n{2,}/g);f=[];for(c=0,d=e.length;c<d;c++){b=e[c];f.push(b.split("\n"))}return f};d.prototype._parseEntry=function(b){var d,e,f,g,h,i,j,k,l,m,n;e={msgid:[],msgstr:[],tcomments:[],ecomments:[],scopes:[],references:[],flags:[]};d=[];for(i=0,k=b.length;i<k;i++){f=b[i];m=f.split(" "),g=m[0],h=2<=m.length?c.call(m,1):[];h=h.join(" ");switch(g){case"msgstr":e.msgstr.push(a(h));d=e.msgstr;break;case"msgid":e.msgid.push(a(h));d=e.msgid;break;case"msgctxt":e.msgctxt=a(h);break;case"#":e.tcomments.push(h);break;case"#.":e.ecomments.push(h);break;case"#:":e.references.push(h);break;case"#,":e.flags.push(h);break;case"#|":null;break;default:d.push(a(f))}}e.msgid=e.msgid.join("");e.msgstr=e.msgstr.join("");n=e.ecomments;for(j=0,l=n.length;j<l;j++){f=n[j];f.match(/scope: /i)&&(e.scopes=e.scopes.concat(f.slice(7).split(",")))}return e.msgid?e:null};return d}());return a}.call(this)};var SelectionController=function(a,b){this.is_selectable=function(a){};var c=null,d=null,e=0;const f=GlobalActionHandler.RE_TEXT_INPUTS;var g=function(a){var b=a.target;if(!(b.nodeName.toLowerCase()=="textarea"||b.nodeName.toLowerCase()=="select"||b.nodeName.toLowerCase()=="input"&&f.test(b.type))){if(c=j(a.target)){this.addEventListener("mousemove",h,!1);this.addEventListener("mouseup",i,!1)}else a.preventDefault();d=null}},h=function(){var a=getSelection();if(a&&!a.isCollapsed){if(!d){d=a.anchorNode;e=a.anchorOffset}var b=a.getRangeAt(0);if(b&&!c.contains(b.commonAncestorContainer)){if(a.anchorNode==b.startContainer){var f=c.lastChild;f&&b.setEnd(f,f.nodeType==3?f.nodeValue.length:f.childNodes.length)}else if(c.firstChild){b.setStart(c.firstChild,0);b.setEnd(d,e)}a.removeAllRanges();a.addRange(b)}}},i=function(){this.removeEventListener("mousemove",h,!1);this.removeEventListener("mouseup",i,!1);setTimeout(h,0)},j=function(c){if(c.get_ancestor(b))return null;return c.get_ancestor(a)};this.is_selectable=function(a){return j(a)};document.addEventListener("mousedown",g,!0)},OperaDBLclickMenuController=function(){var a=!1,b=null,c=getSelection(),d=null;const e=Math.pow;var f=function(a,b){return e(e(a.clientX-b.clientX,2)+e(a.clientY-b.clientY,2),.5)},g=function(d){a=!c.isCollapsed;b=d},h=function(){if(c&&d){c.addRange(d);d=null}},i=function(e){if(b&&e.target==b.target&&f(b,e)<3&&!a&&!c.isCollapsed){d=c.getRangeAt(0);c.removeAllRanges();setTimeout(h,0)}};document.addEventListener("mousedown",g,!0);document.addEventListener("mouseup",i,!0)},URI=function(a){this._init(a)},URIPrototype=function(a){var b=25;["hash","host","pathname","protocol","search","path_parts"].forEach(function(a){this.__defineGetter__(a,function(){this._is_parsed||this._parse();return this["_"+a]});this.__defineSetter__(a,function(){})},this);this.__defineGetter__("filename",function(){if(this._filename===undefined&&(this._is_parsed||this[a]))if(!this._is_data_uri){this.pathname;var b=this.pathname.lastIndexOf("/");b>-1?this._filename=this.pathname.slice(b+1):this._filename=""}else this._filename="";return this._filename});this.__defineSetter__("filename",function(){});this.__defineGetter__("extension",function(){if(this._extension===undefined&&(this._is_parsed||this[a]))if(!this._is_data_uri){var b=this.filename.lastIndexOf(".");b>-1?this._extension=this.filename.slice(b+1):this._extension=""}else this._extension="";return this._extension});this.__defineSetter__("extension",function(){});this.__defineGetter__("dir_pathname",function(){if(this._dir_pathname===undefined&&(this._is_parsed||this[a]))if(!this._is_data_uri){var b=this.pathname.lastIndexOf("/");b>-1?this._dir_pathname=this.pathname.slice(0,b+1):this._dir_pathname=""}else this._dir_pathname="";return this._dir_pathname});this.__defineSetter__("dir_pathname",function(){});this.__defineGetter__("basename",function(){this._basename===undefined&&(this._is_parsed||this[a])&&(this._is_data_uri?this._basename="":this.filename?this._basename=this.filename:this.path_parts.length?this._basename=this.path_parts[this.path_parts.length-1]+"/":this._basename="");return this._basename});this.__defineSetter__("basename",function(){});this.__defineGetter__("short_url",function(){if(this._short_url===undefined&&(this._is_parsed||this[a]))if(this._is_data_uri){var c=this._protocol+this._pathname;this._short_url=c.length<=b?c:c.slice(0,b)+"…"}else this._short_url=this.filename||this.basename||this.host;return this._short_url});this.__defineSetter__("short_url",function(){});this.__defineGetter__("abs_dir",function(){this._abs_dir===undefined&&(this._is_parsed||this[a])&&(this._is_data_uri?this._abs_dir="":this._abs_dir=(this.protocol?this.protocol+"//":"")+this.host+this.dir_pathname);return this._abs_dir});this.__defineSetter__("abs_dir",function(){});this.__defineGetter__("origin",function(){this._origin===undefined&&(this._is_parsed||this[a])&&(this._is_data_uri?this._origin="":this._origin=this.protocol+"//"+this.host);return this._origin});this.__defineSetter__("origin",function(){});this.__defineGetter__("params",function(){if(this._params===undefined&&
(this._is_parsed||this[a])){this._params=[];if(!this._is_data_uri&&this._search[0]==="?"){var b=this._search.slice(1).split("&");b.forEach(function(a){var b=a.indexOf("=");b===-1&&(b=a.length);var c=a.slice(0,b);if(c){var d=a.slice(b+1);this._params.push({key:decodeURIComponent(c),value:decodeURIComponent(d)})}},this)}}return this._params});this.__defineSetter__("params",function(){});this.__defineGetter__("short_distinguisher",function(){if(this._short_distinguisher===undefined&&(this._is_parsed||this[a])){var b=this.search+this.hash,c=b&&this.pathname.lastIndexOf("/")===this.pathname.length-1?"/":"";if(this.path_parts.length){var d=this.path_parts;this._short_distinguisher=d[d.length-1]+c+b}else this._is_data_uri?this._short_distinguisher=this._protocol+this._pathname+this._hash:this._short_distinguisher=this.host+c+b}return this._short_distinguisher});this.__defineSetter__("short_distinguisher",function(){});this._parse=function(b){!b&&this[a]&&(b=this[a]);if(b){this._is_data_uri=b.indexOf("data:")===0;var c=b,d=c.indexOf("#");if(d>-1){this._hash=c.slice(d);c=c.slice(0,d)}else this._hash="";d=c.indexOf("?");if(d>-1&&!this._is_data_uri){this._search=c.slice(d);c=c.slice(0,d)}else this._search="";d=c.indexOf(":");if(d>-1){this._protocol=c.slice(0,d+1);c=c.slice(d+1);while(c.indexOf("/")===0)c=c.slice(1)}else this._protocol="";d=c.indexOf("/");if(d>-1&&!this._is_data_uri){this._host=c.slice(0,d);c=c.slice(d)}else if(this._protocol&&!this._is_data_uri){this._host=c;c=""}else this._host="";c?this._pathname=c:this._pathname="";this._pathname&&!this._is_data_uri?this._path_parts=this._pathname.split("/").filter(Boolean):this._path_parts=[];this._is_parsed=!0}};this._init=function(a){this._parse(a)}};URI.prototype=new URIPrototype;if(Object.create)var HashMap=function(){return Object.create(null)};else{var HashMap=function(){};HashMap.prototype=new function(){this.__defineGetter__=undefined;this.__defineSetter__=undefined;this.__lookupGetter__=undefined;this.__lookupSetter__=undefined;this.constructor=undefined;this.hasOwnProperty=undefined;this.isPrototypeOf=undefined;this.propertyIsEnumerable=undefined;this.toLocaleString=undefined;this.toString=undefined;this.valueOf=undefined}}window.debug_helpers||(window.debug_helpers={});debug_helpers.liveSource=new function(){var a={lines:1,lineNumbers:1,tag:"#05F",attrTitle:"#E00",attrValue:"#C0C",attrDoc:"#800080",comment:"green",darkLine:"#FAFAFA",lineHead:"#999"},b="  ",c={img:1,br:1,link:1,input:1,hr:1,meta:1},d=!1,e=0,f=a.lineNumbers,g=a.lines,h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEeklEQVR4Xr1Xb0hbVxS%2FN3lPncZIFMXV%2Bmd0dmjJuipszH8wnCJ%2BEIQh0Y1ULTpFXN1kofjdsbmiUldmmWwuON2H4kdBYU7FL%2BIGw4GFiR2skagMqyb%2By0vifufSF5Yu%2BmJdPHC81%2FPuueeX3zn3vPv48fEx45y%2Fzhh7D%2Fo21MQiK7vQeehDxF7imFyNi4v7cWRkJL24uFhJSkpyw%2BaLUHD99va2YWZmRq6vr3%2Bys7NjIQBdo6OjH9fW1i76fL7vgMoB9UQiOpiWoZf1en3D2NjYm3V1dX0S7O%2BUl5d7FUX5HvqYRVYU6J%2ByLA9XVlbmYf4uATAlJia6IH%2F5%2FX52EeL1ep8YjUYXpkYAEOI7ODjwsIsTJT4%2BXtSZpFoODw9DrhwaGvpkb2%2FPjClnYUhUVNRyaWnpveTkZMVkMmkWswCAojsRgNvtvt7d3X0tNjY2FJVsf3%2BfbWxssLS0NLa2tsb6%2B%2FtfmpiYsJWUlNzlnB%2FGxMSEzCvFDIsBnAwdBd%2Fd3T0tp4zWJCQksI6Ojis9PT3S9PS0DcX2GZjwEghNBlADIRegMHU0Li8vExssPz9f2FvuP2KDbTk0FSyoQiC6uroywRpfWloymM1mF0D4NRnAJicyQGNubi7NVbMIrsrR0ZEYU1JSAnt5PB55dXXVmJqauo9Gp2gyAKeT6A3JwIOmX8XY9OCGSN%2FU1JSaJlpHYPUAJuOZ2PuFGUAKOI05OTkEhv5XAwc2ysrKEv6gmtYIQJOTkxyNjaG%2F6OjZCzNAv4TGlZUV5nA4WFFRkbC3Df7B7rdcZUMtvwWtt9x9VQUuAPxvDGRnZ7PMzMyA41cfZov5ra%2BvB61Hn2c6nU74ITgpC4sBNJtTT8Hi4iJbX19nZWVlwv7RN6tivNd0hf3e1hbkU2C3E3PEAJ0u2luTAc0izMvLo2oP1ED%2FrVdUgOzawMC%2FOyH1BMEAfFlYDEAI5anHcG5uTtRAdXW1sD%2B6fTvk%2BjcGB1U%2FjqPIVQa0UqAJoKCgIIiB1%2Fr6TkqZSjGlgI4kNxgM7DyNiNOI%2Fi5qAJcIYf%2FU7mBfWi9T6%2F2Pz%2Fj4OPmFnwKg0QSASwt1t8Av%2FOKDS2Le29sbtD46OjoyxxC%2FSrz1Ghsbhf3OD04xfv7%2By6yzs%2FN5BlQAOqTtfAxIkiQAVFVVBdmJflXwCg4FnE7Q%2BRlAAXF6lpGRwcIVrA9KgSzL7MyvYzjLsMWhqzkqKiqiaUOq7HBBoF62ACQZ%2Fjvw8wCEcqYLCd5sJoAwbG1tDaAQjaQwy1CdRmw%2F7c859yA4sZHgg%2BCesHGmKxl6%2BlP40SZePHdjw79h5kJPl%2BNn6ofvEWroKdRF%2B4digEN%2FQRMyFhYWWp1Op8IiL%2FTalhYWFuy4qLgkYhvv7Es1NTXpuMs9vggAFoslHamJx9RJAH6enZ0134SApm%2Ftdvva5uamNxKBcWWTrFZrWkNDw01cWin2T%2FTnYXNzc%2FXw8PBb7e3tN2w2mxv58Ufo21CHk2WYn5%2BPam1tdVDs5z%2FPS6AGFllxQ%2BfUz%2FN%2FAGv8CRiMYmtNAAAAAElFTkSuQmCC",i=function(a){return"<span class='tag'>&lt;"+a+""},j=function(a){return(a?"/":"")+"&gt;</span>"},k=function(a,b){if(b||c[a.toLowerCase()])return"";return"<span class='tag'>&lt;/"+a+"&gt;</span>"},l=function(){var a=document.doctype,c="";a&&(c=p()+i("!DOCTYPE")+" <span class='attrDoc'>"+a.nodeName+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(a.systemId?"</span></span></span></li>"+p()+"<span class='tag'><span class='attrDoc'>"+b+'"'+a.systemId+'"':"")+"</span>"+j()+"</span></li>");return c},m=function(a){var c=a.attributes,d=null,e=null,f="",g=0;for(;d=c[g];g++){e=a.getAttribute(d.name);if(e&&(a.nodeName.toLowerCase()!="a"||d.name!="SHAPE"||e!="rect")){e=e.replace(/</g,"&lt;").replace(/</g,"&lt;").replace(/\t/g,b);f+=" <span class='attrTitle'>"+d.name+"</span>"+"="+"<span class='attrValue'>\""+e+'"</span> '}}return f},n=function(a){return text=a.nodeValue.replace(/[\n\t\r\u00A0]+ */g,"").replace(/ +/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;")},o=function(a){var c=0,d="";while(c<a){d+=b;c++}return d},p=function(){var a=e.toString();while(a.length<3)a="0"+a;return"<li class='line"+(g&&e++&1?" dark'":"'")+"><span>"};this.updateNumbers=function(a){a.checked?a.ownerDocument.body.className="":a.ownerDocument.body.className="hideLineNumbers"};var q=function(a,b,c){var e=o(b++),f="";switch(a.nodeType){case 1:var g=a.childNodes,h=null,l=0,r=g.length==0||g.length==1&&g[0].nodeType==3,s=d&&g.length==0,t=p()+e+i(a.nodeName)+m(a)+j(s);r||(t+="</span></li>");for(;h=g[l];l++)t+=q(h,b,!r&&h.nodeType==3);r?t+=(/textarea/i.test(a.nodeName)?a.value:"")+k(a.nodeName,s)+"</span></li>":t+=p()+e+k(a.nodeName,s)+"</span></li>";return t;case 3:return(f=n(a))&&c?p()+e+f+"</span></li>":f;case 8:f=n(a);return p()+e+"<span class='comment'>&lt;!--"+f+"--&gt;</span></span></li>";case 4:f=n(a);return p()+e+"<span class='cdata'>&lt;![CDATA[</span>"+f+"<span class='cdata'>]]&gt;</span></span></li>"}return a.nodeType},r=function(){var a=l(),b=document.documentElement;a+=q(b,0);return a};this.open=function(){d=/[a-z]/.test(document.documentElement.nodeName);var b='<!DOCTYPE html PUBLIC><html><head><title></title><style type=\'text/css\'>body {padding:5px;margin:0;font-family:sans-serif;font-size:.7em;background: #FFF url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAqCAIAAAD9HKYrAAAAOUlEQVQY062MsQ2AQBDDrOw%2F6xc0TxVTHHoxAEXkwnLY%2B0YN8NvEKEEz30MdR03x%2BLav97Tfbq3rAYdRNs%2F1y8dMAAAAAElFTkSuQmCC") scroll repeat-x 0 2px;color:#000;}#logo {height:40px;border:none;padding:1px;margin:0;}#logo a{ content:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAAPCAYAAAA1f%2BslAAAABGdBTUEAAK%2FINwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAALmSURBVFjD7VnRjeQgDE0LtEALtJAW0kJaoAVaoAVaoAX%2B5psWaIElOnP3xmfCjFazl9ENkqUhcRLg2c%2FPu8vyGe8wTLPaLE89b8uim6VmuVklO%2Bb%2B9utFPzG2ZrFZIQvN1osfsqc1%2F8TQBGh9FNAOZCBDcPcXLzbAYhNFYZ%2FvFwVTUeBZmltau7kUoOz6DqC%2BaqEWqETD9R02YC4I6EZr62uubH49QOle6JnL%2FD1kcbwRPdLvu6xuv7fuJ3y%2B0CI34V6ke57VEU%2BAJ5pHgZ41UHgWMj3Dc8d7HGWdh%2FcmyECJVRI9U8H6fhSswwPzxEEpMfTOTBZYcEiAavLre7SPANrByOB7AFkIVE%2B%2FD58VsjoKQbE%2FGXU7EwKaHVqEw8dM1lCLESD8fgWfSoBqqN8eqN9O6BZLRlz%2BBL9maw2DAF5hPQECuQCo0lklCPDwLKCV5r6DBz4GMlUBTSu6X8jUgLbqhNaqsKmViZMKAsUzHyUoRARAMbC4skwTuh1RbmAMg89mxhYcZEfXwgBQBaCrZyi3Z1yiOYqlv4xnJGXtHWULBzbL0DTJaC7pM6NBNMUA4PV5Beqrg%2B8FAWQJ0Dz4RgFfZJ2zPUl7D%2FCs%2B723CaC9JjrItkqZ6phZltVByuhv1NARoCvbfIHnHLMzAFCgOZjXE7r9l4D2oM93DHWich1dL0CfPfvsRGh1ms031gx777dmoZkGajlTuVIdMQLlBha5Zy3PIwBIh7gN1GwRSsF3KNdPKHeUGErqQyNkYmH1UsO9DH1rYn4O3mkZoKVZbeZYJs76UM3UJIoiFBBGEClJEEUc mAhr8GwdZ3S7MCGTTkSRpAFQKzwqihSIqHBXmkC5VgDqANUKQkZqW7q%2FEYTSYZoBapvlZobRXYLoDQJV4aYs%2BXVgjUBZ%2BJcn3i5IdIhtQILWqEzoFtskLqI0BMdoX71sRPDzLNg4BatJm%2FMW4%2FHm%2BjWj96xvd3AfQD%2FjYv9x%2BI%2FHF%2FGwg80geQ5eAAAAAElFTkSuQmCC");display:block;height:18px;xxborder:1px solid blue;margin-left:46px;}#logo img {width:32px;height:32px;float:left;margin-left:5px;}#logo h1{margin:0;padding:0 2px;font-size:1.3em;font-weight:bold;margin-left:43px;}p.title, p.url{margin:0;padding:0;line-height:1.4em;font-weight:bold;margin-left:5px;}p.url{color:#666;margin-bottom:5px;}#content{white-space:pre-wrap}ol {color:#999;}.hideLineNumbers ol{margin:0;padding:0;}span{color:#000}.tag{color:#05F}.attrTitle{color:#E00}.attrValue{color:#C0C}.attrDoc{color:#800080}.comment{color:green}.line{margin:0;padding:0}.dark{background-color:#FAFAFA}h1{font-family: sans-serif;font-size: 14px;margin-top: 20px;}label{float:right;font-weight:normal;font-size:11px;}#content{white-space:pre-wrap}ol {color:'+a.lineHead+"}"+".hideLineNumbers ol{margin:0;padding:0;}"+"span{color:#000}"+".tag{color:"+a.tag+"}"+".attrTitle{color:"+a.attrTitle+"}"+".attrValue{color:"+a.attrValue+"}"+".attrDoc{color:"+a.attrDoc+"}"+".comment{color:"+a.comment+"}"+".line{margin:0;padding:0}"+".dark{background-color:"+a.darkLine+"}"+"h1{font-family: sans-serif; font-size: 14px; margin-top: 20px;}"+"label{float:right;font-weight:normal;font-size:11px;}"+"</style></head><body>"+'<div id="logo">'+'<img src="'+h+'">'+'<a href="http://dev.opera.com/tools/" ></a>'+"<h1>DOM Snapshot</h1>"+"</div>"+'<p class="title" >'+document.title+"</p>"+'<p class="url" >[ '+location.protocol+"//"+location.host+location.pathname+" ]</p>"+"<ol id='content'>"+r()+"</ol></body></html>";window.open("data:text/html,"+encodeURIComponent(b),"_blank")}};this.JSON||(JSON=function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a));typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent;h=[];if(typeof i.length=="number"&&!i.propertyIsEnumerable("length")){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]";gap=g;return e}if(typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c];if(typeof d=="string"){e=str(d,i,rep);e&&h.push(quote(d)+(gap?": ":":")+e)}}}else for(d in i){e=str(d,i,rep);e&&h.push(quote(d)+(gap?": ":":")+e)}e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}";gap=g;return e}}function quote(a){return escapeable.test(a)?'"'+a.replace(escapeable,function(a){var b=meta[a];if(typeof b=="string")return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return{stringify:function(a,b,c){var d;gap="";indent="";if(c)if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);if(!b)rep=function(a,b){if(!Object.hasOwnProperty.call(this,a))return undefined;return b};else if(typeof b=="function"||typeof b=="object"&&typeof b.length=="number")rep=b;else throw new Error("JSON.stringify");return str("",{"":a})},parse:function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)if(Object.hasOwnProperty.call(e,c)){d=walk(e,c);d!==undefined?e[c]=d:delete e[c]}return reviver.call(a,b,e)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")},quote:quote}}());window.cls||(window.cls={});window.cls.Proxy=function(){var a=this;this.configure=function(a,e){a&&(c=a);e&&(d=e);d==window.location.port?this.GET("/services",b):opera.postError("failed to configure the proxy, host and port must be the same as the main document")};var b=function(c,d){var e=c.getElementsByTagName("service");if(e.length){var f=[];for(var g=0;g<e.length;g++)f.push(e[g].getAttribute("name"));a.services=f;a.onsetup(d)}else setTimeout(function(){a.GET("/services",b)},100)};this.onsetup=function(){};this.enable=function(b){for(var c=0;c<this.services.length&&this.services[c]!=b;c++);if(c==this.services.length)return!1;a.GET("/enable/"+b,function(){});return!0};this.GET=function(b,e){var f=new XMLHttpRequest;f.onload=function(){if(this.status!=200)throw"Message failed, Status: "+this.status+", msg: "+b;a.onReceive(f);var c=this.responseXML;if((!c||c.documentElement==null)&&!this.responseText){if(client){client.onquit();return}throw"Message failed, GET, empty document: "+this.responseText}if(e)e(c,f);else throw"Loop broken: "+this.responseText};f.open("GET","http://"+c+":"+d+b);f.setRequestHeader("Cache-Control","no-cache");f.send("");return f};this.POST=function(b,e,f,g){var h=new XMLHttpRequest;h.onload=function(){if(this.status!=200)a._retry(a.POST,b,e,f,g);else{var c=this.responseXML;if(c.documentElement==null)throw"Message failed, POST, empty document: "+this.responseText;f&&f(c)}};h.onerror=function(c){a._retry(a.POST,b,e,f,g)};h.open("POST","http://"+c+":"+d+b);h.send(e)};this._retry=function(a,b,c,d,e){e||(e=0);if(!(e<5))throw"Request unsuccessful, retry limit reached";var f=a.bind(this,b,c,d,e++);setTimeout(f,50);opera.postError("Request failed, retrying ("+e+")")};this.onTimeout=function(){};this.onReceive=function(a){};var c="127.0.0.1",d="8002";this.services=[]};window.cls||(window.cls={});window.cls.TagManager=function(){if(cls.TagManager.instance)return cls.TagManager.instance;cls.TagManager.instance=this;const a=0,b=1,c=2;this._tags=[];this._tags[cls.TagManager.IGNORE_RESPONSE]=[null,function(a,b){},[]];this._get_empty_tag=function(){for(var a=2;this._tags[a];a++);return a};this.set_callback=function(a,b,c){var d=this._get_empty_tag();this._tags[d]=[a,b,c||[]];return d};this.handle_message=function(d,e,f){var g=this._tags[d];if(g){g[b].apply(g[a],[e,f].concat(g[c]));this._tags[d]=null;return!0}return!1}};window.cls.TagManager.get_instance=function(){return new window.cls.TagManager};cls.TagManager.DEFAULT_HANDLER=0;cls.TagManager.IGNORE_RESPONSE=1;window.cls||(window.cls={});cls.MessageBroker=function(){if(cls.MessageBroker.instance)return cls.MessageBroker.instance;cls.MessageBroker.instance=this;cls.MessageMixin.apply(this)};cls.MessageBroker.getInstance=function(){return new MessageBroker};window.cls||(window.cls={});cls.MessageMixin=function(){this.add_listener=function(a,b){if(!b)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"No callback function for message listener provided: "+a);else{this._mm_listeners||(this._mm_listeners={});a in this._mm_listeners?this._mm_listeners[a].push(b):this._mm_listeners[a]=[b]}};this.addListener=this.add_listener;this.remove_listener=function(a,b){if(!!this._mm_listeners){var c=null,d=this._mm_listeners[a]||[],e=0;for(;c=d[e];e++)if(c==b){d.splice(e,1);e--}}};this.removeListener=this.remove_listener;this.post_message=function(a,b){if(!this._mm_listeners)return!1;if(b===undefined||b===null)b={};var c=this._mm_listeners[a],d=null,e=0;b.type=a;b.target=this;if(c)for(;d=c[e];e++)d(b);return Boolean(e)};this.post=this.post_message};window.cls||(window.cls={});window.cls.ScopeInterfaceGenerator=function(){};window.cls.ScopeInterfaceGenerator.pretty_print_interface=function(a){};window.cls.ScopeInterfaceGenerator=function(){this.get_interface=function(a,b,c,d){};const a="  ",b=1,c=2,d=0,e=1,f=2,g=3,h=4,i=5,j={0:"required",1:"optional",2:"repeated"},k=1,l=2,m=3,n=0,o=1,p=0,q=1,r=2,s=3,t=0,u=0;this._service_infos=null;this._map=null;this._request_enums=function(){var a="",b=0;for(a in this._service_infos){b=tagManager.set_callback(this,this._handle_enums,[a]);services.scope.requestEnumInfo(b,[a,[],1])}};this._handle_enums=function(a,b,c){if(!a){this._service_infos[c].raw_enums=b;this._is_map_complete("raw_enums")&&this._request_info()}else this._onerror({message:"failed to get enums for "+c+" in _handle_enums"})};this._request_info=function(){var a="",b=0;for(a in this._service_infos){b=tagManager.set_callback(this,this._handle_infos,[a]);services.scope.requestInfo(b,[a])}};this._handle_infos=function(a,b,c){if(!a){this._service_infos[c].raw_infos=b;if(this._should_get_messages){var d=tagManager.set_callback(this,this._handle_messages,[c]);services.scope.requestMessageInfo(d,[c,[],1,1])}else this._handle_messages(a,[],c)}else this._onerror({message:"failed to get infos for "+c+" in _handle_infos"})};this._handle_messages=function(a,b,c){if(!a){this._service_infos[c].raw_messages=b;try{this._parse_raw_lists(c)}catch(d){this._service_infos[c].raw_messages=null;this._onerror({message:"failed to build the message maps for "+c})}this._is_map_complete("raw_messages")&&this._finalize()}else this._onerror({message:"failed to get infos for "+c+" in _handle_infos"})};this._is_map_complete=function(a){for(var b in this._service_infos)if(!this._service_infos[b][a])return!1;return!0};this._get_msg=function(a,b){const c=0;for(var d=0;d<a.length&&a[d][c]!==b;d++);return a[d]};this._get_enum=function(a,b){var c=this._get_msg(a,b),d=c&&c[1]||"",e={},f=null,g=0;if(c&&c.length==3)for(;f=c[2][g];g++)e[f[1]]=f[0];return[d,e]};this._parse_msg=function(a,b,f,k,l){var m=null,n=0,o="",p=null,q=null,r=null;if(a)for(;n<a[c].length;n++){m=a[c][n];o=m[d];p={name:o,q:"required",type:m[e]};m[g]&&(p.q=j[m[g]]);if(m[h])if(o in f){p.message=f[o].message;p.message_name=f[o].message_name}else{f[o]=p;r=this._get_msg(b,m[h]);p.message_name=r&&r[1]||"default";p.message=[];this._parse_msg(r,b,f,k,p.message)}if(m[i]){q=this._get_enum(k,m[i]);p.enum={name:q[0],numbers:q[1]}}l.push(p)}return l};this._parse_raw_lists=function(a){var b=this._map[a]={},c=this._service_infos[a].raw_infos[n],d=this._service_infos[a].raw_messages&&this._service_infos[a].raw_messages[t]||[],e=this._service_infos[a].raw_enums&&this._service_infos[a].raw_enums[t]||[],f="",g=null,h=this._service_infos[a].raw_infos[o],i=null,j=null,u=null,v=0;for(;v<c.length;v++){f=c[v];g=b[f[q]]={};g.name=f[p];if(this._should_get_messages){u=this._get_msg(d,f[r]);g[k]=this._parse_msg(u,d,{},e,[]);u=this._get_msg(d,f[s]);g[l]=this._parse_msg(u,d,{},e,[])}}if(h)for(v=0;v<h.length;v++){i=h[v];j=b[i[q]]={};j.name=i[p];if(this._should_get_messages){u=this._get_msg(d,i[r]);j[m]=this._parse_msg(u,d,{},e,[])}}};this._finalize=function(){this._onsuccess(this._map);this._onsuccess=null;this._onerror=null;this._service_infos=null;this._map=null};this.get_interface=function(a,b,c,d){if(!a||!b||!c)throw new Error("get_maps must be called with a service_descriptions dictionary and an onsuccess and an onerror callback");this._onsuccess=b;this._onerror=c;this._service_infos={};this._map={};this._should_get_messages=d===!1?!1:!0;for(var e in a)/^stp-|^core-/.test(e)||(this._service_infos[e]={raw_enums:null,raw_infos:null,raw_messages:null});if(a.scope){var f=a.scope.version.split(".").map(Number);f[1]>=1?this._request_enums():this._request_info()}else this._onerror({message:"failed to get maps, no scope in  service descriptions"})}};window.cls.ScopeInterfaceGenerator.pretty_print_interface=function(a){var b=this._pretty_print_object("",a,0,["message map ="]);window.open("data:text/plain,"+encodeURIComponent(b.join("\n")))};window.cls.ScopeInterfaceGenerator._pretty_print_object=function(a,b,c,d,e){e=e&&e.slice(0)||[];const f={1:"NUMBER",2:"NUMBER",3:"NUMBER",4:"NUMBER",5:"NUMBER",6:"NUMBER",7:"NUMBER",8:"BOOLEAN",9:"STRING",10:"BYTES",11:"MESSAGE",12:"NUMBER",13:"NUMBER",14:"NUMBER",15:"NUMBER",16:"NUMBER"},g={1:"Command",2:"Response",3:"Event"};d.push(this._get_indent_string(c)+this._quote(a,": ")+"{");c++;for(var h in b)if(typeof b[h]=="string"||typeof b[h]=="number")h=="type"&&/^\d+$/.test(b[h])?d.push(this._get_indent_string(c)+this._quote(h)+': "'+f[b[h]]+'", // '+b[h]):d.push(this._get_indent_string(c)+this._quote(h)+": "+this._quote(b[h])+",");for(h in b)Object.prototype.toString.call(b[h])=="[object Object]"&&this._pretty_print_object(h,b[h],c,d,e||[]);for(h in b)if(Object.prototype.toString.call(b[h])=="[object Array]"){if(h=="message"){if(e.indexOf(b.message_name)!=-1){d.push(this._get_indent_string(c)+'"message": <circular reference>,');continue}e.push(b.message_name)}c==3&&d.push(this._get_indent_string(c)+"// "+g[h]);if(b[h].length){d.push(this._get_indent_string(c)+this._quote(h)+": [");for(var i=0;i<b[h].length;i++)this._pretty_print_object("",b[h][i],c+1,d,e);d.push(this._get_indent_string(c)+"],")}else d.push(this._get_indent_string(c)+this._quote(h)+": [],")}c--;d.push(this._get_indent_string(c)+"},");return d};window.cls.ScopeInterfaceGenerator._get_indent_string=function(a,b){return Array(a).join(b||"  ")};window.cls.ScopeInterfaceGenerator._quote=function(a,b){return a?(/^\d+$/.test(a)?a:'"'+a+'"')+(b||""):""};window.cls||(window.cls={});window.cls.ServiceBase=function(){if(cls.ServiceBase.instance)return cls.ServiceBase.instance;cls.ServiceBase.instance=this;window.cls.MessageMixin.apply(this);this.on_enable_success=function(){};this.on_window_filter_change=function(a){};this.on_quit=function(){};this.is_implemented=!1;this.is_enabled=!1;this.create_and_expose_interface=function(a,b){if(b){this.version=a;a=a.split(".").map(Number);this.major_version=a[0];this.minor_version=a[1]||0;this.major_minor_version=this.major_version+.1*this.minor_version;this.patch_version=a[2]||0;for(var c in b)this._expose_method(parseInt(c),b[c].name);return!0}return!1};this.satisfies_version=function(a,b){return this.major_version>a||this.major_version===a&&this.minor_version>=b};this._expose_method=function(a,b){if(b.slice(0,2)=="On")this["on"+b.slice(2)]=function(a,b){};else{this["handle"+b]=function(a,b){};this["request"+b]=function(b,c){opera.scopeTransmit(this.name,c||[],a,b||0)}}};var a=null,b={};b.scope=[];b.scope[3]="handleConnect";b.scope[4]="handleDisconnect";b.scope[5]="handleEnable";b.scope[6]="handleDisable";b.scope[7]="handleInfo";b.scope[8]="handleQuit";b.scope[10]="handleHostInfo";b.scope[11]="handleMessageInfo";b.scope[12]="handleEnumInfo";b.scope[0]="onServices";b.scope[1]="onQuit";b.scope[2]="onConnectionLost";b.scope[9]="onError";var c=[];c[0]="OK";c[1]="Conflict";c[2]="Unsupported Type";c[3]="Bad Request";c[4]="Internal Error";c[5]="Command Not Found";c[6]="Service Not Found";c[7]="Out Of Memory";c[8]="Service Not Enabled";c[9]="Service Already Enabled";var d=[];d[1]="command";d[2]="response";d[3]="event";d[4]="error";var e=function(c,d,e,f,g){var h=b[c][e],i=a[c];if(h.indexOf("on")==0){i[h](f,d);i.post_message(h.slice(2).toLowerCase(),d)}else tagManager.handle_message(g,f,d)||i[h](f,d)},f=function(a,b,c,d,f){window.debug.log_message(a,b,c,d,f);e(a,b,c,d,f)};(function(){this.get_event_map=function(){return b};this.get_status_map=function(){return c};this.get_type_map=function(){return d};this.get_generic_message_handler=function(){return window.ini&&window.ini.debug&&f||e};this.register_services=function(b){a=b};this.populate_map=function(a){for(var c in a){if(c=="scope")continue;var d=b[c]=[];for(var e in a[c])a[c][e].name.slice(0,2)=="On"?d[e]="on"+a[c][e].name.slice(2):d[e]="handle"+a[c][e].name}}}).apply(cls.ServiceBase)};window.cls||(window.cls={});window.cls.Namespace=function(a){if(window[a]instanceof this.constructor)return window[a];this.init(a)};window.cls.Namespace.prototype=new function(){this.add=function(a){if(!a.id&&!a.name)throw"to add an object to a namespace it must have either an id or a name";return this[a.id||a.name]=a};this.init=function(a){window[a]instanceof this.constructor||(window[a]=this)};this.toString=function(){return"[object Namespace]"}};window.cls||(window.cls={});cls.STP_0_Wrapper=function(){var a=this,b=this.scopeAddClient,c=this.scopeEnableService,d=null,e=null,f=null,g=function(){},h=function(){},i=0,j=null,k=null,l=null,m=null,n=function(){k=cls.ServiceBase.get_event_map();l=cls.ServiceBase.get_status_map();m=cls.ServiceBase.get_type_map()},o=function(a,b){d(j)},p=function(b){var c=b.split(",");switch(a.stpVersion){case undefined:case"STP/0":if(c.indexOf("stp-1")!=-1){n();u.call(a);g=s;h=t;a.scopeEnableService("scope");services.scope.handleConnect=o;j=b;services.scope.requestConnect(0,["json"]);break};case"STP/1":g=e;h=f;d(b);break;default:a.postError("not able to handle STP version"+a.stpVersion+" in _wrapper_connect_callback")}},q=function(a,b,c,d,e){g(a,b,c,d,e)},r=function(a,b,c,d,e){h(a,b,c,d,e)},s=function(a,b,c,d,f){const g=0,h=2,i=4,j=5;var k=b.indexOf(" ",6);if(k!=-1){var l=parseInt(b.slice(6,k++)),m=JSON.parse(b.slice(k,k+l));b=JSON.parse(b.slice(k+l));e(m[g],b,m[h],m[j]||0,m[i])}},t=function(a,b,c,d,e){},u=function(){var b=this.scopeTransmit;this.scopeTransmit=function(c,d,e,f){var g=JSON.stringify([c,1,e,1,f]);b.call(a,"scope","STP/1 "+g.length+" "+g+JSON.stringify(d),"","")}};this.scopeAddClient=function(c,g,h,i){d=c;e=g;f=h;b.call(a,p,q,r,i)}};window.cls||(window.cls={});cls.ScopeHTTPInterface=function(a){var b=this,c=null,d=null,e=null,f=0,g=0,h=new window.cls.Proxy,i=null,j=null,k=null,l=null,m=null,n=function(){i=cls.ServiceBase.get_event_map();j=cls.ServiceBase.get_status_map();k=cls.ServiceBase.get_type_map()},o=function(a,b){(!a||!a.documentElement||a.documentElement.nodeName!="timeout")&&d("",b.responseText);h.GET("/get-message?time="+(new Date).getTime(),u)},p=function(a,b){if(!a||!a.documentElement||a.documentElement.nodeName!="timeout"){var c=b.getResponseHeader("X-Scope-Message-Service"),e=parseInt(b.getResponseHeader("X-Scope-Message-Command")),f=parseInt(b.getResponseHeader("X-Scope-Message-Status")),g=parseInt(b.getResponseHeader("X-Scope-Message-Tag")),i=JSON.parse(b.responseText);d(c,i,e,f,g)}m=h.GET("/get-message?time="+(new Date).getTime(),u)},q=function(a){const b=0,c=1,e=2,f=3,g=4;a=JSON.parse(a.data);d(a[b],a[g],a[c],a[e],a[f])},r=function(a,b,c,d){h.POST("/post-command/"+a+"/"+c+"/"+d,b)},s=function(a,b,c,d){h.POST("/post-command/"+a+"/"+c+"/"+d,JSON.stringify(b))},t=function(a,b,c,d){l.send(JSON.stringify([a,c,0,d,b]))},u=null,v=function(a,c){switch(b.stpVersion=c.responseText){case undefined:case"STP/0":u=o;b.scopeTransmit=r;y();break;case"STP/1":window.WebSocket?x():w();break;default:opera.postError("not able to handle STP version"+b.stpVersion+" in _on_stp_version")}},w=function(){u=p;b.scopeTransmit=s;y()},x=function(){l=new WebSocket("ws://"+window.location.host+"/stp-1-channel");l.onopen=function(){this.onmessage=q;b.scopeTransmit=t;y(!0)};l.onclose=function(){w()}},y=function(a){c(h.services.join(","));a||h.GET("/get-message?time="+(new Date).getTime(),u);window.ini.debug&&cls.debug.wrap_transmit()},z=function(a){h.GET("/get-stp-version?time="+(new Date).getTime(),v)};this.scopeHTTPInterface=!0;this.scopeAddClient=function(a,b,g,i){if(e){if(m){m.onload=null;m.abort()}e()}c=a;d=b;e=g;f=i;h.onsetup=z;h.configure(location.hostname,location.port)};this.scopeEnableService=function(a,b){h.enable(a)};window.ini||(window.ini={debug:!1});n()};cls.ScopeHTTPInterface.is_enabled=!1;window.cls||(window.cls={});cls.UserTracker=function(a,b){this._make_id=function(a){a=a||16;var b="0123456789abcdefghijklmnopqrstuvwxyz",c="";while(a--)c+=b.charAt(Math.floor(Math.random()*b.length));return c};this.call_home=function(a){a=a||function(){};var b=new XMLHttpRequest,c=this.url+"?user="+this.id+"&timestamp="+(new Date).getTime(),d=function(){b.readyState==4&&a(b.status,c)};b.onreadystatechange=d;b.open("GET",c,!0);b.send(null)};this.url=a;this.storagekey="usertracker_id";if(window.localStorage){this.id=window.localStorage.getItem(this.storagekey);if(!this.id){this.id=this._make_id(8);window.localStorage.setItem(this.storagekey,this.id)}}else this.id="client-without-localstorage"};window.cls||(window.cls={});cls.Scope||(cls.Scope={});cls.Scope["1.1"]||(cls.Scope["1.1"]={});cls.Scope["1.1"].name="scope";cls.Scope["1.1"].Service=function(){var a=0;this.name="scope";this.version="1.1";this.requestConnect=function(a,b){opera.scopeTransmit("scope",b||[],3,a||0)};this.handleConnect=function(a,b){opera.postError("NotBoundWarning: Scope, Connect")};this.requestDisconnect=function(a,b){opera.scopeTransmit("scope",b||[],4,a||0)};this.handleDisconnect=function(a,b){opera.postError("NotBoundWarning: Scope, Disconnect")};this.requestEnable=function(a,b){var c=0;opera.scopeTransmit("scope",b||[],5,a||0)};this.handleEnable=function(b,c){var d=0,e=!0,f=c[d],g="";if(b===a){if(window.services&&window.services[f]){window.services[f].is_enabled=!0;window.services[f].post("enable-success");window.services[f].on_enable_success()}this._enable_requests.contains(f)&&this._enable_requests.splice(this._enable_requests.indexOf(f),1);this._enable_requests.length||this._send_profile_enabled_msg()}else opera.postError("enable service failed, message: "+f)};this._send_profile_enabled_msg=function(){window.app.profiles[this._profile].is_enabled=!0;var a={profile:this._profile,services:this._profiles[this._profile].slice()};window.messages.post("profile-enabled",a);window.settings.general.set("profile-mode",this._profile)};this.requestDisable=function(a,b){opera.scopeTransmit("scope",b||[],6,a||0)};this.handleDisable=function(b,c){var d=0,e=c[d];if(b===a){window.services[e].is_enabled=!1;this._disable_requests.contains(e)&&this._disable_requests.splice(this._disable_requests.indexOf(e),1);this._disable_requests.length||this._finalize_enable_profile()}else opera.postError("disable service failed, message: "+e)};this.requestInfo=function(a,b){opera.scopeTransmit("scope",b||[],7,a||0)};this.handleInfo=function(a,b){opera.postError("NotBoundWarning: Scope, Info")};this.requestQuit=function(a,b){opera.scopeTransmit("scope",b||[],8,a||0)};this.handleQuit=function(a,b){opera.postError("NotBoundWarning: Scope, Quit")};this.requestHostInfo=function(a,b){opera.scopeTransmit("scope",b||[],10,a||0)};this.handleHostInfo=function(a,b){const c=0,d=1,e=2,f=3,g=4,h=5,i=0,j=1;this._hello_message={stpVersion:b[c],coreVersion:b[d],platform:b[e],operatingSystem:b[f],userAgent:b[g],serviceList:b[h]};this._service_descriptions={};var k=null,l=b[h],m=0,n=0;for(;k=l[m];m++)this._service_descriptions[k[i]]={name:k[i],version:k[j],index:m};[window.app.profiles.DEFAULT,window.app.profiles.PROFILER,window.app.profiles.HTTP_PROFILER].forEach(function(a){this._profiles[a]=window.app.profiles[a].filter(function(a){return this._service_descriptions.hasOwnProperty(a)},this)},this);this._onHostInfoCallback(this._service_descriptions,this._hello_message);this._hello_message.services=this._service_descriptions};this.requestMessageInfo=function(a,b){opera.scopeTransmit("scope",b||[],11,a||0)};this.handleMessageInfo=function(a,b){opera.postError("NotBoundWarning: Scope, MessageInfo")};this.requestEnumInfo=function(a,b){opera.scopeTransmit("scope",b||[],12,a||0)};this.handleEnumInfo=function(a,b){opera.postError("NotBoundWarning: Scope, EnumInfo")};this.onServices=function(a,b){opera.postError("NotBoundWarning: Scope, OnServices")};this.onQuit=function(a,b){opera.postError("NotBoundWarning: Scope, OnQuit")};this.onConnectionLost=function(a,b){opera.postError("NotBoundWarning: Scope, OnConnectionLost")};this.onError=function(a,b){opera.postError("NotBoundWarning: Scope, OnError")};this.get_hello_message=function(){return this._hello_message};this.set_host_info_callback=function(a){this._onHostInfoCallback=a};this.set_services_enabled_callback=function(a){this._on_services_enabled_callback=a};this.enable_profile=function(a){if(!this._enable_requests.length&&!this._disable_requests.length){var b=this._profile,c=this._profiles[b]||[],d=this._profiles[a];this._profile=a;c.forEach(function(a){d.contains(a)||this._disable_requests.push(a)},this);d.forEach(function(a){c.contains(a)||this._enable_requests.push(a)},this);if(b){var e={profile:b,disabled_services:this._disable_requests.slice()};window.app.profiles[b].is_enabled=!1;window.messages.post("profile-disabled",e)}this._disable_requests.length?this._disable_requests.forEach(function(a){this.requestDisable(cls.TagManager.DEFAULT_HANDLER,[a])},this):this._finalize_enable_profile()}};this._finalize_enable_profile=function(){this._enable_requests.length?this._enable_requests.forEach(function(a){this.requestEnable(cls.TagManager.DEFAULT_HANDLER,[a])},this):this._send_profile_enabled_msg()};this._init=function(){this._hello_message={};this._service_descriptions={};this._profile=null;this._profiles=window.app.profiles;this._enable_requests=[];this._disable_requests=[]};this.reset=this._init;this
._init()};status_map={0:"OK",1:"Conflict",2:"Unsupported Type",3:"Bad Request",4:"Internal Error",5:"Command Not Found",6:"Service Not Found",7:"Out Of Memory",8:"Service Not Enabled",9:"Service Already Enabled"};format_type_map={0:"protocol-buffer",1:"json",2:"xml"};message_type_map={1:"command",2:"response",3:"event",4:"error"};package_map={"com.opera.stp":{Error:[{name:"description",type:14,q:"optional"},{name:"line",type:1,q:"optional"},{name:"column",type:1,q:"optional"},{name:"offset",type:1,q:"optional"}]}};window.message_maps||(window.message_maps={});window.cls||(window.cls={});window.cls.TestFramework=function(){this.get_bound_click_handler=function(){};this.get_bound_change_handler=function(){};this.clear_log=function(){};this.rebuild_last_state=function(){};this.rebuild_last_state=function(){};this._selected_service="";this._status_map=cls.ServiceBase.get_status_map();this._event_map=cls.ServiceBase.get_event_map();this._service_descriptions=null;this._last_txtarea_value="";const INDENT="  ",RESPONSE=2;this._get_indent=function(a){var b="";while(a-->0)b+=INDENT;return b};this._pretty_print_payload_item=function(a,b,c,d){return this._get_indent(a)+b+": "+(d===null&&"null"||"message"in c&&"\n"+this._pretty_print_payload(d,c.message,a+1)||"enum"in c&&d in c["enum"].numbers&&c["enum"].numbers[d]+" ("+d+")"||"type"in c&&c.type==11&&(d?"true":"false")||typeof d=="string"&&'"'+d+'"'||d)};this._pretty_print_payload=function(a,b,c){var d=[],e=null,f=0,g=null,h=0;if(b){for(;f<a.length;f++){e=a[f];e===null&&(e=[]);if(g=b[f])if(g.q=="repeated"){d.push(this._get_indent(c)+g.name+":");for(h=0;h<e.length;h++)d.push(this._pretty_print_payload_item(c+1,g.name.replace("List",""),g,e[h]))}else d.push(this._pretty_print_payload_item(c,g.name,g,e));else d.push(this._get_indent(c)+"<missing definition>: "+JSON.stringify(e))}return d.join("\n")}return""};this._handle_response=function(a,b,c,d){this._last_message=Array.prototype.slice.call(arguments,0);var e=document.getElementById("message-response");e&&e.parentNode.removeChild(e);e=document.getElementById("message-container").appendChild(document.createElement("pre"));e.id="message-response";c=this._dashed_name(c);var f=this._event_map[c].indexOf("handle"+d),g=window.message_maps[c]&&window.message_maps[c][f]&&window.message_maps[c][f][RESPONSE]||null;a!=0&&(g=window.package_map["com.opera.stp"].Error);var h="";try{h=cookies.get("pretty-print-message")=="true"&&g?this._pretty_print_payload(b,g,2):JSON.stringify(b)}catch(i){h=JSON.stringify(b)}e.textContent="response:\n  status: "+this._status_map[a]+"\n"+"  payload: \n"+h};this._update_selected=function(a,b){var c=a&&a.getElementsByClassName("selected")[0];c&&(c.className=c.className.replace(/ ?selected/,""));b&&(b.className+=(b.className?" ":"")+"selected")};this._update_list=function(a,b,c){var d=document.getElementById(a.toLowerCase()+"-list-container");d.innerHTML="<h2>"+a+" List</h2><ul id='"+a.toLowerCase()+"-list'>"+b.map(this._list_item).join("")+"</ul>"};this._show_def=function(a,b){b.pre.innerHTML=a.responseText};this._reselect_element=function(){var a="",b=0,c=0,d="",e=null,f=null;for(;a=arguments[b];b++)if(d=cookies.get(a)){e=document.getElementById(a).getElementsByTagName("li");for(c=0;(f=e[c])&&f.textContent!=d;c++);f&&this._click_handler({target:f})}};this.rebuild_last_state=function(){this._reselect_element("service-list","command-list")};this._list_item=function(a){return"<li>"+a+"</li>"};this._dashed_name=function(a){for(var b="",c=0,d="";b=a[c];c++)d+=/[A-Z]/.test(b)&&(c?"-":"")+b.toLowerCase()||b;return d};this._make_service_descriptions=function(){var a=window.message_maps,b="",c="",d=null,e=null,f=null;this._service_descriptions={commands:{},events:{}};for(b in a){service=a[b];b=window.app.helpers.dash_to_class_name(b);e=this._service_descriptions.commands[b]=[];f=this._service_descriptions.events[b]=[];for(c in service)(1 in service[c]&&e||f).push(service[c].name);e.sort();f.sort()}};this._click_handler=function(a){var b=a.target;this._service_descriptions||this._make_service_descriptions();this._doc_base_uri||(this._doc_base_uri=document.getElementsByTagName("base")[0]?document.baseURI:"./");while(b&&!b.id&&(b=b.parentNode));if(b)switch(b.id){case"window-list":this._update_selected(b.parentNode,a.target);windows.set_debug_context(parseInt(a.target.getAttribute("data-window-id")));break;case"service-list":this._update_selected(b,a.target);document.getElementById("message-container").innerHTML="";this._selected_service=a.target.textContent;this._update_list("Command",this._service_descriptions.commands[this._selected_service],b);this._update_list("Event",this._service_descriptions.events[this._selected_service],b);cookies.set("service-list",this._selected_service,72e5);break;case"command-list":this._update_selected(b,a.target);this._update_selected(document.getElementById("event-list"));var c=document.getElementById("message-container");c.innerHTML="<h2>Command "+a.target.textContent+"</h2>"+"<h3>command</h3><pre class='definition'></pre>"+"<textarea rows='10' id='proto-message'>"+(this._last_txtarea_value||"[]")+"</textarea>"+"<p class='right-aligned'><input type='button' value='send' data-service='"+this._selected_service+"'"+" data-command='"+a.target.textContent+"' id = 'test-send-command' /></p>"+"<h3>response</h3><pre class='definition'></pre>"+"<p class='right-aligned'><label>pretty print message "+"<input type='checkbox'"+(cookies.get("pretty-print-message")=="true"?" checked='checked' ":"")+" id='pretty-print-message' />"+"</label></p>";var d=c.getElementsByTagName("pre"),e=window.services[this._dashed_name(this._selected_service)];if(e){e=this._selected_service+"."+e.version;(new XMLHttpRequest).loadResource(this._doc_base_uri+"defs/"+e+".commands."+a.target.textContent+".def",this._show_def,{pre:d[0]});(new XMLHttpRequest).loadResource(this._doc_base_uri+"defs/"+e+".responses."+a.target.textContent+".def",this._show_def,{pre:d[1]})}var f=c.querySelector("textarea");f.oninput=function(){this._last_txtarea_value=f.value}.bind(this);cookies.set("command-list",a.target.textContent,72e5);break;case"event-list":this._update_selected(b,a.target);this._update_selected(document.getElementById("command-list"));var c=document.getElementById("message-container");c.innerHTML="<h2>Event "+a.target.textContent+"</h2>"+"<pre class='definition'></pre>";var d=c.getElementsByTagName("pre"),e=window.services[this._dashed_name(this._selected_service)];if(e){e=this._selected_service+"."+e.version;(new XMLHttpRequest).loadResource(this._doc_base_uri+"defs/"+e+".events."+a.target.textContent+".def",this._show_def,{pre:d[0]})}break;case"test-send-command":this._send_command(b);break;case"clear-log":document.getElementById("log-container").firstElementChild.textContent=""}};this._change_handler=function(a){switch(a.target.id){case"pretty-print-message":cookies.set("pretty-print-message",a.target.checked&&"true"||"false");this._last_message&&this._handle_response.apply(this,this._last_message)}};this._send_command=function(target){var service=target.getAttribute("data-service"),command=target.getAttribute("data-command"),response=document.getElementById("message-response");response&&response.parentNode.removeChild(response);try{var message=eval("("+document.getElementById("proto-message").value+")"),tag=tagManager.set_callback(this,this._handle_response,[service,command]);services[this._dashed_name(service)]["request"+command](tag,message)}catch(e){alert("not a valid message")}};this.get_bound_click_handler=function(){var a=this;return function(b){a._click_handler(b)}};this.get_bound_change_handler=function(){var a=this;return function(b){a._change_handler(b)}}};var UI=function(){if(UI.instance)return UI.instance;UI.instance=this;this._tabbars={};this._modebars={};this._searches={};this._overlays={};this.get_tabbar=function(a){};this.get_modebar=function(a){};this.get_search=function(a){};this.get_overlay=function(a){};this.register_tabbar=function(a,b){};this.register_modebar=function(a,b){};this.register_search=function(a,b){};this.register_overlay=function(a,b){};this.show_view=function(a){};this.show_dropdown=function(a){};this.get_layout_box=function(a){};this.get_container=function(a){};this.store_last_selected_view=function(a){};this.retrieve_last_selected_view=function(){};this.get_visible_tabs=function(){};this.get_mode=function(){};this.get_tabbar=function(a){return this._tabbars[a]||null};this.get_modebar=function(a){return this._modebars[a]||null};this.get_search=function(a){return this._searches[a]||null};this.get_overlay=function(a){return this._overlays[a]||null};this.get_layout_box=function(a){return window.topCell.get_cell(a)};this.get_container=function(a){return window.views[a]&&window.views[a].get_container()||null};this.register_tabbar=function(a,b){this._tabbars[a]||(this._tabbars[a]=new Tabbar(a,b));return this._tabbars[a]};this.register_modebar=function(a,b){this._modebars[a]||(this._modebars[a]=new b);return this._modebars[a]};this.register_search=function(a,b){this._searches[a]||(this._searches[a]=b);return this._searches[a]};this.register_overlay=function(a,b){this._overlays[a]||(this._overlays[a]=b);return this._overlays[a]};this.show_view=function(a){var b=window.views[a];if(window.topCell&&b){b.isvisible()||window.topCell.showView(a);return window.views[a]}};this.get_button=function(a){return document.getElementById(a)};this.get_mode_tab=function(a){return TabBase.get_tab_by_ref_id(a)};this.store_last_selected_view=function(a){window.settings.general.set("last-selected-view",a)};this.retrieve_last_selected_view=function(){return window.settings.general.get("last-selected-view")};this.get_visible_tabs=function(){return window.topCell&&window.topCell.get_visible_tabs()||[]};this.get_mode=function(){return window.topCell&&window.topCell.tab&&window.topCell.tab.activeTab||""};this.show_dropdown=function(a){CstSelect.show_dropdown(a)}};UI.get_instance=function(){return this.instance||new UI};UI.TYPE_SINGLE_SELECT="single-select";UI.TYPE_INPUT="input";UI.TYPE_SWITCH="switch";UI.TYPE_SWITCH_CUSTOM_HANDLER="switch-custom-handler";UI.TYPE_BUTTONS="buttons";var Tabbar=function(a,b){this.add_tab=function(a){};this.remove_tab=function(a){};this.register_ui_tabs=function(a){};this._init=function(a,b){this.id=a;this._ui_tabs=[];this._static_tabs=b||[];this._dynamic_tabs=[]};this.register_ui_tabs=function(a){if(this._ui_tabs.indexOf(a)==-1){this._ui_tabs.push(a);this._dynamic_tabs.forEach(function(b){var c=window.views[b];a.addTab(new Tab(b,c&&c.name||"",!0))})}};this.add_tab=function(a){if(window.views[a]){this._dynamic_tabs.push(a);var b=new Tab(a,window.views[a].name,!0);this._ui_tabs.forEach(function(c){c.hasTab(a)||c.addTab(b)})}};this.remove_tab=function(a){this._dynamic_tabs=this._dynamic_tabs.filter(function(b){return b!==a});this._ui_tabs.forEach(function(b){b.removeTab(a)})};this._init(a,b)},ActionBroker=function(){if(ActionBroker.instance)return ActionBroker.instance;ActionBroker.instance=this;this.register_handler=function(a){};this.get_shortcuts=function(){};this.set_shortcuts=function(a,b,c){};this.get_handlers=function(){};this.dispatch_action=function(a,b,c,d){};this.dispatch_key_input=function(a,b){};this.delay_action=function(a,b,c,d,e){};this.clear_delayed_actions=function(a){};this.get_actions_with_handler_id=function(a){};this.get_label_with_handler_id_and_mode=function(a,b){};this.get_global_handler=function(){};this.set_setter_click_handler=function(a,b){};this.clear_setter_click_handler=function(a){};this.get_shortcut_with_handler_and_action=function(a,b){};this.get_action_container=function(){};this.get_current_handler_id=function(){};this.focus_handler=function(a,b){};this.get_shared_shortcuts_label=function(a){};const a=ActionBroker.GLOBAL_HANDLER_ID,b=10;this._handlers={};this._inherited_handlers={};this._action_context=null;this._action_context_id="";this._container=null;this._shortcuts=null;this._global_shortcuts=null;this._current_shortcuts=null;this._current_shared_shortcuts=null;this._global_handler=new GlobalActionHandler(a);this._delays={};this._modal_click_handler_setter=null;this._modal_click_handler=null;this._shared_shortcuts_labels={};this._set_action_context_bound=function(b){if(this._contextmenu.is_visible&&b.type=="click"){this._contextmenu.modal_click_handler(b);return!0}if(b.target!=this._last_event_target){if(!this._action_context||this._action_context.onclick(b)!==!1){var c=b.target;while(c&&c.nodeType==1&&c.parentNode&&c.parentNode.nodeType==1&&!/^(?:top-|panel-|window-)?(?:container|toolbar|tabs)$/i.test(c.nodeName))c=c.parentNode;switch(c&&c.nodeName.toLowerCase()||""){case"container":case"panel-container":case"window-container":var d=UIBase.getUIById(c.getAttribute("ui-id"));d&&this._set_current_handler(d.view_id,b,c);break;default:this._set_current_handler(a,b,c)}return!0}this._global_handler.onclick(b);return!1}}.bind(this);this._set_current_handler=function(a,c,d){if(a!=this._action_context_id){this._action_context&&this._action_context.blur();this._action_context=this._handlers[a]||this._global_handler;this._action_context_id=this._action_context.id;this._current_shortcuts=this._shortcuts[this._action_context_id]||{};this._current_shared_shortcuts=this._shortcuts[this._action_context.shared_shortcuts]||{};this._container=d||document.documentElement;this._action_context.focus(c,d);this._context_queue.push(a);while(this._context_queue.length&&this._context_queue.length>b)this._context_queue.shift()}};this._oncontextmenubound=function(a){this._set_action_context_bound(a)!==!1&&this._contextmenu.oncontextmenu(a);a.shiftKey||a.preventDefault()}.bind(this);this._onhideviewbound=function(a){var b=a.id,c=null;if(b==this._action_context_id){while(this._context_queue.length){b=this._context_queue.pop();c=window.views[b];if(c&&c.isvisible()){var d=c.get_container();d&&d.dispatchMouseEvent("click");return}}this._set_current_handler(this._global_handler.id)}}.bind(this);this._init=function(){this._key_identifier=new KeyIdentifier(this.dispatch_key_input.bind(this),window.ini.browser);this.register_handler(this._global_handler);this._contextmenu=ContextMenu.get_instance();window.app.addListener("services-created",function(){this._context_queue=[];this._shortcuts=this._retrieve_shortcuts();this._global_shortcuts=this._shortcuts.global;this._key_identifier.set_shortcuts(this._get_shortcut_keys());this._set_current_handler(this._global_handler.id);document.addEventListener("contextmenu",this._oncontextmenubound,!1);document.addEventListener("click",this._set_action_context_bound,!0);document.addEventListener("focus",this._set_action_context_bound,!0);window.messages.addListener("hide-view",this._onhideviewbound);window.messages.post("shortcuts-changed")}.bind(this))};this._retrieve_shortcuts=function(){var a=window.settings.general.get("shortcuts"),b=window.helpers.copy_object(window.ini.default_shortcuts);if(a){var c=window.settings.general.get("shortcuts-hash");if(this._hash_shortcuts(b)!=c)try{a=this._sync_shortcuts(b,a);this._store_shortcuts(a)}catch(d){a=null;window.settings.general.set("shortcuts",null);window.settings.general.set("shortcuts-hash","");(new AlertDialog(ui_strings.D_SHORTCUTS_UPDATE_FAILED)).show()}}return a||b};this._store_shortcuts=function(a){var b=a&&this._hash_shortcuts(window.ini.default_shortcuts)||"";window.settings.general.set("shortcuts",a);window.settings.general.set("shortcuts-hash",b)};this._sync_shortcuts=function(a,b){for(var c in a)if(typeof a[c]=="object"){b.hasOwnProperty(c)||(b[c]={});this._sync_shortcuts(a[c],b[c])}else b.hasOwnProperty(c)||(b[c]=a[c]);return b};this._hash_shortcuts=function(a){return JSON.stringify(a).replace(/["{},:\- ]/g,"")};this.register_handler=function(a){if(!a||!a.id)throw"missing id on action_handler in ActionBroker.instance.register_handler";this._handlers[a.id]=a;if(a.shared_shortcuts){this._inherited_handlers[a.shared_shortcuts]=a;a.shared_shortcuts_label&&(this._shared_shortcuts_labels[a.shared_shortcuts]=a.shared_shortcuts_label)}};this.dispatch_action=function(a,b,c,d){this._handlers[a].handle(b,c,d)};this.dispatch_key_input=function(a,b){this._action_context.check_mode&&this._action_context.check_mode(b);var c=this._current_shortcuts[this._action_context.mode]||{},d=this._current_shared_shortcuts[this._action_context.mode]||{},e=c[a]||d[a]||"",f=!0;e&&(f=this._action_context.handle(e,b,this._container));if(f!==!1&&this._action_context!=this._global_handler){this._global_handler.check_mode(b);c=this._global_shortcuts[this._global_handler.mode];e=c&&c[a]||"";e&&(f=this._global_handler.handle(e,b,this._container))}if(f===!1){b.stopPropagation();b.preventDefault()}};this.delay_action=function(a,b,c,d,e){this._delays.hasOwnProperty(a)||(this._delays[a]=new Timeouts);var f=this.dispatch_action.bind(this,b,c,d,e);this._delays[a].set(f,300)};this.clear_delayed_actions=function(a){this._delays[a]&&this._delays[a].clear()};this.get_shortcuts=function(){return window.helpers.copy_object(this._shortcuts)};this.set_shortcuts=function(a,b,c){a=window.helpers.copy_object(a);b?this._shortcuts[b]=a:this._shortcuts=a;this._global_shortcuts=this._shortcuts.global;this._store_shortcuts(c==!0?null:this._shortcuts);this._key_identifier.set_shortcuts(this._get_shortcut_keys());window.messages.post("shortcuts-changed")};this.get_actions_with_handler_id=function(a){return this._handlers[a]&&this._handlers[a].get_action_list().sort()||this._inherited_handlers[a]&&this._inherited_handlers[a].get_action_list().sort()};this._get_shortcut_keys=function(){var a=[],b="",c=null,d="",e="";for(b in this._shortcuts){c=this._shortcuts[b];for(d in c)for(e in c[d])a.indexOf(e)==-1&&a.push(e)}return a};this.get_label_with_handler_id_and_mode=function(a,b){return this._handlers[a]&&this._handlers[a].mode_labels[b]||this._inherited_handlers[a]&&this._inherited_handlers[a].mode_labels[b]};this.get_global_handler=function(){return this._global_handler};this.set_setter_click_handler=function(a,b){if(a instanceof ContextMenu){this._modal_click_handler_setter=a;this._modal_click_handler=b}};this.clear_setter_click_handler=function(a){if(a==this._modal_click_handler_setter){this._modal_click_handler_setter=null;this._modal_click_handler=null}};this.get_shortcut_with_handler_and_action=function(a,b){var c=this._shortcuts&&this._shortcuts[a],d=null,e="",f="";if(c)for(e in c){d=c[e];for(f in d)if(d[f]==b)return f}return""};this.get_action_container=function(){return this._container};this.get_current_handler_id=function(){return this._action_context_id};this.focus_handler=function(a,b){var c=window.views[a];if(c&&c.isvisible()&&this._handlers[a]){this._last_event_target=b.target;this._set_current_handler(a,b,c.get_container())}};this.get_shared_shortcuts_label=function(a){return this._shared_shortcuts_labels[a]||""};document.readyState=="complete"?this._init():document.addEventListener("DOMContentLoaded",this._init.bind(this),!1)};ActionBroker.get_instance=function(){return this.instance||new ActionBroker};ActionBroker.GLOBAL_HANDLER_ID="global";var KeyIdentifier=function(a,b){this.set_shortcuts=function(a){};this._named_shortcuts={};this._char_shortcuts={};this._name_keycode_map=KeyIdentifier.named_keys;this._named_keycodes=[37,38,39,40,45,36,33,46,35,34,112,113,114,115,116,117,118,119,120,121,122,123];this._named_keycodes_u=[8,9,13,27,32];this.set_shortcuts=function(a){var b=null;try{b=document.createEvent("KeyboardEvent")}catch(c){}if(b&&b.hasOwnProperty("key")){this._set_shortcuts(a);this._setup(!0)}else{this._set_shortcuts_old(a);this._setup(!1)}};this._set_shortcuts=function(a){this._named_shortcuts={};this._char_shortcuts={};for(var b=0,c;c=a[b];b++){if(!KeyIdentifier.validate_shortcut(c))throw"Invalid shortcut "+c;var d=c.split(/[ ,\+]+/).map(function(a){a=a.toLowerCase();a=="cmd"&&(a="ctrl");return a}),e=["shift","ctrl","alt"].reduce(function(a,b,c){var e=d.indexOf(b);if(e>-1){a|=Math.pow(2,c);d.splice(e,1)}return a},0);if(d.length!==1)throw"Invalid shortcut "+c;var f=d[0],g=0;if(f.length>1){g=this._name_keycode_map[f]<<4|e;this._named_shortcuts[g]=c}else{var h=f.charCodeAt(0);this._is_not_alpha(h)?g=h<<4:g=f.toUpperCase().charCodeAt(0)<<4|e;this._char_shortcuts[g]=c}}};this._is_not_alpha=function(a){return a&&(32<=a&&a<=64||91<=a&&a<=96||123<=a&&a<=126)};this._set_shortcuts_old=function(a){var b=0,c="",d=null,e=0,f=0,g=0,h=0,i=!1,j=!1;this._named_shortcuts={};this._char_shortcuts={};for(;c=a[b];b++){if(!KeyIdentifier.validate_shortcut(c))throw"Invalid shortcut "+c;d=c.split(/[ ,\+]+/).reverse().map(function(a){return a.toLowerCase()});f=d.indexOf("shift")!=-1;g=d.indexOf("ctrl")!=-1||d.indexOf("cmd")!=-1;h=d.indexOf("alt")!=-1;i=d[0].length>1;j=!1;if(i){e=this._name_keycode_map[d[0]]<<3;j=!0}else if(96<d[0].charCodeAt(0)&&d[0].charCodeAt(0)<123){e=d[0].toUpperCase().charCodeAt(0)<<3;j=!0}else e=d[0].charCodeAt(0)<<3;if(j){e|=g?4:0;e|=f?2:0;e|=h?1:0}i?this._named_shortcuts[e]=c:this._char_shortcuts[e]=c}};this._handle_keydown_bound=function(b){var c=["shift","ctrl","alt"].reduce(function(a,c,d){return a|(b[c+"Key"]?Math.pow(2,d):0)},0);if(b.key.length>1){var d=this._name_keycode_map[b.key]<<4|c;d in this._named_shortcuts&&a(this._named_shortcuts[d],b)}else{var e=b.char&&b.char.charCodeAt(0),d=this._is_not_alpha(e)?e<<4:b.keyCode<<4|c;d in this._char_shortcuts&&a(this._char_shortcuts[d],b)}}.bind(this);this._handle_keypress_bound_old=function(a){var b=a.keyCode;this._named_keycodes.indexOf(b)!=-1&&a.which===0||this._named_keycodes_u.indexOf(b)!=-1?this._handle_named_key(a,b):64<b&&b<91||96<b&&b<123?this._handle_a_z(a,b):this._handle_not_a_z(a,b)}.bind(this);this._handle_keypdown_ch_bound=function(a){var b=a.keyCode;a.keyIdentifier.indexOf("U+")==-1||this._named_keycodes_u.indexOf(b)!=-1?this._handle_named_key(a,b):(64<b&&b<91||96<b&&b<123)&&this._handle_a_z(a,b)}.bind(this);this._handle_keypress_ch_bound=function(a){var b=a.keyCode;!(64<b&&b<91)&&!(96<b&&b<123)&&this._handle_not_a_z(a,b)}.bind(this);this._handle_keypress_ff_bound=function(a){var b=a.keyCode;if(this._named_keycodes.indexOf(b)!=-1&&a.which===0||this._named_keycodes_u.indexOf(b)!=-1)this._handle_named_key(a,b);else{b=a.charCode;64<b&&b<91||96<b&&b<123?this._handle_a_z(a,b):this._handle_not_a_z(a,b)}}.bind(this);this._handle_named_key=function(b,c){var d=b.keyCode<<3|(b.ctrlKey?4:0)|(b.shiftKey?2:0)|(b.altKey?1:0);d in this._named_shortcuts&&a(this._named_shortcuts[d],b)};this._handle_a_z=function(b,c){c&=95;var d=c<<3|(b.ctrlKey?4:0)|(b.shiftKey?2:0)|(b.altKey?1:0);d in this._char_shortcuts&&a(this._char_shortcuts[d],b)};this._handle_not_a_z=function(b,c){var d=c<<3;d in this._char_shortcuts&&a(this._char_shortcuts[d],b)};this._setup=function(a){if(!this._is_setup){b||(b="opera");this._is_setup=!0;switch(b){case"opera":a?document.addEventListener("keydown",this._handle_keydown_bound,!0):document.addEventListener("keypress",this._handle_keypress_bound_old,!0);break;case"chrome":document.addEventListener("keydown",this._handle_keypdown_ch_bound,!0);document.addEventListener("keypress",this._handle_keypress_ch_bound,!0);break;case"firefox":document.addEventListener("keypress",this._handle_keypress_ff_bound,!0)}}}};KeyIdentifier.validate_shortcut=function(a){var b=a.split(/[ ,\+]+/).reverse().map(function(a){a=a.toLowerCase();a=="cmd"&&(a="ctrl");return a});if(b.length==0||b.length>3)return!1;if(b.length>1)for(var c=1;c<b.length;c++)if(["ctrl","shift","alt"].indexOf(b[c])==-1)return!1;if(b[0].length==1){var d=b[0].charCodeAt(0);if((d<65||90<d&&d<97||122<d)&&b.length>1)return!1}else if(!(b[0]in KeyIdentifier.named_keys))return!1;return!0};KeyIdentifier.named_keys={backspace:8,Backspace:8,tab:9,Tab:9,enter:13,Enter:13,escape:27,Esc:27,esc:27,space:32,Spacebar:32,spacebar:32,left:37,Left:37,up:38,Up:38,right:39,Right:39,down:40,Down:40,insert:45,Insert:45,home:36,Home:36,"page-up":33,PageUp:33,pageup:33,"delete":46,Delete:46,end:35,End:35,"page-down":34,PageDown:34,pagedown:34,f1:112,F1:112,f2:113,F2:113,f3:114,F3:114,f4:115,F4:115,f5:116,F5:116,f6:117,F6:117,f7:118,F7:118,f8:119,F8:119,f9:120,F9:120,f10:121,F10:121,f11:122,F11:122,f12:123,F12:123};var ActionHandlerInterface=function(){this.handle=function(a,b,c){};this.get_action_list=function(){};this.focus=function(a){};this.blur=function(){};this.onclick=function(a){};this.handle=function(a,b,c){if(a in this._handlers)return this._handlers[a](b,c)};this.get_action_list=function(){var a=[],b="";for(b in this._handlers)a.push(b);for(b in this._inherited_handlers)a.push(b);return a};this.mode="default";this._handlers={};this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT}},GlobalActionHandler=function(a){this.id=a;this.handle=function(a,b,c){};this.get_action_list=function(){};this.focus=function(a){};this.blur=function(){};this.onclick=function(a){};this.check_mode=function(a){};this.register_shortcut_listener=function(a,b,c){};this.register_search_panel=function(a){};const b="default",c="edit",d=GlobalActionHandler.RE_TEXT_INPUTS;this.mode=b;this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT,edit:ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT};this._broker=ActionBroker.get_instance();this._handlers={};this._private_handlers=[];this._listener_handlers=[];this._sc_listeners={};this._search_panels=[];this.get_action_list=function(){var a=[],b="";for(b in this._handlers)this._private_handlers.indexOf(b)==-1&&a.push(b);return a.concat(this._listener_handlers)};this._continue_with_mode=function(a,b,c,d){window.views.js_source.clearLinePointer();window.views.callstack.clearView();window.views.inspection.clearView();window.stop_at.continue_thread(a,!0);return!1};["run","step-next-line","step-into-call","step-out-of-call"].forEach(function(a){this._handlers["continue-"+a]=this._continue_with_mode.bind(this,a)},this);this._handlers["select-all"]=function(a,b,c){if(this._selection_controller.is_selectable(c)){var d=getSelection(),e=document.createRange();d.removeAllRanges();e.selectNodeContents(c);d.addRange(e)}return!1}.bind(this);this._handlers["invert-spotlight-colors"]=function(a,b,c){window.hostspotlighter.invertColors();return!1};this._handlers["show-script-dropdown"]=function(a,b,c){var d=UI.get_instance();d.show_view("js_source");d.show_dropdown("js-script-select")};this._close_open_menus=function(){var a=ContextMenu.get_instance();if(a.is_visible){a.dismiss();return!0}var b=CstSelectBase.close_opened_select();return b};this._handlers["toggle-console"]=function(a,b,d){var e=this._close_open_menus();if(!e&&!window.views["color-selector"].cancel_edit_color()){if(this.mode==c){var f=b.target.get_attr("parent-node-chain","shortcuts");if(f&&f in this._sc_listeners&&this._sc_listeners[f](a,b,d)===!1)return!1;if(this._broker.get_current_handler_id()!="command_line")return}var g=Overlay.get_instance();if(g.is_visible){this._handlers["hide-overlay"](a,b,d);return}return this._handlers["toggle-commandline"](a,b,d)}}.bind(this);this._handlers["toggle-commandline"]=function(a,b,c){var d=window.views.command_line&&window.views.command_line.isvisible(),e=UI.get_instance().get_button("toggle-console");d?e.removeClass("is-active"):e.addClass("is-active");if(!d){UIWindowBase.showWindow("command_line",Math.ceil(innerHeight/2),0,innerWidth,Math.floor(innerHeight/2));ActionBroker.get_instance().focus_handler("command_line",b)}else UIWindowBase.closeWindow("command_line");return!1}.bind(this);this._handlers["reload-context"]=function(a,b,c){runtimes.reloadWindow();return!1};this._handlers["show-overlay"]=function(a,b,c){const d=10,e=20,f=2;var g=Overlay.get_instance(),h=UI.get_instance(),i=c.getAttribute("data-overlay-id");h.get_button("toggle-"+i).addClass("is-active");g.show(i);if(c){var j=c.getBoundingClientRect(),k=g.element.querySelector("overlay-window"),l=g.element.querySelector("overlay-arrow"),m=l.getBoundingClientRect().width;k.style.top=j.bottom+d+"px";k.addClass("attached");l.style.right=Math.floor(document.documentElement.clientWidth-e-j.right-m/2+j.width/2-f)+"px"}var n=g.element.querySelector("button, input[type='button'], .ui-button");n&&n.focus()};this._private_handlers.push("show-overlay");this._handlers["hide-overlay"]=function(a,b,c){var d=Overlay.get_instance(),e=UI.get_instance(),f=window.client.current_client,g=d.active_overlay;e.get_button("toggle-"+g).removeClass("is-active");if(g=="remote-debug-overlay"&&(!f||!f.connected)){var h=UI.get_instance().get_button("toggle-remote-debug-overlay");h&&h.removeClass("alert");eventHandlers.click["cancel-remote-debug"]()}d.hide()};this._private_handlers.push("hide-overlay");this._handlers["navigate-next-top-tab"]=function(a,b,c){window.topCell.tab.navigate_to_next_or_previous_tab(!1);return!1};this._handlers["navigate-previous-top-tab"]=function(a,b,c){window.topCell.tab.navigate_to_next_or_previous_tab(!0);return!1};this._handlers["show-search"]=function(a,b,c){var d=UI.get_instance(),e=d.get_visible_tabs().filter(function(a){return this._search_panels.contains(a)},this)[0];if(e){d.show_view(e).focus_search_field();return!1}}.bind(this);var e=function(a){this.createView=function(a){a.innerHTML="<div class='padding'><h2>Test view, id: "+this.id+"</h2></div>"};this.init(a)};e.prototype=new TempView;this._handlers["add-temp-test-view"]=function(a,b,c){var d=new e("Hello"),f=UI.get_instance();f.get_tabbar("request").add_tab(d.id);f.show_view(d.id);return!1};this.handle=function(a,b,c){if(a in this._handlers&&this._handlers[a](a,b,c)==!1)return!1;var d=b.target.get_attr("parent-node-chain","shortcuts");if(d&&d in this._sc_listeners)return this._sc_listeners[d](a,b,c)};this.focus=function(a,e){var f=a&&a.target.nodeName.toLowerCase();a&&f=="input"&&d.test(a.target.type)||f=="textarea"?this.mode=c:this.mode=b};this.check_mode=this.onclick=this.focus;this.register_shortcut_listener=function(a,b,c){this._sc_listeners[a]=b;c&&c.forEach(function(a){this._listener_handlers.indexOf(a)==-1&&this._listener_handlers.push(a)},this)};this.register_search_panel=function(a){this._search_panels.contains(a)||this._search_panels.push(a)};var f=".info-box",g="container:not(.side-panel):not(.network-options-container):not(.screenshot-controls),panel-container,window-container,.tooltip-container,.selectable";this._selection_controller=new SelectionController(g,f);messages.addListener("before-show-view",function(a){if(a.id=="console_panel"){var b=window.views.command_line&&window.views.command_line.isvisible();if(b){var c=UI.get_instance().get_button("toggle-console");b?c.removeClass("is-active"):c.addClass("is-active");UIWindowBase.closeWindow("command_line")}}},!0)};GlobalActionHandler.RE_TEXT_INPUTS=new RegExp(["text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","file","color"].join("|"),"i");var defaults={viewport:"viewport",viewport_main_container:"main-view",window_container:"windows-container",min_view_height:75,min_view_width:300,view_border_width:0,slider_name:"view-slider",slider_border_width:5,focus_catcher_id:"opera-focus-catcher"},global_state={ui_framework:{temporary_tabs:[]}},UIWindowBase=new function(){var a=this,b=1,c=[],d=function(){return"ui-window-"+(b++).toString()};this.default_width=500;this.default_height=300;this.default_top=100;this.default_left=100;var e=200,f=100,g=100,h=30,i=null,j="";this.init=function(a,b,e,f,g){var h=window.views[a],i=typeof h.window_statusbar=="boolean"?h.window_statusbar:!0;c[c.length]=this.id=d();this.view_id=a;this.top=b!=undefined?Math.round(b):h&&h.window_top||this.default_top;this.left=e!=undefined?Math.round(e):h&&h.window_left||this.default_left;this.width=f!=undefined?Math.round(f):h&&h.window_width||this.default_width;this.height=g!=undefined?Math.round(g):h&&h.window_height||this.default_height;this.min_top=6;this.min_visible_height=80;this.min_visible_width=150;this.container=new WindowContainer(this);this.is_resizable=typeof h.window_resizable=="boolean"?h.window_resizable:!0;i&&(this.statusbar=new WindowStatusbar(this));this.window_type=h.window_type||0;toolbars[a]&&(this.toolbar=new WindowToolbar(this,toolbars[a].buttons,toolbars[a].filters));this.header=typeof h.window_header=="boolean"?h.window_header:!0;this.window_class=h.window_class||"";window.ui_windows||(window.ui_windows={});window.ui_windows[this.id]=this;this.render()};this.render=function(a){var b=i.render(templates._window(this));if(this.toolbar){this.toolbar.setup(this.view_id);this.toolbar.setDimensions(!0)}this.container.setup(this.view_id);this.statusbar&&this.statusbar.setup(this.view_id);this.setZIndex();b.style.zIndex=Overlay.get_instance().is_visible?400:200};this.set_toolbar_visibility=function(a,b){var c=window.ui_windows,d=null;if(c)for(var e in c){d=c[e];if(d.view_id==a&&this.is_window_visible
(a)){if(d.toolbar){d.toolbar.setVisibility(b);d.toolbar.setup(a);d.toolbar.setDimensions(!0)}d.container.setDimensions(!0)}}};this._delete=function(a){var b="",d=0;for(;(b=c[d])&&b!=a;d++);if(b){delete window["ui-windows"][a];c.splice(d,1);return!0}return!1};this.setZIndex=function(){var a=null,b="",d=0,e=0,f=null,h=0;for(;b=c[d];d++){a=document.getElementById(b);if(a&&(e=parseInt(a.style.zIndex))&&e>g){cur=a.querySelector("window-container");cur&&(h=cur.scrollTop);a.style.zIndex=e-1;cur&&setTimeout(function(){cur.scrollTop=h},0)}}};this.getWindowByViewId=function(a){var b=null,d="",e=0;for(;d=c[e];e++)if(ui_windows[d].view_id==a)return ui_windows[d];return null};this.update=function(){this.container.setDimensions();this.toolbar&&this.toolbar.setDimensions(!0)};this.showWindow=function(b,c,d,e,f){var g=this.getWindowByViewId(b);if(g){if(!g.is_resizable){typeof e=="number"&&(g.width=e);typeof f=="number"&&(g.height=f)}if(document.getElementById(g.id)){a.setZIndex();document.getElementById(g.id).style.zIndex=Overlay.get_instance().is_visible?400:200;window.views[b].update()}else{g.render();E()}}else g=new UIWindow(b,c,d,e,f);return g};this.set_width=function(a){this.width=a;var b=document.getElementById(this.id);b&&(b.style.width=a+"px")};this.closeWindow=function(a){var b=this.getWindowByViewId(a),c=null;if(b&&(c=document.getElementById(b.id))){b.container.onclose();messages.post("hide-view",{id:c.getAttribute("view_id")});c.parentNode.removeChild(c);return a}return null};this.is_window_visible=function(a){var b=this.getWindowByViewId(a);return b&&document.getElementById(b.id)};this.close_all_windows=function(){var a=[];for(id in window.ui_windows)a.push(this.closeWindow(window.ui_windows[id].view_id));return a.filter(Boolean)};var k={"window-scale-top-left":!0,"window-scale-top":!0,"window-scale-top-right":!0,"window-move":!0,"window-scale-right":!0,"window-scale-left":!0,"window-scale-bottom":!0,"window-scale-bottom-right":!0,"window-scale-bottom-left":!0},l={},m={},n={},o=null,p=null,q=0,r=null,s=null,t=0,u=0,v=0,w=0,x=null,y=function(a){p=a},z=function(b){var c=b.target.getAttribute("handler");if(c in k){q&&(q=clearInterval(q));var d=b.target.parentNode.id;r=b.target.parentNode.style;if(d!=j){j=d;a.setZIndex();r.zIndex=Overlay.get_instance().is_visible?400:200}s=m[c];l[c](b);o=ui_windows[d]||{};q=setInterval(s,10);document.addEventListener("mousemove",y,!1);document.addEventListener("mouseup",B,!1);b.preventDefault()}},A=function(b){var c=b.target.getAttribute("handler");if(c in n)n[c](b);else{var d=b.target;while(d){if(/^window$/i.test(d.nodeName)){if(d.id!=j){j=d.id;a.setZIndex();d.style.zIndex=Overlay.get_instance().is_visible?400:200}break}d=d.parentElement}}},B=function(a){document.removeEventListener("mousemove",y,!1);document.removeEventListener("mouseup",B,!1);document.onselectstart=null;q=clearInterval(q);s();p=null},C=function(a,b,c){c>b-a.min_visible_width&&(c=b-a.min_visible_width);c<a.min_visible_width-a.width&&(c=a.min_visible_width-a.width);return c},D=function(a,b,c){c>b-a.min_visible_height&&(c=b-a.min_visible_height);c<a.min_top&&(c=a.min_top);return c};l["window-move"]=function(a){t=a.pageX-a.target.parentNode.offsetLeft;u=a.pageY-a.target.parentNode.offsetTop};m["window-move"]=function(){if(p){var a=window.innerHeight,b=window.innerWidth;if(p.pageX<b&&p.pageX>0){o.left=C(o,b,p.pageX-t);r.left=o.left+"px"}if(p.pageY<a&&p.pageY>0){o.top=D(o,a,p.pageY-u);r.top=o.top+"px"}}};l["window-scale-top"]=function(a){u=a.pageY-a.target.parentNode.offsetTop;v=a.target.parentNode.offsetTop+a.target.parentNode.offsetHeight-2};m["window-scale-top"]=function(a){if(p){var b=p.pageY-u;b<h&&(b=h);var c=v-b;if(c<f){c=f;b=innerHeight-c}r.height=(o.height=c)+"px";r.top=(o.top=b)+"px";o.update()}};l["window-scale-right"]=function(a){t=a.pageX-(a.target.parentNode.offsetWidth-2)};m["window-scale-right"]=function(){if(p){var a=p.pageX-t;if(a>e){r.width=(o.width=a)+"px";o.update()}}};l["window-scale-left"]=function(a){t=a.pageX-a.target.parentNode.offsetLeft;w=a.target.parentNode.offsetLeft+a.target.parentNode.offsetWidth-2};m["window-scale-left"]=function(a){if(p){var b=p.pageX-t,c=w-b;if(c>e){r.width=(o.width=c)+"px";r.left=(o.left=b)+"px";o.update()}}};l["window-scale-bottom"]=function(a){u=a.pageY-a.target.parentNode.offsetHeight};m["window-scale-bottom"]=function(){if(p){var a=p.pageY-u;if(a>f){r.height=(o.height=a)+"px";o.update()}}};l["window-scale-top-left"]=function(a){l["window-scale-left"](a);l["window-scale-top"](a)};m["window-scale-top-left"]=function(){m["window-scale-left"]();m["window-scale-top"]()};l["window-scale-top-right"]=function(a){l["window-scale-right"](a);l["window-scale-top"](a)};m["window-scale-top-right"]=function(){m["window-scale-right"]();m["window-scale-top"]()};l["window-scale-bottom-right"]=function(a){l["window-scale-right"](a);l["window-scale-bottom"](a)};m["window-scale-bottom-right"]=function(){m["window-scale-right"]();m["window-scale-bottom"]()};l["window-scale-bottom-left"]=function(a){l["window-scale-left"](a);l["window-scale-bottom"](a)};m["window-scale-bottom-left"]=function(){m["window-scale-left"]();m["window-scale-bottom"]()};n["window-close"]=function(b){var c=b.target.parentElement.parentElement;c&&a.closeWindow(c.getAttribute("view_id"))};var E=function(){if(window.ui_windows){var a="",b=window.innerHeight,c=window.innerWidth,d=null,e=null,g=0,h=0;for(a in window.ui_windows){d=window.ui_windows[a];if(e=document.getElementById(a)&&document.getElementById(a).style){if(d.window_type==UIWindow.HUD){g=0;d.width=c;d.height=b-d.top;if(d.height<f){d.height=f;g=d.top=b-d.height}g&&(e.top=g+"px");e.width=d.width+"px";e.height=d.height+"px"}else{h=C(d,c,d.left);h!=d.left&&(e.left=(d.left=h)+"px");g=C(d,b,d.top);g!=d.top&&(e.top=(d.top=g)+"px")}d.update()}}}},F=function(b){document.removeEventListener("load",arguments.callee,!1);i=document.getElementsByTagName(defaults.window_container)[0];if(!i){a.showWindow=function(){};opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing view port in init in windows")}};document.addEventListener("mousedown",z,!1);document.addEventListener("click",A,!1);window.addEventListener("load",F,!1);window.addEventListener("resize",E,!1)},UIWindow=function(a,b,c,d,e){this.init(a,b,c,d,e)};UIWindow.prototype=UIWindowBase;UIWindow.HUD=1;CellBase=new function(){const a="v",b="h";var c=this,d={},e=1,f=0,g=function(){return"cell-id-"+e++};this.appendUiNodes=function(a){this.container=new Container(this);this.tab=new Tabs(this,a);this.toolbar=new Toolbar(this)};this.get_visible_tabs=function(){var a=[];if(this.tab){a.extend(this.tab.tabs.map(function(a){return a.ref_id}));var b=window.views[this.tab.activeTab];b&&(b.type=="composite-view"?a.extend(b.cell.get_visible_tabs()):b.type=="side-panel"&&a.extend(b.get_visible_tabs()))}else for(var c=0,d;d=this.children[c];c++)a.extend(d.get_visible_tabs());return a};this.getView=function(a){var b=null,c="",d=null,e=null,f=0;if(this.tab){for(f=0;c=this.tab.tabs[f];f++)if(d=views[c.ref_id])if(d.type=="composite-view"){if(b=d.cell.getView(a))return[this.tab,c.ref_id].concat(b)}else if(d.type=="side-panel"){if(d.has_view(a)){d.set_view_unfolded(a);return[this.tab,d.id]}if(c.ref_id==a)return[this.tab,d.id]}else if(c.ref_id==a)return[this.tab,a]}else for(f=0;e=this.children[f];f++)if(b=e.getView(a))return b;return null};this.get_cell=function(a){var b=null,c="",d=null,e=null,f=0;if(this.tab&&(d=window.views[this.tab.activeTab])){if(d.type!="composite-view")return d.type=="side-panel"?null:d.id==a?this:null;if(b=d.cell.get_cell(a))return b}else for(f=0;e=this.children[f];f++)if(b=e.get_cell(a))return b;var g=window.ui_windows;if(g)for(var h in g)if(g[h].container&&g[h].container.view_id==a)return g[h];return null};this.add_searchbar=function(a){this.searchbar=a;a.cell=this;this.update(this.left,this.top,!0,!0);a.post_message("searchbar-created")};this.remove_searchbar=function(a){this.searchbar=null;a.cell=null;this.update(this.left,this.top,!0,!0)};this.setTooolbarVisibility=function(a,b){var c=null,d=0;if(this.toolbar){if(this.toolbar.__view_id==a&&this.toolbar.isvisible()){this.toolbar.setVisibility(b);this.toolbar.setup(a);this.update(this.left,this.top,!0)}}else for(;c=this.children[d];d++)c.setTooolbarVisibility(a,b)};this.disableTab=function(a,b){var c=null,d=null,e=null,f=0;if(this.tab){for(f=0;c=this.tab.tabs[f];f++)if((d=views[c.ref_id])&&d.type=="composite-view")d.cell.disableTab(a,b);else if(c.ref_id==a){c.disabled=b;if(this.tab.isvisible()){this.tab.render();this.tab.activeTab==a&&this.tab.trySetAnActiveTab()}}}else for(f=0;e=this.children[f];f++)e.disableTab(a,b)};this.enableTab=function(a){this.disableTab(a,!1)};this.init=function(c,e,f,h,i){this.has_explicit_width=c.width!==undefined;this.has_explicit_height=c.height!==undefined;if(c.name){var j,k;this.has_explicit_width&&(j=window.settings.general.get("view-width-"+c.name))&&(c.width=j);this.has_explicit_height&&(k=window.settings.general.get("view-height-"+c.name))&&(c.height=k)}this.min_width=c.min_width!=null?c.min_width:defaults.min_view_width;this.min_height=c.min_height!=null?c.min_height:defaults.min_view_height;this.width=c.width&&c.width>this.min_width?c.width:this.min_width;this.height=c.height&&c.height>this.min_height?c.height:this.min_height;d[this.id=c.id||g()]=this;this.checked_height=0;this.checked_width=0;this.type="";this.name=c.name;this.children=[];this.previous=null;this.next=null;this.parent=null;this.dir=e;this.parent=f;this.container_id=h;this.is_dirty=!0;e=e==b?a:b;var l=c.children,m=null,n=0,o=null,p=null,q=null;if(l)for(;m=l[n];n++){q=this.children[this.children.length]=new Cell(m,e,this,h,i);if(o){o.previous=p;o.next=q}p=o;o=q}else{["tabs","tabbar"].forEach(function(a){var b=c["get_"+a];typeof b=="function"&&(c[a]=b(i))});this.appendUiNodes(c.tabbar);var r=null,s=null;if(c.tabbar){r=c.tabbar.tabs;s=UI.get_instance().register_tabbar(c.tabbar.id,c.tabbar.tabs)}else r=c.tabs;for(var t,n=0;t=r[n];n++){var u=Tab;if(typeof t!="string"){u=t.tab_class;t=t.view}this.tab.addTab(new u(t,views[t]&&views[t].name||""))}s&&s.register_ui_tabs(this.tab)}};this.setup=function(a){var a=this.tab&&this.tab.activeTab;if(a){this.toolbar.setup(a);var b=UI.get_instance().get_search(a);this.searchbar=b&&b.get_searchbar()||null;this.searchbar&&(this.searchbar.cell=this);this.update(this.left,this.top,!0);this.container.setup(a)}};this.update=function(c,d,e,f){var g=this.children,h=null,i=0,j=0,k="";e&&(this.is_dirty=!0);var l=this.is_dirty;if(g.length){this.left=c;this.top=d;if(this.dir==a){j=d;for(;h=g[i];i++)j+=h.update(c,j,e,f)}else{j=c;for(;h=g[i];i++)j+=h.update(j,d,e,f)}}else if(this.is_dirty){this.left=c;this.top=d;if(!this.tab.activeTab)this.tab.trySetAnActiveTab();else if(!document.getElementById("toolbar-to-"+this.id))this.tab.setActiveTab("",!0);else{this.tab.setDimensions(e);this.toolbar.setDimensions(e);this.searchbar&&this.searchbar.setDimensions(e);this.container.setDimensions(e,f)}this.is_dirty=!1}if(this.next){var m=document.getElementById("slider-for-"+this.id);if(!m){var n=document.getElementById(this.container_id)||window.viewport;if(n){m=n.appendChild(document.createElement(defaults.slider_name));m.id="slider-for-"+this.id;m.className=this.dir==b?"horizontal":"vertical"}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing container in cell.update")}if(l){this.dir==b?k="left:"+c+"px;"+"top:"+(2*defaults.view_border_width+d+this.height)+"px;"+"width:"+(2*defaults.view_border_width+this.width)+"px;"+"height:"+defaults.slider_border_width+"px;":k="left:"+(2*defaults.view_border_width+c+this.width)+"px;"+"top:"+d+"px;"+"width:"+defaults.slider_border_width+"px;"+"height:"+(2*defaults.view_border_width+this.height)+"px;";m.style.cssText!=k&&(m.style.cssText=k)}}if(this.name){this.has_explicit_width&&window.settings.general.set("view-width-"+this.name,this.width);this.has_explicit_height&&window.settings.general.set("view-height-"+this.name,this.height)}return(this.dir==a?this.width:this.height)+2*defaults.view_border_width+defaults.slider_border_width};this.get_total_children_dimension=function(a,b){var c=null,d=0,e=0,f=this.children.length;for(;c=this.children[d];d++){d!=f-1&&(e+=defaults.slider_border_width);if(b&&!c["has_explicit_"+a])continue;e+=c[a]+2*defaults.view_border_width}return e};this.setDefaultDimensions=function(){var c=this.dir==a?"height":"width",d=this[c],e=null,f=0,g=0,h=0,i=this.children.length,j=0,k=0,l=0;if(i){for(f=0;e=this.children[f++];)e["has_explicit_"+c]||k++;if(k){h=this.get_total_children_dimension(c,!0);if(h<d){l=(d-h-k*2*defaults.view_border_width)/k>>0;for(f=0;e=this.children[f++];){g=e["min_"+c];if(e["has_explicit_"+c]&&e[c]<g){l-=(g-e[c])/k;e[c]=g}else e["has_explicit_"+c]||(e[c]=l>g?l:g)}}}while(--i){h=this.get_total_children_dimension(c);j=d-(h-this.children[i][c]-2*defaults.view_border_width);g=this.children[i]["min_"+c];if(h<=d||g<j){this.children[i][c]=j;i=this.children.length;break}this.children[i][c]=g}if(!i){i=this.children.length;h=d-(i-1)*2*defaults.view_border_width-(i-1)*defaults.slider_border_width;var m=h/i>>0;for(f=0;f<i-1;f++)this.children[f][c]=m;this.children[i-1][c]=h-(i-1)*m}c=this.dir==b?"height":"width";for(f=0;e=this.children[f];f++){e[c]=this[c];e.setDefaultDimensions()}}};this.getCellById=function(a){return d[a]};this._delete=function(a){delete d[a]};this.setCheckedDimensions=function(){if(this.checked_height){this.height=this.checked_height;this.checked_height=0;this.is_dirty=!0}if(this.checked_width){this.width=this.checked_width;this.checked_width=0;this.is_dirty=!0}var a=null,b=0;for(;a=this.children[b];b++)a.setCheckedDimensions()};this.clearCheckedDimensions=function(){this.checked_height=this.checked_width=0;this.is_dirty=!1;var a=null,b=0;for(;a=this.children[b];b++)a.clearCheckedDimensions()};this.checkDelta=function(c,d,e){var f=0,g=null,h=0,i=[],j=0,k=0;if(this.children.length)if(c=="height"&&this.dir==b||c=="width"&&this.dir==a)if(d){for(;g=this.children[h];h++)i[i.length]=g.checkDelta(c,d,e);j=Math.min.apply(null,i);k=Math.max.apply(null,i);f=d>0?k:j;if(k!=j)for(h=0;g=this.children[h];h++)g.checkDelta(c,d-f,e);this["checked_"+c]=this[c]+(d-f)}else{for(h=0;g=this.children[h];h++)g.checkDelta(c,0,e);f=this["checked_"+c]=0}else{f=d;for(h=0;g=this.children[h];h++)f=g.checkDelta(c,f,e);this["checked_"+c]=this[c]+(d-f)}else{j=this["min_"+c];if(d){var l=this[c]+d;l>=j||l>=this[c]?this["checked_"+c]=l:this["checked_"+c]=j;f=d-(this["checked_"+c]-this[c])}else f=this["checked_"+c]=0}return f};this.getCapTarget=function(a,b){if(!this.children.length)return 0;var c=null,d=0,e=this.children.length-1,f=e*2*defaults.view_border_width+e*defaults.slider_border_width;for(;c=this.children[d];d++)c!=b&&(f+=c["checked_"+a]||c[a]);return this[a]-f};this.handleResizeEvent=function(a,c){var d=this.dir==b?"height":"width",e=this.dir==b?"top":"left",f=Math.round(a[this.dir==b?"pageY":"pageX"]-c-(this[e]+this[d])),g=this,h=0,i=null,j=-f;if(f){if(f>0){do{g=g.next;g&&(j=g.checkDelta(d,j,"next"))}while(g&&j);i=this}else{while(g&&f){f=g.checkDelta(d,f,"next");g=g.previous}i=this.next}if(h=f+j){i.checkDelta(d,h,"next");this.parent.setCheckedDimensions();this.parent.update(this.parent.left,this.parent.top)}else this.parent.clearCheckedDimensions()}}};var Cell=function(a,b,c,d,e){this.init(a,b,c,d,e)};Cell.prototype=CellBase;var TopCell=function(a,b,c,d,e){var f=this,g=new Timeouts;this.setStartDimensions=b||function(){this.top=0;this.left=0;this.width=innerWidth;this.height=innerHeight};this.onresize=c||function(){this.setStartDimensions();this.update();var a=this.tab&&this.tab.activeTab;a&&window.views[a].update(this.container,!0)};this.cell_type="top";var h=function(){f.onresize();messages.post("resize")},i=function(){g.set(h,32)};this.appendUiNodes=function(){this.container=new TopContainer(this);this.tab=new TopTabs(this);this.toolbar=null};this.update=function(){if(!this.children.length)if(!this.tab.activeTab)this.tab.tabs.length&&this.tab.setActiveTab(this.tab.tabs[0].ref_id);else{this.toolbar&&this.toolbar.setDimensions();this.tab.setDimensions();this.container.setDimensions()}};this.showView=function(a){if(this.tab.hasTab(a))this.tab.setActiveTab(a);else if(views[a]){var b=views[a];if(b.requires_view&&!this.tab.hasTab(b.requires_view)){global_state.ui_framework.temporary_tabs.push(b.requires_view);this.tab.addTab(new Tab(b.requires_view,views[b.requires_view].name,!0))}if(b.isvisible())b.update();else{var c=this.getView(a),d=null,e=0;if(c)for(;d=c[e];e+=2)d.activeTab!=c[e+1]&&d.setActiveTab(c[e+1])}}};this.setTooolbarVisibility=function(a,b){var c="",d=null,e=0;toolbars[a]&&toolbars[a].setVisibility(b);for(e=0;c=this.tab.tabs[e];e++)(d=views[c.ref_id])&&d.cell.setTooolbarVisibility(a,b);UIWindowBase.set_toolbar_visibility(a,b)};this.setup=function(){var a=this.tab&&this.tab.activeTab;a&&this.container.setup(a)};this.cleanUp=function(){window.removeEventListener("resize",i,!1);g&&g.clear();g=null};this.addTemporaryTabs=function(){var a=global_state.ui_framework.temporary_tabs,b="",c=0;for(;b=a[c];c++)views[b]&&this.tab.addTab(new Tab(b,views[b].name,!0))};window.addEventListener("resize",i,!1);window.topCell=this;this.init(a,null,null,null,e);this.setStartDimensions();this.toolbar&&this.toolbar.setup(this.id);this.modebar&&this.modebar.setup(this.id);var j=UI.get_instance();j.register_overlay("settings-overlay",[new SettingsGroup(ui_strings.S_SETTINGS_HEADER_GENERAL,"general"),new SettingsGroup(ui_strings.S_SETTINGS_HEADER_DOCUMENT,"document"),new SettingsGroup(ui_strings.S_SETTINGS_HEADER_SCRIPT,"script"),new SettingsGroup(ui_strings.S_SETTINGS_HEADER_CONSOLE,"console"),new SettingsGroup(ui_strings.S_SETTINGS_HEADER_KEYBOARD_SHORTCUTS,"keyboard-shortcuts"),new SettingsGroup(ui_strings.S_SETTINGS_HEADER_ABOUT,"about")]);j.register_overlay("remote-debug-overlay",[new SettingsGroup(ui_strings.S_SWITCH_REMOTE_DEBUG,"remote_debug")]);this.addTemporaryTabs();this.tab.setActiveTab(global_state&&global_state.ui_framework.last_selected_top_tab||this.tab.tabs[0].ref_id);this.container.setup(this.id);this.update(this.left,this.top,!0);this.setup()};TopCell.prototype=CellBase;var ViewBase=new function(){var a=this,b=1,c=[],d=[],e=!0,f=function(){return"view-"+(b++).toString()},g=function(a,b){var c="",d=0;for(;(c=b[d])&&!a[c];d++);return c&&!0||!1},h=function(a){return d.indexOf(a)>-1};this.required_services=[];this.getSingleViews=function(a){var b="",d=0,e=[];for(;b=c[d];d++)views[b].type=="single-view"&&(!a||!g(views[b],a))&&(e[e.length]=b);return e};this._delete=function(a){var b="",d=0;for(;(b=c[d])&&b!=a;d++);if(b){c.splice(d,1);return!0}return!1};this.init=function(a,b,d,e,g,h){this.id=a||f();this.name=b;this.container_class=d;this.inner=e;this.container_ids=[];this.type=this.type||"single-view";this.default_handler=g||"";this.edit_handler=h||"";this.requires_view||(this.requires_view="");window.views||(window.views={});window.views[a]=this;c.indexOf(this.id)==-1&&(c[c.length]=this.id);messages.post("view-initialized",{view_id:this.id})};this.addContainerId=function(a){this.container_ids[this.container_ids.length]=a};this.removeContainerId=function(a){var b="",c=0;for(;(b=this.container_ids[c])&&b!=a;c++);b&&this.container_ids.splice(c,1)};this.createView=function(a){a.innerHTML=this.inner};this.create_disabled_view=function(a){a.innerHTML=""};this.ondestroy=function(){};this.update=function(){if(!e){var a=this.is_enabled;for(var b=0,c="";c=this.container_ids[b];b++){var d=document.getElementById(c);if(d){a?this.createView(d):this.create_disabled_view(d);messages.post("view-created",{id:this.id,container:d,is_enabled:a})}}}};this.applyToContainers=function(a){var b="",c=0,d=null;for(;b=this.container_ids[c];c++){d=document.getElementById(b);d&&a(d)}};this.isvisible=function(){var a="",b=0;for(;a=this.container_ids[b];b++)if(document.getElementById(a))return!0;return!1};this.__defineGetter__("is_enabled",function(){return this.required_services.every(h)});this.__defineSetter__("is_enabled",function(){});this.getAllContainers=function(){var a="",b=0,c=null,d=[];for(;a=this.container_ids[b];b++)if(c=document.getElementById(a))d[d.length]=c;return d};this.get_container=function(){return this.container_ids[0]&&document.getElementById(this.container_ids[0])||null};this.getToolbarControl=function(a,b,c){c=c||"handler";var d=document.getElementById(a.id.replace(/container/,"toolbar"));if(d){var e=d.getElementsByTagName("*"),f=null,g=0;for(;f=e[g];g++)if(f.getAttribute(c)==b)return f}return null};this.clearAllContainers=function(){var a="",b=0,c=null,d=[];for(;a=this.container_ids[b];b++)if(c=document.getElementById(a))c.innerHTML=""};this.reset_containers=function(){this.container_ids=[]};this.has_container_id=function(a){return this.container_ids.indexOf(a)>-1};this.reset_containers=function(){this.container_ids.length&&window.messages.post("hide-view",{id:this.id});this.container_ids=[]};this.onresize=function(a){};var i=function(a){var b=window.views[a.id];if(b){b.ondestroy();messages.post("view-destroyed",{id:a.id})}};window.messages.addListener("hide-view",i,!0);window.messages.addListener("profile-enabled",function(a){e=!1;d=a.services.slice();for(var b in window.views){var c=window.views[b];if(c.type=="side-panel"||c.type=="single-view"){c.update();var f=window.toolbars[b];f&&(c.is_enabled?f.enable():f.disable())}}},!0);window.messages.addListener("profile-disabled",function(a){a.disabled_services.forEach(function(a){d.contains(a)&&d.splice(d.indexOf(a),1)})},!0)},View=function(a,b,c,d,e){this.init(a,b,c,d,e)};View.prototype=ViewBase;var TempBaseView=function(){this._count=0;this._init_super=this.init;this._getid=function(){var a=0;return function(){return"temp-view-"+ ++a}}();this.init=function(a,b,c,d){this._init_super(this._getid(),a,b,c,d)}},TempView=function(a,b,c,d){};TempBaseView.prototype=ViewBase;TempView.prototype=new TempBaseView;var CompositeViewBase=function(){this.type="composite-view";this.has_modebar=!1;this.update=function(a,b){var c=!1,d=this.modebar?this.modebar.offsetHeight:0;this._parent_cell=a;for(var e,f=0;e=this.container_ids[f];f++){c=!0;this.cell.left=a.left+a.left_border_padding;this.cell.top=a.top+a.top_border_padding;this.cell.width=a.width;this.cell.height=a.height-d;if(this.cell.width+this.cell.height>0){this.cell.setDefaultDimensions();this.cell.update(this.cell.left,this.cell.top,!0,b)}}if(c&&d){this.modebar.cell=this.cell;this.modebar.setDimensions(!0);this.modebar.setup()}};this._on_setting_change=function(a){if(a.id=="modebar"&&a.key=="show-modebar-"+this._modebar_id){this.modebar.setVisibility(window.settings.modebar.get("show-modebar-"+this._modebar_id));this._parent_cell&&this.update(this._parent_cell)}};this.initCompositeView=function(a,b,c,d,e){this._layout_rough=c;this.cell=new Cell(c,c.dir,null,null,e);if(d){this._modebar_id=d;this.modebar=UI.get_instance().get_modebar(d);this.has_modebar=!0;window.messages.addListener("setting-changed",this._on_setting_change.bind(this));this.modebar&&this.modebar.setVisibility(window.settings.modebar.get("show-modebar-"+this._modebar_id))}this.init(a,b)};this.update_cell=function(a){this._layout_rough=a||(a=this._layout_rough);this.cell=new Cell(a,a.dir)}},CompositeView=function(a,b,c,d,e){this.initCompositeView(a,b,c,d,e)};CompositeViewBase.prototype=ViewBase;CompositeView.prototype=new CompositeViewBase;var SettingView=function(a,b,c){this.is_hidden=!0;this.hidden_in_settings=!0;this.do_not_reset=!0;this._sort_by_title=function(a,b){return window.views[a].name>window.views[b].name&&1||window.views[a].name<window.views[b].name&&-1||0};this.createView=function(a){var b=ViewBase.getSingleViews(["hidden_in_settings"]).sort(this._sort_by_title);a.render(templates.settings(b))};this.syncSetting=function(a,b,c){var d=this.getAllContainers(),e=null,f=0,g=null,h=null,i=0;for(;e=d[f];f++){g=e.getElementsByTagName("input");for(i=0;h=g[i];i++)h.getAttribute("view-id")==a&&h.name==b&&(h.checked=c)}};this.init(a,b,c)};SettingView.prototype=ViewBase;new SettingView("settings_view",ui_strings.S_BUTTON_LABEL_SETTINGS,"scroll");var UIBase=new function(){var a=this,b=1,c={},d=function(){return"ui-"+(b++).toString()};this.getUIById=function(a){return c[a]};this._delete=function(a){delete c[a]};this.initBase=function(){c[this.id=d()]=this};this.parent_container_id="";this.update_style=function(a){var b=["left","top","width","height"],c="",d=0;for(;c=b[d];d++)this[c]!==parseInt(a[c])&&(a[c]=this[c]+"px")};this.__is_visible=!0;this.isvisible=function(){return this.cell&&document.getElementById(this.type+"-to-"+this.cell.id)&&!0||!1};this.getElement=function(){return this.cell&&document.getElementById(this.type+"-to-"+this.cell.id)};this.update=function(a){a&&(this.is_dirty=!0);var b=this.type+"-to-"+this.cell.id,c=document.getElementById(b),d="";if(!c){c=document.createElement(this.type);c.id=b;c.setAttribute("ui-id",this.id);if(this.attributes)for(d in this.attributes)c.setAttribute(d,this.attributes[d]);if(this.parent_container_id){var e=document.getElementById(this.parent_container_id);e?e.appendChild(c):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing parent_container in update in UIBase")}else viewport.appendChild(c)}if(this.is_dirty){this.is_dirty=!1;this.update_style(c.style);this.update_sub_class()}return c};this.update_sub_class=function(){};this.getPropertiesSum=function(a){var b="",c=0,d=0;for(;b=a[c];c++)d+=this.style[b];return d};this.horizontal_border_padding_properties=["border-right-width","border-left-width","padding-right","padding-left"];this.vertical_border_padding_properties=["border-top-width","border-bottom-width","padding-top","padding-bottom"];this.left_border_padding_properties=["border-left-width","padding-left"];this.top_border_padding_properties=["border-top-width","padding-top"];this.setCSSProperties=function(){this.vertical_border_padding=this.getPropertiesSum(this.vertical_border_padding_properties);this.horizontal_border_padding=this.getPropertiesSum(this.horizontal_border_padding_properties);this.left_border_padding=this.getPropertiesSum(this.left_border_padding_properties);this.top_border_padding=this.getPropertiesSum(this.top_border_padding_properties);this.default_height=this.height=this.style.height;this.offsetHeight=this.height+this.vertical_border_padding;this.offsetWidth=this.width+this.horizontal_border_padding};this.copyCSS=function(a){var b=null,c=null,d=null,e="",f=null,g=null,h=0,i=0,j=viewport.appendChild(document.createElement("div"));j.style.cssText="position:absolute;top:0;left:-1000px;";for(;b=a[h];h++){j.innerHTML="";f=j.appendChild(document.createElement(b.source));if(b.source_attrs)for(var k in b.source_attrs)f.setAttribute(k,b.source_attrs[k]);g=b.target.style={};d=b.properties;if(f&&g){c=getComputedStyle(f,null);for(i=0;e=d[i];i++)e.setProp?b.target[e.t_name]=e.setProp(f,c):g[e.t_name?e.t_name:e.s_name]=parseInt(c.getPropertyValue(e.s_name))}}viewport.removeChild(j)};this.setVisibility=function(a){this.__is_visible=a=="visible"};this.getFocusCatcher=function(){document.getElementById(defaults.focus_catcher_id)||viewport.render(["div",["input","id",defaults.focus_catcher_id],"style","position:absolute;left:-300px;top:0;width:100px;"]);return document.getElementById(defaults.focus_catcher_id)}},TopUIBase=function(){this.changeStyleProperty=function(a,b){var c=document.styleSheets,d=null,e=0,f=null,g=null,h=0,i=!1;for(;(d=c[e])&&!i;e++){f=d.cssRules;for(e=0;(g=f[e])&&!i;e++)if(g.type==1&&g.selectorText==this.type){h=parseInt(g.style.getPropertyValue("padding-right"));if(h||h==0){h+=b;g.style.setProperty(a,h+"px","");this.constructor.prototype.style[a]=h;this.setCSSProperties();this.setDimensions();this.render&&this.render();i=!0}}}}},ToolbarBase=function(){this.type="toolbar";this.default_height=0;this.height=0;this.top_border=0;this.bottom_border=1;this.offsetHeight=0;this._super_update_style=this.update_style;this.update_style=function(a){this._super_update_style(a);this.height&&a.display!="block"&&(a.display="block");!this.height&&a.display!="none"&&(a.display="none")};this.getTopPosition=function(){return this.cell.top+(this.cell.tab?this.cell.tab.offsetHeight:0)};this.getBottomPosition=function(){return this.__is_visible?this.getTopPosition()+this.offsetHeight:0};this.get_control=function(a,b){b||(b="handler");var c=this.getElement();if(c){var d=c.getElementsByTagName("*"),e=null,f=0;for(;e=d[f];f++)if(e.getAttribute(b)==a)return e}return null};this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();b=this.getTopPosition();if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}b=this.__is_visible&&(this.buttons.length||this.switches&&this.switches.length||this.filters.length||this.specials.length||this.customs.length)?this.default_height:0;if(b!=this.height){this.is_dirty=!0;this.height=b;this.offsetHeight=b+this.vertical_border_padding}this.update(a)};this.update_sub_class=function(){var a=document.getElementById(this.type+"-to-"+this.cell.id);if(a){var b=a.getElementsByTagName("cst-select")[0];if(b){var c=this.width,d=a.getElementsByTagName("filter")[0]||a.getElementsByTagName("toolbar-search")[0],e=b.previousElementSibling;if(d){var f=window.getComputedStyle(d,null),g=parseInt(f.marginLeft)+parseInt(f.marginRight);c-=d.offsetWidth+g}e&&(c-=e.offsetLeft+e.offsetWidth-this.left_border_padding);b.style.width=c-defaults["cst-select-margin-border-padding"]+"px"}}};this.setVisibility=function(a){this.__is_visible=a;toolbars[this.__view_id]&&toolbars[this.__view_id].setVisibility(a)};this.setup=function(a){var b=document.getElementById(this.type+"-to-"+this.cell.id)||this.update();b.innerHTML="";this.create_toolbar_content(a,b)};this.create_toolbar_content=function(a,b){this.filters=toolbars[a]&&toolbars[a].filters||[];this.buttons=toolbars[a]&&toolbars[a].buttons||[];this.groups=toolbars[a]&&toolbars[a].groups||[];this.switches=switches[a]&&switches[a].keys||[];this.single_selects=single_selects[a];this.toolbar_settings=window.toolbar_settings&&window.toolbar_settings[a]||null;this.specials=toolbars[a]&&toolbars[a].specials||[];this.customs=toolbars[a]&&toolbars[a].customs||[];this.__view_id=a;toolbars[a]&&(this.__is_visible=toolbars[a].getVisibility());var c=this.filters.length&&UI.get_instance().get_search(a);if(this.__is_visible){this.filters.length&&b.render(templates.filters(this.filters));c&&b.render(templates.search_button(c));if(this.groups.length){var d=[];for(var e=0,f;f=this.groups[e];e++){var g=[];if(f.items&&f.type!==UI.TYPE_INPUT){var h=null;for(var i=0,j;j=f.items[i];i++)if(f.type===UI.TYPE_SINGLE_SELECT){var k=window.single_selects;k=(k=k[a])&&(k=k[f.name])&&(k=k.values);g.push(templates.single_select_button(j,k))}else f.type===UI.TYPE_SWITCH||f.type===UI.TYPE_SWITCH_CUSTOM_HANDLER?g.push(templates._switch(j.key)):j.template?g.push(j.template(views[a])):g.push(templates.toolbar_button(j));d.push(templates.toolbar_group_wrapper(g,f,a))}}b.render(d)}this.switches.length&&b.render(templates.switches(this.switches));this.toolbar_settings&&b.render(templates.toolbar_settings(this.toolbar_settings));this.specials.length&&b.render(templates.buttons(this.specials));if(this.customs.length){var l=null,e=0;for(;l=this.customs[e];e++)b.render(l.template(views[a]))}!window.views[a].is_enabled&&toolbars[a]&&toolbars[a].disable()}};this.get_filters=function(){return this.filters};this.init=function(a,b,c,d,e){this.cell=a;this.buttons=b||[];this.filters=c||[];this.specials=d||[];this.customs=e||[];this.width=0;this.top=0;this.left=0;this.is_dirty=!0;this.initBase()}},Toolbar=function(a,b,c,d,e){this.init(a,b,c,d,e)},TopToolbar=function(a,b,c,d,e){this.type="top-toolbar";this.getTopPosition=function(){return this.cell.top};this.init(a,b,c,d,e)},WindowToolbar=function(a,b,c,d,e){this.type="window-toolbar";this.parent_container_id=a.id;this.init(a,b,c,d,e);this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}b=this.__is_visible&&(this.buttons.length||this.switches&&this.switches.length||this.filters.length||this.specials.length||this.customs.length)?this.default_height:0;if(b!=this.height){this.is_dirty=!0;this.height=b;this.offsetHeight=b+this.vertical_border_padding}this.update(a)};this.update_style=function(a){this.height&&a.display!="block"&&(a.display="block");!this.height&&a.display!="none"&&(a.display="none")};this.getCssText=function(){return""}};ToolbarBase.prototype=UIBase;Toolbar.prototype=new ToolbarBase;TopToolbar.prototype=new ToolbarBase;TopUIBase.apply(TopToolbar
.prototype);TopToolbar.prototype.constructor=TopToolbar;WindowToolbar.prototype=new ToolbarBase;var ToolbarSeparator=function(){this.type="toolbar-separator";this.get_template=function(){return window.templates[this.type]()}};window.templates||(window.templates={});window.templates["toolbar-separator"]=function(){return["toolbar-separator"]};var ToolbarConfigBase=new function(){var a=this,b=1,c={},d=function(){return"toolbar-"+(b++).toString()};this.addContainerId=function(a){this.container_ids.contains(a)||this.container_ids.push(a)};this.removeContainerId=function(a){for(var b="",c=0;b=this.container_ids[c];c++)if(b==a){this.container_ids.splice(c,1);break}};this.updateButtons=function(){var a="",b=0,c=null,d=null,e=null,f=0;for(;a=this.container_ids[b];b++){c=document.getElementById(a);if(c){d=c.getElementsByTagName("toolbar-buttons")[0].getElementsByClassName("ui-button");for(f=0;e=d[f];f++){this.buttons[f].disabled?e.setAttribute("disabled",""):e.removeAttribute("disabled");e.title=this.buttons[f].title}}}};this.getButtonsByHandler=function(a){var b=[],c=0,d=null;for(;d=this.buttons[c];c++)d.handler==a&&(b[b.length]=d);return b};this.getButtonById=function(a){var b=null,c=0;for(;(b=this.buttons[c])&&b.id!=a;c++);return b||null};this.enableButtons=function(){var a=null,b=null,c="",d=0,e=0;for(;c=arguments[d];d++){a=this.getButtonsByHandler(c);for(e=0;b=a[e];e++)b.disabled=!1}this.updateButtons()};this.disableButtons=function(){var a=null,b=null,c="",d=0,e=0;for(;c=arguments[d];d++){a=this.getButtonsByHandler(c);for(e=0;b=a[e];e++)b.disabled=!0}this.updateButtons()};this.set_button_title=function(a,b){var c=this.getButtonsByHandler(a);for(var d=0;button=c[d];d++)button.title=b;this.updateButtons()};this.setVisibility=function(a){this.__is_visible=a};this.getVisibility=function(){return this.__is_visible};this.enable=function(){for(var a=0,b;b=this.container_ids[a];a++){var c=document.getElementById(b);if(c){var d=c.querySelector(".disabled-toolbar-overlay");d&&c.removeChild(d)}}};this.disable=function(){for(var a=0,b;b=this.container_ids[a];a++){var c=document.getElementById(b);if(c){var d=c.querySelector(".disabled-toolbar-overlay");d||c.render(["div","class","disabled-toolbar-overlay"])}}};this.init=function(a,b,e,f,g){c[this.id=d()]=this;if(typeof a=="object"){var h=a.view;this.groups=a.groups;this.buttons=[];this.filters=[];for(var i=0,j;j=this.groups[i];i++){j.type!==UI.TYPE_INPUT&&j.items&&(this.buttons=this.buttons.concat(j.items));if(j.type===UI.TYPE_SWITCH){var k=j.items.map(function(a){return a.key});new Switches(this.id,k)}else if(j.type===UI.TYPE_SINGLE_SELECT){var l=j.items.map(function(a){return a.value});new SingleSelect(h,j.name,l,j.default_value||l[0],j.allow_multiple_select)}else if(j.type===UI.TYPE_INPUT)for(var m=0,n;n=j.items[m];m++)this.filters.push(n)}}else{var h=a;this.buttons=b||[];this.groups=[{items:this.buttons}];this.filters=e||[];this.specials=f||[];this.customs=g||[]}this.container_ids=[];this.__is_visible=!0;window.toolbars||(window.toolbars={});window.toolbars[h]=this};this.getToolbarById=function(a){return c[a]};this._delete=function(a){delete c[a]}},ToolbarConfig=function(a,b,c,d,e){this.init(a,b,c,d,e)};ToolbarConfig.prototype=ToolbarConfigBase;var ModebarBase=function(){this.type="modebar";this.default_height=0;this.height=0;this.top_border=0;this.offsetHeight=0;this.cell=null;this.width=0;this.top=0;this.left=0;this.is_dirty=!0;this.setDimensions=function(a){var b=0;this.default_height||this.setCSSProperties();b=this.cell.top+this.cell.height;if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}this.update(a)};this.__defineGetter__("offsetHeight",function(){this.default_height||this.setCSSProperties();return this.__is_visible?this._offset_height:0});this.__defineSetter__("offsetHeight",function(a){this._offset_height=a});this.setVisibility=function(a){this.__is_visible=a;if(this.cell&&this.isvisible()&&!a){var b=this.getElement();b.parentNode.removeChild(b)}};this.setup=function(a){};this.init=function(){this.initBase()}},Modebar=function(){this.init()};ModebarBase.prototype=UIBase;Modebar.prototype=new ModebarBase;var BaseEditor=new function(){this.edit=this.oninput=this.submit=this.cancel=this.onclick=this.nav_next=this.nav_previous=function(){return null};this.textarea_container_name="textarea-container";this.get_base_style=function(a){var b=getComputedStyle(a,null),c=["font-family","line-height","font-size"],d=null,e=0,f=document.createElement("test-element"),g="display:block;position:absolute;left:-100px;top:0;white-space:pre;";for(;d=c[e];e++){this.base_style[d]=b.getPropertyValue(d);g+=d+":"+this.base_style[d]+";"}f.textContent="1234567890";document.documentElement.appendChild(f);f.style.cssText=g;this.char_width=f.offsetWidth/10;this.base_style["line-height"]=(this.line_height=f.offsetHeight)+"px";document.documentElement.removeChild(f);this.host_element_border_padding_left=parseInt(b.getPropertyValue("padding-left"))+parseInt(b.getPropertyValue("border-left-width"));this.host_element_border_padding_top=parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("border-top-width"));g="";for(d in this.base_style)g+=d+":"+this.base_style[d]+";";this.textarea_container=document.createElement(this.textarea_container_name);this.textarea=this.textarea_container.appendChild(document.createElement("textarea"));this.textarea.style.cssText=g;this.textarea.oninput=this.getInputHandler()};this.__is_active=function(){return!1};this.__defineGetter__("is_active",function(){return this.__is_active()});this.getInputHandler=function(){return this.oninput.bind(this)};this._set_textarea_dimensions=function(){var a=Math.max.apply(null,this.textarea.value.split(/\r?\n/).map(function(a){return a.length})),b=this.char_width*a;this.textarea.style.height="0px";this.textarea.style.width=(b<this.max_width?b||1:this.max_width)+"px";this.textarea.style.height=this.textarea.scrollHeight+"px"};this.base_init=function(a){this.context_enter=null;this.context_cur=null;this.base_style={"font-family":"","line-height":0,"font-size":0};this.char_width=0;this.line_height=0;this.cssText="";this.textarea_container=null;this.textarea=null;this.host_element_border_padding_left=0;this.host_element_border_padding_top=0}};SimpleBaseEditor=function(){};SimpleBaseEditorPrototype=function(){this._init=function(){this.base_init();this.textarea_container_name="textarea-container-inline";this.context_enter={};this.context_cur={}};this.set_enter_context=function(a){return{value:""}};this.onsubmit=function(a){};this.edit=function(a,b){b||(b=a.target);this.context_enter=this.set_enter_context(b);this.base_style["font-size"]||this.get_base_style(b);this.textarea_container.parentElement&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this.textarea_container.parentElement is not null in submit");this.textarea.value=b.textContent;b.textContent="";b.appendChild(this.textarea_container);this.max_width=parseInt(getComputedStyle(b.parentNode,null).getPropertyValue("width"));this._set_textarea_dimensions();for(var c in this.context_enter)this.context_cur[c]=this.context_enter[c];a&&this.textarea.focus();this.textarea.selectionStart=0;this.textarea.selectionEnd=this.textarea.value.length};this.oninput=function(a){if(this.textarea_container.parentElement){this._set_textarea_dimensions();this.context_cur.value=this.textarea.value}};this.submit=function(){var a=this.textarea_container.parentElement;if(a){a.textContent=this.context_cur.value;this.onsubmit(this.context_cur)}return a};this.cancel=function(){var a=this.textarea_container.parentElement;a&&(a.textContent=this.context_enter.value);return a};this.onclick=function(a){if(!this.textarea_container.contains(a.target)){this.submit();return!0}return!1};this._init()};SimpleBaseEditorPrototype.prototype=BaseEditor;SimpleBaseEditor.prototype=new SimpleBaseEditorPrototype;BaseDialog.is_visible=!1;BaseDialog.prototype=new function(){this.show=function(){if(!BaseDialog.is_visible){this._dialog_ele=document.documentElement.render(this._dialog_template);this._dialog=this._dialog_ele.firstChild;var a=window.getComputedStyle(this._dialog,null);this._dialog.style.width=a.width;this._dialog.style.height=a.height;this._dialog.className="visible";document.addEventListener("click",this._modal_click_handler_bound,!0);BaseDialog.is_visible=!0}};this.dismiss=function(){if(this._dialog_ele){this._dialog_ele.parentNode.removeChild(this._dialog_ele);document.removeEventListener("click",this._modal_click_handler_bound,!0)}BaseDialog.is_visible=!1};this._modal_click_handler=function(a){var b=a.target,c=b.get_attr("parent-node-chain","data-handler-id"),d=this._handler_map[c];if(c){this.dismiss();d&&d(a,a.target)}a.stopPropagation();a.preventDefault()};this._get_template=function(a,b){return["div",["div",["div",a,"id","ui-dialog-message"],["div",b.map(this._get_button_template),"id","ui-dialog-buttons"],"id","ui-dialog"],"id","ui-dialog-background","class","overlay"]};this._get_button_template=function(a){return["span",a.label,"data-handler-id",""+a.id,"class","ui-button","tabindex","1"]};this._init=function(a,b){this._modal_click_handler_bound=this._modal_click_handler.bind(this);this._handler_map={};b=b.length?b:[{label:ui_strings.S_BUTTON_CANCEL}];b.forEach(function(a,b){a.id=b;this._handler_map[b]=a.handler},this);this._dialog_template=this._get_template(a,b)}};ConfirmDialogPrototype.prototype=new BaseDialog;ConfirmDialog.prototype=new ConfirmDialogPrototype;ConfirmDialog.YES_NO=1;ConfirmDialog.OK_CANCEL=2;ConfirmDialog.labels={};ConfirmDialog.labels[ConfirmDialog.YES_NO]=[ui_strings.S_BUTTON_YES,ui_strings.S_BUTTON_NO];ConfirmDialog.labels[ConfirmDialog.OK_CANCEL]=[ui_strings.S_BUTTON_OK,ui_strings.S_BUTTON_CANCEL];AlertDialogPrototype.prototype=new BaseDialog;AlertDialog.prototype=new AlertDialogPrototype;window.cls||(window.cls={});cls.Ruler=function(a){this._init(a)};cls.Ruler.BASE_CLASS="ruler";cls.Ruler.CLOSE_BUTTON_CLASS="ruler-close";window.addEventListener("load",function(){[["BORDER_LEFT",".ruler-left-bg","width"],["BORDER_TOP",".ruler-top-bg","height"],["BORDER_RIGHT",".ruler-right-bg","width"],["BORDER_BOTTOM",".ruler-bottom-bg","height"]].forEach(function(a){const b=0,c=1,d=2;var e=document.styleSheets.getDeclaration(a[c])[a[d]];cls.Ruler[a[b]]=parseInt(e)});cls.Ruler.prototype=new function(){this.show_ruler=function(a){};this.hide_ruler=function(){};this.set_container=function(a){};this.callback;this.onclose;this.scale;this.w;this.h;const a=cls.Ruler.BASE_CLASS,b=cls.Ruler.CLOSE_BUTTON_CLASS,c=cls.Ruler.BORDER_LEFT,d=cls.Ruler.BORDER_TOP,e=cls.Ruler.BORDER_RIGHT,f=cls.Ruler.BORDER_BOTTOM,g=30;this._init=function(b){this._callback=b;this.base_class=a;this._scale=1;this._onnodeinserted_bound=this._onnodeinserted.bind(this);this._onmousedown_bound=this._onmousedown.bind(this);this._onmouseup_bound=this._onmouseup.bind(this);this._onmousemove_bound=this._onmousemove.bind(this);this._onclick_bound=this._onclick.bind(this);this._update_bound=this._update.bind(this);this._update_handler=null;this._interval=0;this._event=0;this._rx0=50;this._rx1=350;this._ry0=50;this._ry1=350;this._cur_w=0;this._cur_h=0};this._onnodeinserted=function(a){if(a.target.hasClass(this.base_class)){document.removeEventListener("DOMNodeInserted",this._onnodeinserted_bound,!1);this._setup(a.target)}};this._onmousedown=function(a){var b=this._get_handlers(a);if(b&&!this._interval){this._update_handler=b;document.addEventListener("mouseup",this._onmouseup_bound,!1);document.addEventListener("mousemove",this._onmousemove_bound,!1);this._interval=setInterval(this._update_bound,g);a.stopPropagation();a.preventDefault()}else this._onmouseup()};this._onmouseup=function(a){document.removeEventListener("mouseup",this._onmouseup_bound,!1);document.removeEventListener("mousemove",this._onmousemove_bound,!1);clearInterval(this._interval);this._interval=0;this._event=null};this._onmousemove=function(a){this._event=a};this._onclick=function(a){a.target.hasClass(b)&&this.hide_ruler()};this._update=function(){this._update_handler()};this._move_handler=function(){if(this._event){var a=this._snap_x0(this._event.clientX-this._ev_delta_x),b=a+this._rx1-this._rx0,c=this._snap_y0(this._event.clientY-this._ev_delta_y),d=c+this._ry1-this._ry0;this._redraw_ruler(a,b,c,d)}};this._snap=function(a){var b=(a/this._scale>>0)*this._scale;a%this._scale/this._scale>.5&&(b+=this._scale);return b};this._snap_x0=function(a){a=this._snap(a+c)-c;if((this._rx1-e)%this._scale!=0){this._rx1=this._snap(this._rx1-e)+e;while(this._rx1>this._max_x)this._rx1-=this._scale}var b=(this._min_x+c)/this._scale>>0,d=(b+1)*this._scale-c,f=this._rx1-this._rx0;b=(this._max_x-e)/this._scale>>0;var g=b*this._scale+e-f;while(a<d)a+=this._scale;while(a>g)a-=this._scale;return a};this._snap_y0=function(a){a=this._snap(a+d)-d;if((this._ry1-f)%this._scale!=0){this._ry1=this._snap(this._ry1-f)+f;while(this._ry1>this._max_y)this._ry1-=this._scale}var b=(this._min_y+d)/this._scale>>0,c=(b+1)*this._scale-d,e=this._ry1-this._ry0;b=(this._max_y-f)/this._scale>>0;var g=b*this._scale+f-e;while(a<c)a+=this._scale;while(a>g)a-=this._scale;return a};this._snap_x1=function(a){a=this._snap(a-e)+e;var b=this._rx1-this._rx0,d=this._rx0+c+e,f=(this._max_x-e)/this._scale>>0,g=f*this._scale+e;while(a<d)a+=this._scale;while(a>g)a-=this._scale;return a};this._snap_y1=function(a){a=this._snap(a-f)+f;var b=this._ry1-this._ry0,c=this._ry0+d+f,e=(this._max_y-f)/this._scale>>0,g=e*this._scale+f;while(a<c)a+=this._scale;while(a>g)a-=this._scale;return a};this._width_handler=function(){if(this._event){var a=this._snap_x1(this._event.clientX-this._ev_delta_x);this._redraw_ruler(null,a);this._call_callback()}};this._height_handler=function(){if(this._event){var a=this._snap_y1(this._event.clientY-this._ev_delta_y);this._redraw_ruler(null,null,null,a);this._call_callback()}};this._width_and_height_handler=function(){if(this._event){var a=this._snap_x1(this._event.clientX-this._ev_delta_x),b=this._snap_y1(this._event.clientY-this._ev_delta_y);this._redraw_ruler(null,a,null,b);this._call_callback()}};this._call_callback=function(a){if(this._callback)if(a||this._cur_w!=this.w||this._cur_h!=this.h){this._cur_w=this.w;this._cur_h=this.h;this._callback(this)}};this._get_handlers=function(a){var b=this._set_max_dimensions();if(b){var g=a.clientX-b.left,h=a.clientY-b.top;if(g>=this._rx0&&g<this._rx1&&h>this._ry0&&h<this._ry0+d||g>=this._rx0&&g<=this._rx0+c&&h>=this._ry0+d&&h<=this._ry1){this._ev_delta_x=a.clientX-this._rx0;this._ev_delta_y=a.clientY-this._ry0;return this._move_handler}if(g>=this._rx1-e&&g<=this._rx1&&h>=this._ry0+d&&h<=this._ry1-f){this._ev_delta_x=a.clientX-this._rx1;return this._width_handler}if(g>=this._rx0+c&&g<=this._rx1-e&&h>this._ry1-f&&h<=this._ry1){this._ev_delta_y=a.clientY-this._ry1;return this._height_handler}if(g>=this._rx1-e&&g<=this._rx1&&h>this._ry1-f&&h<=this._ry1){this._ev_delta_x=a.clientX-this._rx1;this._ev_delta_y=a.clientY-this._ry1;return this._width_and_height_handler}}return null};this._setup=function(a){this._ruler_ele=a;this._set_max_dimensions();a.addEventListener("mousedown",this._onmousedown_bound,!1);a.addEventListener("click",this._onclick_bound,!1);this._call_callback(!0)};this._redraw_ruler=function(a,b,c,d,e){var f=!1;if(typeof a=="number"&&this._rx0!=a){f=!0;this._rx0=a}if(typeof b=="number"&&this._rx1!=b){f=!0;this._rx1=b}if(typeof c=="number"&&this._ry0!=c){f=!0;this._ry0=c}if(typeof d=="number"&&this._ry1!=d){f=!0;this._ry1=d}(f||e)&&this._ruler_ele.clearAndRender(window.templates.ruler_body(this))};this._set_max_dimensions=function(){if(this._container){var a=this._container.getBoundingClientRect();this._min_x=0;this._min_y=0;this._max_x=a.width;this._max_y=a.height;return a}return null};this.__defineSetter__("scale",function(a){this._scale=a;if(this._ruler_ele){var b=this._snap_x0(this._rx0),c=this._snap_y0(this._ry0);this._redraw_ruler(b,null,c,null,!0);this._call_callback()}});this.__defineGetter__("scale",function(){return this._scale});this.__defineSetter__("left",function(a){});this.__defineGetter__("left",function(){return this._rx0});this.__defineSetter__("top",function(a){});this.__defineGetter__("top",function(){return this._ry0});this.__defineSetter__("right",function(a){});this.__defineGetter__("right",function(){return this._rx1});this.__defineSetter__("bottom",function(a){});this.__defineGetter__("bottom",function(){return this._ry1});this.__defineSetter__("width",function(a){});this.__defineGetter__("width",function(){return this._rx1-this._rx0});this.__defineSetter__("height",function(a){});this.__defineGetter__("height",function(){return this._ry1-this._ry0});this.__defineSetter__("target_width",function(a){});this.__defineGetter__("target_width",function(){return this._rx1-this._rx0-c-e});this.__defineSetter__("target_height",function(a){});this.__defineGetter__("target_height",function(){return this._ry1-this._ry0-d-f});this.__defineSetter__("w",function(a){});this.__defineGetter__("w",function(){return this.target_width/this._scale});this.__defineSetter__("h",function(a){});this.__defineGetter__("h",function(){return this.target_height/this._scale});this.__defineSetter__("callback",function(a){this._callback=a});this.__defineGetter__("callback",function(){return this._callback});this.__defineSetter__("onclose",function(a){this._onclose=a});this.__defineGetter__("onclose",function(){return this._onclose});this.show_ruler=function(a){if(!this._ruler_ele||!this._ruler_ele.parentNode){this._container=a;document.addEventListener("DOMNodeInserted",this._onnodeinserted_bound,!1);this._set_max_dimensions();this._rx0=this._snap_x0(this._rx0);this._ry0=this._snap_y0(this._ry0);this._container.render(window.templates.ruler(this))}};this.hide_ruler=function(){if(this._ruler_ele&&this._ruler_ele.parentNode){this._ruler_ele.parentNode.removeChild(this._ruler_ele);this._ruler_ele=null;this._container.removeEventListener("mousedown",this._onmousedown_bound,!1);this._container.removeEventListener("click",this._onclick_bound,!1);this._onclose&&this._onclose()}};this.set_container=function(a){if(this._ruler_ele&&a!=this._container){this._container=a;a.appendChild(this._ruler_ele)}}}},!1);(function(){const a=30,b={};b[50]=[50,10,2];b[20]=[20,10,1];b[10]=[10,5,1];b[5]=[5,1,1];b[1]=[10,5,1];this.ruler=function(a){return["div",this.ruler_body(a),"class",cls.Ruler.BASE_CLASS]};this.ruler_body=function(b){var c=[50,20,10,5,1].reduce(function(c,d){return d*b.scale>a?d:c},50),d=c*b.scale,e=this._get_scales(c,b.scale);return["div",["div","class","ruler-top-bg"],["div","class","ruler-right-bg"],["div","class","ruler-bottom-bg"],["div","class","ruler-left-bg"],this._ruler_top_labels(c,d,b.target_width),this._ruler_left_labels(c,d,b.target_height),this._ruler_top_scale(e),this._ruler_right_scale(e),this._ruler_bottom_scale(e),this._ruler_left_scale(e),["span","class",cls.Ruler.CLOSE_BUTTON_CLASS],"style","top:"+b.top+"px;"+"left:"+b.left+"px;"+"width:"+b.width+"px;"+"height:"+b.height+"px;","class","ruler-body"]};this._get_scales=function(a,c){return b[a].map(function(a){return c*a})};this._ruler_top_scale=function(a){var b="background-size: "+a[2]+"px 3px, "+a[1]+"px 6px, "+a[0]+"px 10px;";return["div","style",b,"class","ruler-top-scale"]};this._ruler_bottom_scale=function(a){var b="background-size: "+a[2]+"px 3px, "+a[1]+"px 6px, "+a[0]+"px 10px;";return["div","style",b,"class","ruler-bottom-scale"]};this._ruler_left_scale=function(a){var b="background-size: 3px "+a[2]+"px, "+"6px "+a[1]+"px, "+"9px "+a[0]+"px;";return["div","style",b,"class","ruler-left-scale"]};this._ruler_right_scale=function(a){var b="background-size: 3px "+a[2]+"px, "+"6px "+a[1]+"px, "+"9px "+a[0]+"px;";return["div","style",b,"class","ruler-right-scale"]};this._ruler_top_labels=function(a,b,c){var d=["div"],e=0;for(;;){d.push(["span",e*b<=c?String(e*a):" ","style","width: "+b+"px;"+(e?"":"margin-left: -"+(b/2>>0)+"px;"),"class","ruler-label-top"]);if(e*b>c+b)break;e++}d.push("class","ruler-labels-top");return d};this._ruler_left_labels=function(a,b,c){var d=["div"],e=0;for(;;){d.push(["span",e*b<=c?String(e*a):" ","style","height: "+b+"px;"+"line-height: "+b+"px;"+(e?"":"margin-top: -"+(b/2>>0)+"px;"),"class","ruler-label-left"]);if(e*b>c+b)break;e++}d.push("class","ruler-labels-left");return d}}).apply(window.templates||(window.templates={}));var Tooltips=function(){};Tooltips.TYPE_SIMPLE=0;Tooltips.TYPE_SUPPORT_CONTEXT=1;Tooltips.CSS_TOOLTIP_SELECTED="tooltip-selected";(function(){this.register=function(a,b,c,d){};this.unregister=function(a,b){};this.is_inside_tooltip=function(a,b){};var a=function(a,b,c){this._init(a,b,c)};a.prototype=new function(){this.ontooltip=function(a,b){};this.onhide=function(){};this.ontooltipenter=function(){};this.ontooltipleave=function(){};this.ontooltipclick=function(){};this.show=function(a,b){};this.hide=function(){};this._init=function(a,b,c){if(typeof a=="object"){var d=a;this.keep_on_hover=d.keep_on_hover||!1;this.set_selected=d.set_selected||!1;this.max_height_target=d.max_height_target||"";this.dynamic_size=d.dynamic_size||!1;this.class=d.class||"";this.preferred_position=d.preferred_position||"bottom";this.type=d.type||Tooltips.TYPE_SIMPLE;if(this.type==Tooltips.TYPE_SUPPORT_CONTEXT){this.keep_on_hover=!0;this.class="support-context"}}else{this.keep_on_hover=a||!1;this.set_selected=b||!1;this.max_height_target=c||"";this.dynamic_size=!1;this.class="";this.preferred_position="bottom";this.type=Tooltips.TYPE_SIMPLE}};this.show=function(a,b){return A(this,a,b)};this.hide=function(){B(this)};this.ontooltip=function(a,b){this.show()}};const b="data-tooltip",c="data-tooltip-text",d=70,e=5,f=5,g=12,h=12,i=30,j=30;var k=null,l={},m=[],n=[],o=null,p=!1,q=0,r=0,s=-1,t=-1,u=0,v=[],w=function(){q=window.innerWidth;r=window.innerHeight},x=function(){m[n.length]||m.push(new TooltipContext);n.push(m[n.length]);o=n.last},y=function(a){v.push(a);u||(u=setTimeout(z,d))},z=function(){u=0;var a=v.last;while(v.length)v.pop();if(!(!a||k&&k.is_visible)){var c=a.target,d=n.length-1,e=null;for(;e=n[d];d--)if(e.tooltip_ele.contains(c))break;if(d>-1&&e==n.last){if(!e.current_tooltip||!e.current_tooltip.keep_on_hover){e.set_hide_timeout();return}e.handle_mouse_enter(a);e.last_handler_ele=null;e.last_box=null;e.clear_show_timeout();e.clear_hide_timeout();e.accept_call=!0;x()}else while(n.length>d+1){n.last.handle_mouse_leave(a);if(n.length==d+2)break;n.pop().hide_tooltip()}o=n.last;while(c&&c.nodeType==Node.ELEMENT_NODE){var f=c.getAttribute(b);if(f&&l[f]){if(c==o.last_handler_ele)return;if(o.current_tooltip!=l[f]){o.hide_tooltip();o.current_tooltip=l[f]}o.accept_call=!0;o.last_handler_ele=c;o.last_box=c.getBoundingClientRect();o.last_event=a;o.set_show_timeout();return}c=c.parentNode}o.current_tooltip&&(o.accept_call=!1);o.set_hide_timeout()}},A=function(a,b,d){var k=null;if(o&&a==o.current_tooltip&&o.accept_call){if(s==-1){var l=getComputedStyle(o.tooltip_ele,null);s=0;t=0;["padding-left","border-left-width","padding-right","border-right-width","padding-top","border-top-width","padding-bottom","border-bottom-width"].forEach(function(a){var b=parseInt(l.getPropertyValue(a));b&&(a.contains("left")||a.contains("right")?s+=b:t+=b)})}!b&&o.last_handler_ele&&(b=["span",o.last_handler_ele.getAttribute(c),"class","basic-tooltip"]);if(b){o.tooltip_ele.scrollTop=0;o.tooltip_ele.scrollLeft=0;k=typeof b=="string"?o.tooltip_ele.textContent=b:o.tooltip_ele.clearAndRender(b)}o.current_tooltip.class?o.tooltip_ele.addClass(o.current_tooltip.class):o.tooltip_ele.className="tooltip-container";if(!d&&o.last_box){d={top:o.last_box.top,bottom:o.last_box.bottom,left:o.last_box.left,right:o.last_box.right};if(o.last_event){d.mouse_x=o.last_event.clientX;d.mouse_y=o.last_event.clientY}else{d.mouse_x=Math.floor(d.left+(d.right-d.left)/2);d.mouse_y=Math.floor(d.top+(d.bottom-d.top)/2)}}if(d){var m=0,n=0,p=a.max_height_target&&o.tooltip_ele.querySelector(a.max_height_target)||o.tooltip_ele;o.select_last_handler_ele();if(a.dynamic_size)if(d.bottom-d.top<r/3||Math.max(d.left,q-d.right)<r/3){if(r-d.bottom>d.top){var u=d.bottom+f;o.tooltip_ele.style.top=u+"px";o.tooltip_ele.style.bottom="auto";m=r-u-i-t;p.style.maxHeight=m+"px"}else{var v=r-d.top+f;o.tooltip_ele.style.bottom=v+"px";o.tooltip_ele.style.top="auto";m=r-v-i-t;p.style.maxHeight=m+"px"}if(d.mouse_x<q/2){var w=d.mouse_x+e;o.tooltip_ele.style.left=w+"px";o.tooltip_ele.style.right="auto";n=q-w-j-s;p.style.maxWidth=n+"px"}else{var x=q-d.mouse_x+e;o.tooltip_ele.style.right=x+"px";o.tooltip_ele.style.left="auto";n=q-x-j-s;p.style.maxWidth=n+"px"}}else{if(q-d.right>d.left){var w=d.right+e;o.tooltip_ele.style.left=w+"px";o.tooltip_ele.style.right="auto";n=q-w-j-s;p.style.maxWidth=n+"px"}else{var x=d.left-e;o.tooltip_ele.style.right=x+"px";o.tooltip_ele.style.left="auto";n=x-j-s;p.style.maxWidth=n+"px"}if(d.mouse_y<r/2){var u=d.mouse_y+f;o.tooltip_ele.style.top=u+"px";o.tooltip_ele.style.bottom="auto";m=r-u-i-t;p.style.maxHeight=m+"px"}else{var v=r-d.mouse_y-f;o.tooltip_ele.style.bottom=v+"px";o.tooltip_ele.style.top="auto";m=d.mouse_y-i-t;p.style.maxHeight=m+"px"}}else{var y=o.tooltip_ele.offsetHeight,z=o.tooltip_ele.offsetWidth,A=g,B=h;if(a.type==Tooltips.TYPE_SUPPORT_CONTEXT){A=e;B=f}if(a.preferred_position=="bottom"&&r-d.bottom>y+B){var u=d.bottom+B;o.tooltip_ele.style.top=u+"px";o.tooltip_ele.style.bottom="auto"}else{var v=r-d.top+B;o.tooltip_ele.style.top="auto";o.tooltip_ele.style.bottom=v+"px"}if(q-d.mouse_x>z+A){var w=d.mouse_x+A;o.tooltip_ele.style.left=w+"px";o.tooltip_ele.style.right="auto"}else{var x=q-d.mouse_x+A;o.tooltip_ele.style.left="auto";o.tooltip_ele.style.right=x+"px"}}}}return k},B=function(a){if(!!o){var b=n.length-1,c=n[b];while(c&&b>-1){if(c.current_tooltip&&a==c.current_tooltip&&c.accept_call){while(n.length>b+1)n.pop().hide_tooltip(!0);c.hide_tooltip(!0);o=c;break}c=n[--b]}}},C=function(){"ContextMenu"in window&&(k=ContextMenu.get_instance());x();document.addEventListener("mouseover",y,!1);document.documentElement.addEventListener("mouseleave",y,!1);window.addEventListener("resize",w,!1);w()};this.register=function(b,c,d,e){if(!p){document.readyState=="complete"?C():document.addEventListener("DOMContentLoaded",C,!1);p=!0}l[b]=new a(c,d,e);return l[b]};this.unregister=function(a,b){l[a]&&l[a]==b&&(l[a]=null)};this.is_in_target_chain=function(a){for(var b=0,c;c=n[b];b++)if(c.tooltip_ele.contains(a.target))return!0;return!1};this.handle_contextmenu_event=function(a){o&&!o.tooltip_ele.contains(a.target)&&o.hide_tooltip()};this.hide_tooltip=function(){if(o){while(n.length>1)n.pop().hide_tooltip();o=n.last;o.hide_tooltip()}}}).apply(Tooltips);var TooltipContext=function(){this._init()};TooltipContext.prototype=new function(){const a="data-tooltip",b="data-tooltip-text",c=120,d=110,e=0,f=-3,g=15,h=30;this.set_hide_timeout=function(){this.clear_hide_timeout();this._hide_timeouts.push(setTimeout(this.hide_tooltip,c))};this.clear_hide_timeout=function(){while(this._hide_timeouts.length)clearTimeout(this._hide_timeouts.pop())};this.set_show_timeout=function(){this.clear_hide_timeout();this._show_timeouts.length||this._show_timeouts.push(setTimeout(this.show_tooltip,d))};this.clear_show_timeout=function(){while(this._show_timeouts.length)clearTimeout(this._show_timeouts.pop())};this.show_tooltip=function(a,b,c){this.clear_show_timeout();this.last_event&&this.last_handler_ele&&this.current_tooltip.ontooltip(this.last_event,this.last_handler_ele)};this.hide_tooltip=function(a){this.clear_show_timeout();if(!a&&this.current_tooltip){this.last_event&&this.handle_mouse_leave(this.last_event);this.current_tooltip.onhide()}this._clear_last_handler_eles();this.tooltip_ele.innerHTML="";this.tooltip_ele.removeAttribute("style");if(!a){this.current_tooltip=null;this.last_handler_ele=null;this.last_box=null}};this.select_last_handler_ele=function(){if(this.current_tooltip&&this.current_tooltip.set_selected){this._clear_last_handler_eles();this._push_last_handler_ele();this.last_handler_ele.addClass(Tooltips.CSS_TOOLTIP_SELECTED)}};this.handle_mouse_enter=function(a){if(!this._is_entered){this._is_entered=!0;this.current_tooltip&&this.current_tooltip.ontooltipenter&&this.current_tooltip.ontooltipenter(a)}};this.handle_mouse_leave=function(a){if(this._is_entered){this._is_entered=!1;this.current_tooltip&&this.current_tooltip.ontooltipleave&&this.current_tooltip.ontooltipleave(a)}};this._clear_last_handler_eles=function(){while(this._last_handler_eles.length)this._last_handler_eles.pop().removeClass(Tooltips.CSS_TOOLTIP_SELECTED)};this._push_last_handler_ele=function(){this.last_handler_ele&&!this._last_handler_eles.contains(this.last_handler_ele)&&this._last_handler_eles.push(this.last_handler_ele)};this._ontooltipclick=function(a){this.current_tooltip&&this.current_tooltip.ontooltipclick&&this.current_tooltip.ontooltipclick(a)};this._init=function(){this._hide_timeouts=[];this._show_timeouts=[];this._last_handler_eles=[];this.current_tooltip=null;this.last_handler_ele=null;this.last_box=null;this.last_event=null;this.accept_call=!1;this.show_tooltip=this.show_tooltip.bind(this);this.hide_tooltip=this.hide_tooltip.bind(this);var a=["div","class","tooltip-container"];this.tooltip_ele=(document.body||document.documentElement).render(a);this.tooltip_ele.addEventListener("click",this._ontooltipclick.bind(this),!1)}};var TextSearch=function(a){this._init(a)};TextSearch.PLAIN_TEXT=1;TextSearch.REGEXP=2;TextSearch.NO_MATCH=1;TextSearch.EMPTY=2;TextSearch.DEFAULT_MATCH_CLASS="search-highlight";TextSearch.DEFAULT_MATCH_CLASS_FIRST="search-highlight-first";TextSearch.DEFAULT_MATCH_CLASS_BETWEEN="search-highlight-between";TextSearch.DEFAULT_MATCH_CLASS_LAST="search-highlight-last";TextSearch.SELECTED_MATCH_CLASS="search-highlight-selected";TextSearch.SELECTED_MATCH_CLASS_FIRST="search-highlight-selected-first";TextSearch.SELECTED_MATCH_CLASS_BETWEEN="search-highlight-selected-between";TextSearch.SELECTED_MATCH_CLASS_LAST="search-highlight-selected-last";TextSearch.DEFAULT_STYLE=1;TextSearch.HIGHLIGHT_STYLE=1;TextSearch.prototype=new function(){const a=50,b=50,c=2,d=TextSearch.NO_MATCH,e=TextSearch.EMPTY,f=TextSearch.DEFAULT_MATCH_CLASS,g=TextSearch.DEFAULT_MATCH_CLASS_FIRST,h=TextSearch.DEFAULT_MATCH_CLASS_BETWEEN,i=TextSearch.DEFAULT_MATCH_CLASS_LAST,j=TextSearch.SELECTED_MATCH_CLASS,k=TextSearch.SELECTED_MATCH_CLASS_FIRST,l=TextSearch.SELECTED_MATCH_CLASS_BETWEEN,m=TextSearch.SELECTED_MATCH_CLASS_LAST;window.cls.MessageMixin.apply(this);this._init=function(a){this._search_term="";this._orig_search_term="";this._hits=[];this._match_cursor=-1;this._container=null;this._input=null;this._min_term_length=a||c;this._search_target="";this._search_term_length=0;this._current_match_index=0;this._last_match_index=0;this._consumed_total_length=0;this._length_to_consume=0;this._curent_search_result=null;this._timeouts=new Timeouts;this._search_bound=this.search.bind(this);this.ignore_case=1;this.search_type=TextSearch.PLAIN_TEXT;this.no_highlight=!1};this._set_default_style=function(a,b,c){var d=c.length;d>1?a.className=b==0?g:b==d-1?i:h:a.className=f};this._set_highlight_style=function(a,b,c){var d=c.length;d>1?b==0?a.className=this._selected_match_class_first||k:b==d-1?a.className=this._selected_match_class_last||m:a.className=this._selected_match_class_between||l:a.className=this._selected_match_class||j};this._update_info=function(a){if(this._info_ele){var b="";switch(a){case e:break;case d:b=ui_strings.S_TEXT_STATUS_SEARCH_NO_MATCH.replace("%(SEARCH_TERM)s",this._orig_search_term);break;default:b=ui_strings.S_TEXT_STATUS_SEARCH.replace("%(SEARCH_TERM)s",this._orig_search_term).replace("%(SEARCH_COUNT_TOTAL)s",this._get_match_counts()).replace("%(SEARCH_COUNT_INDEX)s",this._get_search_cursor())}this._info_ele.textContent=b}};this._get_match_counts=function(){return this._hits.length};this._get_search_cursor=function(){return this._match_cursor+1};this._consume_node=function(a){while(a&&(this._current_match_index!=-1||this._length_to_consume)){switch(a.nodeType){case 1:this._consume_node(a.firstChild);break;case 3:if(this._length_to_consume){if(a.nodeValue.length>=this._length_to_consume)a.splitText(this._length_to_consume);else if(!a.nextSibling&&!a.parentNode.nextSibling){this._length_to_consume=0;this._consumed_total_length+=a.nodeValue.length;this._hits.pop();return}this._length_to_consume-=a.nodeValue.length;var b=document.createElement("em");this._curent_search_result.push(b);a.parentNode.replaceChild(b,a);b.appendChild(a);this._consumed_total_length+=a.nodeValue.length;a=b;this._length_to_consume<1&&this._curent_search_result
.forEach(this._set_default_style,this)}else{if(this._current_match_index-this._consumed_total_length<a.nodeValue.length){a.splitText(this._current_match_index-this._consumed_total_length);this._length_to_consume=this._search_term_length;this._search_next_match();this._curent_search_result=this._hits[this._hits.length]=[]}this._consumed_total_length+=a.nodeValue.length}}a=a.nextSibling}};this._search_node=function(a){this._search_target=this.ignore_case&&this.search_type==TextSearch.PLAIN_TEXT?a.textContent.toLowerCase():a.textContent;this._last_match_index=0;this._reg_exp?this._reg_exp.lastIndex=0:this._search_term_length=this._search_term.length;this._search_next_match();this._consumed_total_length=0;this._length_to_consume=0;this._curent_search_result=null;this._consume_node(a)};this._search_next_match=function(){if(this._reg_exp){this._reg_exp_match=this._reg_exp.exec(this._search_target);this._current_match_index=this._reg_exp_match?this._reg_exp_match.index:-1;this._search_term_length=this._reg_exp_match?this._reg_exp_match[0].length:0}else this._current_match_index=this._search_target.indexOf(this._search_term,this._last_match_index);this._current_match_index!=-1&&(this._last_match_index=this._current_match_index+this._search_term_length)};this._clear_search_results=function(){var a=null,b=0,c=null,d=null,e=0;for(;a=this._hits[b];b++)for(e=0;d=a[e];e++)if(c=d.parentNode){c.replaceChild(d.firstChild,d);c.normalize()}};this.search=function(a,b,c){var f=a;this.ignore_case&&(a=a.toLowerCase());if(a!=this._search_term){this._search_term=a;this._orig_search_term=f;this._search_forced=Boolean(c);this._is_update_search&&(b=this._match_cursor);this._hits&&this._clear_search_results();this._hits=[];this._match_cursor=-1;this.post_message("onbeforesearch",{search_term:this._search_term.length>=this._min_term_length||this._search_forced?this._search_term:""});if(this._search_term.length>=this._min_term_length||c){this._reg_exp=this.search_type==TextSearch.REGEXP?new RegExp(this._search_term,this.ignore_case?"gi":"g"):null;if(this._container){if(this._query_selector){var g=this._container.querySelectorAll(this._query_selector);Array.prototype.forEach.call(g,this._search_node,this)}else this._search_node(this._container);if(b&&this._hits[b]&&this._hits.length==this._old_hits_length){this._match_cursor=b;this.no_highlight||this._hits[this._match_cursor].forEach(this._set_highlight_style,this);this._onhighlightstyle&&this._onhighlightstyle(this._hits[this._match_cursor]);this._update_info()}else{this._update_info(d);this._container.scrollTop=0;this.highlight(!0)}this._old_hits_length=this._hits.length}else this._is_update_search&&b&&(this._match_cursor=b)}else this._update_info(e)}this._is_update_search=!1};this.search_delayed=this.searchDelayed=function(a){this._timeouts.set(this._search_bound,b,a)};this.update_search=function(){var a=this._search_term;this._search_term="";this._is_update_search=!0;this.search(a)};this.update=this.update_search;this.highlight=function(a,b){if(!this.no_highlight){if(this._search_term&&this._search_term.length<this._min_term_length&&!this._search_forced){var c=this._search_term;this._search_term="";this.search(c,null,!0);this._search_forced=!0;return}if(this._hits.length){this._match_cursor>=0&&this._hits[this._match_cursor].forEach(this._set_default_style,this);if(a){this._match_cursor=0;while(this._hits[this._match_cursor]&&this.getRealOffsetTop(this._hits[this._match_cursor][0])<0)this._match_cursor++}else this._match_cursor+=b;this._match_cursor>this._hits.length-1?this._match_cursor=0:this._match_cursor<0&&(this._match_cursor=this._hits.length-1);this._hits[this._match_cursor].forEach(this._set_highlight_style,this);this._onhighlightstyle&&this._onhighlightstyle(this._hits[this._match_cursor]);var f=this._hits[this._match_cursor][0];this._scroll_target_into_view(f,b);this._update_info()}else this._orig_search_term?this._update_info(d):this._update_info(e)}};this._scroll_target_into_view=function(b,c,d,e){if(this._container&&b){typeof d=="number"?this._container.scrollTop=d:this._scroll_into_margined_view(this._container.clientHeight,b.offsetHeight,this.getRealOffsetTop(b),a,c,"scrollTop");typeof e=="number"?this._container.scrollLeft=e:this._scroll_into_margined_view(this._container.clientWidth,b.offsetWidth,this.getRealOffsetLeft(b),a,c,"scrollLeft")}};this._scroll_into_margined_view=function(a,b,c,d,e,f){a<2*d+b&&(d=Math.max((a-b)/2,0));b=Math.min(b,a-2*d);if(c<d||a-d-b<c)e==1?this._container[f]+=c-d:this._container[f]+=c-(a-d-b)};this.highlight_next=function(){this.highlight(null,1)};this.highlight_previous=function(){this.highlight(null,-1)};this.getRealOffsetTop=function(a){if(!this._container_box_sizing_checked){this._box_size_delta=0;this._container_box_sizing_checked=!0;var b=window.getComputedStyle(this._container,null);b.getPropertyValue("box-sizing")=="border-box"&&(this._box_size_delta=parseInt(b.getPropertyValue("border-top-width")))}return a.getBoundingClientRect().top-(this._container.getBoundingClientRect().top+this._box_size_delta)};this.getRealOffsetLeft=function(a){return a.getBoundingClientRect().left-this._container.getBoundingClientRect().left};this.revalidateSearch=function(){if(this._container&&this._search_term){var a=this._search_term;this._search_term="";this.search(a,this._match_cursor)}};this.set_container=this.setContainer=function(a){this._container_box_sizing_checked=!1;this._container!=a&&(this._container=a)};this.set_info_element=function(a){this._info_ele=a};this.set_form_input=this.setFormInput=function(a){this._input=a;if(this._search_term){var b=this._search_term;this._input.value=this._orig_search_term;this._input.parentNode.firstChild.textContent="";this._search_term="";this.searchDelayed(b)}};this.cleanup=function(){this._clear_search_results();this._hits=[];this._input=this._container=this._info_ele=null;this._container_box_sizing_checked=!1};this.set_search_term=function(a){this._orig_search_term=this._search_term=a};this.get_match_style=function(a){return a=="highlight"?this._match_style_highlight:this._match_style_default};this.set_query_selector=function(a){this._query_selector=a};this.get_match_target=function(){return this._hits&&this._hits[this._match_cursor]&&this._hits[this._match_cursor][0]&&this._hits[this._match_cursor][0].parentElement||null}};var SearchSingleNodes=function(a){this._init(a)},SearchSingleNodesPrototype=function(a){const b=document.TEXT_NODE,c=document.ELEMENT_NODE,d=TextSearch.DEFAULT_MATCH_CLASS,e=TextSearch.SELECTED_MATCH_CLASS;this._consume_node=function(a){if(this._current_match_index!=-1){a=a.splitText(this._current_match_index);a.splitText(this._search_term_length);var b=document.createElement("em");this._hits.push([b]);a.parentNode.replaceChild(b,a);b.appendChild(a);b.className=d;return b}return a};this._search_node=function(a,b,c){this._search_node_recursive(a.firstChild,!1)};this._search_node_recursive=function(a,d){while(a){switch(a.nodeType){case c:this._search_node_recursive(a.firstChild,!this._re_match_target||this._re_match_target.test(a.nodeName));break;case b:if(d){this._search_target=this.ignore_case?a.nodeValue.toLowerCase():a.nodeValue;if(this._reg_exp)this._reg_exp.lastIndex=0;else{this._search_term_length=this._search_term.length;this._last_match_index=0}this._search_next_match();a=this._consume_node(a)}}a=a.nextSibling}}};SearchSingleNodesPrototype.prototype=TextSearch.prototype;SearchSingleNodes.prototype=new SearchSingleNodesPrototype;var VirtualTextSearch=function(a){this._init(a)},JSSearchWindowHighlight=function(){this._init()},JSSearchWindowHighlightPrototype=function(){this._get_match_counts=TextSearch.prototype._get_match_counts;this._get_search_cursor=TextSearch.prototype._get_search_cursor;this.highlight_next=TextSearch.prototype.highlight_next;this.highlight_previous=TextSearch.prototype.highlight_previous;this.reset_match_cursor=function(){this._match_cursor=-1;this._hits=[];this._hit=null};this.set_match_cursor=function(a){var b=null;for(var c=0,b=null;b=this._hits[c];c++)if(b.indexOf(a)!=-1){this._hits[this._match_cursor].forEach(this._set_default_style,this);this._match_cursor=c;this._hits[this._match_cursor].forEach(this._set_highlight_style,this);break}};this.get_match_cursor=function(){return this._match_cursor}},VirtualTextSearchBase=function(){this.search_delayed=function(a){};this.highlight_next=function(){};this.highlight_previous=function(){};this.update_hits=function(a,b){};this.set_container=function(a){};this.set_form_input=function(a){};this.set_script=function(a){};this.cleanup=function(){};this.highlight_matches=function(a){};this.set_hit=function(a,b,c,d,e,f){};this.get_hit_count=function(){};this.update_search=function(){};this.update=function(){};this.scroll_selected_hit_in_to_view=function(){};const a=50,b=50,c=1,d=1,e=2,f=TextSearch.DEFAULT_MATCH_CLASS,g=TextSearch.SELECTED_MATCH_CLASS,h=TextSearch.DEFAULT_MATCH_MORE_CLASS,i=TextSearch.SELECTED_MATCH_MORE_CLASS;this._init=function(a){this._search_term="";this._cursor=-1;this._container=null;this._source_container=null;this._source_container_parent=null;this._timeouts=new Timeouts;this._script=null;this._offset=-1;this._length=0;this._highlight_style="";this._search_hits_valid=!1;this._top_line=0;this._bottom_line=0;this._hits=[];this._hit=[];this._input=null;this._last_match_cursor=0;this._search_bound=this._search.bind(this);a&&a.css_classes&&["selected_match_class","selected_match_class_first","selected_match_class_between","selected_match_class_last"].forEach(function(b){a.css_classes.hasOwnProperty(b)&&(this["_"+b]=a.css_classes[b])},this)};this._search=function(a){var b=-1,f="",g=null,h=0,i=0;a=a.toLowerCase();if(a!=this._search_term){this._search_term=a;this.post_message("onbeforesearch",{search_term:this._search_term.length>=c?this._search_term:""});if(a.length>=c){this._clear_hits();if(this._script){this._search_source();if(this._script.line_matches.length){this._highlight(!0);this.scroll_selected_hit_in_to_view()}else this._update_info(d)}}else{this._hits.length&&this._clear_hits();this._search_term="";this._update_info(e)}}};this._search_source=function(){if(this._search_term!=this._script.search_term){this._script.search_source(this._search_term);if(this._last_match_cursor){this._last_match_cursor<this._script.line_matches.length&&(this._script.match_cursor=this._last_match_cursor);this._last_match_cursor=0}}};this._highlight=function(a){if(views.js_source.isvisible()&&this._script&&this._script.line_matches&&this._script.line_matches.length){var b=this._script.line_matches[this._script.match_cursor];this._top_line=views.js_source.getTopLine();this._bottom_line=views.js_source.getBottomLine();if(a){this._script.match_cursor=0;while(this._script.line_matches[this._script.match_cursor]<this._top_line)this._script.match_cursor++;b=this._script.line_matches[this._script.match_cursor]}if(b<this._top_line||b>=this._bottom_line){var c=views.js_source.getMaxLines()<=7?views.js_source.getMaxLines()/2>>0:7;views.js_source.showLine(this._script.script_id,b-c,!0);this._top_line=views.js_source.getTopLine();this._bottom_line=views.js_source.getBottomLine();this._search_hits_valid=!1}this._source_container||this._set_source_container();this._search_source();if(this._search_hits_valid)this._hits.forEach(this._update_hit,this);else{this._clear_hits();this._script.line_matches.forEach(this._set_hit,this);this._search_hits_valid=!0}this._last_match_cursor=this._script.match_cursor;this._update_info()}};this._set_source_container=function(){this._source_container_parent=this._container.getElementsByTagName("div")[0];this._source_container=this._container.getElementsByTagName("div")[1]};this._search_node=function(a,b){var c=a&&a.firstChild,d=0,e=null,f=null,g=0;while(c&&this._offset>-1){switch(c.nodeType){case 1:(!b||!c.matchesSelector(b))&&this._search_node(c,b);break;case 3:if(c.nodeValue.length>this._offset){d=this._offset;e=c.splitText(d);if((g=e.nodeValue.length)>=this._length){g=this._length;this._offset=-1}else{this._length-=g;this._offset=0}c=e.splitText(g);f=a.insertBefore(a.ownerDocument.createElement("em"),e);f.appendChild(a.removeChild(e));this._hit[this._hit.length]=f}else this._offset-=c.nodeValue.length}c=c.nextSibling}};this._set_hit=function(a,b){if(this._top_line<=a&&a<=this._bottom_line){this._offset=this._script.line_offsets[b];this._length=this._script.match_length;this._hits[b]=this._hit=[];this._source_container||this._set_source_container();this._search_node(this._source_container.getElementsByTagName("div")[a-this._top_line]);this._hit.forEach(b==this._script.match_cursor?this._set_highlight_style:this._set_default_style,this)}};this.scroll_selected_hit_in_to_view=function(){this._source_container||this._set_source_container();this._source_container.parentNode.scrollLeft=0;this._hit=this._hits[this._script.match_cursor];this._hit&&this._hit.length&&this._hit[0].offsetLeft>this._source_container_parent.scrollLeft+this._source_container_parent.offsetWidth&&(this._source_container.parentNode.scrollLeft=this._hit[0].offsetLeft-50)};this._move_match_cursor=function(a){if(this._script&&this._script.line_matches&&this._script.line_matches.length){a>0?--this._script.match_cursor<0&&(this._script.match_cursor=this._script.line_matches.length-1):++this._script.match_cursor>=this._script.line_matches.length&&(this._script.match_cursor=0);this._highlight();this.scroll_selected_hit_in_to_view()}};this._update_hit=function(a,b){a.forEach(b==this._script.match_cursor&&this._set_highlight_style||this._set_default_style,this)};this._clear_highlight_spans=function(a){a.forEach(this._clear_highlight_span,this)};this._clear_highlight_span=function(a){var b=a&&a.parentNode;if(b){b.replaceChild(a.firstChild,a);b.normalize()}};this._clear_hits=function(){this._hits.forEach(this._clear_highlight_spans,this);this._hits=[];this._hit=null;this._search_hits_valid=!1};this._get_match_counts=function(){return this._script.line_matches.length};this._get_search_cursor=function(){return this._script.match_cursor+1};this.search_delayed=function(a){this._timeouts.set(this._search_bound,b,a)};this.highlight_next=function(){this._move_match_cursor(-1)};this.highlight_previous=function(){this._move_match_cursor(1)};this.update_hits=function(a,b){if(this._script&&this._script.search_term&&this._script.line_matches&&this._script.line_matches.length){this._clear_hits();this._top_line=a;this._bottom_line=b;this._script.line_matches.forEach(this._set_hit,this);this._search_hits_valid=!0}};this.set_container=function(a){if(a){this._container=a;this._source_container=null;this._source_container_parent=null}};this.set_form_input=function(a){if(a){this._input=a;if(this._search_term){this._input.value=this._search_term;this._input.parentNode.firstChild.textContent="";var b=this._search_term;this._search_term="";this._search_bound(b)}}};this.set_script=function(a){if(a!=this._script){this._script=a;this._source_container=null;this._source_container_parent=null}};this.cleanup=function(){this._last_match_cursor=this._script&&this._script.match_cursor||0;this._cursor=-1;this._clear_hits();this._container=this._source_container=this._source_container_parent=this._input=null;this._offset=-1;this._update_info(e)};this.set_hit=function(a,b,c,d,e,f){this._offset=b;this._length=c;this._hit=[];(typeof e!="boolean"||e)&&this._hits.push(this._hit);this._search_node(a,f);this._hit.forEach(d==TextSearch.HIGHLIGHT_STYLE?this._set_highlight_style:this._set_default_style,this);return this._hit};this.clear_hit=function(){this._clear_hits()};this.highlight_matches=function(a){};this.update_search=function(){!this._search_term&&this._script&&this._search_source();var a=this._search_term||"";this._search_term="";this._search_bound(a)};this.update=this.update_search};VirtualTextSearchBase.prototype=TextSearch.prototype;VirtualTextSearch.prototype=new VirtualTextSearchBase;JSSearchWindowHighlightPrototype.prototype=VirtualTextSearch.prototype;JSSearchWindowHighlight.prototype=new JSSearchWindowHighlightPrototype;var SearchbarBase=function(){this.type="searchbar";this.default_height=0;this.height=0;this.top_border=0;this.bottom_border=0;this.offsetHeight=0;this.cell=null;this.width=0;this.top=0;this.left=0;this.is_dirty=!0;window.cls.MessageMixin.apply(this);this.setDimensions=function(a){var b=0;this.default_height||this.setCSSProperties();b=this.cell.toolbar.getBottomPosition();if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}b=this.__is_visible?this.default_height:0;if(b!=this.height){this.is_dirty=!0;this.height=b;this.offsetHeight=b+this.vertical_border_padding}this.update(a)};this.__defineGetter__("offsetHeight",function(){this.default_height||this.setCSSProperties();return this.__is_visible?this._offset_height:0});this.__defineSetter__("offsetHeight",function(a){this._offset_height=a});this.setVisibility=function(a){this.__is_visible=a;if(this.cell&&this.isvisible()&&!a){var b=this.getElement();b.parentNode.removeChild(b)}};this.focus_searchfield=function(){var a=this.getElement(),b=null;a&&a.getElementsByTagName("filter")[0].getElementsByTagName("input")[0].focus()};this.init=function(){this.initBase()}},Searchbar=function(){this.init()},AdvancedSearchbar=function(a,b){this.init();this.template=a;this.attributes={"class":b||"advanced-searchbar"}};SearchbarBase.prototype=UIBase;Searchbar.prototype=new SearchbarBase;AdvancedSearchbar.prototype=new SearchbarBase;window.cls||(window.cls={});window.cls.SearchWindowBase=function(a,b,c){this.createView=function(a){};this.show_search_window=function(a){};this.close_search_window=function(a){};this.update_search=function(){};this.show_in_views_menu=!0;this.window_top=100;this.window_left=150;this.window_width=450;this.window_height=250;this.window_statusbar=!1;this.window_class="context-window";this.createView=function(a){a.clearAndRender(["h1","hello"])};this.show_search_window=function(a){UIWindowBase.showWindow(this.id,this.window_top,this.window_left,Math.max(this.window_width,innerWidth*.7),this.window_height)};this.close_search_window=function(a){UIWindowBase.closeWindow(this.id)};this.ondestroy=function(){}};window.cls.SearchWindowBase.prototype=ViewBase;var Search=function(a,b,c){this._init(a,b,c)};Search.prototype=new function(){this.is_active;this.hashas_searchbar;this.show=function(){};this.hide=function(){};this.get_searchbar=function(){};this.update_search=function(){};this.search_type;this.ignore_case;const a=1,b=2,c=0,d=1,e=2,f=3;this._toggle_searchbar=function(a){if(this._searchbar.isvisible()!=a){this._searchbar.setVisibility(a);var b=this._ui.get_layout_box(this._view_id);if(b){if(a){this._container=b.container.getElement();b.add_searchbar(this._searchbar)}else{this._container=null;b.remove_searchbar(this._searchbar);this._onsearchbar_remove()}this._update_toolbarbutton(b)}}};this._update_toolbarbutton=function(a){a||(a=this._ui.get_layout_box(this._view_id));var b=a&&a.toolbar.get_control("show-search");b&&(this._is_active?b.addClass("is-active"):b.removeClass("is-active"))};this._onsearchbar_created=function(){var a=this._searchbar.getElement(),b=null;if(a&&!a.firstChild){this._simple_text_search.set_container(this._container);var c=this._searchbar.template?this._searchbar.template(this):window.templates.searchbar_content(this);a.render(c);b=a.getElementsByTagName("info")[0];this._simple_text_search.set_info_element(b);b=a.getElementsByTagName("filter")[0].getElementsByTagName("input")[0];this._simple_text_search.set_form_input(b);setTimeout(function(){b.focus()},0)}};this._onsearchbar_remove=function(){};this._onshowview=function(a){if(a.id==this._view_id){var b=this._ui.get_layout_box(this._view_id);if(b){this._container=b.container.getElement();this._simple_text_search.set_container(this._container);this._onsearchbar_created();this._searchwindow&&this._searchwindow}}};this._onviewdestroyed=function(a){if(a.id==this._view_id){this._simple_text_search.cleanup();this._onsearchbar_remove();this._searchwindow&&this._searchwindow}};this._onsearchwindowclosed=function(a){if(this._searchwindow&&a.id==this._searchwindow.id){this._is_active=!1;this._update_toolbarbutton()}};this._onsearchfieldinput=function(b,c){this._mode==a&&this._simple_text_search.search_delayed(c.value)};this._onshortcut=function(c,d,e){switch(c){case"highlight-next-match":this._mode==a?this._simple_text_search.highlight_next():this._mode==b&&this._searchwindow.highlight_next();return!1;case"highlight-previous-match":this._mode==a?this._simple_text_search.highlight_previous():this._mode==b&&this._searchwindow.highlight_previous();return!1;case"show-script":if(this._mode==b){this._searchwindow.show_script_of_search_match(d,e);return!1};case"toggle-console":if(this.is_active){this.hide();return!1}}};this._toggle_mode=function(){var c=this._is_active;this._mode==a?this._searchwindow.set_search_term(this._search_term):this._simple_text_search.set_search_term(this._search_term);c&&this.hide();this._mode=this._mode==a?b:a;c&&this.show()};this._beforesearch=function(a){this._search_term=a.search_term};this._toggle_searchwindow=function(a){if(this._searchwindow&&this._searchwindow.isvisible()!=a){a?this._searchwindow.show_search_window():this._searchwindow.close_search_window();this._update_toolbarbutton()}};this._init=function(b,g,h){this._search_term="";var i=g&&g[0],j=g&&(g[1]||TextSearch),k=h&&h[0],l="";this._is_active=!1;this._mode=a;this._view_id=b;this.controls=[];this.advanced_controls=[];this._searchbar=null;this._searchwindow=null;this._beforesearch_bound=this._beforesearch.bind(this);if(i){this._searchbar=typeof i=="function"?new i:i;this._searchbar.add_listener("searchbar-created",this._onsearchbar_created.bind(this));this._simple_text_search=typeof j=="function"?new j:j;this._simple_text_search.add_listener("onbeforesearch",this._beforesearch_bound);this.controls.push({handler:this._view_id+"-move-highlight-up",type:"search_control","class":"search-move-highlight-up",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_UP},{handler:this._view_id+"-move-highlight-down",type:"search_control","class":"search-move-highlight-down",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_DOWN},{handler:this._view_id+"-simple-text-search",shortcuts:this._view_id+"-simple-text-search",title:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH});messages.addListener("view-destroyed",this._onviewdestroyed.bind(this));messages.addListener("show-view",this._onshowview.bind(this));eventHandlers.input[this.controls[e].handler]=this._onsearchfieldinput.bind(this);eventHandlers.click[this.controls[d].handler]=this._onshortcut.bind(this,"highlight-next-match");eventHandlers.click[this.controls[c].handler]=this._onshortcut.bind(this,"highlight-previous-match");ActionBroker.get_instance().get_global_handler().register_shortcut_listener(this.controls[e].shortcuts,this._onshortcut.bind(this),["highlight-next-match","highlight-previous-match","hide-search"])}if(k){this.controls.length&&(this.advanced_controls=this.controls.slice(0));this.controls[f]={handler:this._view_id+"-show-search-window",type:"search_control","class":"search-more",title:ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH_TOOLTIP,label:ui_strings.S_BUTTON_ENTER_ADVANCED_SEARCH};this.advanced_controls[f]={handler:this._view_id+"-show-search-window",type:"search_control","class":"search-more",title:ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH_TOOLTIP,label:ui_strings.S_BUTTON_LEAVE_ADVANCED_SEARCH};this._window_view_id=b+"-search-window";this._searchwindow=new k(this._window_view_id,"Search",b+"-search-window scroll mono",this.controls[e].handler);this._searchwindow.add_listener("onbeforesearch",this._beforesearch_bound);new ToolbarConfig(this._window_view_id,null,this.advanced_controls,null,[{template:function(){return["info"]}}]);eventHandlers.click[this.controls[f].handler]=this._toggle_mode.bind(this);messages.addListener("view-destroyed",this._onsearchwindowclosed.bind(this))}this._ui=UI.get_instance();this._ui.register_search(b,this)};this.show=function(){if(this.is_active)this._mode==a?this._searchbar.focus_searchfield():this._searchwindow.focus_searchfield();else{this._is_active=!0;this._mode==a?this._toggle_searchbar(this._is_active):this._toggle_searchwindow(this._is_active)}};this.hide=function(){if(this._is_active){this._is_active=!1;if(this._mode==a){this._toggle_searchbar(this._is_active);this._simple_text_search.cleanup()}else this._toggle_searchwindow(this._is_active)}};this.get_searchbar=function(){return this._is_active&&this._searchbar&&this._mode==a&&this._searchbar||null};this.update_search=function(){this.is_active&&(this._mode==a?this._simple_text_search.update_search():this._searchwindow.update_search())};this.__defineSetter__("is_active",function(){});this.__defineGetter__("is_active",function(){return this._is_active});this.__defineSetter__("has_searchbar",function(){});this.__defineGetter__("has_searchbar",function(){return this._is_active&&this._searchbar&&this._mode==a});["search_type","ignore_case","search_only_selected_node"].forEach(function(b){this.__defineGetter__(b,function(){return this._mode==a?this._simple_text_search[b]:this._searchwindow[b]});this.__defineSetter__(b,function(){})},this)};var JSSourceSearch=function(a,b,c){this._init(a,b,c)},JSSourceSearchBase=function(){this._onscriptselected=function(a){var b=window.runtimes.getScript(a.script_id);if(b){this._simple_text_search.set_script(b);this._simple_text_search.update_search()}};this._onviewscrolled=function(a){a.id==this._view_id&&this.has_searchbar&&this._simple_text_search.update_hits(a.top_line,a.bottom_line)};this._super_onsearchbar_created=this._onsearchbar_created;this._onsearchbar_created=function(){this._super_onsearchbar_created();if(this._searchbar.getElement()){messages.addListener("script-selected",this._onscriptselected_bound);messages.addListener("view-scrolled",this._onviewscrolled_bound);var a=window.views.js_source.getCurrentScriptId(),b=a&&window.runtimes.getScript(a);b&&this._simple_text_search.set_script(b)}};this._onsearchbar_remove=function(){messages.removeListener("script-selected",this._onscriptselected_bound);messages.removeListener("view-scrolled",this._onviewscrolled_bound)};this._init=function(a,b,c){Search.prototype._init.call(this,a,b,c);this._onscriptselected_bound=this._onscriptselected.bind(this);this._onviewscrolled_bound=this._onviewscrolled.bind(this)}};JSSourceSearchBase.prototype=Search.prototype;JSSourceSearch.prototype=new JSSourceSearchBase;var PanelSearch=function(){const a=TextSearch.NO_MATCH,b=TextSearch.EMPTY,c=PanelSearch.MATCH_NODE_HIGHLIGHT_CLASS;this._update_info=function(c){if(this._info_ele){var d=" ";switch(c){case b:break;case a:d="0";break;default:d=String(this._get_search_cursor())+"/"+String(this._get_match_counts())}this._info_ele.textContent=d;c==b?this._info_ele.style.backgroundColor="transparent":this._info_ele.style.removeProperty("background-color")}};this._onhighlightstyle=function(a){if(a.length){var b=a[0].get_ancestor("."+PanelSearch.MATCH_NODE_CLASS);this._highligh_node&&this._highligh_node!=b&&this._highligh_node.removeClass(c);if(b){this._highligh_node=b;this._highligh_node.addClass(c)}}};this._validate_reg_exp=function(){try{var a=new RegExp(this._last_query,this.ignore_case?"ig":"g");return a.test("")&&ui_strings.S_INFO_REGEXP_MATCHES_EMPTY_STRING}catch(b){return ui_strings.S_INFO_INVALID_REGEXP}};this._update_match_highlight=function(a,b){var c=a.target.get_ancestor("."+PanelSearch.MATCH_NODE_CLASS);if(c){var d=c.getElementsByTagName("em"),e=a.clientX,f=a.clientY,g=Infinity,h=null;for(var i=0,j;j=d[i];i++)Array.prototype.forEach.call(j.getClientRects(),function(a){var b=e<a.left?a.left-e:e>a.right?e-a.right:0,c=f<a.top?a.top-f:f>a.bottom?f-a.bottom:0,d=Math.sqrt(Math.pow(b,2)+Math.pow(c*100,2));if(d<g){g=d;h=j}});if(h){this.set_match_cursor(h);this._update_info()}}};this.set_match_cursor=function(a){for(var b=0,c=null;c=this._hits[b];b++)if(c.indexOf(a)!=-1){this._hits[this._match_cursor].forEach(this._set_default_style,this);this._match_cursor=b;this._hits[this._match_cursor].forEach(this._set_highlight_style,this);break}}};PanelSearch.MATCH_NODE_CLASS="search-match";PanelSearch.MATCH_NODE_HIGHLIGHT_CLASS="search-match-cursor";PanelSearch.adjust_search_controls=function(a){if(a){var b=a.querySelector(".advanced-search-controls"),c=a.querySelector(".panel-search-container");b&&c&&(c.style.top=b.offsetHeight+"px")}};var DetailResourceSearch=function(a){this._init(a)},DetailResourceSearchPrototype=function(){this._update_info=(new PanelSearch)._update_info;this._query_selector="pre"};DetailResourceSearchPrototype.prototype=TextSearch.prototype;DetailResourceSearch.prototype=new DetailResourceSearchPrototype;var JSMultifileSearch=function(){this._init()},JSMultifileSearchPrototype=function(){this._get_match_counts=TextSearch.prototype._get_match_counts;this._get_search_cursor=TextSearch.prototype._get_search_cursor;this._highlight_next=TextSearch.prototype.highlight_next;this._highlight_previous=TextSearch.prototype.highlight_previous;const a="js_source",b=1,c=0,d=TextSearch.NO_MATCH,e=TextSearch.EMPTY,f=PanelSearch.MATCH_NODE_HIGHLIGHT_CLASS,g=["Browser JS","Extension JS","User JS"],h=-1;PanelSearch.apply(this);this._get_match_counts=function(){return this._search_result_count};this._on_active_tab=function(a){this._rt_ids=a.activeTab.slice(0);this._search_term="";this._last_query=""};this._show_search_results=function(){this._create_search_results_view();this.highlight_next()};this._count_search_hits=function(){var a=0;for(var b in this.searchresults)a+=this.searchresults[b].reduce(function(a,b){return a+b.line_matches.length},0);return a};this._create_search_results_view=function(){if(this._container){this._clear_hits();this._container.firstElementChild.innerHTML="";if(this.search_all_files&&this.searchresults){this._search_result_count=this._count_search_hits();var a=window.templates.js_search_results(this.searchresults,this._search_result_count,this._max_hits_display_count);this._container.firstElementChild.render(a);var b=this._container.getElementsByClassName("js-search-results-runtime"),c=0,d=null,e=null,f=0,g=null;for(var h in this.searchresults){g=b[c++];if(g){d=g.getElementsByClassName("js-search-results-script");for(f=0;e=d[f];f++)this._set_hits(this.searchresults[h][f],e)}}}else if(this._script&&this._script.line_matches&&this._script.line_matches.length){this._search_result_count=this._script.line_matches.length;var a=window.templates.js_search_result_single_file(this._script,this._search_result_count,this._max_hits_display_count),e=this._container.firstElementChild.render(a);this._set_hits(this._script,e)}}};this._set_hits=function(a,b){var c=b.getElementsByTagName("code"),d=0,e=0,f=null,g=0;for(var h=0;h<a.line_matches.length;h++){cur_line=a.line_matches[h];if(cur_line!=e){e=cur_line;f=c[g++]}f&&f.textContent.length>=a.line_offsets[h]&&this.set_hit(f,a.line_offsets[h],this.search_type==TextSearch.PLAIN_TEXT?a.match_length:a.line_offsets_length[h])}};this._is_injected_script=function(a){return g.indexOf(a.script_type)!=-1};this._redo_search=function(){this._last_search_type=h;this._validate_current_search()};this._is_live_rt=function(a){return this._rt_ids&&this._rt_ids.contains(a)};this._validate_current_search=function(){if(this._input.value!=this._last_query||this.search_type!=this._last_search_type||this.ignore_case!=this._last_ignore_case||this.search_injected_scripts!=this._last_search_injected_scripts||this.search_all_files!=this._last_search_all_files||!this._search_rt_ids.every(this._is_live_rt,this)||(this.search_all_files==this._last_search_all_files&&this.search_all_files?!1:this._last_selected_script!=this._last_script)){this._last_query=this._input.value;this._orig_search_term=this._last_query;this._last_search_type=this.search_type;this._last_ignore_case=this.ignore_case;this._last_search_injected_scripts=this.search_injected_scripts;this._last_search_all_files=this.search_all_files;this._last_script=this._last_selected_script;this._match_cursor=-1;this.searchresults={};this._search_rt_ids=[];this.reset_match_cursor();var a=["div",ui_strings.S_INFO_IS_SEARCHING,"class","info-is-searching"];this._container.firstElementChild.clearAndRender(a);if(this._last_query){var b=this.search_type==TextSearch.REGEXP&&this._validate_reg_exp();if(b){this._clear_search_results();var a=["div",b,"class","info-box"];this._container.firstElementChild.clearAndRender(a)}else{if(this.search_all_files)this._rt_ids&&this._rt_ids.forEach(function(a){var b=window.runtimes.getScripts(a,!0).filter(function(a){if(this._last_search_injected_scripts||!
this._is_injected_script(a)){a.search_source(this._last_query,this.ignore_case,this.search_type==TextSearch.REGEXP);return a.line_matches.length}return 0},this);if(b.length){this.searchresults[a]=b;this._search_rt_ids.push(a)}},this);else if(this._last_selected_script){this._script=this._last_selected_script;this._script.search_source(this._last_query,this.ignore_case,this.search_type==TextSearch.REGEXP);this._search_rt_ids.push(this._script.runtime_id)}setTimeout(this._show_search_results_bound,0)}}else{this._clear_search_results();this._show_search_results()}return!1}return!0};this._clear_search_results=function(){this._rt_ids?this._rt_ids.forEach(function(a){window.runtimes.getScripts(a).forEach(function(a){a.clear_search()})},this):this._script&&this._script.clear_search()};this._show_script=function(a,b){if(a.target.get_ancestor("."+PanelSearch.MATCH_NODE_CLASS)){this._update_match_highlight(a,b);this.show_script_of_search_match(a,b)}};this._super_init=this._init;this._init=function(){this._super_init();this._search_result_count=0;this._setting=window.settings.js_source;this._max_hits_display_count=this._setting.get("max-displayed-search-hits");this._rt_ids=null;this._search_rt_ids=null;this._last_search_type=undefined;this._last_ignore_case=undefined;this._last_search_all_files=undefined;this._last_search_injected_scripts=undefined;this._source_file_hits=null;this.search_type=undefined;this.ignore_case=undefined;this.search_all_files=undefined;this.search_injected_scripts=undefined;this._show_search_results_bound=this._show_search_results.bind(this);this._redo_search_bound=this._redo_search.bind(this);window.eventHandlers.click["show-script"]=this._show_script.bind(this);window.eventHandlers.mouseover["show-script"]=this.clear_style_highlight_node.bind(this);window.messages.addListener("active-tab",this._on_active_tab.bind(this));window.messages.addListener("setting-changed",function(a){a.id=="js_source"&&a.key=="max-displayed-search-hits"&&(this._max_hits_display_count=this._setting.get("max-displayed-search-hits"))}.bind(this))};this.set_form_input=function(a){a&&(this._input=a)};this.highlight_previous=function(){this._validate_current_search()&&this._highlight_previous()};this.highlight_next=function(){this._validate_current_search()&&this._highlight_next()};this.update_search=function(){this._validate_current_search()};this.show_last_search=function(){typeof this._last_query=="string"&&(this._input.value=this._last_query);this._show_search_results()};this.clear_style_highlight_node=function(){if(this._highligh_node){this._highligh_node.removeClass(f);this._highligh_node=null}};this.show_script_of_search_match=function(b,c){var d=this.get_match_cursor(),e=null,f=0;if(this.search_all_files)for(var g in this.searchresults){for(f=0;e=this.searchresults[g][f];f++){if(d<e.line_matches.length)break;d-=e.line_matches.length}if(e)break}else{e=this._script;f=d}if(e)if(this._rt_ids.indexOf(e.runtime_id)>-1){var h=window.views[a],i=e.line_matches[d];h.showLine(e.script_id,i);var j=h.get_line_element(i);this._source_file_hits&&this._source_file_hits.forEach(function(a){this._clear_highlight_spans(a)},this);var k=this.search_type==TextSearch.PLAIN_TEXT?e.match_length:e.line_offsets_length[d];this._source_file_hits=[];var l=e.line_matches[d],m=e.line_offsets[d];while(j&&typeof k=="number"&&k>0){this._source_file_hits.push(this.set_hit(j,m,k,TextSearch.HIGHLIGHT_STYLE,!1,".error-description"));k-=e.get_line_length(l)-m;m=0;l++;j=j.nextElementSibling}var c=this._source_file_hits&&this._source_file_hits[0]&&this._source_file_hits[0][0];if(c){var n=h.get_scroll_container();n.scrollLeft=0;c.offsetLeft+c.offsetWidth>n.offsetWidth&&(n.scrollLeft=c.offsetLeft-n.offsetWidth+c.offsetWidth+100)}}else(new ConfirmDialog(ui_strings.D_REDO_SEARCH,this._redo_search_bound)).show()};this.reset_match_cursor=function(){this._match_cursor=-1;this._hits=[];this._hit=null};this.get_match_cursor=function(){return this._match_cursor};this.set_script=function(a){this._last_selected_script=a}};JSMultifileSearchPrototype.prototype=VirtualTextSearch.prototype;JSMultifileSearch.prototype=new JSMultifileSearchPrototype;(function(){const a=4e3,b=/^\s*$/;this.search_panel=function(a,b,c){return[["div",this["advanced_"+b+"_search"](a),"class","advanced-search-controls"],["div",["div","class","panel-search mono"],"class","panel-search-container","handler",c]]};this.searchbar_content=function(a){var b=this.filters(a.controls);b[0]="div";b.push("class","advanced-panel-search");return b};this._search_input=function(a,b,c,d,e,f,g){var h=["input","type",b,"value",c,"name",a];e&&h.push("checked","checked");f&&h.push("disabled","disabled");g&&h.push("title",g);var i=["label",h,d];g&&i.push("title",g);return i};this.advanced_search_field=function(a){return["div",["table",["tr",["td",this.default_filter(a.controls[0])],["td",["span"," ","class","search-info-badge"],"width","1px"],["td",this.search_control(a.controls[1]),"width","1px"],["td",this.search_control(a.controls[2]),"width","1px"]],"class","advanced-search-table"],"class","advanced-search"]};this.advanced_dom_search=function(a){return[this.advanced_search_field(a),["div",["form",this._search_input("dom-search-type","radio",DOMSearch.PLAIN_TEXT,ui_strings.S_LABEL_SEARCH_TYPE_TEXT,DOMSearch.PLAIN_TEXT==a.search_type),this._search_input("dom-search-type","radio",DOMSearch.REGEXP,ui_strings.S_LABEL_SEARCH_TYPE_REGEXP,DOMSearch.REGEXP==a.search_type),this._search_input("dom-search-type","radio",DOMSearch.CSS,ui_strings.S_LABEL_SEARCH_TYPE_CSS,DOMSearch.CSS==a.search_type),this._search_input("dom-search-type","radio",DOMSearch.XPATH,ui_strings.S_LABEL_SEARCH_TYPE_XPATH,DOMSearch.XPATH==a.search_type),this._search_input("dom-search-ignore-case","checkbox","ignore-case",ui_strings.S_LABEL_SEARCH_FLAG_IGNORE_CASE,a.ignore_case,!a.is_token_search),"handler","dom-search-type-changed"]]]}.bind(this);this.advanced_js_search=function(a){return[this.advanced_search_field(a),["div",["form",this._search_input("js-search-type","checkbox","reg-exp",ui_strings.S_LABEL_SEARCH_TYPE_REGEXP,TextSearch.REGEXP==a.search_type),this._search_input("js-search-ignore-case","checkbox","ignore-case",ui_strings.S_LABEL_SEARCH_FLAG_IGNORE_CASE,a.ignore_case),this._search_input("js-search-all-files","checkbox","search-all-files",ui_strings.S_LABEL_SEARCH_ALL_FILES,a.search_all_files),this._search_input("js-search-injected-scripts","checkbox","search-injected-scripts",ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS,a.search_injected_scripts,!a.search_all_files,ui_strings.S_LABEL_SEARCH_INJECTED_SCRIPTS_TOOLTIP),"handler","js-search-type-changed"]]]}.bind(this);this.js_search_window=function(){return["div","class","js-search-results","handler","show-script"]};this.js_search_results=function(a,b,c){var d=this._search_result_init(b,c),e=null;for(var f in a){e=["div"];e.push(this._search_result_header(f));e.extend(a[f].map(this.search_result_script,this));e.push("class","js-search-results-runtime");d.push(e);if(this._js_search_ctx.count>this._js_search_ctx.max_count)break}return d};this.js_search_result_single_file=function(a,b,c){var d=this._search_result_init(b,c);d.push(this.search_result_script(a));return d};this._search_result_init=function(a,b){var c=["div"];this._js_search_ctx={count:0,max_count:b};a>b&&c.push(["div",["div",ui_strings.S_INFO_TOO_MANY_SEARCH_RESULTS.replace("%(COUNT)s",a).replace("%(MAX)s",b),"class","info-box"],"class","info-box-container"]);return c};this._search_result_header=function(a){var b=window.runtimes.getRuntime(a),c=b&&helpers.shortenURI(b.uri);return["h2",b&&(b.title||c.uri)||""]};this._format_line_no=function(a){a=String(a);var b=["      ","     ","    ","   ","  "," "];return(b[a.length]||"")+a};this.resource_link=function(a,b,c){var d=["span",b,"handler","open-resource-tab","data-resource-url",a,"class","internal-link"];c&&d.push("data-resource-line-number",String(c));return d};this.search_result_script=function(a,c){var d=["div"];if(this._js_search_ctx.count<this._js_search_ctx.max_count){if(typeof c!="boolean"||c){var e=["h3"];if(a.uri)e.push(this.resource_link(a.uri,a.uri),":");else if(a.script_type=="inline"){var f=window.runtimes.getRuntime(a.runtime_id);if(f&&f.uri){e.push(a.script_type+" (");e.push(this.resource_link(f.uri,f.uri));e.push("):")}}else e.push(a.script_type+":");d.push(e)}var g=0,h=0,i="",j=null,k=null;for(var l=0;l<a.line_matches.length;l++)if(this._js_search_ctx.count++<this._js_search_ctx.max_count){h=a.line_matches[l];if(h!=g){g=h;i=a.script_data.slice(a.line_arr[g-1],a.line_arr[g]);j=this.highlight_js_source(i,null,a.state_arr[g-1],["code"],!0);j.length==2&&b.test(j[1])&&(j[1]+=" ");a.line_offsets_length[l]&&a.line_offsets[l]+a.line_offsets_length[l]>a.get_line_length(g)&&j.push(["span","…","class","match-following-line"]);d.push(["div",["span",String(g),"class","line-no"],j,"data-line-no",String(g),"class","search-match js-search"])}}d.push("class","js-search-results-script js-source","data-script-id",String(a.script_id))}return d}}).apply(window.templates||(window.templates={}));var DOMSearch=function(a){this._super_init=this._init;this._super_highlight_next=this.highlight_next;this._super_highlight_previous=this.highlight_previous;this._super_set_form_input=this.set_form_input;this.highlight_next=function(){};this.highlight_previous=function(){};this.set_form_input=function(){};this.search_delayed=function(a){};this.inspect_selected_node=function(){};this.show_last_search=function(){};this.clear_style_highlight_node=function(){};this.get_search_hit=function(){};this.get_current_hit_element=function(){};PanelSearch.apply(this);const b=[DOMSearch.PLAIN_TEXT,DOMSearch.REGEXP],c=PanelSearch.MATCH_NODE_HIGHLIGHT_CLASS,d=TextSearch.NO_MATCH,e=TextSearch.EMPTY,f="#text".length;this._set_highlight_handlers=function(a){if(b.indexOf(this.search_type)!=-1){this.is_token_search=!0;this._initial_highlight=this._initial_highlight_token;this._highlight_next=this._highlight_next_token;this._highlight_previous=this._highlight_previous_token;this._get_match_counts=this._get_match_counts_token;this._get_search_cursor=this._get_search_cursor_token;this.set_form_input=this._set_form_input_token;a&&(a.form["dom-search-ignore-case"].disabled=!1)}else{this.is_token_search=!1;this._initial_highlight=this._initial_highlight_node;this._highlight_next=this._highlight_next_node;this._highlight_previous=this._highlight_previous_node;this._get_match_counts=this._get_match_counts_node;this._get_search_cursor=this._get_search_cursor_node;this.set_form_input=this._set_form_input_node;a&&(a.form["dom-search-ignore-case"].disabled=!0)}};this._initial_highlight_token=function(){this._search_term="";this.search(this._last_query)};this._highlight_next_token=function(){this._super_highlight_next()};this._highlight_previous_token=function(){this._super_highlight_previous()};this._get_match_counts_token=function(){return this._hits.length};this._get_search_cursor_token=function(){return this._match_cursor+1};this._set_form_input_token=function(a){this._input=a;if(this._search_term){this._input.value=this._orig_search_term;this._input.parentNode.firstChild.textContent=""}};this._initial_highlight_node=function(){this._match_count=this._model.get_match_count();this._orig_search_term=this._last_query;if(this._container){var a=this._container.getElementsByClassName("search-match");this._match_nodes=Array.prototype.reduce.call(a,function(a,b){/^<\//.test(b.textContent)||a.push(/div/i.test(b.nodeName)?b:b.parentNode);return a},[]);this._highlight_match_node(this._match_node_cursor<0?1:0)}};this._highlight_match_node=function(a){if(this._match_nodes){this.clear_style_highlight_node();this._match_node_cursor+=a;this._match_node_cursor>=this._match_nodes.length?this._match_node_cursor=0:this._match_node_cursor<0&&(this._match_node_cursor=this._match_nodes.length-1);if(this._match_nodes[this._match_node_cursor]){this._highligh_node=this._match_nodes[this._match_node_cursor];this._highligh_node.addClass(c);this._scroll_target_into_view(this._match_nodes[this._match_node_cursor],a,null,0);this._update_info()}else this._update_info(d)}};this._highlight_next_node=function(){this._highlight_match_node(1)};this._highlight_previous_node=function(){this._highlight_match_node(-1)};this._get_match_counts_node=function(){return this._match_count};this._get_search_cursor_node=function(){return this._match_node_cursor+1};this._set_form_input_node=function(a){this._input=a;this._last_query&&(this._input.value=this._last_query)};this._onsearchtypechange=function(a){switch(a.target.name){case"dom-search-type":this.search_type=parseInt(a.target.value);this._set_highlight_handlers(a.target);this._setting.set("dom-search-type",this.search_type);this._validate_current_search();break;case"dom-search-ignore-case":this.ignore_case=Number(a.target.checked);this._setting.set("dom-search-ignore-case",this.ignore_case);this._validate_current_search()}}.bind(this);this._onelementselected=function(a){this._selected_node=a.obj_id;this._selected_runtime=a.rt_id};this._init=function(a){this._super_init(a);this._setting=window.settings.dom;this.search_type=this._setting.get("dom-search-type");this.ignore_case=this._setting.get("dom-search-ignore-case");this._re_match_target=/match-token/i;this._min_term_length=1;this._last_query="";this._last_search_type=0;this._last_ignore_case=this.ignore_case;this._tagman=window.tag_manager;this._esdi=window.services["ecmascript-debugger"];this._broker=ActionBroker.get_instance();window.eventHandlers.change["dom-search-type-changed"]=this._onsearchtypechange;this._query_selector="."+PanelSearch.MATCH_NODE_CLASS;this._set_highlight_handlers();window.messages.addListener("element-selected",this._onelementselected.bind(this))};this._validate_current_search=function(){if(this._input.value!=this._last_query||this.search_type!=this._last_search_type||this.ignore_case!=this._last_ignore_case||this._last_selected_runtime!=this._selected_runtime){this._last_query=this._input.value;this._orig_search_term=this._last_query;this._last_search_type=this.search_type;this._last_ignore_case=this.ignore_case;this._last_selected_node=this._selected_node;this._last_selected_runtime=this._selected_runtime;this._match_node_cursor=-1;this._match_cursor=-1;if(this._last_query){var a=this.search_type==TextSearch.REGEXP&&this._validate_reg_exp();if(a){this._model=null;this._match_nodes=null;this._match_count=0;this._hits=[];this._update_info(e);var b=["div",a,"class","info-box"];this._container.firstElementChild.clearAndRender(b)}else{this._match_nodes=null;this._match_count=0;this._hits=[];this._model=new cls.InspectableDOMNode(this._last_selected_runtime,this._selected_node);this._is_processing=!0;this._queued_input=!1;this._model.search(this._last_query,this.search_type,this.ignore_case,0,this._handle_search)}}else{this._model=null;this._match_nodes=null;this._match_count=0;this._hits=[];this._handle_search();this._update_info(e)}return!1}this._is_processing=!1;this._queued_input=!1;return!0}.bind(this);this._handle_search=function(a,b,c,f){if(this._container)if(this._model){var g=window.templates.dom_search(this._model);this._container.firstElementChild.clearAndRender(g);this._model.getData()&&this._model.getData().length?this._initial_highlight():this._update_info(d)}else{this._container.firstElementChild.innerHTML="";this._update_info(e)}this._queued_input?setTimeout(this._validate_current_search,100):this._is_processing=!1;window.messages.post("panel-search-executed")}.bind(this);this.highlight_next=function(){this._validate_current_search()&&this._highlight_next()};this.highlight_previous=function(){this._validate_current_search()&&this._highlight_previous()};this.set_form_input=function(){};this.search_delayed=function(a){this._is_processing?this._queued_input=!0:this._validate_current_search()};this.show_last_search=function(){this._handle_search()};this.clear_style_highlight_node=function(){if(this._highligh_node){this._highligh_node.removeClass(c);this._highligh_node=null}};this._get_match_offset=function(a,b){const c=document.ELEMENT_NODE,d=document.TEXT_NODE;while(a&&!b.is_target&&!(b.is_target=a==b.target)){a.nodeType==c&&this._get_match_offset(a.firstChild,b);!b.is_target&&a.nodeType==d&&(b.offset+=a.nodeValue.length);a=a.nextSibling}};this.get_search_hit=function(){var a=null;if(b.indexOf(this.search_type)!=-1){a=this._hits[this._match_cursor];var c={};if(a){var d=a[0].get_ancestor(this._query_selector);if(d){var e={is_target:!1,offset:0,target:a[0]},g=this._get_match_offset(d.firstChild,e);d.getElementsByClassName("dom-search-text-node")[0]&&(e.offset-=f);return{offset:e.offset,length:a[0].textContent.length,object_id:parseInt(d.getAttribute("obj-id")),runtime_id:this._last_selected_runtime,target:d}}}}else if(a=this._match_nodes[this._match_node_cursor])return{object_id:parseInt(a.getAttribute("obj-id")),runtime_id:this._last_selected_runtime,target:a};return null};this.get_current_hit_element=function(){var a=this._hits[this._match_cursor];return a&&a[0]||null};this.update_match_highlight=this._update_match_highlight;this._init(a)};DOMSearch.prototype=SearchSingleNodes.prototype;DOMSearch.PLAIN_TEXT=TextSearch.PLAIN_TEXT;DOMSearch.REGEXP=TextSearch.REGEXP;DOMSearch.XPATH=3;DOMSearch.CSS=4;var Overlay=function(){if(Overlay._instance)return Overlay._instance;Overlay._instance=this;this._ui=UI.get_instance();this.active_overlay=null;this.content_element=null;this.info_element=null;this.__defineGetter__("is_visible",function(){return!!this.element&&!!this.element.parentNode});this.show=function(a){this.hide();var b=this._ui.get_overlay(a);if(b){this.active_overlay=a;this.element=document.documentElement.render(window.templates.overlay(b));this.change_group(b[0].group_name);this.element.addEventListener("click",function(a){a.target==this.element&&ActionBroker.get_instance().dispatch_action("global","hide-overlay",a,a.target)}.bind(this),!1)}};this.hide=function(){if(this.element){this.element.parentElement.removeChild(this.element);this.active_overlay=null;this.element=null;UIWindowBase.closeWindow("color-selector")}};this.change_group=function(a){var b=this.element.querySelectorAll("tab");for(var c=0,d;d=b[c];c++){d.removeClass("active");d.getAttribute("group")==a&&d.addClass("active")}this.info_element=this.element.querySelector("overlay-info");this.content_element=this.element.querySelector("overlay-content");this.content_element.clearAndRender(window.templates.settings(Settings.get_settings_by_group(a)));this.content_element.scrollTop=0};this.set_info_content=function(a){this.info_element&&this.info_element.clearAndRender(a)}};Overlay.get_instance=function(){return this._instance||new Overlay};var HorizontalNavigationBase=function(a){const b=11;this._element=null;this._breadcrumbs=null;this._current_breadcrumb_el=null;this._nav_back=null;this._nav_forward=null;this._last_dir=null;this.set_content=function(a,b,c){this._template_list=b;this._data_model_id=a;if(this._breadcrumbs){this._breadcrumbs.clearAndRender(b);this._breadcrumbs.setAttribute("data-model-id",a);this._breadcrumbs.style.cssText="";this.check_width();c&&this.set_position(-this._breadcrumbs.scrollWidth)}};this.nav=function(a,c){var d=0,e=parseInt(getComputedStyle(this._breadcrumbs,null).left),f=this._breadcrumbs.getBoundingClientRect(),g=this._last_dir==a?this._current_breadcrumb_el:null;this._last_dir=a;if(a=="back"){if(!g){g=this._breadcrumbs.firstElementChild;while(g&&g.getBoundingClientRect().right<this._nav_back.offsetWidth)g=g.nextElementSibling}if(g){var h=g.getBoundingClientRect().left;d=this._nav_back.getBoundingClientRect().right-h;g=g.previousElementSibling}}else if(a=="forward"){if(!g){g=this._breadcrumbs.firstElementChild;while(g&&g.getBoundingClientRect().right-1<=this._nav_forward.offsetLeft)g=g.nextElementSibling}if(g){var i=g.getBoundingClientRect().right-f.left;d=f.width-i-b;g=g.nextElementSibling}}else typeof a=="number"&&(d+=a);this._current_breadcrumb_el=g;this._breadcrumbs.style.OTransitionDuration=Math.min(Math.abs(d)/200,.2)+"s";this.set_position(e+d);c&&(this._nav_timeout=setTimeout(this.nav,400,a,c))};this.clear_nav_timeout=function(){clearTimeout(this._nav_timeout)};this.drag_breadcrumb=function(a,b){if(this._breadcrumbs){var c=getComputedStyle(this._breadcrumbs,null).getPropertyValue("left");this._drag_start=parseInt(c)-a.clientX;this._breadcrumbs.style.OTransitionDuration=0;if(this._breadcrumbs.previousElementSibling.offsetWidth>0){this._breadcrumbs.addClass("drag");document.addEventListener("mousemove",this._drag_breadcrumbs_bound,!1);document.addEventListener("mouseup",this._drag_end_bound,!1)}}};this._drag_breadcrumbs=function(a){this.set_position(this._drag_start+a.clientX)};this._drag_end=function(){this._current_breadcrumb_el=null;this._breadcrumbs&&this._breadcrumbs.removeClass("drag");document.removeEventListener("mousemove",this._drag_breadcrumbs_bound,!1);document.removeEventListener("mouseup",this._drag_end_bound,!1)};this.set_position=function(a){if(this._element.hasClass("navs")){this._breadcrumbs.style.left=Math.max(Math.min(this._nav_back.offsetWidth,a),this._nav_forward.offsetLeft-this._breadcrumbs.scrollWidth+1)+"px";this.check_position()}};this.check_width=function(){if(this._breadcrumbs){this._current_breadcrumb_el=null;if(this._breadcrumbs.scrollWidth>this._breadcrumbs.offsetWidth+this._breadcrumbs.offsetLeft)this._element.addClass("navs");else{this._element.removeClass("navs");this._breadcrumbs.style.cssText=""}this.check_position()}};this.check_position=function(){var a=parseInt(window.getComputedStyle(this._breadcrumbs,null).left);a==this._nav_back.offsetWidth?this._nav_back.addClass("disabled"):this._nav_back.removeClass("disabled");this._breadcrumbs.offsetWidth==this._breadcrumbs.scrollWidth?this._nav_forward.addClass("disabled"):this._nav_forward.removeClass("disabled")};this.setup=function(){this._element=this.update();this._element.render(window.templates.horizontal_navigation_content());this._breadcrumbs=this._element.querySelector("breadcrumbs");this._breadcrumbs.addEventListener("OTransitionEnd",this.check_position.bind(this),!1);this._nav_back=this._element.querySelector("nav[dir='back']");this._nav_forward=this._element.querySelector("nav[dir='forward']");this._template_list&&this.set_content(this._data_model_id,this._template_list)};this._super_set_dimension=this.setDimensions;this.setDimensions=function(a){this._super_set_dimension(a);this.check_width()};this._super_init=this.init;this.init=function(){this._super_init();this.nav=this.nav.bind(this);this._drag_breadcrumbs_bound=this._drag_breadcrumbs.bind(this);this._drag_end_bound=this._drag_end.bind(this)}},HorizontalNavigation=function(){this.init()};HorizontalNavigation.prototype=new Modebar;HorizontalNavigationBase.apply(HorizontalNavigation.prototype);var TabsBase=function(){var a=10;this.type="tabs";this.height=25;this.width=200;this.top=-1e3;this.left=0;this.is_dirty=!0;this.cell_id="";this.depth=2;this.tabs=[];this.activeTab="";this.hasTab=function(a){var b=0,c=null;for(;(c=this.tabs[b])&&c.ref_id!=a;b++);return c&&!0||!1};this._get_tab=function(a){for(var b=0,c=null;(c=this.tabs[b])&&c.ref_id!=a;b++);return c};this.addTab=function(){var a=0,b=null;for(;b=arguments[a];a++){this.tabs[this.tabs.length]=b;this.isvisible()&&this.render()}};this.removeTab=function(a){var b=0,c=null;for(;(c=this.tabs[b])&&c.ref_id!=a;b++);if(c){this.tabs.splice(b,1);var d=document.getElementById(this.type+"-to-"+this.cell.id);if(d){var c=d.getElementsByTagName("tab")[b];c?d.removeChild(c):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"tabs, removeTab. there should be a tab for that index")}}if(this.activeTab==a){while(this._history[this._history.length-1]==a)this._history.pop();this._history[this._history.length-1]?this.setActiveTab(this._history[this._history.length-1]):this.tabs[b]?this.setActiveTab(this.tabs[b].ref_id):this.tabs[b-1]?this.setActiveTab(this.tabs[b-1].ref_id):alert("destroy cell")}};this.__defineGetter__("offsetHeight",function(){this.default_height||this.setCSSProperties();return this.is_hidden?0:this._offset_height});this.__defineSetter__("offsetHeight",function(a){this._offset_height=a});this._super_update=this.update;this.update=function(a){return this.is_hidden?null:this._super_update(a)};this.render=function(){if(this.is_hidden)return null;var a=document.getElementById(this.type+"-to-"+this.cell.id);a||(a=this.update());a.innerHTML="";a.setAttribute("handler","change-on-scroll");this.tabbar_id&&a.setAttribute("tabbar-ref-id",this.tabbar_id);a.render(templates[this.type](this));return a};this.setActiveTab=function(b,c,d){var e=Boolean(d&&b),f="container-to-"+this.cell.id,g="toolbar-to-"+this.cell.id;if(this.activeTab!=b||c){if(c)b=this.activeTab;else{if(this.activeTab&&views[this.activeTab]){messages.post("hide-view",{id:this.activeTab});views[this.activeTab].removeContainerId(f);toolbars[this.activeTab]&&toolbars[this.activeTab].removeContainerId(g)}this.activeTab=b;if(views[b]){views[b].addContainerId(f);toolbars[b]&&toolbars[b].addContainerId(g)}}var h=document.getElementById(this.type+"-to-"+this.cell.id)||this.render();if(h){var i=h.getElementsByTagName("tab"),j=null,k=0;if(i.length!=this.tabs.length){this.render();i=h.getElementsByTagName("tab")}for(;j=i[k];k++)j.getAttribute("ref-id")==b?j.addClass("active"):j.removeClass("active")}messages.post("before-show-view",{id:b});this.cell.setup();this._history[this._history.length]=this.activeTab;this._history.length>a&&this._history.splice(0,this._history.length-a);messages.post("show-view",{id:b});UI.get_instance().store_last_selected_view(this.activeTab);if(views[b].type=="composite-view"){global_state.ui_framework.last_selected_top_tab=b;global_state.ui_framework.last_selected_tab=""}else global_state.ui_framework.last_selected_tab=b;if(e){var l="";if(window.views[b].type=="composite-view"){var m=window.views[b].cell.get_visible_tabs();m&&m.length==1&&(l=m[0])}else window.views[b].type=="single-view"&&(l=b);l&&setTimeout(function(){ActionBroker.get_instance().focus_handler(l,d)},0)}}};this.navigate_to_next_or_previous_tab=function(a){var b=a?-1:1;for(var c=0,d,e;d=this.tabs[c];c++)if(d.ref_id==this.activeTab){e=c+b;if(e>=this.tabs.length||e<0)e=a?this.tabs.length-1:0;break}this.setActiveTab(this.tabs[e].ref_id)};this.trySetAnActiveTab=function(){var a=null,b=0;for(;(a=this.tabs[b])&&a.disabled;b++);a&&this.setActiveTab(a.ref_id)};this.getTopPosition=function(){return this.cell.top};this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();b=this.getTopPosition();if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}this.update(a);this.onresize()};this.onresize=function(){var a=document.getElementById(this.type+"-to-"+this.cell.id);if(!!a&&!this.is_hidden){var b=a.querySelectorAll("tab"),c=[],d=0;for(var e=0,f;f=b[e];e++){this._tab_right_padding||this._store_css_tab_values(f);f.hasAttribute("data-orig-width")||f.setAttribute("data-orig-width",String(f.offsetWidth));var g=Number(f.getAttribute("data-orig-width"))-1;d+=g+this._tab_margin+1;c.push({padding_target:f,width_target:f,orig_width:g-this._tab_border_padding})}this._adjust_tab_size(d,c)}};this._adjust_tab_size=function(a,b){var c=a<=this.width,d=1,e=0,f=this._tab_right_padding,g=b.length;if(!c){var h=a-this.width;h-=g;if(h>0){e=Math.ceil(h/g);e>this._tab_right_padding&&(e=this._tab_right_padding);f=this._tab_right_padding-e;h-=g*e}else{var i=0;while(h<0){b[i++].orig_width+=1;h++}}if(h>0){var j=b.reduce(function(a,b){return a+b.orig_width},0);d=(j-h)/j}}b.forEach(function(a){if(c){a.padding_target.removeAttribute("style");a.width_target.removeAttribute("style")}else{a.padding_target.style.paddingRight=f+"px";a.width_target.style.width=Math.floor(a.orig_width*d)+"px"}},this)};this._store_css_tab_values=function(a){var b=window.getComputedStyle(a);[{prop:"_tab_right_padding",prop_list:["paddingRight"]},{prop:"_tab_margin",prop_list:["marginLeft","marginRight"]},{prop:"_tab_border_padding",prop_list:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}].forEach(function(a){Tabs.prototype[a.prop]=this._sum_css_props(b,a.prop_list)},this)};this._sum_css_props=function(a,b){return b.reduce(function(b,c){return b+parseInt(a[c])},0)};this.on_view_inizialized=function(a){if(this.hasTab(a.view_id)){this._get_tab(a.view_id).name=window.views[a.view_id].name;this.isvisible()&&this.render()}};this.on_view_inizialized_bound=function(){var a=this;return function(b){a.on_view_inizialized(b)}};this.init=function(a,b){this.tabs=[];this.activeTab="";this.cell=a;this.initBase();this.is_hidden=b&&b.is_hidden||!1;this.tabbar_id=b&&b.id||"";window.messages.addListener("view-initialized",this.on_view_inizialized_bound())}},Tabs=function(a,b){this._history=[];this.init(a,b)};TabsBase.prototype=UIBase;Tabs.prototype=new TabsBase;var TopTabsBase=function(){this.type="top-tabs";this.getTopPosition=function(){return this.cell.top+(this.cell.toolbar&&this.cell.toolbar.height?this.cell.toolbar.offsetHeight:0)};this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();b=this.getTopPosition();if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}b=document.querySelector("top-tabs tab").offsetHeight;if(b!=this.height){this.is_dirty=!0;this.height=b;this.offsetHeight=b+this.vertical_border_padding}this.update(a);this.onresize()};this.onresize=function(){var a=document.getElementById(this.type+"-to-"+this.cell.id);if(!!a&&!this.is_hidden){var b=a.querySelectorAll("tab"),c=[],d=0;for(var e=0,f;f=b[e];e++){if(!this._tab_right_padding){var g=window.getComputedStyle(f).paddingRight;TopTabs.prototype._tab_right_padding=parseInt(g)}var h=f.querySelector(".inline-block");if(h){f.hasAttribute("data-orig-width")||f.setAttribute("data-orig-width",String(f.offsetWidth));h.hasAttribute("data-orig-width")||h.setAttribute("data-orig-width",String(h.offsetWidth));d+=Number(f.getAttribute("data-orig-width"));c.push({padding_target:f,width_target:h,orig_width:Number(h.getAttribute("data-orig-width"))-1})}}c.sort(function(a,b){if(a.orig_width>b.orig_width)return 1;if(a.orig_width<b.orig_width)return-1;return 0});this._adjust_tab_size(d,c)}};this._on_window_controls_created=function(a){var b=a.window_controls,c=document.styleSheets.getDeclaration("top-tabs");if(c){var d=b.offsetWidth;c.paddingRight=d+"px";TopTabs.prototype.style["padding-right"]=d;this.setCSSProperties();this.setDimensions(!0)}}},TopTabs=function(a){this.init(this,arguments);this._history=[];this.tabs=[];this.activeTab="";this.cell=a;window.messages.add_listener("window-controls-created",this._on_window_controls_created.bind(this))};TopTabsBase.prototype=new TabsBase;TopTabs.prototype=new TopTabsBase;TopUIBase.apply(TopTabs.prototype);TopTabs.prototype.constructor=TopTabs;var ContainerBase=function(){this.type="container";this.height=0;this.width=0;this.border_left=1;this.border_right=1;this.top=0;this.left=0;this.is_dirty=!0;this.view_id="";this.setDimensions=function(a,b){var c="",d=0;this.default_height||this.setCSSProperties();var e=this.cell.toolbar.height?this.cell.toolbar.offsetHeight:0,f=this.cell.searchbar?this.cell.searchbar.offsetHeight:0;c=this.cell.top+e+f+this.cell.tab.offsetHeight;if(c!=this.top){this.is_dirty=!0;this.top=c}c=this.cell.left;if(c!=this.left){this.is_dirty=!0;this.left=c}c=this.cell.width-this.horizontal_border_padding;if(c!=this.width){this.is_dirty=!0;this.width=c}c=this.cell.height-e-f-this.cell.tab.offsetHeight-this.vertical_border_padding;if(c!=this.height){this.is_dirty=!0;this.height=c}this.update(a);views[this.view_id]&&(!a||b)&&views[this.view_id].onresize(document.getElementById(this.type+"-to-"+this.cell.id))};this.setup=function(a){var b=views[this.view_id=a],c=document.getElementById(this.type+"-to-"+this.cell.id)||this.update();if(b){c.removeAttribute("handler");c.removeAttribute("edit-handler");b.default_handler&&c.setAttribute("handler",b.default_handler);b.edit_handler&&c.setAttribute("edit-handler",b.edit_handler);c.className=b.container_class||"";c.setAttribute("data-menu",a||"");c.innerHTML="";b.has_container_id(c.id)||b.addContainerId(c.id);b.update()}};this.init=function(a){this.cell=a;this.initBase()}},Container=function(a){this.init(a)};ContainerBase.prototype=UIBase;Container.prototype=new ContainerBase;var TopContainerBase=function(){this.type="top-container";this.height=0;this.width=0;this.vertical_border_padding=0;this
.horizontal_border_padding=0;this.left_border_padding=0;this.top_border_padding=0;this.top=0;this.left=0;this.is_dirty=!0;this.view_id="";this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();var d=(this.cell.toolbar&&this.cell.toolbar.height?this.cell.toolbar.offsetHeight:0)+this.cell.tab.offsetHeight;b=this.cell.top+d;if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.horizontal_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}b=this.cell.height-d-this.vertical_border_padding;if(b!=this.height){this.is_dirty=!0;this.height=b}this.update(a);views[this.view_id]&&views[this.view_id].onresize()};this.setup=function(a){if(window[defaults.viewport]){var b=viewport.childNodes,c=null,d=b.length-1,e=this.cell.id,f=null;for(;c=b[d];d--)if(c.nodeType==1&&c.id.indexOf(e)==-1){if(c.nodeName.toLowerCase()=="container"){f=UIBase.getUIById(c.getAttribute("ui-id"));messages.post("hide-view",{id:f.view_id})}viewport.removeChild(c)}}var g=views[this.view_id=a];g&&g.update(this);var h=ViewBase.getSingleViews(),g="",d=0;for(;e=h[d];d++)views[e].isvisible()&&messages.post("show-view",{id:e})};this.init=function(a){this.cell=a;this.initBase()}},TopContainer=function(a){this.init(a)};TopContainerBase.prototype=UIBase;TopContainer.prototype=new TopContainerBase;var WindowContainerBase=function(){this.type="window-container";this.vertical_delta=0;this.update_style=function(a){this.height!==parseInt(a.height)&&(a.height=this.height+"px")};this.setDimensions=function(a){var b="",c=0;if(!this.default_height){this.setCSSProperties();this.vertical_delta=(this.cell.header&&defaults.window_header_offsetHeight||0)+(this.cell.toolbar&&this.cell.toolbar.height&&this.cell.toolbar.offsetHeight||0)+(this.cell.statusbar&&defaults.window_statusbar_offsetHeight||0)+this.vertical_border_padding}b=this.cell.height-this.vertical_delta;if(b!=this.height){this.is_dirty=!0;this.height=b}this.update(a);views[this.view_id]&&views[this.view_id].onresize()};this.setup=function(a){var b=views[this.view_id=a];views[this.view_id].addContainerId(this.type+"-to-"+this.cell.id);window.toolbars[this.view_id]&&window.toolbars[this.view_id].addContainerId("window-toolbar-to-"+this.cell.id);this.setDimensions();var c=document.getElementById(this.type+"-to-"+this.cell.id)||this.update(!0);if(b){c.className=b.container_class||"";c.setAttribute("data-menu",a||"");b.update()}};this.onclose=function(){views[this.view_id].removeContainerId(this.type+"-to-"+this.cell.id);window.toolbars[this.view_id]&&window.toolbars[this.view_id].removeContainerId("window-toolbar-to-"+this.cell.id)};this.init=function(a){this.cell=a;this.parent_container_id=a.id;this.initBase()}},WindowContainer=function(a){this.init(a)};WindowContainerBase.prototype=new ContainerBase;WindowContainer.prototype=new WindowContainerBase;var TabBase=new function(){var a=this,b=1,c={};this._ref_ids={};var d=function(){return"tab-"+(b++).toString()};this.init=function(a,b,e){this.name=b;this.ref_id=a;this.has_close_button=e;this._ref_ids[a]=this;c[this.id=d()]=this};this.getTabById=function(a){return c[a]};this.get_tab_by_ref_id=function(a){return this._ref_ids[a]||null};this._delete=function(a){delete c[a]};this._get_top_tab_element=function(){return document.querySelector("tab[ref-id='"+this.ref_id+"']")};this.set_badge=function(a){var b=this._get_top_tab_element(),c=b&&b.querySelector(".badge");c&&a?c.addClass(a):c.className="badge"};this.set_legend_info=function(a){var b=this._get_top_tab_element(),c=b&&b.getElementsByClassName("block-content");if(!!c){var d=c[1];if(a){if(!d){b.addClass("two-rows");d=c[0].parentNode.render(["span","class","block-content"])}d&&(d.textContent=a)}else if(d){d.parentNode.removeChild(d);b.removeClass("two-rows")}}};this.clear_badge=function(){this.set_badge("")};this.set_state=function(a){var b=this._get_top_tab_element();b&&b.setAttribute("data-state",a)};this.clear_state=function(){var a=this._get_top_tab_element();a&&a.removeAttribute("data-state")}},Tab=function(a,b,c){this.init(a,b,c)},JavaScriptTab=function(a,b,c){this.init(a,b,c);window.messages.addListener("host-state",function(a){switch(a.state){case"waiting":this.set_badge("paused");break;default:this.clear_badge()}}.bind(this))},ErrorConsoleTab=function(a,b,c){this.init(a,b,c);window.messages.addListener("error-count-update",function(a){var b=a.current_error_count==0?"":"("+a.current_error_count+")";this.set_legend_info(b)}.bind(this))};Tab.prototype=TabBase;JavaScriptTab.prototype=TabBase;ErrorConsoleTab.prototype=TabBase;var StatusbarBase=function(){this.type="statusbar";this.height=0;this.width=200;this.top=0;this.left=0;this.is_dirty=!0;this.info="";this.DEFAULT_MODE="default";this.TOOLTIP_MODE="tooltip";this.mode=this.DEFAULT_MODE;this.selector_cap_width=0;this.available_width_delta=0;this.info_container_scroll_height=0;this.global_state_store=global_state.ui_framework;this.setup=function(a){var b=document.getElementById(this.type+"-to-"+this.cell.id)||this.update();b.render(templates[this.type](this));if(!this.selector_cap_width){var c=b.getElementsByTagName("info")[0];c.innerHTML="<breadcrumb><span>t</span>&lt;<span>t</span></breadcrumb>";var d=c.getElementsByTagName("span"),e=window.getComputedStyle(c,null);this.selector_cap_width=d[1].offsetLeft-(d[0].offsetLeft+d[0].offsetWidth);this.info_container_scroll_height=c.scrollHeight;this.available_width_delta=c.offsetLeft+parseInt(e.getPropertyValue("padding-left"))+parseInt(e.getPropertyValue("padding-right"))}this.mode==this.TOOLTIP_MODE&&b.addClass("type-tooltip");this.updateInfo(" ")};this.updateInfo=function(a){var b=document.getElementById(this.type+"-to-"+this.cell.id)||this.update(),c=b.getElementsByTagName("info")[0],d=null,e=0,f=null,g=0,h=0,i=null,j=null;a||(a="");this.info=a;if(c)if(typeof a=="string")c.textContent=a;else if(typeof a=="object"){c.innerHTML="";d=c.render(a);if(this.mode==this.DEFAULT_MODE&&c.scrollHeight>this.info_container_scroll_height){e=parseInt(c.parentElement.style.width)-this.available_width_delta;f=d.lastElementChild;g=4*this.selector_cap_width;h=0;i=document.createRange();while(f){h=this.selector_cap_width+f.offsetWidth;if(h+g>=e)break;g+=h;f=f.previousElementSibling}if(f){i.setStartAfter(f);i.setEndAfter(d.lastChild);j=i.cloneContents();j.firstChild.nodeValue="...";d.innerHTML="";d.appendChild(j)}}}else c.textContent=""};this.changeMode=function(){this.global_state_store[this.type+"_mode"]=this.mode=this.mode==this.DEFAULT_MODE&&this.TOOLTIP_MODE||this.DEFAULT_MODE;this.updateInfo(this.info);return this.mode};this.setDimensions=function(a){var b="",c=0;this.default_height||this.setCSSProperties();b=this.cell.top+this.cell.height-this.offsetHeight;if(b!=this.top){this.is_dirty=!0;this.top=b}b=this.cell.left;if(b!=this.left){this.is_dirty=!0;this.left=b}b=this.cell.width-this.vertical_border_padding;if(b!=this.width){this.is_dirty=!0;this.width=b}this.update(a)};this.init=function(a){this.cell=a;this.initBase();this.global_state_store[this.type+"_mode"]&&(this.mode=this.global_state_store[this.type+"_mode"])}},Statusbar=function(a){this.init(a)},WindowStatusbar=function(a){this.type="window-statusbar";this.parent_container_id=a.id;this.getCssText=function(){return""};this.init(a)},TopStatusbar=function(a){this.type="top-statusbar";var b=this,c=function(a){b.global_state_store.spin_state=a.state;switch(a.state){case"inactive":b.spin_animator.setInitial();break;case"ready":b.spin_animator.setFinal();break;case"waiting":b.spin_animator.setActive()}};messages.addListener("host-state",c);var d={id:"spin-button",delta:-16,iterations:8,ready:-16,active:-32,time_delta:60};this.spin_animator=new Animator(d);this.init(a)};StatusbarBase.prototype=UIBase;Statusbar.prototype=new StatusbarBase;WindowStatusbar.prototype=new StatusbarBase;TopStatusbar.prototype=new StatusbarBase;window.templates=window.templates||(window.templates={});(function(){var a=this;this.tab=function(a,b,c){var d=["tab",a.name],e=[b&&"active",c&&"first-temp-tab"].filter(Boolean).join(" ");a.has_close_button&&d.push(["span","tabindex","1","handler","close-tab","class","close-tab-button"]);d.push("handler","tab","ref-id",a.ref_id);e&&d.push("class",e);return d};this.top_tab=function(a,b){return["tab",["span","class","icon "+a.ref_id],["span","class","badge"],["span",["span",a.name,"class","block-content"],"class","inline-block"],"handler","tab","ref-id",a.ref_id].concat(b?["class","active"]:[])};this.horizontal_navigation_content=function(){return[["nav","◀","dir","back","handler","horizontal-nav"],["breadcrumbs","handler","breadcrumbs-drag"],["nav","▶","dir","forward","handler","horizontal-nav"]]};this.contextmenu=function(a){var b=[];for(var c=0,d;d=a[c];c++){var e="";d.checked||settings[d.menu_id]&&settings[d.menu_id].get(d.settings_id)?e="check":d.selected&&(e="radio");d.separator?b.push(["li",["hr"],"class","separator"]):b.push(["li",[["span","class","menu-icon "+e],["span",d.label]],"data-handler-id",d.id,"data-menu-id",d.menu_id,"class",d.disabled?"disabled":""])}return["menu",b,"id","contextmenu","class","menu"]};this.filters=function(a){var b=["toolbar-filters"],c="",d=0,e="",f=null;for(;c=a[d];d++)c.type&&this[c.type]?b.push(this[c.type](c)):b.push(this.default_filter(c));return b};this.default_filter=function(a){var b=a.label?a.label:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH,c=["input","autocomplete","off","type","text","handler",a.handler,"shortcuts",a.shortcuts,"title",a.title,"placeholder",b];["handler","shortcuts","focus-handler","blur-handler"].forEach(function(b){a.hasOwnProperty(b)&&c.push(b,a[b])});return["filter",c,"class",a.type||a.class||""]};this.search_control=function(a){var b=["span","tabindex","1","class","ui-button "+a.class,"handler",a.handler,"title",a.title];a.label&&b.push("value",a.label);return b};this.search_button=function(a){return["toolbar-search",["button","class","search ui-control "+(a.is_active?"is-active":""),"handler","show-search","title",ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH]]};this.dropdown=function(a){return["filter",["select","handler",a.handler,"title",a.title,"class",a.class||""],"class","dropdown"]};this.buttons=function(a){var b=["toolbar-buttons"];a&&b.extend(a.map(this.button,this));return b};this.toolbar_group_wrapper=function(a,b,c){var d=["toolbar-buttons",a];if(b.type){b.type===UI.TYPE_SWITCH_CUSTOM_HANDLER?d.push("handler",b.handler):d.push("handler","toolbar-"+b.type);b.type==="single-select"&&(d=d.concat(["data-single-select-name",b.name,"data-view-id",c]))}return d};this.toolbar_button=function(a){var b=a.icon;!b&&!a.text&&(b=a.handler);return["span",a.text||"","title",a.title,"tabindex","1","class","ui-button ui-control"+(b?" "+b:"")+(a.class_name?" "+a.class_name:"")+(a.text?" text-button":"")].concat(a.id?["id",a.id]:[],a.disabled?["disabled","disabled"]:[],a.param?["param",a.param]:[],a.handler?["handler",a.handler]:[],a.key?["key",a.key]:[])};this.single_select_button=function(a,b){var c=a.icon;!c&&!a.text&&(c=a.handler);var d=b.contains(a.value),e=["span",a.text||"","data-single-select-value",a.value,"tabindex","1","class","ui-button ui-control "+(c?c+" ":" ")+(a.class_name?a.class_name+" ":"")+(a.text?"text-button ":" ")+(d?"is-active ":" ")].concat(a.title?["title",a.title]:[]);return e};this.toolbar_settings=function(a){return["cst-select-toolbar-setting",["cst-icon"],["cst-drop-down"],"class","toolbar-settings ui-control dropdown "+a.class_name,"cst-id",a.id]};this.switches=function(a,b){var c=["toolbar-buttons"],d=0,e=null;c.extend(a.map(this._switch,this));c.push("handler",b||"toolbar-switch");return c};this._switch=function(a){var b="";(setting=Settings.get_setting_with_view_key_token(a))?b=["span","title",setting.label,"key",a,"tabindex","1","class",a+" ui-button switch"+(setting.value?" is-active":"")]:opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Can't attach switch to a setting that does not exist: "+a);return b};this.toolbarSeparator=function(){return["toolbar-separator"]};this["window-statusbar"]=function(){return[["info"]]};this.configButton=function(a){return["button","type","button","handler",a,"title",ui_strings.S_BUTTON_LABEL_SETTINGS]};this.tabs=function(a){var b=[],c=null,d=0,e=!1;for(;c=a.tabs[d];d++)if(!c.disabled){b[b.length]=this.tab(c,a.activeTab==c.ref_id,c.has_close_button&&!e);e||(e=Boolean(c.has_close_button))}return b};this.viewMenu=function(){return["ui-menu",["h2",ui_strings.M_VIEW_LABEL_VIEWS,"handler","show-menu","tabindex","1"],"id","main-view-menu"].concat(opera.attached?["class","attached"]:[])};this["top-tabs"]=function(a){var b=[],c=null,d=0;for(;c=a.tabs[d];d++)b[b.length]=this.top_tab(c,a.activeTab==c.ref_id);return b};this.window_controls=function(a){var b=window.opera.attached,c=[];for(var d=0,e;e=a[d];d++)c.push(e.get_template());return["window-controls",c,"class","attached"]};this.window_controls_close=function(){if(window.opera.attached)return["window-controls",["button","class","ui-control","id","top-window-close","onclick","window.close()","title",ui_strings.S_BUTTON_LABEL_CLOSE_WINDOW],"class","no-tabbar"];return[]};this.settings=function(a){var b=["settings-container"],c=null,d=null,e=0;for(;c=a[e];e++)if(settings[c]){d=views[c];b[b.length]=this.setting(c,d.name,d.isvisible())}return b};this.setting=function(a,b,c){var d=["fieldset",["legend",b]],e=settings[a],f=e.setting_map,g="";for(g in f)d[d.length]=this[g](e,f[g]);return d};this.overlay=function(a){var b=[];for(var c=0,d;d=a[c];c++)b.push(["tab",d.label,"group",d.group_name,"handler","overlay-tab"]);return["overlay",["overlay-window",[["overlay-arrow"],["overlay-tabs",b],["overlay-info"],["overlay-content"]]],"class","overlay"]};this.checkboxes=function(a,b){var c=["checkboxes"],d=null,e="",f="",g=0;for(;f=b[g];g++)if(f.indexOf(".")==-1)c[c.length]=this.settingCheckbox(a.view_id,f,a.get(f),a.label_map[f]);else{d=f.split(".");e=d[0];f=d[1];settings[e]?c[c.length]=this.settingCheckbox(e,f,settings[e].get(f),settings[e].label_map[f],a.view_id):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed in ui-templates checkboxes "+d+" "+a.view_id)}return c};this.customSettings=function(a,b){var c=[],d=null,e=0,f=a.templates;for(;d=b[e];e++)c[c.length]=f[d](a);return c};this.settingCheckbox=function(a,b,c,d,e){var f=["input","type","checkbox","handler","checkbox-setting","name",b,"view-id",a];c&&f.splice(f.length,0,"checked","checked");e&&f.splice(f.length,0,"host-view-id",e);return["checkbox",["label",f,d]]};this._window_types={};this._window_types[UIWindow.HUD]="_window_type_hud";this._window=function(a){if(this._window_types.hasOwnProperty(a.window_type))return this[this._window_types[UIWindow.HUD]](a);var b=["window",a.header?this.window_header(views[a.view_id].name):[],a.is_resizable?[["window-control","handler","window-scale-top-left","class","window-scale-top-left"],["window-control","handler","window-scale-top","class","window-scale-top"],["window-control","handler","window-scale-top-right","class","window-scale-top-right"],["window-control","handler","window-scale-right","class","window-scale-right"],["window-control","handler","window-scale-bottom","class","window-scale-bottom"],["window-control","handler","window-scale-bottom-right","class","window-scale-bottom-right"],["window-control","handler","window-scale-bottom-left","class","window-scale-bottom-left"],["window-control","handler","window-scale-left","class","window-scale-left"]]:[],"id",a.id,"style","top:"+a.top+"px;"+"left: "+a.left+"px;"+"width: "+a.width+"px;"+"height: "+a.height+"px;","view_id",a.view_id];a.window_class&&b.push("class",a.window_class);return b};this._window_type_hud=function(a){return["window",["window-control","handler","window-scale-top","class","window-scale-top"],"id",a.id,"style","top:"+a.top+"px;"+"left: "+a.left+"px;"+"width: "+a.width+"px;"+"height: "+a.height+"px;","view_id",a.view_id,"class","hud"]};this.window_header=function(a){return["window-header",["window-control","handler","window-close","class","window-close"],a,"handler","window-move","class","window-move"]}}).apply(window.templates);var EventHandler=function(a,b,c,d){typeof d!="boolean"&&(d=!0);c=c?c:"handler";window.eventHandlers||(window.eventHandlers=window.event_handlers={});if(!window.eventHandlers[a]){window.eventHandlers[a]={broker:window.ActionBroker&&window.ActionBroker.get_instance()||null};var e=function(b){var e=b.target,f=null,g=null;if(e.nodeType==1){if(b.which==3&&b.type in{click:1,mousedown:1,mouseup:1}){b.stopPropagation();b.preventDefault();return}while(e){f=e.getAttribute(c);while((!f||!eventHandlers[a][f])&&(e=e.parentNode))f=e.nodeType==1?e.getAttribute(c):null;if(f&&e){a=="click"&&/toolbar-buttons/i.test(e.parentNode.nodeName)&&(g=document.getElementById(e.parentNode.parentNode.id.replace("toolbar","container")));eventHandlers[a][f](b,e,g)}e=d?null:e&&e.parentNode}}};this.post=function(b,c){eventHandlers[a][b]&&eventHandlers[a][b](c)};document.addEventListener(a,e,b?b:!1)}};new EventHandler("click");new EventHandler("dblclick",!1,"edit-handler");new EventHandler("change");new EventHandler("input");new EventHandler("keyup",!0);new EventHandler("keydown",!0);new EventHandler("keypress",!0);new EventHandler("mousedown");new EventHandler("mouseup");new EventHandler("mouseout");new EventHandler("mouseover",null,null,!1);new EventHandler("focus",!0,"focus-handler");new EventHandler("blur",!0,"blur-handler");new EventHandler("mousewheel");new EventHandler("scroll",!0);eventHandlers.mousedown.tab=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id")),d=b.get_attr("parent-node-chain","ref-id");c?c.setActiveTab(d,null,a):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"tabs is missing in eventHandlers.click['tab'] in ui-actions")};eventHandlers.mousewheel["change-on-scroll"]=function(a,b){b.nodeName=="tab"&&(b=b.parentNode);var c=b.querySelector(".active");a.detail<0?c.previousElementSibling&&eventHandlers.mousedown.tab(null,c.previousElementSibling):c.nextElementSibling&&eventHandlers.mousedown.tab(null,c.nextElementSibling)};eventHandlers.click["close-tab"]=function(a,b){var c=b.get_attr("parent-node-chain","tabbar-ref-id"),d=b.get_attr("parent-node-chain","ref-id"),e=c&&d&&UI.get_instance().get_tabbar(c)||null;e&&e.remove_tab(d)};eventHandlers.mousedown["horizontal-nav"]=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id")),d=b.get_attr("parent-node-chain","dir");c.nav(d,!0)};eventHandlers.mouseup["horizontal-nav"]=eventHandlers.mouseout["horizontal-nav"]=function(a,b){var c=window.getSelection();c.isCollapsed||c.removeAllRanges();var d=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id"));d.clear_nav_timeout()};eventHandlers.mousewheel["breadcrumbs-drag"]=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id"));c.nav(a.detail<0?100:-100)};eventHandlers.mousedown["breadcrumbs-drag"]=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id"));c.drag_breadcrumb(a,b)};eventHandlers.click["settings-tabs"]=function(a,b){var c=UIBase.getUIById(b.parentElement.getAttribute("ui-id"));windows.showWindow("window-3","Settings",templates.settings(c),200,200,200,200)};eventHandlers.click["show-search"]=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id"));if(c){var d=UI.get_instance().get_search(c.cell.container.view_id);d&&(b.hasClass("is-active")?d.hide():d.show())}};eventHandlers.click["show-window"]=function(a){var b=a.target,c=b.getAttribute("view-id");b.parentNode.parentNode.parentNode.removeChild(b.parentNode.parentNode);UIWindowBase.showWindow(c)};eventHandlers.click.documentation=function(a){window.open(a.target.getAttribute("param"),"_info_window").focus()};eventHandlers.click["top-window-close"]=function(a){window.close()};eventHandlers.click["top-window-toggle-attach"]=function(a){window.opera.attached=!window.opera.attached;window.settings.general.set("window-attached",window.opera.attached);window.client.create_window_controls()};eventHandlers.click["overlay-tab"]=function(a,b){Overlay.get_instance().change_group(a.target.getAttribute("group"))};eventHandlers.click["toggle-overlay"]=function(a,b){var c=Overlay.get_instance(),d=b.getAttribute("data-overlay-id");c.is_visible?this.broker.dispatch_action("global","hide-overlay",a,b):this.broker.dispatch_action("global","show-overlay",a,b)};eventHandlers.click["toggle-console"]=function(a,b){this.broker.dispatch_action("global","toggle-console",a,b)};eventHandlers.click["toolbar-switch"]=function(a){var b=a.target,c=b.getAttribute("key")&&b.getAttribute("key").split(".");if(c&&c.length){var d=c[0],e=c[1],f=!b.hasClass("is-active");settings[d].set(e,f);views.settings_view.syncSetting(d,e,f);views[d].update()}};eventHandlers.click["toolbar-single-select"]=function(a,b){var c=a.target,d=b.getAttribute("data-view-id"),e=b.getAttribute("data-single-select-name"),f=c.getAttribute("data-single-select-value");if(d&&e&&f!==null){var g=window.single_selects&&window.single_selects[d]&&window.single_selects[d][e];if(g){var h=g.values.indexOf(f),i=a.ctrlKey&&g.allow_multiple_select;if(i){var j=h!==-1;if(!j){g.values.push(f);c.addClass("is-active")}else if(g.values.length>1){g.values.splice(h,1);c.removeClass("is-active")}}else{g.values=[f];c.addClass("is-active");var k=b.querySelectorAll(".ui-button");for(var l=0,m;m=k[l];l++)m!=c&&m.removeClass("is-active")}messages.post("single-select-changed",{view_id:d,name:e,values:g.values})}}};eventHandlers.change["checkbox-setting"]=function(a){var b=a.target,c=b.getAttribute("view-id");settings[c].set(b.name,b.checked,!0);views[c].update();var d=b.getAttribute("host-view-id");d&&views.settings_view.syncSetting(c,b.name,b.checked)};var SettingsBase=function(){this.set=function(a,b,c){this.map[a]=b;this._storage.stringify_and_set_item(a,b);this.callback_map.hasOwnProperty(a)&&this.callback_map[a].call(this,b);messages.post("setting-changed",{id:this.view_id,key:a,value:b})};this.get=function(a){this.map[a]==null&&(this.map[a]=this._storage.get_and_parse_item(a,this._default_values[a]));return this.map[a]};this.exists=function(a){return a in this.map};this._menu_item_handler=function(a,b,c){this.set(a,!this.get(a),!0);views[this.view_id].update()};this.init=function(a,b,c,d,e,f,g){this.map={};this.view_id=a;this.label_map=c;this.setting_map=d;this.templates=e||{};this.group=f;this.callback_map=g||{};this._default_values=b;this._storage=window.localStorage;for(var h in b)this.map[h]=this._storage.get_and_parse_item(h,b[h]);window.settings||(window.settings={});window.settings[a]=this;window.messages.post("settings-initialized",{view_id:a,setting:this});var i=ContextMenu.get_instance(),j=d&&d.contextmenu;if(j){var k=[];for(var l=0,m;m=j[l];l++)k.push({label:c[m],settings_id:m,handler:this._menu_item_handler.bind(this,m)});i.register(a,k)}}},Settings=function(a,b,c,d,e,f,g){this.init(a,b,c,d,e,f,g)};Settings.get_setting_with_view_key_token=function(a){var b=a.split("."),c=window.settings[b[0]],d=b[1];return c&&c.exists(d)&&{setting:c,view:b[0],key:d,value:c.get(d),label:c.label_map[d]}||null};Settings.get_settings_by_group=function(a){var b=[],c=window.settings;for(var d in c)c[d].group==a&&b.push(d);return b};Settings.prototype=new SettingsBase;var SettingsGroup=function(a,b){this.label=a;this.group_name=b;SettingsGroup.groups.push(this)};SettingsGroup.groups=[];var ViewsMenu=function(a){var b=new Timeouts,c=null,d=this,e=[{label:"Show Live Source of DF",handler:"df-show-live-source"}];this.getAllViews=function(){};this.getHiddenViews=function(){var a=UIBase.getSingleUnvisibleViews()};var f=function(a,b){var c=views[a].name;name_b=views[b].name;return c>name_b&&1||c<name_b&&-1||0},g=function(a){b.clear();c.getElementsByTagName("ul")[0]||c.render(i(window.ViewBase.getSingleViews().filter(function(a){return window.views[a].show_in_views_menu})))},h=function(a){return},i=function(a){var b=["ul"],c="",d=0;for(;c=e[d];d++)b[b.length]=["li",["h2",c.label,"handler",c.handler,"tabindex","1"]];for(d=0;c=a[d];d++)b[b.length]=["li",["h2",views[c].name,"handler","show-window","view-id",c,"tabindex","1"]];return b},j=function(){var a=c.getElementsByTagName("ul")[0];a&&c.removeChild(a)},k=function(a){b.set(j,100)},l=function(b){c=document.getElementById(a);if(c){document.removeEventListener("DOMNodeInserted",arguments.callee,!1);c.addEventListener("mouseover",g,!1);c.addEventListener("mouseout",k,!1)}};this.create=function(){document.addEventListener("DOMNodeInserted",l,!1);document.documentElement.render(templates.viewMenu());opera.attached&&topCell.tab.changeStyleProperty("padding-right",188)};this.remove=function(){c=document.getElementById(a);if(c){c.parentNode.removeChild(c);opera.attached&&topCell.tab.changeStyleProperty("padding-right",-188)}};var m=function(a){if(a.id=="general")switch(a.key){case"show-views-menu":settings.general.get(a.key)?d.create():d.remove()}}};window.viewsMenu=new ViewsMenu("main-view-menu");var SlideViews=function(a){const b="v",c="h";var d=this,e=null,f=null,g=function(){d.checkDimensions()||d.cell.update(d.cell.left,d.cell.top,!0)},h=null,i=0,j=null,k=0,l=function(a){h.handleResizeEvent(j,i)},m=function(a){j=a;e.focus()},n=function(a){clearInterval(k);j=a;l();document.removeEventListener("mousemove",m,!1);document.removeEventListener("mouseup",n,!1);h=null;i=0;j=null},o=function(a){var b=a.target;if(b.nodeName.indexOf(defaults.slider_name)==0){a.stopPropagation();a.preventDefault();var d=CellBase.getCellById(b.id.slice(11));j=a;if(d){h=d;i=a[d.dir==c?"offsetY":"offsetX"]+2*defaults.view_border_width;document.addEventListener("mousemove",m,!1);document.addEventListener("mouseup",n,!1);k=setInterval(l,15)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing target in mousedownhandler in slideViews");e||(e=UIBase.getFocusCatcher())}};a.addEventListener("mousedown",o,!1)},Animator=function(a){var b=a.id,c=a.delta,d=a.iterations,e=a.active||0,f=a.ready||0,g=a.x_position||"0px ",h=a.time_delta||30,i=0,j=0,k=function(){var a=document.getElementById(b);if(a){a.style.backgroundPosition=g+(e+i++*c)+"px";i>=d&&(i=0)}};this.setActive=function(){j=j?j:setInterval(k,h)};this.setFinal=function(){j=j?clearInterval(j):0;var a=document.getElementById(b);if(a){a.style.backgroundPosition=g+f+"px";i=0}};this.setInitial=function(){j=j?clearInterval(j):0;if(ele=document.getElementById(b)){ele.style.backgroundPosition=g+0+"px";i=0}};this.getId=function(){return b};this.getState=function(){var a=document.getElementById(b);return j&&"active"||a&&a.style.backgroundPosition.indexOf(" "+f+"px")!=-1&&"final"||"initial"}},SwitchesBase=function(){this.init=function(a,b){this.view_id=a;var c="",d=0;for(;c=b[d];d++)c.indexOf(".")==-1&&(b[d]=a+"."+c);this.keys=b;window.switches||(window.switches={});window.switches[a]=this};this._on_setting_changed_bound=function(a){var b=a.id+"."+a.key,c=document.querySelectorAll("[handler='toolbar-switch']");for(var d=0,e;e=c[d];d++){var f=settings[a.id].get(a.key),g=e.querySelector("[key='"+b+"']");g&&(f?g.addClass("is-active"):g.removeClass("is-active"))}}.bind(this);window.messages.addListener("setting-changed",this._on_setting_changed_bound,!0)},Switches=function(a,b){this.init(a,b)};Switches.prototype=new SwitchesBase;var SingleSelectBase=function(){this.init=function(a,b,c,d,e){this.id=a+"."+b;this.view_id=a;this.name=b;this.values=[d];this.allow_multiple_select=e;window.single_selects||(window.single_selects={});window.single_selects[a]||(window.single_selects[a]={});window.single_selects[a][b]=this}},SingleSelect=function(a,b,c,d,e){this.init(a,b,c,d,e)};SingleSelect.prototype=new SingleSelectBase;var CstSelectBase=new function(){this.getSelectedOptionText=function(){};this.getSelectedOptionTooltipText=function(){};this.getSelectedOptionValue=function(){};this.templateOptionList=function(a){};this.checkChange=function(a){};this.handleClick=function(a,b,c){if(!c.ignore_option_handlers&&a.hasAttribute("handler")||c.checkChange(a))return 1;if(a.nodeName.toLowerCase()!="cst-option")return 2;return 0};this.onshowoptionlist=function(a){};this.onhideoptionlist=function(a){};this.ignore_option_handlers=!1;var a=null,b=null,c=this,d=function(b){var d=b.target;if(!window.Tooltips||!Tooltips.is_in_target_chain(b)){while(d!=a&&(d=d.parentElement));if(!d||b.target.nodeName.toLowerCase()!="input"||b.target.type!="text"){b.stopPropagation();b.preventDefault()}d||c.remove_select()}},e=function(d){var e=d.target,f=d.target,g=null;if(!(window.Tooltips&&Tooltips.is_in_target_chain(d)||d.target.nodeName.toLowerCase()=="input"&&d.target.type=="text")){d.stopPropagation();d.preventDefault();while(e!=a&&(e=e.parentElement));if(e){switch(b.handleClick(f,a,b)){case 0:break;case 1:var h=f.getAttribute("handler");if(h)eventHandlers.click[h]&&eventHandlers.click[h](d,f);else{g=b.updateElement();g&&g.releaseEvent("change")}break;case 2:return}c.remove_select();window.Tooltips&&window.Tooltips.hide_tooltip()}}};this.remove_select=function(){if(a){document.removeEventListener("mousedown",d,!0);document.removeEventListener("mouseup",e,!0);a.parentElement.removeChild(a);b.onhideoptionlist&&b.onhideoptionlist();a=null;b=null;EventHandler.__modal_mode=!1;return!0}return!1};this.is_modal_box_visible=function(){return Boolean(a)};var f=function(c){if(!a){var f=c.target,g=2;while(g&&f){if(/^cst-select/i.test(f.nodeName))break;f=g&&f.parentNode}if(f){var h=c.target;if(f.hasAttribute("disabled"))return;if(c.stopPropagation){c.stopPropagation();c.preventDefault()}window.Tooltips&&window.Tooltips.hide_tooltip();while(h&&!/^container$/i.test(h.nodeName)&&(h=h.parentElement));document.addEventListener("mousedown",d,!0);document.addEventListener("mouseup",e,!0);b=window["cst-selects"][f.getAttribute("cst-id")];var i=templates["cst-select-option-list"](b,f);a=(h||document.documentElement).render(i);var j=f.getBoundingClientRect(),k=Boolean(a.querySelector('input[type="text"]')),l=h&&h.offsetTop-h.scrollTop||0,m=h&&h.offsetLeft-h.scrollLeft||0,n=j.left-m,o=j.bottom-l,p=j.right-m,q=j.top-l,r=innerWidth,s=innerHeight,t=r-n-30,u=s-o-(30+(k?25:0)),v=a.offsetWidth,w=a.offsetHeight,x=p-30,y=q-30,z="";if(w>u&&w<y)z+="top: "+(q-w)+"px;";else{z+="top: "+(o-1)+"px;";a.firstElementChild.style.cssText="max-height: "+u+"px;"}v>t&&x>t?z+="left: "+(p-Math.min(v,x))+"px;"+"max-width: "+Math.min(v,x)+"px;":z+="left: "+n+"px; max-width: "+t+"px;";z+="min-width:"+(f.offsetWidth<t?f.offsetWidth:t>0?t:0)+"px;";a.style.cssText=z;var A=a.querySelector("cst-option.selected");if(A){var B=A.offsetTop,C=A.offsetHeight,D=a.offsetHeight;B+C>D&&(a.firstElementChild.scrollTop=B+C/2-D/2)}EventHandler.__modal_mode=!0;if(b.onshowoptionlist){var E=a.querySelector("cst-select-option-list");E&&b.onshowoptionlist(E)}}}};this.getTemplate=function(){var a=this;return function(b,c){return window.templates["cst-select"](a,c)}};this.getId=function(){return this._id};this.setNewValues=function(a){a.value=this.getSelectedOptionValue();var b=a.firstElementChild;if(b&&b.nodeName.toLowerCase()=="cst-value"){var c=this.getSelectedOptionTooltipText();if(c){var d=["span",this.getSelectedOptionText(),"data-tooltip","js-script-select","data-tooltip-text",c];b.clearAndRender(d)}else b.textContent=this.getSelectedOptionText()}};this.updateElement=function(a){var b=document.getElementsByTagName("cst-select"),c=null,d=this.getId(),e=0,f=0;for(;c=b[e];e++)if(c.getAttribute("cst-id")==d){this.setNewValues(c,a);f=e}return b[f]};this.init=function(a,b,c,d){(window["cst-selects"]||(window["cst-selects"]={}))[a]=this;this._selected_option_index=0;this._option_list=this._option_list||[];this._id=a;this.class_name=b||"";this.type=c||"";this.handler=d||"";this.template=this.getTemplate()};this.show_dropdown=function(a){if(window["cst-selects"][a]){var b=document.querySelector('cst-select[cst-id="'+a+'"]');b&&f({target:b})}};this.getSelectedOptionText=function(){var a=this._option_list[this._selected_option_index];return a&&a.text||""};this.getSelectedOptionValue=function(){var a=this._option_list[this._selected_option_index];return a&&a.value||a.text||""};this.templateOptionList=function(a){var b=[],c=a._option_list,d=null,e=0;for(;d=c[e];e++)b[e]=["cst-option",d.text,"opt-index",e,"title",d.title||"","unselectable","on"];return b};this.checkChange=function(a){var b=a["opt-index"];if(this._selected_option_index!=b){this._selected_option_index=b;return!0}return!1};document.addEventListener("mousedown",f,!1)};CstSelectBase.close_opened_select=function(){return this.remove_select()};var CstSelect=function(a,b,c,d){this.init(a,b,c,d)};CstSelect.__defineGetter__("is_active",function(){return CstSelectBase.is_modal_box_visible()});CstSelect.__defineSetter__("is_active",function(){});CstSelect.show_dropdown=function(
a){CstSelectBase.show_dropdown(a)};var CstSelectWithActionBase=function(a,b,c){this._action_entries=[];this._action_entry=function(a){return["cst-option",a.text,"handler",a.handler,"title",a.title||"","unselectable","on"]};this.templateOptionList=function(a){var b=a._action_entries.map(this._action_entry),c=a._option_list,d=null,e=0;b.length&&(b[b.length]=["hr"]);for(;d=c[e];e++)b[b.length]=["cst-option",d.text,"opt-index",e,"title",d.title,"unselectable","on"];return b}};CstSelectWithActionBase.prototype=CstSelect.prototype=CstSelectBase;CstSelectWithAction=function(a,b,c){this.init(a,b,c)};CstSelectWithAction.prototype=new CstSelectWithActionBase;(window.templates||(window.templates={}))["cst-select"]=function(a,b){var c=a.getSelectedOptionTooltipText();return["cst-select",["cst-value",["span",a.getSelectedOptionText(),"data-tooltip",c&&"js-script-select","data-tooltip-text",c],"unselectable","on"],["cst-drop-down"],"cst-id",a.getId(),"handler",a.getId(),"unselectable","on","class","ui-control","disabled",b&&"disabled","handler",a.handler]};templates["cst-select-option-list"]=function(a,b){var c="menu"+(a.class_name?" "+a.class_name:"");return["cst-select-option-list-container",["cst-select-option-list",a.templateOptionList(a)],"style","top: -1000px; left: -1000px;","class",c]};var CstSelectToolbarSettings=function(a,b,c){this._add_view_to_key=function(b){return(!/\./.test(b)&&a+"."||"")+b};this.id=a;this.class_name=c;this._settings_arr=(b||[]).map(this._add_view_to_key);this.base_init=this.init;this.init=function(){window.toolbar_settings||(window.toolbar_settings={});window.toolbar_settings[this.id]=this};this.template_view_key_token=function(a){var b=Settings.get_setting_with_view_key_token(a);return b&&["cst-option",["span","class","menu-icon "+(b.value?"check":"")],b.label,"unselectable","on","key",a,"class",b.value?"is-active":""]||[]};this.templateOptionList=function(a){return a._settings_arr.map(a.template_view_key_token)};this.handleClick=function(a,b,c){while(a){if(a.nodeName.toLowerCase()=="cst-option"){eventHandlers.click["toolbar-switch"]({target:a});break}a=a.parentNode}return 0};this.init();this.base_init(a,c)};CstSelectToolbarSettings.prototype=CstSelectBase;var ButtonBase=function(){this.type="button";this.init=function(a,b,c,d,e){this.id=a;this.class_name=b||"";this.title=c||"";this.handler=d||"";this.attributes=e||{}}},Button=function(a,b,c,d,e){this.set_active=function(a){};this.get_template=function(){};this.set_active=function(a){Boolean(a)?this._element.addClass("is-active"):this._element.removeClass("is-active")};this.get_template=function(){return window.templates[this.type](this.id,this.class_name,this.title,this.handler,this.attributes)};this.init(a,b,c,d,e)};Button.prototype=new ButtonBase;window.templates.button=function(a,b,c,d,e){var f=[];for(var g in e)f.push(g,e[g]);return["span","","id",a,"class","ui-button "+b,"title",c,"handler",d||a,"tabindex","1"].concat(f)};var ui_framework=new function(){this.beforeSetup=function(){};this.afterSetup=function(){};this.layouts={};this.setup_top_cell=function(){};var a=this,b=[{s_name:"border-top-width"},{s_name:"border-right-width"},{s_name:"border-bottom-width"},{s_name:"border-left-width"},{s_name:"padding-top"},{s_name:"padding-right"},{s_name:"padding-bottom"},{s_name:"padding-left"},{s_name:"width"},{s_name:"height"}],c=[{source:"toolbar",target:Toolbar.prototype,properties:b},{source:"modebar",target:Modebar.prototype,properties:b},{source:"searchbar",target:Searchbar.prototype,properties:b},{source:"searchbar",source_attrs:{"class":"advanced-searchbar"},target:AdvancedSearchbar.prototype,properties:b},{source:"tabs",target:Tabs.prototype,properties:b},{source:"container",target:Container.prototype,properties:b},{source:"top-tabs",target:TopTabs.prototype,properties:b},{source:"top-container",target:TopContainer.prototype,properties:b},{source:"top-toolbar",target:TopToolbar.prototype,properties:b},{source:"window-toolbar",target:WindowToolbar.prototype,properties:b},{source:"window-header",target:defaults,properties:[{t_name:"window_header_offsetHeight",setProp:function(a,b){return a.offsetHeight}}]},{source:"window-container",target:WindowContainer.prototype,properties:b},{source:"window-statusbar",target:WindowStatusbar.prototype,properties:b},{source:"window-statusbar",target:defaults,properties:[{t_name:"window_statusbar_offsetHeight",setProp:function(a,b){return a.offsetHeight}}]}],d=[{id:"test-line-height",property:"line-height",target:"js-source-line-height",getValue:function(){return parseInt(window.getComputedStyle(document.getElementById(this.id),null).getPropertyValue(this.property))}},{id:"test-char-width",target:"js-source-char-width",getValue:function(){var a=document.getElementById("test-line-height"),b=a&&a.firstElementChild;return b&&b.getBoundingClientRect().width/10||0}},{id:"test-text-left-offset",target:"js-default-text-offset",getValue:function(){var a=document.getElementById("js-source-scroll-content"),b=document.getElementById(this.id);return a&&b?b.getBoundingClientRect().left-a.getBoundingClientRect().left:0}},{id:"test-scrollbar-width",target:"scrollbar-width",getValue:function(){return 100-document.getElementById(this.id).offsetWidth}},{id:"test-cst-select-width",target:"cst-select-margin-border-padding",getValue:function(){var a=["margin-left","border-left-width","padding-left","margin-right","border-right-width","padding-right"],b="",c=0,d=0,e=getComputedStyle(document.getElementById(this.id),null);for(;b=a[c];c++)d+=parseInt(e.getPropertyValue(b));return d}},{id:"test-font-faces",target:"monospace-fonts",getValue:function(){var a=document.getElementById(this.id).getElementsByTagName("span");return Array.prototype.map.call(a,function(a){var b=getComputedStyle(a,null).getPropertyValue("font-family");if(b.toLowerCase().indexOf(a.title.toLowerCase())!=-1)return a.title;return null}).filter(Boolean)}}];d.markup="<div> <div class='js-source mono'> <div id='test-line-height' class='mono'><span>1234567890</span></div> <div id='js-source-scroll-content'> <div class='js-source-content'> <div style='position:absolute;width:100px;height:100px;overflow:auto'> <div id='test-scrollbar-width' style='height:300px'></div> </div> <div><span id='test-text-left-offset'>&amp;nbsp;</span></div></div> </div> </div> <toolbar style='top:50px;left:50px;height:26px;width:678px;display:block'> <cst-select id='test-cst-select-width' cst-id='js-script-select' unselectable='on' style='width: 302px' class='ui-control'> <cst-value unselectable='on' /> <cst-drop-down/> </cst-select> </toolbar> <div id='test-font-faces'>"+["Menlo","Andale Mono","Arial Monospaced","Bitstream Vera Sans Mono","Consolas","Courier","Courier New","DejaVu Sans Mono","Droid Sans Mono","Everson Mono","Fedra Mono","Fixed","Fixedsys","Fixedsys Excelsior","Inconsolata","HyperFont","Letter Gothic","Liberation Mono","Lucida Console","Lucida Sans Typewriter","Lucida Typewriter","Miriam Fixed","Monaco","Monofur","Monospace","MS Gothic","MS Mincho","Nimbus Mono L","OCR-A","OCR-B","Orator","Ormaxx","Prestige Elite","ProFont","PT Mono","Sydnie","Terminal","Terminus","Tex Gyre Cursor","UM Typewriter","William Monospace"].map(function(a){return"<span title='"+a+"' style='font-family:"+a+"'>test</span>"}).join("")+"</div></div>";this.set_default_properties=function(a){var b=viewport.appendChild(document.createElement("div"));b.style.cssText="position:absolute;top:0;left:-1000px;";b.innerHTML=d.markup;for(var c=null,e=0;c=d[e];e++)if(!a||a.contains(c.id))defaults[c.target]=c.getValue();viewport.removeChild(b)};this.setup=function(){window[defaults.viewport]=document.getElementsByTagName(defaults.viewport_main_container)[0];if(viewport){UIBase.copyCSS(c);this.set_default_properties();new SlideViews(document)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing viewport")};window.toolbars||(window.toolbars={});window.switches||(window.switches={});window.cls||(window.cls={})};(function(){var a=function(){var a=0;return function(){return"svg-uid-"+ ++a}}();this.color_picker_inputs=function(a,b){const c=0,d=4;var e=function(b){b[c][d]==a&&b.push("checked");return b},f=[["s-v-h","h","h:","number","°","0","360"],["h-v-s","s","s:","number","%","0","100"],["h-s-v","v","v:","number","%","0","100"]].map(e),g=[["b-g-r","r","r:","number",null,"0","255"],["b-r-g","g","g:","number",null,"0","255"],["r-g-b","b","b:","number",null,"0","255"]].map(e),h=["tr",["td",""],["td","α: "],["td",["input","name","alpha","type","number","min","0","max","1","step","0.05","class","color-picker-number","disabled",b]]];return["form",["table",f.map(this.color_picker_inputs_row,this),["tr",["td","class","color-picker-spacer","colspan","3"]],g.map(this.color_picker_inputs_row,this),["tr",["td","class","color-picker-spacer","colspan","3"]],h,"class","color-picker-inputs"]]};this.color_picker_inputs_row=function(a,b){const c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7;var k="color-picker-input-"+a[d];return["tr",["td",a[c]?["input","type","radio","name","color-space","value",a[c]].concat(a[j]?["checked","checked"]:[]):[]],["td",["label",a[e],"for",k]],["td",["input","name",a[d],"type",a[f],"class","color-picker-"+a[f],"id",k].concat(a[h]?["min",a[h],"max",a[i]]:[]),a[g]?["span"," "+a[g],"class","color-picker-input-unit"]:""]]};this.slider_focus_catcher=function(){return["input","style","display: block; position:absolute; left: -1000px; top:0; width: 10px;"]};this.color_picker_popup=function(a,b,c,d,e,f,g,h,i){return["div",["div","class","color-picker-arrow"],["div",["canvas","class","cp-canvas"],"data-handler","onxy","class",c],["div",["canvas","class","cp-canvas"],"data-handler","onz","class",d],window.templates.color_picker_inputs(g,h),["input","name","hex","class","color-picker-text"],["div",["div","class",e,"data-color","cancel","style","background-color:"+a.rgba],["div","class",f],"class","color-picker-color-alpha-bg"],window.templates.color_picker_palette_dropdown(i),["div",["span",ui_strings.S_BUTTON_CANCEL,"class","ui-button","handler","color-picker-cancel","tabindex","1"],["span",ui_strings.S_BUTTON_OK,"class","ui-button","handler","color-picker-ok","tabindex","1"],"class","color-picker-controls"],"class",b]};this.color_picker_palette_dropdown=function(a){if(window.cls&&cls.ColorPalette){var b=9,c="999",d=cls.ColorPalette.get_instance().get_color_palette().slice(0,b),e=d.map(function(a){return a.color});while(e.length<b)e.push(c);return["div",e.map(this._color_picker_palette_square),"class","color-picker-palette-dropdown"+(a?" disabled":""),"data-tooltip",!a&&"color-palette"]}return[]};this._color_picker_palette_square=function(a){return["div","class","color-picker-palette-square","style","background-color: #"+a]};this.color_picker_palette=function(){if(window.cls&&cls.ColorPalette){var a=cls.ColorPalette.get_instance().get_color_palette();return["div",this.color_picker_palette_item_add(),a.map(this.color_picker_palette_item,this),"class","color-picker-palette","data-menu","color-picker-palette"]}return[]};this.color_picker_palette_item_add=function(){return["span","handler","add-color-picker-color","class","color-picker-palette-item-add ui-control ui-button"]};this.color_picker_palette_item=function(a){return["span","data-color",a.color,"data-color-id",String(a.id),"handler","set-color-picker-color","style","background-color: #"+a.color,"class","color-picker-palette-item"]};this.slider=function(a,b,c){return["div",["div",c||[],"class",b],"class",a]};this.pointer=function(a){return["div","class",a]}}).apply(window.templates||(window.templates={}));var ColorPicker=function(a,b){this._init(a,b)};ColorPicker.prototype=new function(){this.render=function(){};const a="color-picker-popup",b="color-picker-2-d-graphic",c="color-picker-1-d-graphic",d="color-picker-color-old",e="color-picker-color",f="color-picker-slider-base",g="color-picker-slider",h="color-picker-pointer";this._verify_inputs={h:{min:0,max:360,last:0,base:10},s:{min:0,max:100,last:0,base:10},v:{min:0,max:100,last:0,base:10},r:{min:0,max:255,last:0,base:10},g:{min:0,max:255,last:0,base:10},b:{min:0,max:255,last:0,base:10},hex:{min:0,max:16777215,last:0,base:16},alpha:{min:0,max:1,last:0,base:10}};this._verify=function(a,b){var c=(b.max==1?parseFloat:parseInt)(a,b.base);typeof c=="number"&&!isNaN(c)&&c>=b.min&&c<=b.max&&(b.base==16?/^[0-9a-fA-F]{0,6}$/.test(a)&&(b.last=a):b.last=c);return b.last};this._oninput=function(a){if(a.target.name in this._verify_inputs&&a.target.value){var b=a.target,c=b.value;if(c){var d=this._verify_inputs[b.name],e="",f,g=!0;if(b.name==="hex"){f=b.selectionStart+1;c=c.replace(/[^0-9a-f]/ig,function(){f--;return""}).slice(0,6).toUpperCase();if(c===""){c=d.min;e="";g=!1}}g&&(e=this._verify(c,d));this._cs[b.name]=e;if(d.max==1){if(e.toString().length>5||e!=c)b.value=e.toFixed(3)}else b.value=e;this._set_coordinates();this._cb_color.clone(this._cs);this._update_inputs(a.target.name);b.name==="hex"&&f!==undefined&&(b.selectionStart=b.selectionEnd=f);this._update_xy_graphic();this._update_xy_slider();this._update_z_graphic();this._update_z_slider();this._update_sample_color();this._cb(this._cb_color)}}};this._onclick=function(a){var b=a.target.get_attr("parent-node-chain","data-color"),c=null;if(b){if(b=="cancel"){c=this._initial_color;this._cs.clone(c);this._cb_color.clone(c);c.type==c.KEYWORD&&(this._cs.type=c.RGBA)}else{this._cs.setHex(b);this._cb_color.clone(this._cs)}this._update();this._cb(this._cb_color)}};this._onblur=function(a){if(a.target.name in this._verify_inputs){var b=a.target.name==="hex"?"#":"",c=a.target,d=this._verify_inputs[c.name],e=this._verify(c.value,d);if(e!=c.value||!c.value)c.value=b+(d.max==1?e.toFixed(3):e)}};this._onchange=function(a){a.target.name=="color-space"&&this._set_color_space(a.target.value)};this._onxy=function(a,b){this._cur_x=a;this._cur_y=b;this._set_cs_coordinates();this._cb_color.clone(this._cs);this._update_inputs();this._update_z_graphic();this._update_sample_color();this._cb(this._cb_color)};this._onz=function(a){this._cur_z=a;this._set_cs_coordinates();this._cb_color.clone(this._cs);this._update_inputs();this._update_xy_graphic();this._update_sample_color();this._cb(this._cb_color)};this._onremove=function(a){if(a.target.nodeType==1&&a.target.contains(this._ele)){document.removeEventListener("DOMNodeRemoved",this._onremove_bound,!1);this._ele.removeEventListener("input",this._oninput_bound,!1);this._ele.removeEventListener("click",this._onclick_bound,!1);this._ele.removeEventListener("change",this._onchange_bound,!1);this._ele.removeEventListener("blur",this._onblur_bound,!0);this._ele=null;this._ele_inputs=null;this._ele_sample_color=null;this._ele_sample_color_solid=null;this._ele_z_graphic=null;this._xy_slider=null;this._z_slider=null;this._2d_ctx=null;this._1d_ctx=null}};this._update_inputs=function(a,b){for(var c=null,d=0;c=this._ele_inputs[d];d++){c.name!=a&&(!b||b.indexOf(c.name)>-1)&&(c.value=this._verify_inputs[c.name].max==1?this._cs[c.name].toFixed(3):this._cs[c.name]);c.name==="hex"&&(c.value="#"+c.value)}};this._update_z_slider=function(){this._z_slider.y=this._cur_z};this._update_xy_slider=function(){this._xy_slider.x=this._cur_x;this._xy_slider.y=this._cur_y};this._update_sample_color=function(){var a=this._cs.xyz(this._cur_x,this._cur_y,this._cur_z);this._ele_sample_color.style.backgroundColor=a.rgba};this._update=function(){this._set_coordinates();this._update_inputs();this._update_xy_graphic();this._update_xy_slider();this._update_z_graphic();this._update_z_slider();this._update_sample_color()};this._update_sv=function(){this._2d_ctx.draw_2d_gradient(["#fff",this._cs.xyz(1,1,this._cur_z).hhex],["#000"])};this._update_hs=this._update_hv=function(){this._2d_ctx.draw_2d_gradient([this._cs.xyz(0,1,this._cur_z).hhex,this._cs.xyz(1/6,1,this._cur_z).hhex,this._cs.xyz(2/6,1,this._cur_z).hhex,this._cs.xyz(.5,1,this._cur_z).hhex,this._cs.xyz(4/6,1,this._cur_z).hhex,this._cs.xyz(5/6,1,this._cur_z).hhex,this._cs.xyz(1,1,this._cur_z).hhex],[this._cs.xyz(0,0,this._cur_z).hhex])};this._update_rg=this._update_br=this._update_bg=function(){this._2d_ctx.draw_2d_gradient([this._cs.xyz(0,1,this._cur_z).hhex,this._cs.xyz(1,1,this._cur_z).hhex],[this._cs.xyz(0,0,this._cur_z).hhex,this._cs.xyz(1,0,this._cur_z).hhex])};this._update_r=this._update_g=this._update_b=this._update_s=this._update_v=function(){this._1d_ctx.draw_2d_gradient([this._cs.xyz(this._cur_x,this._cur_y,1).hhex,this._cs.xyz(this._cur_x,this._cur_y,0).hhex],!0)};this._update_h=function(){this._1d_ctx.draw_2d_gradient(["#f00","#f0f","#00f","#0ff","#0f0","#ff0","#f00"],!0)};this._color_properties={h:[360,"setHue","getHue"],s:[100,"setSaturationV","getSaturationV"],v:[100,"setValue","getValue"],r:[255,"setRed","getRed"],g:[255,"setGreen","getGreen"],b:[255,"setBlue","getBlue"]};this._set_color_space=function(a){var b=this._cs.hex;a=a.split("-");var c=["x","y","z"];for(var d=0,e;d<3;d++){e=this._color_properties[a[d]];this._cs.property(c[d],e[0],e[1],e[2])}this._update_xy_graphic=this["_update_"+a[0]+a[1]];this._update_z_graphic=this["_update_"+a[2]];this._cs.hex=b;this._update()};this._set_cs_coordinates=function(){this._cs.x=this._cur_x;this._cs.y=this._cur_y;this._cs.z=this._cur_z};this._set_coordinates=function(){this._cur_x=this._cs.x;this._cur_y=this._cs.y;this._cur_z=this._cs.z};this._setup=function(d){this._ele=d.target.getElementsByClassName(a)[0]||d.target.hasClass(a)&&d.target;if(this._ele){document.removeEventListener("DOMNodeInserted",this._setup_bound,!1);this._ele_inputs=Array.prototype.slice.call(this._ele.getElementsByTagName("input")).filter(function(a){return["h","s","v","r","g","b","hex","alpha"].indexOf(a.name)!=-1});this._ele_sample_color=this._ele.getElementsByClassName(e)[0];var i=this._ele.getElementsByClassName(b)[0],j=this._ele.getElementsByClassName(c)[0],k=i.querySelector("canvas");this._2d_ctx=k&&k.getContext("2d");k=j.querySelector("canvas");this._1d_ctx=k&&k.getContext("2d");this._xy_slider=new Slider({container:i,slider_base_class:f,slider_class:h,onxy:this._onxy.bind(this),min_x:0,max_x:1,min_y:1,max_y:0});this._z_slider=new Slider({container:j,slider_base_class:f,slider_class:g,ony:this._onz.bind(this),min_y:1,max_y:0});this._set_color_space("s-v-h");this._ele.addEventListener("input",this._oninput_bound,!1);this._ele.addEventListener("click",this._onclick_bound,!1);this._ele.addEventListener("change",this._onchange_bound,!1);this._ele.addEventListener("blur",this._onblur_bound,!0);document.addEventListener("DOMNodeRemoved",this._onremove_bound,!1)}};this.render=function(f,g){document.addEventListener("DOMNodeInserted",this._setup_bound,!1);return window.templates.color_picker_popup(this._initial_color,a,b,c,d,e,"h",f,g)};this.update=function(a){if(a){this._cs.setHex(a);this._cb_color.clone(this._cs);this._update();this._cb(this._cb_color)}};this._init=function(a,b){this._cb=a;this._initial_color=b||(new Color).parseCSSColor("#f00");this._cs=new ColorSpace;this._cs.clone(b);this._cb_color=new Color;b.type==b.KEYWORD&&(this._cs.type=b.RGBA);this._cur_x=0;this._cur_y=0;this._cur_z=0;this._setup_bound=this._setup.bind(this);this._oninput_bound=this._oninput.bind(this);this._onclick_bound=this._onclick.bind(this);this._onchange_bound=this._onchange.bind(this);this._onblur_bound=this._onblur.bind(this);this._onremove_bound=this._onremove.bind(this)}};var Slider=function(a){this.onx=function(a){};this.ony=function(a){};this.onxy=function(a,b){};this.x;this.y;this._init(a)};Slider.prototype=new function(){var a=80,b=Math.max,c=Math.min,d=Math.pow,e=7;this._onmousemoveinterval=function(a){if(this._is_active)this._call_callback();else{window.clearInterval(this._interval);this._interval=0}};this._call_callback=function(){this._onxy&&(this.x!=this._submitted_x||this.y!=this._submitted_y)&&this.onxy(this._submitted_x=this.x,this._submitted_y=this.y);this._onx&&this.x!=this._submitted_x&&this.onx(this._submitted_x=this.x);this._ony&&this.y!=this._submitted_y&&this.ony(this._submitted_y=this.y)};this._onmousemove=function(a){if(!this._ref_element)this._onmouseup(a);else{var d=0,e=this._ref_element.getBoundingClientRect();if(this._has_x){d=(a.clientX-this._delta_x-e.left)/this._pixel_range_x*this._range_x+this._min_x;d=b(c(d,this._max_x),this._min_x);this.x=this._is_invers_x?this._max_x-d+this._min_x:d}if(this._has_y){d=(a.clientY-this._delta_y-e.top)/this._pixel_range_y*this._range_y+this._min_y;d=b(c(d,this._max_y),this._min_y);this.y=this._is_invers_y?this._max_y-d+this._min_y:d}}};this._update_y=function(a){this._is_invers_y&&(a=this._max_y-a+this._min_y);this._element.style.top=(a-this._min_y)/this._range_y*this._pixel_range_y+"px"};this._update_x=function(a){this._is_invers_x&&(a=this._max_x-a+this._min_x);this._element.style.left=(a-this._min_x)/this._range_x*this._pixel_range_x+"px"};this._onmousedown=function(b){if(!this._interval&&!this._is_active){if(this._element.contains(b.target)){var c=this._element.getBoundingClientRect();this._delta_x=b.clientX-c.left-(c.width/2>>0);this._delta_y=b.clientY-c.top-(c.height/2>>0)}else{this._delta_x=0;this._delta_y=0;this._onmousemove(b)}document.addEventListener("mousemove",this._onmousemove_bound,!1);document.addEventListener("mouseup",this._onmouseup_bound,!1);this._interval=window.setInterval(this._onmousemoveinterval_bound,a);this._is_active=!0;this._onmousemoveinterval_bound();b.preventDefault()}};this._distance=function(a,b,c,e){return d(d(c-a,2)+d(e-b,2),.5)};this._onmousewheel=function(a){var d=this._ref_element.getBoundingClientRect(),f=a.clientX-d.left,g=a.clientY-d.top,h=this._distance(f,g,this._w_mouse_raw_x,this._w_mouse_raw_y);if(h>e){this._w_count=0;this._w_mouse_raw_x=f;this._w_mouse_raw_y=g;var i=1/this._pixel_range_x*this._range_x,j=1/this._pixel_range_y*this._range_y;this._w_mouse_x=this._has_x?f*i+this._min_x:0;this._w_mouse_y=this._has_y?g*j+this._min_y:0;this._is_invers_x&&(this._w_mouse_x=this._max_x-this._w_mouse_x+this._min_x);this._is_invers_y&&(this._w_mouse_y=this._max_y-this._w_mouse_y+this._min_y);this._w_old_x=this._has_x?this.x:0;this._w_old_y=this._has_y?this.y:0;var h=this._distance(this._w_old_x,this._w_old_y,this._w_mouse_x,this._w_mouse_y),k=h/this._w_unit;this._w_delta_x=this._has_x?(this._w_mouse_x-this._w_old_x)/k:0;this._w_delta_y=this._has_y?(this._w_mouse_y-this._w_old_y)/k:0;if(this._is_invers_x){this._w_delta_x*=-1;this._w_delta_y*=-1}if(this._has_x&&this._has_y){var l=(this._w_old_y-this._w_mouse_y)/(this._w_old_x-this._w_mouse_x),m=this._w_old_y-l*this._w_old_x;this._w_constraint_y=function(a){return m+l*a};this._w_constraint_x=function(a){return(a-m)/l}}else this._has_x?this._w_delta_x=Math.abs(this._w_delta_x)*(this._is_invers_x?-1:1):this._w_delta_y=Math.abs(this._w_delta_y)*(this._is_invers_y?1:-1)}if(!isNaN(this._w_delta_x)&&!isNaN(this._w_delta_y)){this._w_count+=a.wheelDelta>0?1:-1;if(this._has_x){var n=this._w_old_x+this._w_delta_x*this._w_count;n=b(c(n,this._max_x),this._min_x);this.x=n}if(this._has_y){if(!this._has_x||this._min_x!=this.x&&this._max_x!=this.x){var o=this._w_old_y+this._w_delta_y*this._w_count;o=b(c(o,this._max_y),this._min_y)}else var o=this._w_constraint_y(n);this.y=o;if(this._has_x&&(this._min_y==this.y||this._max_y==this.y)){var p=this._w_constraint_x(o);isNaN(p)||(this.x=n=p)}}if(this._has_x&&this._has_y&&(this._min_x==this.x||this._max_x==this.x||this._min_y==this.y||this._max_y==this.y)){var q=this._distance(n,o,this._w_old_x,this._w_old_y);q/=this._w_unit;this._w_count=(this._w_count<0?-1:1)*Math.abs(q)}else if(!this._has_x||this._min_x!=this.x&&this._max_x!=this.x){if(this._has_y&&(this._min_y==this.y||this._max_y==this.y)){var q=(o-this._w_old_y)/this._w_unit;this._w_count=(this._w_count<0?-1:1)*Math.abs(q)}}else{var q=(n-this._w_old_x)/this._w_unit;this._w_count=(this._w_count<0?-1:1)*Math.abs(q)}this._call_callback();a.preventDefault()}};this._onmouseup=function(a){this._is_active=!1;document.removeEventListener("mousemove",this._onmousemove_bound,!1);document.removeEventListener("mouseup",this._onmouseup_bound,!1);this._w_mouse_raw_x=a.clientX;this._w_mouse_raw_y=a.clientY};this._onremove=function(a){if(a.target.nodeType==1&&a.target.contains(this._ref_element)){this._ref_element.removeEventListener("mousedown",this._onmousedown_bound,!1);this._ref_element.removeEventListener("mousewheel",this._onmousewheel_bound,!1);document.removeEventListener("DOMNoderemoved",this._onremove_bound,!1);this._ref_element=null;this._element=null;this._onmousedown_bound=null;this._onmousemove_bound=null;this._onmouseup_bound=null;this._onremove_bound=null;this._onmousemoveinterval_bound=null}};this._set_axis=function(a,b,c,d){this["_has_"+a]=!0;this["_min_"+a]=Math.min(b,c);this["_max_"+a]=Math.max(b,c);this["_pixel_range_"+a]=d;this["_range_"+a]=Math.abs(c-b);this["_is_invers_"+a]=b>c;this["_"+a]=0;this["_submitted_"+a]=0;this[a]=this["_is_invers_"+a]?c:b;this._w_unit||(this._w_unit=(c-b)/d)};this._init=function(a){var b=a.container,c=a.slider_base_class,d=a.slider_class,e=null;if(b instanceof Element){b.render(window.templates.slider(c,d,a.slider_template));this._ref_element=b.getElementsByClassName(c)[0];this._element=b.getElementsByClassName(d)[0];e=this._ref_element.getBoundingClientRect();if(a.onxy){this.onxy=a.onxy;this._onxy=!0;this._set_axis("x",a.min_x,a.max_x,e.width);this._set_axis("y",a.min_y,a.max_y,e.height)}else{if(a.onx){this.onx=a.onx;this._onx=!0;this._set_axis("x",a.min_x,a.max_x,e.width)}if(a.ony){this.ony=a.ony;this._ony=!0;this._set_axis("y",a.min_y,a.max_y,e.height)}}this._w_mouse_raw_x=0;this._w_mouse_raw_y=0;this._w_mouse_x=0;this._w_mouse_y=0;this._w_old_x=0;this._w_old_y=0;this._w_delta_x=0;this._w_delta_y=0;this._w_count=0;this._w_constraint_x=null;this._w_constraint_y=null;this._onmousedown_bound=this._onmousedown.bind(this);this._onmousemove_bound=this._onmousemove.bind(this);this._onmouseup_bound=this._onmouseup.bind(this);this._onmousewheel_bound=this._onmousewheel.bind(this);this._onremove_bound=this._onremove.bind(this);this._onmousemoveinterval_bound=this._onmousemoveinterval.bind(this);this._ref_element.addEventListener("mousedown",this._onmousedown_bound,!1);this._ref_element.addEventListener("mousewheel",this._onmousewheel_bound,!1);document.addEventListener("DOMNodeRemoved",this._onremove_bound,!1)}};this.__defineSetter__("x",function(a){this.__x=a;typeof a=="number"&&!isNaN(a)&&a>=this._min_x&&a<=this._max_x&&this._update_x(a)});this.__defineGetter__("x",function(){return this.__x});this.__defineSetter__("y",function(a){this.__y=a;typeof a=="number"&&!isNaN(a)&&a>=this._min_y&&a<=this._max_y&&this._update_y(a)});this.__defineGetter__("y",function(){return this.__y})};var SortableTable=function(a,b,c,d,e,f,g){this._init(a,b,c,d,e,f,g)},SortableTablePrototype=function(){var a="__null";window.cls&&window.cls.MessageMixin&&window.cls.MessageMixin.apply(this);this._init=function(b,c,d,e,f,g,h){this._grouper_storage_id="table-groupby-"+h,this._sorter_storage_id="table-sort-col-"+h,this._sort_reverse_storage_id="table-sort-reversed-"+h,this._columns_storage_id="table-columns-"+h;if(!d||!d.length){d=[];for(var i in b.columns)d.push(i)}for(var i in b.columns){var j=b.columns[i];j.getter||(j.getter=window.helpers.prop(i));j.renderer||(j.renderer=j.getter);j.sorter===undefined?j.sorter=this._prop_sorter(j.getter):j.sorter==="unsortable"&&(j.sorter=null)}f=localStorage[this._grouper_storage_id]||f;f===a&&(f=null);e=localStorage[this._sorter_storage_id]||e;e===a&&(e=null);if(localStorage[this._columns_storage_id])var k=JSON.parse(localStorage[this._columns_storage_id]);localStorage[this._sort_reverse_storage_id]&&localStorage[this._sort_reverse_storage_id]!==a&&(g=localStorage[this._sort_reverse_storage_id]==="true");this.id=h;this.sortby=e;this.tabledef=b;this.columns=k||d;this.default_columns=d.slice(0);this.reversed=Boolean(g);this._wrapped_sorters={};this.groupby=f;this._elem=null;this.objectid=ObjectRegistry.get_instance().set_object(this);this._re_render_bound=this._re_render.bind(this);this._init_handlers();c&&this.set_data(c)};this.set_data=function(a){this.tabledef.idgetter&&(this._org_data_order=this._last_item_order=a.map(this.tabledef.idgetter));this._data=a;this.reorder()};this.get_data=function(){return this._data};this.reorder=function(){var a=this.sortby&&this.tabledef.columns[this.sortby].sorter;if(a){var b=this._wrapped_sorters[this.sortby];b||(b=this._wrapped_sorters[this.sortby]=this._sort_wrapper.bind(this,a));this._data.sort(b);this.tabledef.idgetter&&(this._last_item_order=this._data.map(this.tabledef.idgetter))}else this.tabledef.idgetter&&this._reset_data_order()};this._sort_wrapper=function(a,b,c){var d=a(b,c);this.reversed&&(d*=-1);if(d===0&&this._last_item_order){var e=this.tabledef.idgetter,f=this._last_item_order;d=f.indexOf(e(b))<f.indexOf(e(c))?-1:1}return d};this._init_handlers=function(){eventHandlers.click["sortable-table-sort"]||(eventHandlers.click["sortable-table-sort"]=this._sort_handler);if(window.ContextMenu){var a=ContextMenu.get_instance();a.register("sortable-table-menu",[{callback:this._make_context_menu}])}window.Tooltips&&Tooltips.register("sortable-table-tooltip",{set_selected:!1})};this._make_context_menu=function(a){var b=a.target.get_attr("parent-node-chain","data-table-object-id"),c=ObjectRegistry.get_instance().get_object(b),d=[];if(c.tabledef.groups&&(!c.tabledef.options||!c.tabledef.options.no_group_changing)){d.push({label:ui_strings.M_SORTABLE_TABLE_CONTEXT_NO_GROUPING,selected:!c.groupby,handler:c._generic_handler.bind(null,"group",null)});for(var e in c.tabledef.groups)d.push({label:ui_strings.M_SORTABLE_TABLE_CONTEXT_GROUP_BY.replace("%s",c.tabledef.groups[e].label||e),selected:c.groupby==e,handler:c._generic_handler.bind(null,"group",e)})}var f=c.tabledef.column_order;if(!f){f=[];for(var g in c.tabledef.columns)f.push(g)}if(f.join(",")!==c.default_columns.join(",")){d.length&&d.push(ContextMenu.separator);for(var h=0,i;i=f[h];h++){var j=c.tabledef.columns[i];d.push({label:j.label,checked:c.columns.indexOf(i)!=-1,handler:c._generic_handler.bind(null,"togglecol",i)})}var k=c.columns.join(",")===c.default_columns.join(",");d.push({label:ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_COLUMNS,handler:!k&&c._generic_handler.bind(null,"togglecol",null),disabled:k})}if(c.sortby&&c._org_data_order){d.length&&d.push(ContextMenu.separator);d.push({label:ui_strings.M_SORTABLE_TABLE_CONTEXT_RESET_SORT,handler:c._generic_handler.bind(null,"change_sort",null)})}return d};this._find_col_insertion_point=function(a){var b=this.tabledef.column_order.indexOf(a);for(var c=b+1,d;d=this.tabledef.column_order[c];c++){var e=this.columns.indexOf(d);if(e!=-1)return e}return this.columns.length};this._generic_handler=function(a,b,c){var d=c.target.get_ancestor("[data-table-object-id]"),e=d.getAttribute("data-table-object-id"),f=ObjectRegistry.get_instance().get_object(e);f[a](b);f._re_render_bound(d)};this._sort_handler=function(a,b){var c=a.target.get_ancestor("[data-table-object-id]"),d=c.getAttribute("data-table-object-id"),e=ObjectRegistry.get_instance().get_object(d),f=a.target.get_attr("parent-node-chain","data-column-id");e.change_sort(f);e._re_render_bound(c)};this._re_render=function(a){if(a&&a.parentNode){this.post_message&&this.post_message("before-render",{table:a});var b=this.render();a=a.re_render(b);a&&this.post_message&&this.post_message("after-render",{table:a[0],template:b})}};this.render=function(){return templates.sortable_table(this.tabledef,this._data,this.objectid,this.columns,this.groupby,this.sortby,this.reversed)};this._prop_sorter=function(a){return function(b,c){b=a(b);c=a(c);return b>c?1:b<c?-1:0}};this.change_sort=function(b){if(b==this.sortby){this.reversed=!this.reversed;this.id&&(localStorage[this._sort_reverse_storage_id]=this.reversed)}else{this.sortby=b;if(!this.sortby){this.sortby=null;this.reversed=!1;this.id&&(localStorage[this._sort_reverse_storage_id]=a)}this.id&&(localStorage[this._sorter_storage_id]=b||a)}this.reorder()};this._id_map=function(a){return this.tabledef.idgetter(a)};this._reset_data_order=function(){var a=this._data.map(this._id_map,this),b=[];this._last_item_order=this._org_data_order;for(var c=0;c<this._org_data_order.length;c++){var d=this._org_data_order[c],e=a.indexOf(d);b.push(this._data[e])}this._data=b};this.group=function(b){!!b&&!!this.tabledef.groups&&b in this.tabledef.groups?this.groupby=b:this.groupby=null;this.id&&(localStorage[this._grouper_storage_id]=this.groupby||a)};this.togglecol=function(a){if(!a)this.columns=this.default_columns.slice(0);else{var b=this.columns.indexOf(a);if(b==-1){var c=this._find_col_insertion_point(a);this.columns.splice(c,0,a)}else this.columns.splice(b,1)}this.id&&(localStorage[this._columns_storage_id]=JSON.stringify(this.columns))}};SortableTable.prototype=new 
SortableTablePrototype;window.templates=window.templates||{};templates.sortable_table=function(a,b,c,d,e,f,g){var h=["table",templates.sortable_table_header(a,d,f,g),templates.sortable_table_body(a,b,d,e,f,g),"class","sortable-table"+(a.nowrap?" nowrap":""),"data-table-object-id",c];(!a.options||!a.options.no_default_menu)&&h.push("data-menu","sortable-table-menu");return h};templates.sortable_table_header=function(a,b,c,d){return["tr",b.map(function(b){var e=a.columns[b];if(!e)return[];var f="";if(!e.sorter)f="unsortable";else{c==b&&(f="sort-column");d&&(f+=" reversed")}e.classname&&(f+=" "+e.classname);var g=a.columns[b].headerlabel!==undefined?a.columns[b].headerlabel:a.columns[b].label;g=templates.sortable_table_wrap_ellipsis(g,e.headertooltip);return["th",g,"class",f,"data-column-id",b].concat(a.columns[b].sorter?["handler","sortable-table-sort"]:[])}),"class","header"]};templates.sortable_table_body=function(a,b,c,d,e,f){var g={};if(d){var h=a.groups[d].grouper;b.forEach(function(a){var b=h(a);b in g?g[b].push(a):g[b]=[a]})}else g={nogroup:b};var i=[];for(var j in g)i.push(j);d&&a.groups[d].sorter?i.sort(a.groups[d].sorter):i.sort();var k=d&&i.length>0;return i.map(function(b){return templates.sortable_table_group(a,b,k,g[b],c,d,e,f)})};templates.sortable_table_group=function(a,b,c,d,e,f,g,h){var i=[];if(c){var j=a.groups[f],k=j.renderer||function(a){return a},l=k(b,d);l=templates.sortable_table_wrap_ellipsis(l);var m=["tr",["th",l,"colspan",String(e.length),"class","sortable-table-group-header"],"class","header"];j.idgetter&&m.push("data-object-id",j.idgetter(d));i.push(m)}var n=i.concat(d.map(function(b){return templates.sortable_table_row(a,b,e)}));for(var o=0,p;p=e[o];o++){var q=a.columns[p];if(q&&q.summer){n.push(templates.sortable_table_sumrow(a,b,d,e));break}}return n};templates.sortable_table_sumrow=function(a,b,c,d){return["tr",d.map(function(d){var e=a.columns[d],f="",g=e.summer;g&&(f=g(c,b));e.use_ellipsis&&(f=templates.sortable_table_wrap_ellipsis(f));return["td",f,"class",e.align?"align-"+e.align:""]}),"class","sortable-table-summation-row"]};templates.sortable_table_row=function(a,b,c){return["tr",c.map(function(c){var d=a.columns[c];if(!d)return[];var e=d.renderer(b,d.getter);if(e!=null){var f;d.title_getter&&(f=d.title_getter(b,d.renderer));d.use_ellipsis&&(e=templates.sortable_table_wrap_ellipsis(e,f));var g=!d.use_ellipsis&&f,h=["td",e];g&&h.push("data-tooltip","sortable-table-tooltip","data-tooltip-text",f);d.align&&h.push("class","align-"+d.align);d.attributes&&(h=h.concat(d.attributes));return h}return[]}).concat(a.handler?["handler",a.handler]:[]).concat(a.idgetter?["data-object-id",a.idgetter(b)]:[])]};templates.sortable_table_wrap_ellipsis=function(a,b){var b=b||typeof a=="string"&&a;return["div",["div",a,"class","ellipsis"],"class","ellipsis_cont"].concat(b?["data-tooltip","sortable-table-tooltip","data-tooltip-text",b]:[])};ContextMenu.get_instance=function(){return this._instance||new ContextMenu};ContextMenu.separator={separator:!0};var SidePanelBaseView=function(a,b,c){this.container_class="scroll side-panel";this.type="side-panel";this._container=null;this._divs=null;this._init_super=this.init;this.init=function(a,b,c,d){this._view_list=c;var e={};e["panel-expanded-"+a]=d||[];new Settings(a,e);var f=window.settings[a].get("panel-expanded-"+a);this._views=c.map(function(a,b){return new PanelContainer(a,f[b])},this);this._init_super(a,b,this.container_class);this._toolbar=new Toolbar};this.has_view=function(a){var b,c=0;for(;(b=this._views[c])&&a!=b.view_id;c++);return Boolean(b)};this.set_view_unfolded=function(a){var b,c=0;for(;(b=this._views[c])&&b.view_id!=a;c++);if(b&&!b.is_unfolded){b.is_unfolded=!0;this._store_views_unfolded()}this.update()};this.get_visible_tabs=function(){return this._view_list.slice(0)};this.createView=function(a){this._container=a;this._divs=a.clearAndRender(templates.side_panel(this._views)).childNodes;this._views.forEach(function(a,b){a.is_unfolded&&this._show_view(a,this._divs[b])},this)};this.ondestroy=function(){this._divs&&this._views.forEach(function(a,b){a.is_unfolded&&this._hide_view(a,this._divs[b])},this);this._container=null;this._divs=null};this._store_views_unfolded=function(){window.settings[this.id].set("panel-expanded-"+this.id,this._views.map(function(a){return a.is_unfolded}))};this._show_view=function(a,b){var c=window.views[a.view_id];if(c){b.addClass("unfolded");if(toolbars[c.id]){var d=b.render(["panel-toolbar","id","panel-toolbar-"+a.id,"ui-id",toolbars[c.id].id]);toolbars[c.id].addContainerId("panel-toolbar-"+a.id);this._toolbar.create_toolbar_content(c.id,d)}var e=b.render(["panel-container","id","panel-container-"+a.id,"ui-id",a.id]);c.addContainerId("panel-container-"+a.id);c.default_handler&&e.setAttribute("handler",c.default_handler);c.edit_handler&&e.setAttribute("edit-handler",c.edit_handler);e.className=c.container_class||"";e.setAttribute("data-menu",c.id||"");c.update();messages.post("show-view",{id:c.id});this._store_views_unfolded()}};this._hide_view=function(a,b){var c=window.views[a.view_id];if(c&&b){b.removeClass("unfolded");var d=b.getElementsByTagName("panel-container")[0];d&&d.parentNode&&d.parentNode.removeChild(d);c.removeContainerId("panel-container-"+a.id);if(toolbars[c.id]){var e=b.getElementsByTagName("panel-toolbar")[0];e&&e.parentNode.removeChild(e);toolbars[c.id].removeContainerId("panel-toolbar-"+a.id)}messages.post("hide-view",{id:c.id});this._store_views_unfolded()}};this.toggle_view=function(a,b){var c=b.get_attr("parent-node-chain","data-view-index");if(c&&this._divs){c=parseInt(c);var d=this._views[c];d.is_unfolded=!d.is_unfolded;d.is_unfolded?this._show_view(d,this._divs[c]):this._hide_view(d,this._divs[c])}}},SidePanelView=function(a,b,c,d){this.init(a,b,c,d)};SidePanelBaseView.prototype=ViewBase;SidePanelView.prototype=new SidePanelBaseView;var PanelContainer=function(a,b){this.view_id=a;this.is_unfolded=b;this.initBase()};PanelContainer.prototype=UIBase;window.eventHandlers.click["toggle-panel-view"]=function(a,b){var c=UIBase.getUIById(b.get_attr("parent-node-chain","ui-id")),d=window.views[c&&c.cell.tab.activeTab];d&&d.toggle_view(a,b)};(function(){this.side_panel=function(a){return a.map(this._side_panel_view,this)};this._side_panel_view=function(a,b){return["div",this._side_panel_header(a,b),"data-view-index",String(b)]};this._side_panel_header=function(a,b){return["header",["input","type","button"],window.views[a.view_id].name,"handler","toggle-panel-view"]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});cls.MonospaceFontView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.set_font_style=function(){};this.set_default_font_style=function(){};const d="font-style";var e=["test-line-height","test-char-width"];this._onfontselection=function(a,b){var c=b.getElementsByTagName("select"),d=window.settings.monospacefont;Array.prototype.forEach.call(c,function(a){d.set(a.name,a.value)});d.set("monospace-is-set",!0);this.set_font_style();window.ui_framework.set_default_properties(e);window.messages.post("monospace-font-changed")};this.set_font_style=function(){var a=window.settings.monospacefont;if(a.get("monospace-is-set")){var b=document.getElementById(d)||document.documentElement.render(["style","id",d]);b.textContent="";var c=a.get("monospace-font-face"),e=a.get("monospace-font-size"),f=a.get("monospace-line-height"),g="",h=window.ini.monospacefont;c!=h.font_face&&(g+='font-family: "'+c+'";');e!=h.font_size&&(g+="font-size: "+e+";");if(f=="auto"){var i=parseInt(e||h.font_size);f=Math.round(i*4/3)+"px"}f!=h.line_height&&(g+="line-height: "+f+";");g&&(b.textContent=".mono{"+g+"}")}};this.set_default_font_style=function(a,b){var c=document.getElementById(d);c&&c.parentNode.removeChild(c);var f=window.settings.monospacefont;for(key in cls.MonospaceFontView.preset_font)f.set(key,cls.MonospaceFontView.preset_font[key]);while(b&&b.nodeName.toLowerCase()!="setting-composite")b=b.parentNode;b&&b.re_render(window.templates.monospace_font_selection(f));window.ui_framework.set_default_properties(e);window.messages.post("monospace-font-changed")};this._init=function(){this.init(a,b,c);window.eventHandlers.change["font-selection"]=this._onfontselection.bind(this);window.eventHandlers.click["font-defualt-selection"]=this.set_default_font_style.bind(this)};this._init()};cls.MonospaceFontView.preset_font={"monospace-font-face":"","monospace-font-size":"11px","monospace-line-height":"auto","monospace-is-set":!1};cls.MonospaceFontView.create_ui_widgets=function(){new Settings("monospacefont",window.helpers.copy_object(cls.MonospaceFontView.preset_font),{},{checkboxes:[],customSettings:["font"]},{font:function(a){return window.templates.monospace_font_selection(a)}},"general")};(function(){this.monospace_font_selection=function(a){var b=["","use-lang-def"].concat(window.defaults["monospace-fonts"]);return["setting-composite",["table",this._font_selection(ui_strings.S_LABEL_FONT_SELECTION_FACE,b,"monospace-font-face",{"":ui_strings.S_LABEL_DEFAULT_SELECTION}),this._font_selection(ui_strings.S_LABEL_FONT_SELECTION_SIZE,["10px","11px","12px","13px","14px","15px","16px"],"monospace-font-size"),this._font_selection(ui_strings.S_LABEL_FONT_SELECTION_LINE_HEIGHT,["auto","14px","15px","16px","17px","18px","19px","20px"],"monospace-line-height"),"handler","font-selection"],["p",["span",["span",ui_strings.S_BUTTON_RESET_TO_DEFAULTS],"handler","font-defualt-selection","class","ui-button","tabindex","1"]]]};this._font_selection=function(a,b,c,d){var e=window.settings.monospacefont.get(c);return["tr",["td",["label",a+": "]],["td",["select",b.map(function(a){var b=["option",d&&d[a]||a,"value",a];e==a&&b.push("selected","selected");return b}),"name",c]]]}}).apply(window.templates||(window.templates={}));var PixelMagnifier=function(){this._init()};PixelMagnifier.prototype=new function(){this.set_canvas=function(a){};this.set_source_base_64=function(a,b){};this.zoom=function(a,b,c){};this.clear=function(){};this.get_average_color=function(a,b,c){};this.width;this.height;this.x;this.y;this.scale;this.max_scale=30;this.__defineSetter__("width",function(a){if(this._target_canvas){this._target_canvas.width=a;this._src_area.width=this.width;this._target_area.width=a;this._onsrcload()}});this.__defineGetter__("width",function(){return this._target_area.width});this.__defineSetter__("height",function(a){if(this._target_canvas){this._target_canvas.height=a;this._src_area.height=this.height;this._target_area.height=a;this._onsrcload()}});this.__defineGetter__("height",function(){return this._target_area.height});this.__defineSetter__("scale",function(a){this._scale=a});this.__defineGetter__("scale",function(){return this._scale});this.__defineSetter__("x",function(a){this._src_area.x=a;this._check_src_area_position()});this.__defineGetter__("x",function(){return this._src_area.x});this.__defineSetter__("y",function(a){this._src_area.y=a;this._check_src_area_position()});this.__defineGetter__("y",function(){return this._src_area.y});this._check_src_area_dimesions=function(){this._src_area.width>this._src_area.max_width&&(this._src_area.width=this._src_area.max_width);this._src_area.height>this._src_area.max_height&&(this._src_area.height=this._src_area.max_height)};this._check_src_area_position=function(){this._src_area.x<0&&(this._src_area.x=0);this._src_area.x+this._src_area.width>this._src_area.max_width&&(this._src_area.x=this._src_area.max_width-this._src_area.width);this._src_area.y<0&&(this._src_area.y=0);this._src_area.y+this._src_area.height>this._src_area.max_height&&(this._src_area.y=this._src_area.max_height-this._src_area.height)};this._onsrcload=function(a){if(this._src.src&&this._src.width&&this._src.height){if(this._src){this._src_area.max_width=this._src.width;this._src_area.max_height=this._src.height}this._src_area.width=Math.round(this.width/this._scale);this._src_area.height=Math.round(this.height/this._scale);this._check_src_area_dimesions();this._check_src_area_position();this._has_source=!0;a&&this.onload&&this.onload(a)}};this._init=function(){this._target_canvas=null;this._ctx_target=null;this._src_canvas=document.createElement("canvas");this._ctx_src=this._src_canvas.getContext("2d");this._src=document.createElement("img");this._src.onload=this._onsrcload.bind(this);this._src_area={x:0,y:0,width:0,height:0,max_width:0,max_height:0};this._target_area={x:0,y:0,width:0,height:0,max_width:0,max_height:0};this._scale=1;this._has_source=!1};this.set_canvas=function(a){this._target_canvas=a;this._ctx_target=this._target_canvas.getContext("2d")};this.set_source_base_64=function(a,b){this._src.src="data:"+b+";base64,"+a};this.zoom=function(a,b,c){c<1?c=1:c>this.max_scale&&(c=30);this._src_area.width=Math.round(this._target_area.width/c);this._src_area.height=Math.round(this._target_area.height/c);this._check_src_area_dimesions();this._src_area.x=Math.round(this._src_area.x+(a/this._scale-a/c));this._src_area.y=Math.round(this._src_area.y+(b/this._scale-b/c));this._check_src_area_position();this._src_canvas.width=this._src_area.width;this._src_canvas.height=this._src_area.height;this._scale=c};this.draw=function(){if(!!this._target_canvas&&!!this._has_source){this._ctx_target.clearRect(0,0,this._target_area.width,this._target_area.height);if(this._scale>10){this._ctx_src.drawImage(this._src,this._src_area.x,this._src_area.y,this._src_area.width,this._src_area.height,0,0,this._src_area.width,this._src_area.height);var a=this._src_area.width*this._src_area.height,b=this._ctx_src.getImageData(0,0,this._src_area.width,this._src_area.height).data;if(b)for(var c=0,d=0,e=0;d<a;d++){e=4*d;this._ctx_target.fillStyle="rgb("+b[e+0]+","+b[e+1]+","+b[e+2]+")";c=d%this._src_area.width;this._ctx_target.fillRect(c*this._scale,(d-c)/this._src_area.width*this._scale,this._scale,this._scale)}}else if(this._scale>1){this._ctx_src.drawImage(this._src,this._src_area.x,this._src_area.y,this._src_area.width,this._src_area.height,0,0,this._src_area.width,this._src_area.height);var f=this._ctx_src.getImageData(0,0,this._src_area.width,this._src_area.height).data,g=this._ctx_target.createImageData(this._src_area.width*this._scale,this._src_area.height*this._scale),h=g.data,i=f.length,j=this._src_area.width*4,k=d;for(var d=0,k=0,l,m,n,o,p,q,r;d<i;d+=4,k+=4*this._scale){l=f[d];m=f[d+1];n=f[d+2];o=f[d+3];d&&d%j==0&&(k+=(this._scale-1)*this._scale*j);for(p=0;p<this._scale;p++)for(q=0;q<this._scale;q++){r=p*this._scale*j+4*q+k;h[r]=l;h[r+1]=m;h[r+2]=n;h[r+3]=o}}this._ctx_target.putImageData(g,0,0)}else this._scale==1&&this._ctx_target.drawImage(this._src,this._src_area.x,this._src_area.y,this._src_area.width,this._src_area.height,0,0,this._src_area.width,this._src_area.height)}};this._get_image_data_of_area=function(a,b,c){a-=a%this._scale;b-=b%this._scale;a/=this._scale;b/=this._scale;a-=(c-1)/2;b-=(c-1)/2;var d=this._scale==1?this._ctx_target:this._ctx_src;return d.getImageData(a,b,c,c)};this.get_colors_of_area=function(a,b,c){var d=this._get_image_data_of_area(a,b,c),e=[],f=[];Array.prototype.forEach.call(d.data,function(a,b){if(!((b+1)%4)){f.push(e);e=[]}else e.push(a)});return f};this.get_average_color=function(a,b,c){var d=this._get_image_data_of_area(a,b,c);return Array.prototype.reduce.call(d.data,function(a,b,c){a[c%4]+=b;return a},[0,0,0,0]).map(function(a){return Math.round(a/(c*c))}).slice(0,3)}};if(window.app)throw"window.app does already exist";window.app={};window.app.MIN_SUPPORTED_CORE_VERSION=167;window.cls.MessageMixin.apply(window.app);window.app.profiles={};window.app.profiles.DEFAULT=1;window.app.profiles.PROFILER=2;window.app.profiles.HTTP_PROFILER=3;window.app.profiles[window.app.profiles.DEFAULT]=["window-manager","console-logger","exec","ecmascript-debugger","cookie-manager","resource-manager","document-manager"];window.app.profiles[window.app.profiles.DEFAULT].is_enabled=!1;window.app.profiles[window.app.profiles.PROFILER]=["window-manager","exec","profiler","overlay"];window.app.profiles[window.app.profiles.PROFILER].is_enabled=!1;window.app.profiles[window.app.profiles.HTTP_PROFILER]=["window-manager","resource-manager","document-manager","exec"];window.app.profiles[window.app.profiles.HTTP_PROFILER].is_enabled=!1;window.app.build_application=function(a,b){var c={messages:window.messages},d=function(a,b){var c=a.split(".").map(Number),d=null,e,f;for(e in b){f=e.split(".").map(Number);if(f[0]!=c[0])continue;if(!d||f[1]>d[1][1]&&f[1]<=c[1])d=[e,f]}return d&&d[0]},e=function(a,b){var c=b.coreVersion,d=c&&parseInt(c.split(".")[2]);d>=window.app.MIN_SUPPORTED_CORE_VERSION?(new window.cls.ScopeInterfaceGenerator).get_interface(a,function(b){window.message_maps=b;window.cls.ServiceBase.populate_map(b);f(a,b)},function(a){opera.postError(a.message)},Boolean(window.ini.debug)):window.client.handle_fallback("ci-168")},f=function(b,e){var f="",g=null,h="",i=/(^\d+\.\d+)(?:\.\d+)?$/,j=null,k=0,l=null,m=null;window.messages.clear_session_listeners();var n={messages:c.messages,helpers:c.helpers,tag_manager:c.tag_manager,show_dragonfly_window:c.show_dragonfly_window,services:c.services};for(f in b){g=b[f];j=i.exec(g.version);j=j&&j[1]||"0";h=window.app.helpers.dash_to_class_name(f);if(f!="scope"&&window.services[f]&&window.services[f].create_and_expose_interface(j,e[f])){var o=d(j,window.app.builders[h]),l=window.app.builders[h]&&window.app.builders[h][o];if(l){var p=l(g,b,n);window.services[f].is_implemented=p}}}window.app.post("services-created",{service_description:b});window.app.on_services_created&&window.app.on_services_created(b);a&&a(b);window.services.scope.enable_profile(window.settings.general.get("profile-mode")||window.app.profiles.DEFAULT)},g=function(a){var b=function(){this.name=a;this.is_implemented=!1};b.prototype=new cls.ServiceBase;b.prototype.constructor=b;window.services.add(new b)},h=function(){if(settings.general.get("track-usage")&&!location.port){var a="/app/user-count",b=new cls.UserTracker(a),c=function(a,b){a!=200&&!cls.ScopeHTTPInterface.is_enabled&&opera.postError("Usertracker could not send heartbeat to tracker server at "+b+". Got status "+a)};b.call_home(c)}};new cls.ServiceBase;new ActionBroker;window.messages.addListener("application-setup",h,!0);window.tagManager=window.tag_manager=c.tag_manager=new window.cls.TagManager;window.helpers=c.helpers=new cls.Helpers;c.services=new cls.Namespace("services");cls.ServiceBase.register_services(c.services);["scope","console-logger","exec","window-manager","ecmascript-debugger","cookie-manager","resource-manager","document-manager","profiler","overlay"].forEach(g);var i=this.helpers.parse_url_arguments();i.debug&&cls.debug.create_debug_environment(i);c.show_dragonfly_window=Boolean(i.showdfl);var j=cls.Scope&&cls.Scope["1.1"];j.Service.apply(window.services.scope.constructor.prototype);window.services.scope.is_implemented=!0;window.services.scope.set_host_info_callback(e);window.services.scope.set_services_enabled_callback(b);cls.GeneralView.prototype=ViewBase;new cls.GeneralView("general",ui_strings.M_SETTING_LABEL_GENERAL,"");cls.GeneralView.create_ui_widgets();cls.MonospaceFontView.prototype=ViewBase;var k=new cls.MonospaceFontView("monospacefont",ui_strings.M_VIEW_LABEL_MONOSPACE_FONT);cls.MonospaceFontView.create_ui_widgets();k.set_font_style();cls.DebugRemoteSettingView.prototype=ViewBase;new cls.DebugRemoteSettingView("debug_remote_setting",ui_strings.S_SWITCH_REMOTE_DEBUG,"");cls.DebugRemoteSettingView.create_ui_widgets();new cls.PoTestView("test-po-file","Test PO file","scroll");var l=function(a,b){this.init(a,b)};l.prototype=ViewBase;new l(ActionBroker.GLOBAL_HANDLER_ID,ui_strings.S_GLOBAL_KEYBOARD_SHORTCUTS_SECTION_TITLE);cls.ShortcutConfigView.prototype=ViewBase;new cls.ShortcutConfigView("shortcut-config",ui_strings.S_KEYBOARD_SHORTCUTS_CONFIGURATION,"");cls.ShortcutConfigView.create_ui_widgets();cls.ModebarView.prototype=ViewBase;new cls.ModebarView("modebar",ui_strings.S_TOGGLE_DOM_MODEBAR_HEADER,"");if(!window.services.scope)throw"scope service couldn't be created, application creation aborted";window.ui_framework.setup();window.client=new cls.Client;client.setup();messages.post("application-setup")};window.app.builders={};window.app.helpers={};window.app.helpers.parse_url_arguments=function(){var a=location.search.slice(1).split(/[;&]/),b={};for(var c=0,d;d=a[c];c++){d=d.split("=");b[d[0].trim()]=d[1]&&d[1].trim()||!0}return b};window.app.helpers.dash_to_class_name=function(a){for(var b="",c=0,d="",e=!0;b=a[c];c++){if(b=="-"){e=!0;continue}d+=e&&b.toUpperCase()||b;e=!1}return d};window.onload=function(){window.clearTimeout(window.load_screen_timeout);new OperaDBLclickMenuController;window.app.build_application()};window.app.builders.WindowManager||(window.app.builders.WindowManager={});window.app.builders.WindowManager["2.0"]=function(a,b,c){var d=cls.WindowManager&&cls.WindowManager["2.0"],e=window.services["window-manager"];if(e){window.window_manager_data=new d.WindowManagerData(c);window.window_manager_data.bind(e);window.windowsDropDown=new d.WindowsDropDown;d.DebuggerMenu.prototype=new CstSelectWithAction;new d.DebuggerMenu("debugger-menu","debugger-menu");return!0}};window.app.builders.ConsoleLogger||(window.app.builders.ConsoleLogger={});window.app.builders.ConsoleLogger["2.0"]=function(a){var b=cls.ConsoleLogger&&cls.ConsoleLogger["2.0"];b&&(window.error_console_data=new b.ErrorConsoleData);var c=cls.ConsoleLogger;if(c){new c.ConsoleView("console",ui_strings.S_SETTINGS_HEADER_CONSOLE,"scroll");c.ConsoleView.create_ui_widgets();ErrorConsoleView.roughViews.createViews();return!0}};window.app.builders.ConsoleLogger["2.1"]=function(a){var b=cls.ConsoleLogger&&cls.ConsoleLogger["2.1"];b&&(window.error_console_data=new b.ErrorConsoleData);var c=cls.ConsoleLogger;if(c){new c.ConsoleView("console",ui_strings.S_SETTINGS_HEADER_CONSOLE,"scroll");c.ConsoleView.create_ui_widgets();ErrorConsoleView.roughViews.createViews();return!0}};window.app.builders.Exec||(window.app.builders.Exec={});window.app.builders.Exec["2.0"]=function(a){var b=cls.Exec&&cls.Exec["2.0"];new cls.ScreenShotControlsView("screenshot-controls",ui_strings.M_VIEW_LABEL_COLOR_PICKER,"screenshot-controls scroll");new cls.ColorPaletteView("color-palette",ui_strings.M_VIEW_LABEL_COLOR_PALETTE,"color-palette scroll");return!0};window.app.builders.EcmascriptDebugger||(window.app.builders.EcmascriptDebugger={});window.app.builders.EcmascriptDebugger["6.0"]=function(a){var b=cls.EcmascriptDebugger&&cls.EcmascriptDebugger["6.0"],c=window.services["ecmascript-debugger"];const d=0,e=1,f=2;if(c){cls.InspectableJSObject=b.InspectableJSObject;cls.JSInspectionTooltip.register();cls.EventListenerTooltip.register();cls.InspectableJSObject.create_filters();window.runtimes=new b.Runtimes("6.0");window.runtimes.bind(c);window.dom_data=new b.DOMData("dom");window.dom_data.bind(c);window.stop_at=new b.StopAt;window.stop_at.bind(c);window.host_tabs=new b.HostTabs;window.host_tabs.bind(c);window.hostspotlighter=new b.Hostspotlighter;window.hostspotlighter.bind(c);var g=new b.InspectionBaseView;b.InspectionView.prototype=g;new b.InspectionView("inspection",ui_strings.M_VIEW_LABEL_FRAME_INSPECTION,"scroll mono");b.InspectionView.create_ui_widgets();b.DOMAttrsView.prototype=g;new b.DOMAttrsView("dom_attrs",ui_strings.M_VIEW_LABEL_DOM_ATTR,"scroll dom-attrs mono");b.DOMAttrsView.create_ui_widgets();window.runtime_onload_handler=new b.RuntimeOnloadHandler;new cls.CommandLineRuntimeSelect("cmd-runtime-select","cmd-line-runtimes");cls.ReplView.create_ui_widgets();new cls.ReplView("command_line",ui_strings.M_VIEW_LABEL_COMMAND_LINE,"scroll console mono","","repl-focus");window.simple_js_parser=new window.cls.SimpleJSParser;new cls.JsSourceView("js_source",ui_strings.M_VIEW_LABEL_SOURCE,"scroll js-source mono");new cls.ScriptSelect("js-script-select","script-options");cls.JsSourceView.create_ui_widgets();cls.WatchesView.prototype=ViewBase;new cls.WatchesView("watches",ui_strings.M_VIEW_LABEL_WATCHES,"scroll mono");var h=c.satisfies_version(6,10)?["watches","return-values","callstack","inspection"]:["watches","callstack","inspection"];new cls.JSSidePanelView("scripts-side-panel",ui_strings.M_VIEW_LABEL_RUNTIME_STATE,h,[!1,!0,!0,!0]);cls.ReturnValuesView.prototype=ViewBase;new cls.ReturnValuesView("return-values",ui_strings.M_VIEW_LABEL_RETURN_VALUES,"scroll mono");cls.ReturnValuesView.create_ui_widgets();cls.CallstackView.prototype=ViewBase;new cls.CallstackView("callstack",ui_strings.M_VIEW_LABEL_CALLSTACK,"scroll mono");cls.ThreadsView.prototype=ViewBase;new cls.ThreadsView("threads",ui_strings.M_VIEW_LABEL_THREAD_LOG,"scroll threads");cls.InspectableDOMNode=b.InspectableDOMNode;new cls.DOMInspectorActions("dom");cls.DOMView.prototype=ViewBase;new cls.DOMView("dom",ui_strings.M_VIEW_LABEL_DOM,"scroll dom mono");cls.DOMView.prototype.constructor=cls.DOMView;cls.DocumentSelect.prototype=new CstSelect;new cls.DocumentSelect("document-select","document-options");cls.DOMView.create_ui_widgets();cls.DOMSearchView.prototype=ViewBase;new cls.DOMSearchView("dom-search",ui_strings.M_VIEW_LABEL_SEARCH);window.stylesheets=new cls.Stylesheets;window.element_style=new cls.ElementStyle;cls.CssStyleDeclarations=cls.EcmascriptDebugger["6.7"].CssStyleDeclarations;cls.CSSInspectorView.prototype=ViewBase;new cls.CSSInspectorView("css-inspector",ui_strings.M_VIEW_LABEL_STYLES,"scroll css-inspector mono");new cls.CSSInspectorView.create_ui_widgets;cls.CSSInspectorCompStyleView.prototype=ViewBase;new cls.CSSInspectorCompStyleView("css-comp-style",ui_strings.M_VIEW_LABEL_COMPUTED_STYLE,"scroll css-inspector mono");cls.NewStyle.prototype=ViewBase;new cls.NewStyle("new-style",ui_strings.M_VIEW_LABEL_NEW_STYLE,"scroll css-new-style mono");new cls.ColorPickerView("color-selector","Color Picker","color-selector");new cls.CSSInspectorActions("css-inspector");new cls.DOMSidePanelView("dom-side-panel",ui_strings.M_VIEW_LABEL_STYLES,["css-comp-style","css-inspector","new-style"],[!1,!0,!1]);cls.DOMSidePanelView.create_ui_widgets();window.element_layout=new cls.ElementLayout;cls.CSSLayoutView.prototype=ViewBase;new cls.CSSLayoutView("css-layout",ui_strings.M_VIEW_LABEL_LAYOUT,"scroll css-layout");new cls.JSSidePanelView("breakpoints-side-panel",ui_strings.M_VIEW_LABEL_BREAKPOINTS,["breakpoints","event-breakpoints"],[!0,!1]);window.event_breakpoints=cls.EventBreakpoints.get_instance();cls.EventBreakpointsView.prototype=ViewBase;new cls.EventBreakpointsView("event-breakpoints",ui_strings.M_VIEW_LABEL_EVENT_BREAKPOINTS,"scroll event-breakpoints");cls.EventBreakpointsView.create_ui_widgets();cls.BreakpointsView.prototype=ViewBase;new cls.BreakpointsView("breakpoints",ui_strings.M_VIEW_LABEL_BREAKPOINTS,"scroll breakpoints mono");cls.BreakpointsView.create_ui_widgets();cls.JSSearchView.prototype=ViewBase;new cls.JSSearchView("js-search",ui_strings.M_VIEW_LABEL_SEARCH,"scroll js-search");if(c.satisfies_version(6,11)){new cls.SelectedNodeListenersView("ev-listeners-selected-node",ui_strings.M_VIEW_LABEL_EVENT_LISTENERS_SELECTED_NODE,"ev-listeners-selected-node scroll");new cls.EventListenersView("ev-listeners-all",ui_strings.M_VIEW_LABEL_EVENT_LISTENERS_ALL,"ev-listeners-all scroll");new cls.EventListenerSidePanelView("ev-listeners-side-panel",ui_strings.M_VIEW_LABEL_EVENT_LISTENERS,["ev-listeners-selected-node","ev-listeners-all"],[!0,!0]);cls.EventListenerSidePanelView.create_ui_widgets()}var i=new b.StorageDataBase;cls.CookiesData.prototype=i;cls.LocalStorageData.prototype=i;new cls.Namespace("storages");window.storages.add(new cls.LocalStorageData("local_storage","local-storage",ui_strings.M_VIEW_LABEL_LOCAL_STORAGE,"localStorage"));window.storages.add(new cls.LocalStorageData("session_storage","session-storage",ui_strings.M_VIEW_LABEL_SESSION_STORAGE,"sessionStorage"));window.storages.add(new cls.LocalStorageData("widget_preferences","widget-preferences",ui_strings.M_VIEW_LABEL_WIDGET_PREFERNCES,"widget.preferences"));window.storages.add(new cls.CookiesData("cookies","cookies",ui_strings.M_VIEW_LABEL_COOKIES));new cls.StorageView("local_storage",ui_strings.M_VIEW_LABEL_LOCAL_STORAGE,"scroll storage_view local_storage","local_storage");new cls.StorageViewActions("local_storage");new cls.StorageView("session_storage",ui_strings.M_VIEW_LABEL_SESSION_STORAGE,"scroll storage_view session_storage","session_storage");new cls.StorageViewActions("session_storage");new cls.StorageView("cookies",ui_strings.M_VIEW_LABEL_COOKIES,"scroll storage_view cookies","cookies");new cls.StorageViewActions("cookies");new cls.StorageView("widget_preferences",ui_strings.M_VIEW_LABEL_WIDGET_PREFERNCES,"scroll storage_view widget_preferences","widget_preferences");new cls.StorageViewActions("widget_preferences");cls.EnvironmentView.prototype=ViewBase;new cls.EnvironmentView("environment",ui_strings.M_VIEW_LABEL_ENVIRONMENT,"scroll");cls.EnvironmentView.create_ui_widgets();cls.AboutView.prototype=ViewBase;new cls.AboutView("about",ui_strings.S_SETTINGS_HEADER_ABOUT,"scroll");cls.AboutView.create_ui_widgets();cls.HostSpotlightView.prototype=ViewBase;new cls.HostSpotlightView("host-spotlight",ui_strings.S_LABEL_SPOTLIGHT_TITLE);cls.HostSpotlightView.create_ui_widgets();cls.MainView.create_ui_widgets();return!0}};window.app.builders.CookieManager||(window.app.builders.CookieManager={});window.app.builders.CookieManager["1.1"]=function(a){var b=window.services["cookie-manager"];if(b){new cls.CookieManager["1.1"].CookieManagerView("cookie_manager",ui_strings.M_VIEW_LABEL_COOKIES,"scroll storage_view cookie_manager",cls.CookieManager["1.1"].CookieManagerData);cls.CookieManager.create_ui_widgets();return!0}};window.app.builders.ResourceManager=window.app.builders.ResourceManager||{};window.app.builders.ResourceManager["1.0"]=function(a){var b=new cls.NetworkLogger;new cls.ResourceTreeView("resource_tree_view","Tree View");new cls.ResourceDetailView("resource_detail_view","Detail");cls.ResourceDetailView.create_ui_widgets();new cls.NetworkLogView("network_logger",ui_strings.M_VIEW_LABEL_NETWORK_LOG,"scroll network_logger",null,"network-logger",b);new cls.RequestCraftingView("request_crafter",ui_strings.M_VIEW_LABEL_REQUEST_CRAFTER,"scroll","","",b);new cls.NetworkOptionsView("network_options",ui_strings.M_VIEW_LABEL_NETWORK_OPTIONS,"scroll network-options-container","","");cls.NetworkLog.create_ui_widgets();return!0};window.app.builders.Profiler||(window.app.builders.Profiler={});window.app.builders.Profiler["1.0"]=function(a){var b=cls.Profiler&&cls.Profiler["1.0"];new ProfilerView("profiler_all",ui_strings.M_VIEW_LABEL_PROFILER,"scroll","","");ProfilerView.create_ui_widgets();return!0};window.app.builders.DocumentManager||(window.app.builders.DocumentManager={});window.app.builders.DocumentManager["1.0"]=function(a){var b=cls.DocumentManager&&cls.DocumentManager["1.0"];if(b)return!0};window.cls||(window.cls={});cls.debug||(cls.debug={});cls.debug.Debug=function(a,b,c){this.createView=function(a){};this.ondestroy=function(){};this.log_message=function(a,b,c,d,e){};this.log_transmit=function(a,b,c,d){};this.get_log_filter=function(){};this.set_log_filter=function(a,b,c,d){};this.clear_log=function(){};this.show_configuration=function(a,b){};this.set_unfold=function(a,b){};const d=0,e=1,f=2,g=3,h=2,i=3,j="  ";var k=this;this._times={};this._status_map=cls.ServiceBase.get_status_map();this._event_map=cls.ServiceBase.get_event_map();this.show_in_views_menu=!0;this._log_entries=[];this._textarea=null;this._event_map=cls.ServiceBase.get_event_map();this._unfolded={};this._main_template=function(){return[this._template_message_filter(),["textarea","class","debug-textarea"]]};this._template_checkbox_message=function(a,b){var c=a!="all"&&this.all;return["li",["label",["input","type","checkbox","data-filter-target",a,"handler","config-filter-msg"].concat(c?["disabled","disabled"]:[]).concat(this[a]?["checked","checked"]:[])," "+(b&&typeof b=="string"?b:a)]].concat(c?["class","disabled"]:[])};this._template_messages=function(a,b,c,d,e){return[["h3",b],["ul",d.map(this._template_checkbox_message,e),"data-filter-type",c,"data-service-name",a]]};this._template_service_config=function(a){var b=["div"],c=this._event_map[a],d=c.filter(this._filter_command),e=window.debug.get_log_filter()[a];d.length&&b.push(this._template_messages(a,"Commands","commands",["all"].concat(d.map(this._get_message_class)),e.commands));d=c.filter(this._filter_event);d.length&&b.push(this._template_messages(a,"Events","events",["all"].concat(d.map(this._get_message_class)),e.events));return b};this._template_service=function(a){var b=this.view._unfolded[a];return["li",["header",["input","type","button","class",b?"unfolded":""],window.helpers.service_class_name(a),"data-service-name",a].concat(this
.filter.all?[]:["handler","toggle-filter-messages"]),b?this.view._template_service_config(a):[]].concat(b?["class","open"]:[])};this._template_message_filter=function(){var a=[],b=null,c=window.debug.get_log_filter().all.all;for(b in window.services)window.services[b].is_implemented&&a.push(b);return["div",["h2","Services"],["ul",this._template_checkbox_message.call(c,"all","log all messages"),"data-filter-type","all","data-service-name","all"],["ul",a.map(this._template_service,{view:this,filter:c})].concat(c.all?["class","disabled"]:[]),"class","padding message-filter"]};this._get_log_text=function(a){return a[i]};this._filter_log=function(a){return this.all.all.all||this[a[d]][a[h]].all||this[a[d]][a[h]][a[e]]};this._get_indent=function(a){var b="";while(a&&a-->0)b+=j;return b};this._display_log=function(a){a&&this._log_entries.push(a);if(this._textarea&&this._textarea.selectionStart==this._textarea.selectionEnd){this._textarea.value=this._log_entries.filter(this._filter_log,this._filter).map(this._get_log_text).join("\n");this._textarea.scrollTop=this._textarea.scrollHeight}};this._create_filter=function(){this._filter={all:{all:{all:!0}}};var a="";for(a in window.services)window.services[a].hasOwnProperty("is_implemented")&&(this._filter[a]={commands:{all:!1},events:{all:!1}})};this._filter_command=function(a){return/^handle/.test(a)};this._filter_event=function(a,b){return/^on/.test(a)};this._get_message_class=function(a){return a.replace(/^handle/,"").replace(/^on/,"On")};this.createView=function(a){this._textarea=a.clearAndRender(this._main_template()).querySelector("textarea");this._display_log()};this.ondestroy=function(){this._textarea=null};this.log_message=function(a,b,c,d,e){var h=this._event_map[a][c].replace(/^handle/,"").replace(/^on/,"On"),i=/^On/.test(h),k=d==0?window.message_maps[a]&&window.message_maps[a][c]&&window.message_maps[a][c][i&&g||f]||null:window.package_map["com.opera.stp"].Error,l=this._times[a+c+e]||0,m=l?(new Date).getTime()-l:0,n="\nreceive"+(m?", delta: "+m:"")+":\n"+j+"service: "+a+"\n"+j+(i&&"event: "||"command: ")+h+"\n"+j+"status: "+d+"\n"+j+"tag: "+e+"\n"+j+"payload:\n"+(k&&window.settings.debug.get("pretty-print-messages")?this._pretty_print_payload(b,k,2):JSON.stringify(b));this._display_log([a,h,i&&"events"||"commands",n])};this.log_transmit=function(a,b,c,d){var f=this._event_map[a][c].replace(/^handle/,"").replace(/^on/,"On"),g=window.message_maps[a]&&window.message_maps[a][c]&&window.message_maps[a][c][e]||null,h="\ntransmit:\n"+j+"service: "+a+"\n"+j+"command: "+f+"\n"+j+"tag: "+d+"\n"+j+"payload:\n"+(g?this._pretty_print_payload(b,g,2):JSON.stringify(b));this._display_log([a,f,"commands",h]);this._times[a+c+d]=(new Date).getTime()};this.get_log_filter=function(){return this._filter};this.set_log_filter=function(a,b,c,d){this._filter[a][b][c]=d;this._display_log()};this.clear_log=function(){this._log_entries=[];this._times={};this.update()};this.show_configuration=function(a,b){a.render(this._template_service_config(b))};this.set_unfold=function(a,b){this._unfolded[a]=b};eventHandlers.click["toggle-filter-messages"]=function(a,b){var c=a.target.parentNode,d=window.views.debug,e=a.target.getAttribute("data-service-name"),f=c.getElementsByTagName("div")[0],g=a.target.getElementsByTagName("input")[0];d.set_unfold(e,!f);if(f){c.removeChild(f);c.removeClass("open");g.removeClass("unfolded")}else{d.show_configuration(c,e);c.addClass("open");g.addClass("unfolded")}};eventHandlers.change["config-filter-msg"]=function(a,b){var c=a.target.parentNode.parentNode.parentNode,d=a.target.getAttribute("data-filter-target"),e=c.getAttribute("data-filter-type"),f=c.getAttribute("data-service-name");window.debug.set_log_filter(f,e,d,a.target.checked);if(d=="all")if(f=="all")window.views.debug.update();else{c=c.parentNode.parentNode;var g=c.getElementsByTagName("div")[0];c.removeChild(g);window.views.debug.show_configuration(c,f)}};this._create_filter();this.init(a,b,c)};window.cls||(window.cls={});cls.PoTestView=function(a,b,c){this._podata=null;this._file=null;this.createView=function(a){a.clearAndRender(templates.po_main(this._podata))};this._on_selected_po_bound=function(a,b){this._file=b.files[0];this._load_current_file()}.bind(this);this._load_current_file=function(){var a=new FileReader;a.onload=this._on_loaded_po_bound;a.onerror=function(){opera.postError("Error reloading current file")};a.readAsText(this._file)};this._on_loaded_po_bound=function(a){data=potools.parse(a.target.result,"dragonfly");this._podata=data;this._update_uistrings()}.bind(this);this._on_clicked_reload_po_bound=function(){this._load_current_file()}.bind(this);this._on_clicked_select_po_bound=function(){this._podata=null;this._file=null;this.update()}.bind(this);this._update_uistrings=function(){var a=[];for(var b=0,c;c=this._podata[b];b++)c.msgctxt in window.ui_strings?window.ui_strings[c.msgctxt]=c.msgstr:a.push(c);client.setup()};var d=window.eventHandlers;d.change["po-file-selected"]=this._on_selected_po_bound;d.click["reload-po-data"]=this._on_clicked_reload_po_bound;d.click["select-other-po"]=this._on_clicked_select_po_bound;this.init(a,b,c)};cls.PoTestView.prototype=ViewBase;window.templates=window.templates||{};window.templates.po_main=function(a){if(a){var b=potools.malformed_interpolation_markers(a),c=potools.missing_interpolation_markers(a),d=[];b.length&&d.push(["p","Some translated strings contain bad interpolation markers! Missing s at the end: "+b.map(function(a){return a.msgctxt}).join(", ")]);c.length&&d.push(["p","Some translated strings interpolation markers do not match the English version: "+c.map(function(a){return a.msgctxt}).join(", ")]);return["div",[["p","Loaded a PO file with "+a.length+" entries."],["button","Reload PO file","handler","reload-po-data"],["button","Load another PO file","handler","select-other-po"],d,"class","padding"]]}return["div",[["label","Select a po file to load: "],["input","Paste the contents of a po file","type","file","handler","po-file-selected"],"class","padding"]]};window.cls||(window.cls={});cls.debug||(cls.debug={});cls.debug.TestScopeMessages=function(a,b,c){this.createView=function(a){};var d=this;this.show_in_views_menu=!0;this._template_debug_context=function(a){return["li",a?["pre","window id: "+a.window_id+"\n"+"title: "+a.title+"\n"+"window type: "+a.window_type+"\n"+"opener id: "+a.opener_id]:[]]};this._template_runtime=function(a){var b=window.runtimes.getRuntime(a);return["li",b?["pre","runtimeID: "+b.runtime_id+"\n"+"htmlFramePath: "+b.html_frame_path+"\n"+"windowID: "+b.window_id+"\n"+"objectID: "+b.object_id+"\n"+"uri: "+b.uri]:[]]};this._main_template=function(){var a=[],b=null,c=window.window_manager_data.get_debug_context(),d=window.window_manager_data.get_window(c),e=window.runtimes.getRuntimeIdsFromWindow(c);for(b in window.services)window.services[b].is_implemented&&a.push(window.helpers.service_class_name(b));return["div",["div",["div",["h2","Debug Context"],["ul",d?this._template_debug_context(d):[],"id","test-messages-debug-context"]],["div",["h2","Runtime List"],["ul",e&&e.length?e.map(this._template_runtime):[],"id","test-messages-runtime-list"]],"class","column"],["div",["div",["h2","Service List"],["ul",a.map(function(a){return["li",a]}),"id","service-list"],"id","services"],["div",["h2","Command List"],["ul","id","command-list"],"id","command-list-container"],["div",["h2","Event List"],["ul","id","event-list"],"id","event-list-container"],"class","column"],["div",["div","id","message-container"],"class","column"],"class","padding","handler","test-messages"]};this.createView=function(a){a.clearAndRender(this._main_template());this.rebuild_last_state()};this._on_active_tab=function(a){var b=document.getElementById("test-messages-debug-context");if(b){var c=window.window_manager_data.get_debug_context(),d=window.window_manager_data.get_window(c),e=window.runtimes.getRuntimeIdsFromWindow(c);b.clearAndRender(this._template_debug_context(d));document.getElementById("test-messages-runtime-list").clearAndRender(e.map(this._template_runtime))}};this._on_active_tab_bound=function(a){return function(b){a._on_active_tab(b)}}(this);messages.addListener("active-tab",this._on_active_tab_bound);this.init(a,b,c)};window.cls||(window.cls={});cls.debug||(cls.debug={});cls.debug.wrap_transmit=function(){opera._debug_wrap_scopeTransmit=opera.scopeTransmit;opera.scopeTransmit=function(a,b,c,d){window.debug.log_transmit(a,b,c,d);opera._debug_wrap_scopeTransmit(a,b,c,d)};cls.debug.wrap_transmit=function(){}};cls.debug.create_debug_environment=function(a){window.ini.debug=!0;window.cls.TestFramework.prototype=ViewBase;cls.debug.Debug.prototype=window.cls.debug.TestScopeMessages.prototype=new window.cls.TestFramework;window.debug=new cls.debug.Debug("debug","Debug","scroll debug-container filter-container");var b=new cls.debug.TestScopeMessages("test-messages","Test Messages","scroll test-messages");eventHandlers.click["test-messages"]=b.get_bound_click_handler();eventHandlers.change["test-messages"]=b.get_bound_change_handler();new CompositeView("debug_new","Debug",{dir:"h",width:700,height:700,children:[{tabs:["debug","test-messages"]}]});new Settings("debug",{"show-as-tab":!0,"pretty-print-messages":!0},{"show-as-tab":"Show view in a tab","pretty-print-messages":"Pretty print the scope messages"},{checkboxes:[]});new ToolbarConfig("debug",[{handler:"debug-clear-log",title:"Clear debug log",text:"Clear"},{handler:"reload-dragonfly",title:"Reload Dragonfly",text:"Reload"},{handler:"find-strings",title:"Find untranslated strings",text:"Find untranslated"}]);new Switches("debug",["pretty-print-messages"]);eventHandlers.click["find-strings"]=function(a,b){for(var c in window.ui_strings)window.ui_strings[c]="# "+c+" #";client.setup()};eventHandlers.click["reload-dragonfly"]=function(a,b){window.location.reload()};eventHandlers.click["debug-clear-log"]=function(a,b){window.debug.clear_log()};window.cookies=new function(){this.set=function(a,b,c){document.cookie=a+"="+encodeURIComponent(b)+"; expires="+(new Date((new Date).getTime()+(c||31104e6))).toGMTString()+"; path=/";return b};this.get=function(a){var b=(new RegExp(a+"=([^;]*)")).exec(document.cookie);return b&&decodeURIComponent(b[1])}}};window.cls||(window.cls={});cls.ShortcutConfigView=function(a,b,c){this.init(a,b,c);const d="global",e=-1,f=1;this.id=a;this._broker=ActionBroker.get_instance();this._broker.register_handler(this);this._handlers={};this.get_action_list=function(){var a=[],b="";for(b in this._handlers)a.push(b);return a};this.focus=function(a,b){};this.blur=function(a){};this.onclick=function(a){};this.handle=function(a,b,c){if(a in this._handlers)return this._handlers[a](b,c)};this._handlers["expand-section"]=function(a,b){var c=b.parentNode,d=c.getAttribute("handler-id"),e=c.getElementsByTagName("table")[0],f=b.getElementsByTagName("input")[0];if(e){c.removeChild(e);f.removeClass("unfolded")}else{c.render(window.templates.scc_shortcuts_table(d));f.addClass("unfolded")}}.bind(this);this._handlers["save-shortcuts"]=function(a,b){var c={},d=null,e=null,f=null,g=null,h="",i=[],j=a.target.has_attr("parent-node-chain","handler-id"),k=j&&j.getAttribute("handler-id"),l=j&&j.getElementsByTagName("tr"),m=null,n=0,o=j&&j.hasClass("is-search"),p=o?{}:null,q=null;if(l)for(;m=l[n];n++){e=m.getAttribute("data-mode");if(e){c[e]=d={};p&&(q=p[e]={})}if(d&&(f=m.getElementsByTagName("select")[0])){g=m.getElementsByTagName("input")[0];h=g&&g.value.trim()||"";if(h){d[h]=f.value;KeyIdentifier.validate_shortcut(h)||i.push(h);if(q&&!m.hasClass("scc-no-match")){q[h]=f.value;q.has_match=!0}}}}j.re_render(window.templates.scc_shortcuts_table(k,c,p,i));var r=document.querySelector(".invalid-shortcut input");if(r){r.focus();r.selectionStart=r.selectionEnd=r.value.length}i.length||this._broker.set_shortcuts(c,k)}.bind(this);this._handlers["reset-all-to-defaults"]=function(a,b){var c=window.ini.default_shortcuts;this._broker.set_shortcuts(c,null,!0)}.bind(this);this._handlers["add-shortcut"]=function(a,b){var c=a.target.has_attr("parent-node-chain","handler-id"),d=c&&c.getAttribute("handler-id"),e=a.target,f=this._broker.get_actions_with_handler_id(d),g=["tr",["td",["input","class","scc-input"]],["td",window.templates.scc_action_select(f)]];while(e&&e.nodeName.toLowerCase()!="tr")e=e.parentNode;e&&e.parentNode.insertBefore(document.render(g),e)}.bind(this);this._handlers["reset-to-defaults"]=function(a,b){var c=window.helpers.copy_object(window.ini.default_shortcuts),d=a.target.has_attr("parent-node-chain","handler-id"),e=d&&d.getAttribute("handler-id");c=c[e];this._broker.set_shortcuts(c,e);d.re_render(window.templates.scc_shortcuts_table(e,c))}.bind(this);this._handlers["quick-find"]=function(a,b){var c=a.target.value.toLowerCase().trim(),d=this._broker.get_shortcuts(),e=null,f=null,g={is_search:Boolean(c)},h="",i=null,j="",k=a.target,l=null,m=null,n=!1;for(h in d)for(j in d[h]){g[h]||(g[h]={});g[h][j]=this._search_mode(d[h][j],c);g[h][j].has_match&&(g[h].has_match=!0)}while(k&&k.nodeName.toLowerCase()!="setting-composite")k=k.parentNode;if(k){m=templates.scc_sections(d,c&&g);(l=k.getElementsByTagName("ul")[0])&&k.replaceChild(document.render(m),l)}}.bind(this);this._search_mode=function(a,b){var c={},d=!1;for(var e in a)if(b&&e.toLowerCase().indexOf(b)!=-1){c[e]=a[e];d=!0}c.has_match=d;return c}};cls.ShortcutConfigView.create_ui_widgets=function(){new Settings("shortcut-config",{shortcut_config:!0},{},{customSettings:["shortcut_config"]},{shortcut_config:function(a){return window.templates.shortcut_config()}},"keyboard-shortcuts");window.eventHandlers.click["scc-expand-section"]=function(a,b){this.broker.dispatch_action("shortcut-config","expand-section",a,b)};window.eventHandlers.click["scc-save-shortcuts"]=function(a,b){this.broker.dispatch_action("shortcut-config","save-shortcuts",a,b)};window.eventHandlers.click["scc-reset-all-to-defaults"]=function(a,b){this.broker.dispatch_action("shortcut-config","reset-all-to-defaults",a,b)};window.eventHandlers.click["scc-add-shortcut"]=function(a,b){this.broker.dispatch_action("shortcut-config","add-shortcut",a,b)};window.eventHandlers.click["scc-reset-to-defaults"]=function(a,b){this.broker.dispatch_action("shortcut-config","reset-to-defaults",a,b)};window.eventHandlers.input["scc-quick-find"]=function(a,b){this.broker.dispatch_action("shortcut-config","quick-find",a,b)}};(function(){this.shortcut_config=function(){var a=ActionBroker.get_instance().get_shortcuts(),b={label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,handler:"scc-quick-find",title:ui_strings.S_BUTTON_SEARCH_SHORTCUT,type:"filter"};return["setting-composite",["toolbar",["toolbar-buttons",this.scc_control([ui_strings.S_BUTTON_RESET_ALL_TO_DEFAULTS,"scc-reset-all-to-defaults"])],this.filters([b]),"style","position: static;"],this.scc_sections(a),"class","shortcuts-config"]};this.scc_sections=function(a,b){var c=[],d=ActionBroker.get_instance();for(var e in a)d.get_actions_with_handler_id(e)&&c.push({id:e,name:window.views[e]?window.views[e].name:d.get_shared_shortcuts_label(e),is_search:Boolean(b),has_match:b&&b[e].has_match});return["ul",c.map(this.scc_section.bind(this,a,b))]};this.scc_section=function(a,b,c,d){var e=["header",["input","type","button","class",c.has_match?"unfolded":""],c.name];c.is_search||e.push("handler","scc-expand-section");var f=["li",e];c.is_search&&(c.has_match?f.push(this.scc_shortcuts_table(c.id,a[c.id],b[c.id])):f.push("class","search-no-match"));f.push("handler-id",c.id);return f};this.scc_shortcuts_table=function(a,b,c,d){var e=ActionBroker.get_instance(),f=e.get_actions_with_handler_id(a);if(!b){b=e.get_shortcuts();b=b&&b[a]}if(b&&f){var g=[],h=this.scc_action_select.bind(this,f),i="";for(var j in b){i=e.get_label_with_handler_id_and_mode(a,j);g.extend(this.scc_shortcuts_mode(a,j,i,b[j],c&&c[j],h,d));c||g.push(this.scc_controls([[ui_strings.S_LABEL_STORAGE_ADD,"scc-add-shortcut"]]))}c?g.push(this.scc_controls([[ui_strings.S_BUTTON_TEXT_APPLY,"scc-save-shortcuts"]])):g.push(this.scc_controls([[ui_strings.S_BUTTON_RESET_TO_DEFAULTS,"scc-reset-to-defaults"],[ui_strings.S_BUTTON_TEXT_APPLY,"scc-save-shortcuts"]]));return["table",g,"handler-id",a,"class","shortcuts"+(c?" is-search":"")]}};this.scc_shortcuts_mode=function(a,b,c,d,e,f,g){var h=["tr",["th",c,"colspan","2"],"data-mode",b];e&&!e.has_match&&h.push("class","scc-no-match");var i=[h],j=!1;for(var k in d){j=g&&g.indexOf(k)!=-1;h=["tr",["td",["input","value",k,"class","scc-input"]],["td",f(d[k])]];j&&h.push("class","invalid-shortcut");e&&!(k in e)&&h.push("class","scc-no-match");i.push(h);j&&i.push(this.ssc_invalid_shortcut())}return i};this.ssc_invalid_shortcut=function(){return["tr",["td",ui_strings.S_LABEL_KEYBOARDCONFIG_INVALID_SHORTCUT,"colspan","2"],"class","invalid-shortcut"]};this.scc_controls=function(a){return["tr",["td",a.map(this.scc_control,this),"colspan","2","class","controls"]]};this.scc_control=function(a){const b=0,c=1;return["button",a[b],"handler",a[c],"class","ui-button","tabindex","1"]};this.scc_action_select=function(a,b){var c=[],d=0,e=null;for(;e=a[d];d++)b==e?c.push(["option",e,"selected","selected"]):c.push(["option",e]);return["select",c,"class","scc-select"]};this._scc_sort_by_name=function(a,b){return a.name<b.name?1:a.name>b.name?-1:0}}).apply(window.templates||(window.templates={}));window.templates||(window.templates={});templates.cookie_manager={runtime_group_render:function(a,b,c){return a+"//"+b+c},value_container:function(a){return["div",templates.storage.wrap_ellipsis(a),"class","value_container"]},edit_container:function(a){return["div",a,"class","edit_container"]},input_text_container:function(a,b){return["input","value",b||"","type","text","class","text","name",a,"handler","cookiemanager-input-field"]},input_checkbox_container:function(a,b){var c=["input","type","checkbox","name",a,"handler","cookiemanager-input-field"];b&&c.push("checked","checked");return c},input_datetime_container:function(a,b){var c;b&&(c=(new Date(b*1e3)).toLocaleISOString());return["input","value",c||"","type","datetime-local","name",a,"handler","cookiemanager-input-field"]},input_domain:function(a,b){var c={},d=0,e;for(var f in b){e=b[f].hostname||"";if(!c[e]){c[e]={runtimes:[f]};d++}else c[e].runtimes.push(f);f==a&&(c[e].is_current=!0)}if(d<=1)return[["input","type","hidden","name","add_cookie_runtime","value",c[e].runtimes.toString()],["span",b[c[e].runtimes[0]].hostname]];var g=[];for(var h in c){var i=["option",h,"value",c[h].runtimes.toString()];c[h].is_current&&(i=i.concat(["selected","selected"]));g.push(i)}return["select",g,"name","add_cookie_runtime","class","add_cookie_dropdown","handler","cookiemanager-input-field"]},domain:function(a){return this.value_container(a||this.unknown_value())},all_editable_domain:function(a,b,c){var d=c||b[a].hostname,e=this.input_text_container("domain",d);return[this.domain(c),this.edit_container(e)]},name:function(a){return this.value_container(a)},editable_name:function(a){var b=this.input_text_container("name",a);return[this.value_container(a),this.edit_container(b)]},value:function(a){return this.value_container(a)},editable_value:function(a){var b=a||"",c=this.input_text_container("value",b);return[this.value(a),this.edit_container(c)]},path:function(a){return this.value_container(a||this.unknown_value())},editable_path:function(a){var b=a||"/",c=this.input_text_container("path",b);return[this.path(a),this.edit_container(c)]},expires:function(a,b){if(a===undefined)return this.value_container(this.unknown_value());if(a===0)return this.value_container(this.expires_0values());var c=new Date(a*1e3);return this.value_container(["div","id","expires_container_"+b,"title",c.toLocaleString()])},editable_expires:function(a,b){var c=a;a===undefined&&(c=(new Date).getTime()/1e3+3600);var d=this.input_datetime_container("expires",c);return[this.expires(a,b),this.edit_container(d)]},secure:function(a){if(a===undefined)return this.value_container(this.unknown_value());return this.value_container(this.boolean_value(a))},editable_secure:function(a){var b=this.input_checkbox_container("is_secure",a);return[this.secure(a),this.edit_container(b)]},http_only:function(a){if(a===undefined)return this.value_container(this.unknown_value());return this.value_container(this.boolean_value(a))},editable_http_only:function(a){var b=this.input_checkbox_container("is_http_only",a);return[this.http_only(a),this.edit_container(b)]},expires_0values:function(){return["span",ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE_SHORT,"class","replaced-val","title",ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES_ON_SESSION_CLOSE]},unknown_value:function(){return["span","-","class","replaced-val"]},boolean_value:function(a){return a?["div","class","check"]:[]},add_cookie_row:function(a,b){return["tr",["td",this.edit_container(this.input_domain(a,b))],["td",this.edit_container(this.input_text_container("name"))],["td",this.edit_container(this.input_text_container("value"))],["td",this.edit_container(this.input_text_container("path"))],["td",this.edit_container(this.input_datetime_container("expires"))],["td"],["td"],"class","edit_mode add_cookie_row"]},add_cookie_row_all_editable:function(a){return["tr",["td",this.edit_container(this.input_text_container("domain",a))],["td",this.edit_container(this.input_text_container("name"))],["td",this.edit_container(this.input_text_container("value"))],["td",this.edit_container(this.input_text_container("path"))],["td",this.edit_container(this.input_datetime_container("expires"))],["td",this.edit_container(this.input_checkbox_container("is_secure"))],["td",this.edit_container(this.input_checkbox_container("is_http_only"))],"class","edit_mode add_cookie_row"]}};window.cls||(window.cls={});cls.CookieManager||(cls.CookieManager={});cls.CookieManager["1.0"]||(cls.CookieManager["1.0"]={});cls.CookieManager["1.1"]||(cls.CookieManager["1.1"]={});cls.CookieManager.Cookie=function(a,b){this._rt_hostname=a._rt_hostname;this._rt_path=a._rt_path;this._rt_id=Number(a._rt_id);this._rt_protocol=a._rt_protocol;this._is_runtime_placeholder=a._is_runtime_placeholder;if(!this._is_runtime_placeholder){this.domain=a.domain||"";this.path=a.path||"";this.name=a.name;this.value=a.value;this.expires=a.expires;this.isSecure=a.isSecure;this.isHTTPOnly=a.isHTTPOnly;this._objectref=this.domain+"/"+this.path+"/"+this.name+"/"+this._rt_id}else this._objectref="runtime_placeholder_"+this._rt_id};cls.CookieManager.Cookie.prototype=new function(){this.__defineGetter__("rt_id",function(){return this._rt_id});this.__defineSetter__("rt_id",function(){})};cls.CookieManager.CookieDataBase=function(){var a=0;this.refetch=function(){};this.remove_cookie=function(a,b){};this.remove_cookies=function(a){};this.remove_cookies_of_runtime=function(a){};this.get_cookies=function(){};this.create_objectref=function(a,b,c){};this.get_cookie_by_objectref=function(a){};this.set_cookie=function(a,b){};this.refetch=function(){this.cookie_list=[];for(var a in this._rts)this._request_location_object_id(Number(a))};this.get_cookies=function(){if(!this._is_active){this._is_active=!0;this._last_on_active_tab_msg&&this._on_active_tab(this._last_on_active_tab_msg)}return this.cookie_list};this.get_cookie_by_objectref=function(a){for(var b=0,c;c=this.cookie_list[b];b++)if(c._objectref===a)return c};this.set_cookie=function(a,b){this._view._restore_selection=[a._objectref];var c=a.path;c&&c.trim()==="/"&&(c="");var d=[a.domain,a.name,c,a.value,a.expires/1e3,a.isSecure,a.isHTTPOnly],e=b?tagManager.set_callback(this,b):0;services["cookie-manager"].requestAddCookie(e,d)};this.remove_cookie=function(a,b){var c=this.get_cookie_by_objectref(a);if(c){var d=c.domain;d||(d=this._rts[c._rt_id].hostname);var e=c.path;e||(e="/");var f=b?tagManager.set_callback(this,b,[]):0;services["cookie-manager"].requestRemoveCookie(f,[d,e,c.name])}};this.remove_cookies=function(a){var b=a.pop(),c=this.remove_cookies.bind(this,a);a.length===0&&(c=this.refetch);this.remove_cookie(b._objectref,c)};this.remove_cookies_of_runtime=function(a){this.remove_cookies(this.get_cookies().filter(function(b){return b._rt_id===a&&!b._is_runtime_placeholder}))};this._on_active_tab=function(a){if(this._is_active){for(var b=0,c;c=a.runtimes_with_dom[b];b++)if(!this._rts[c]){this._rts[c]={rt_id:c};this._request_location_object_id(c)}for(var d in this._rts){var c=this._rts[d].rt_id;if(a.runtimes_with_dom.indexOf(c)===-1){delete this._rts[c];this.cookie_list=this.cookie_list.filter(function(a){return a.rt_id!=c})}}}else this._last_on_active_tab_msg=a};this._on_profile_disabled=function(a){if(a.profile==window.app.profiles.DEFAULT){this.cookie_list=[];this._rts={}}};this._request_location_object_id=function(a){var b="location",c=tagManager.set_callback(this,this._handle_location_object_id,[a]);services["ecmascript-debugger"].requestEval(c,[a,0,0,b])};this._handle_location_object_id=function(b,c,d){const e=3,f=0;if(b===a&&c[e]){var g=c[e][f],h=tagManager.set_callback(this,this._handle_location,[d]),i=[d,[g],0,1,0];services["ecmascript-debugger"].requestExamineObjects(h,i)}};this._handle_location=function(a,b,c){const d=0,e=0,f=1,g=0,h=1,i=2;var j=this._rts[c],k;if(j&&a===0&&b[d]&&b[d][0]&&b[d][0][e]&&b[d][0][e][0]&&(k=b[d][0][e][0][f])){var l=["protocol","hostname","pathname"];for(var m=0,n;n=k[m];m++){var o=n[g],p=n[h],q=n[i];p==="string"&&l.indexOf(o)>-1&&(j[o]=q)}if(j.hostname){var r=j.hostname,s=tagManager.set_callback(this,this._handle_cookies,[c]);services["cookie-manager"].requestGetCookie(s,[r,j.pathname])}else this._view.update()}};this._handle_cookies=function(b,c,d){var e=this._rts[d];if(!e)throw"missing runtime in _handle_cookies";if(b===a){var f=0;if(c.length>0){var g=c[f];for(var h=0,i;i=g[h];h++){var j=i[5];if(j&&e.protocol!=="https:")continue;this.cookie_list.push(new cls.CookieManager.Cookie({domain:i[0],path:i[1],name:i[2],value:i[3],expires:i[4],isSecure:i[5],isHTTPOnly:i[6],_rt_id:d,_rt_hostname:e.hostname,_rt_path:e.pathname,_rt_protocol:e.protocol},this))}}else{var k="return document.cookie",l=tagManager.set_callback(this,this._handle_js_retrieved_cookies,[d]);services["ecmascript-debugger"].requestEval(l,[d,0,0,k])}}this.cookie_list.push(new cls.CookieManager.Cookie({_is_runtime_placeholder:!0,_rt_id:d,_rt_protocol:e.protocol,_rt_hostname:e.hostname,_rt_path:e.pathname},this));this._view.update()};this._handle_js_retrieved_cookies=function(b,c,d){const e=0,f=2;if(b===a&&c[e]=="completed"){var g=this._rts[d]||{},h=c[f];if(h&&h.length>0){var i=h.split("; ");for(var j=0,k;k=i[j];j++){var l=k.indexOf("="),m=l!==-1;this.cookie_list.push(new cls.CookieManager.Cookie({name:m?k.slice(0,l):k,value:m?decodeURIComponent(k.slice(l+1)):null,_rt_id:d,_rt_protocol:g.protocol,_rt_hostname:g.hostname,_rt_path:g.pathname},this))}}}this._view.update()};this._init=function(a){this._view=a;this.cookie_list=[];this._rts={};this._active_dom_rt_ids=[];this._is_active=!1;window.messages.addListener("active-tab",this._on_active_tab.bind(this));window.messages.addListener("profile-disabled",this._on_profile_disabled.bind(this))}};cls.CookieManager["1.1"].CookieManagerData=function(a){this._init(a)};cls.CookieManager["1.1"].CookieManagerData.prototype=new cls.CookieManager.CookieDataBase;window.cls||(window.cls={});cls.CookieManager||(cls.CookieManager={});cls.CookieManager["1.0"]||(cls.CookieManager["1.0"]={});cls.CookieManager.CookieManagerViewBase=function(){this.createView=function(a){};this.insert_add_cookie_row_after_objectref=function(a){};this.enter_edit_mode=function(a,b){};this.exit_edit_and_save=function(){};const a="default",b="edit";this._init=function(a,c,d,e){this.required_services=["cookie-manager","ecmascript-debugger"];this.init(a,c,d,null,"cookiemanager-container");this.shared_shortcuts="storage";ActionHandlerInterface.apply(this);this._handlers={submit:this._submit.bind(this),cancel:this._cancel.bind(this),"remove-item":this._remove_item.bind(this),"select-row":this.select_row.bind(this),"enter-edit-mode":this.enter_edit_mode.bind(this),"add-cookie":this.click_add_cookie_button.bind(this)};this.onclick=function(a){var c=this.mode==b,d=a.target.hasClass("add_storage_button"),e=a.target.get_ancestor(".edit_mode");!d&&!e&&this._handlers.submit();if(c)return!1};ActionBroker.get_instance().register_handler(this);this.data=e;this._bound_update_expiry=this._update_expiry.bind(this);var f=ContextMenu.get_instance();f.register(a,[{label:ui_strings.S_LABEL_STORAGE_UPDATE,handler:this.data.refetch.bind(this.data)}]);f.register("cookie_context",[{callback:this._create_context_menu.bind(this)}]);this._tabledef={groups:{runtime:{label:ui_strings.S_LABEL_COOKIE_MANAGER_GROUPER_RUNTIME,use_ellipsis:!0,grouper:function(a){return a._rt_id},renderer:function(a,b){return templates.cookie_manager.runtime_group_render(b[0]._rt_protocol,b[0]._rt_hostname,b[0]._rt_path)}}},column_order:["domain","name","value","path","expires","isSecure","isHTTPOnly"],idgetter:function(a){return a._objectref},columns:{domain:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_DOMAIN),classname:"col_domain",renderer:this._domain_renderer.bind(this),summer:function(a,b,c){return["span",ui_strings.S_LABEL_COOKIE_MANAGER_ADD_COOKIE,"class","add_storage_button ui-button","handler","cookiemanager-add-cookie-row","unselectable","on","tabindex","1"]},sorter:this._make_sorter("domain")},name:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_NAME),classname:"col_name",renderer:function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_name(a.name)},sorter:this._make_sorter("name")},value:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_VALUE),classname:"col_value",renderer:function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_value(a.value)},sorter:this._make_sorter("value")},path:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_PATH),classname:"col_path",renderer:function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_path(a.path)},sorter:this._make_sorter("path")},expires:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRES),classname:"col_expires",renderer:function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_expires(a.expires,a._objectref)},sorter:this._make_sorter("expires")},isSecure:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_SECURE_CONNECTIONS_ONLY),classname:"col_secure",renderer:this._is_secure_renderer.bind(this),align:"center",sorter:this._make_sorter("isSecure")},isHTTPOnly:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_HTTP_ONLY),classname:"col_httponly",renderer:this._is_http_only_renderer.bind(this),align:"center",sorter:this._make_sorter("isHTTPOnly")}},options:{no_group_changing:!0}};this._sortable_table=new SortableTable(this._tabledef,null,null,"domain","runtime",!0,"cookie-inspector");this._sortable_table.add_listener("before-render",this._before_table_render.bind(this));this._sortable_table.add_listener("after-render",this._after_table_render.bind(this))};this.createView=function(a){this._container=a;var b=this.data.get_cookies();this._sortable_table.set_data(b);this._update_expiry_interval||(this._update_expiry_interval=setInterval(this._bound_update_expiry,15e3));this._before_table_render();this._table_elem=a.clearAndRender(this._sortable_table.render());this._after_table_render({table:this._table_elem});window.messages.addListener("debug-context-selected",this._clear_container.bind(this))};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._make_sorter=function(a){return function(b,c){if(b._is_runtime_placeholder)return Infinity;if(c._is_runtime_placeholder)return-Infinity;if(b[a]<c[a])return 1;if(b[a]>c[a])return-1;return 0}};this._create_context_menu=function(a,b){while(b.nodeName!=="tr"||!b.parentNode)b=b.parentNode;var c=b.getAttribute("data-object-id");c&&this.select_row(a,b);var d=this._table_elem.querySelectorAll(".selected"),e=[];for(var f=0,g;g=d[f];f++){var h=this.data.get_cookie_by_objectref(g.getAttribute("data-object-id"));e.push(h)}if(e.length>0){var i=[{label:ui_strings.S_LABEL_COOKIE_MANAGER_ADD_COOKIE,handler:this.insert_add_cookie_row_after_objectref.bind(this,e[0]._objectref)},{label:ui_strings.S_LABEL_COOKIE_MANAGER_EDIT_COOKIE,handler:this.enter_edit_mode.bind(this)}];if(e.length===1){var h=e[0];if(h){i.push({label:ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIE,handler:this.data.remove_cookie.bind(this.data,h._objectref,this.data.refetch)});var j=h._rt_id;i.push({label:ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES_OF
.replace(/%s/,h._rt_protocol+"//"+h._rt_hostname+h._rt_path),handler:this.data.remove_cookies_of_runtime.bind(this.data,j)})}else i.push({label:ui_strings.S_LABEL_COOKIE_MANAGER_REMOVE_COOKIES,handler:this.data.remove_cookies.bind(this.data,e)});return i}}};this.ondestroy=function(){this._container=null;this._update_expiry_interval&&(this._update_expiry_interval=clearInterval(this._update_expiry_interval))};this.select_row=function(a,b){var a=a||{},c=this._table_elem.querySelectorAll(".selected");if(!(a.ctrlKey||c.length>1&&a.button===2&&b.hasClass("selected")))for(var d=0,e;e=c[d];d++)e.hasClass("add_cookie_row")||e.removeClass("selected");a.ctrlKey&&b.hasClass("selected")?b.removeClass("selected"):b.addClass("selected")};this.click_add_cookie_button=function(a,b){var c=b.parentElement.parentElement,d=c.previousElementSibling;while(!d.getAttribute("data-object-id"))d=d.previousElementSibling;var e=d.getAttribute("data-object-id");this.insert_add_cookie_row_after_objectref(e)};this.insert_add_cookie_row_after_objectref=function(a){this.mode=b;var c=a.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),d=document.querySelector("[data-object-id='"+c+"']");if(d){var e=this.data.get_cookie_by_objectref(a),f=e&&e._rt_hostname||"",g=templates.cookie_manager.add_cookie_row_all_editable(f),h=document.documentElement.render(g),i=d.parentElement.insertAfter(h,d);i.querySelector("[name='name']").focus();this.select_row(null,i)}};this.enter_edit_mode=function(a,c){if(!a.target.get_ancestor(".edit_mode")){this.mode=b;var d=c.getAttribute("data-object-id"),e=d.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),c=document.querySelector(".sortable-table tr[data-object-id='"+e+"']").addClass("edit_mode");this.select_row(a,c)}};this._submit=function(a,b){this.exit_edit_and_save();return!1};this._cancel=function(b,c){this.data.refetch();this.mode=a;return!1};this._remove_item=function(a,b){var c=this._table_elem.querySelectorAll(".selected"),d=[];for(var e=0,f;f=c[e];e++){var g=this.data.get_cookie_by_objectref(f.getAttribute("data-object-id"));d.push(g)}d.length&&this.data.remove_cookies(d);return!1};this.exit_edit_and_save=function(){this.mode=a;var b=document.querySelectorAll("tr.edit_mode");for(var c=0,d;d=b[c];c++){var e=c==b.length-1,f=function(){};e&&(f=this.data.refetch);d.removeClass("edit_mode");var g=d.querySelector("[name='is_secure']"),h=d.querySelector("[name='is_http_only']"),i=d.querySelector("[name='add_cookie_runtime']"),j=d.querySelector("[name='domain']"),k=d.querySelector("[name='name']").value.trim(),l=d.querySelector("[name='value']").value,m=d.querySelector("[name='expires']").value,n=d.querySelector("[name='path']").value.trim(),o=+(g&&g.checked),p=+(h&&h.checked),q=i&&parseInt(i.value.split(",")[0]),r=j&&j.value.trim()||q&&this.data._rts[q].hostname;m=m.replace(/\.0+/,"");m=Date.fromLocaleISOString(m)||Date.parse(m)||0;var s=d.getAttribute("data-object-id"),t;if(s){t=this.data.get_cookie_by_objectref(s);if(t&&k===t.name&&l===t.value&&m===(new Date(t.expires*1e3)).getTime()&&n===t.path&&o===t.isSecure&&p===t.isHTTPOnly&&r===(t.domain||t._rt_hostname))return}if(r&&k){var u=new cls.CookieManager.Cookie({domain:r,name:k,path:n,value:l,expires:m,isSecure:o,isHTTPOnly:p,_rt_id:q},this.data);if(typeof u._rt_id!="number")for(var v in this.data._rts){var w=this.data._rts[v].hostname,x=w.lastIndexOf(u.domain);if(x!==-1&&x+u.domain.length==w.length){u._rt_id=this.data._rts[v].rt_id;break}}t?this.data.remove_cookie(t._objectref,this.data.set_cookie.bind(this.data,u,f)):this.data.set_cookie(u,f)}else f.call(this.data)}};this._clear_container=function(){this._container&&(this._container.innerHTML="")};this._before_table_render=function(){if(this._table_elem){var a=this._table_elem.querySelectorAll(".selected");this._restore_selection=this._restore_selection||[];for(var b=0,c;c=a[b];b++)this._restore_selection.push(c.getAttribute("data-object-id"))}};this._after_table_render=function(a){var b=a.table;if(b){this._update_expiry();this._table_elem=b;if(this._restore_selection){for(var c=0,d;d=this._restore_selection[c];c++){var e=d.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),f=this._container.querySelector("[data-object-id='"+e+"']");f&&f.addClass("selected")}this._restore_selection=null}for(var c=0;c<this._table_elem.childNodes.length;c++)this._table_elem.childNodes[c].setAttribute("data-menu","cookie_context");var g=this._container.querySelectorAll("tr[data-object-id]");for(var c=0,h;h=g[c];c++){var i=h.getAttribute("data-object-id").startswith("runtime_placeholder_");i&&h.addClass("runtime_placeholder");h.setAttribute("handler","cookiemanager-row-select");var d=h.getAttribute("data-object-id");this.data.get_cookie_by_objectref(d)?h.setAttribute("edit-handler","cookiemanager-init-edit-mode"):h.addClass("non-editable")}}};this._fuzzy_date_def=[{up_to_sec:0,string:ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_EXPIRED},{up_to_sec:60,string:ui_strings.S_COOKIE_MANAGER_SOONER_THEN_1_MINUTE},{up_to_sec:3600,string:ui_strings.S_COOKIE_MANAGER_IN_X_MINUTES,string_singular:ui_strings.S_COOKIE_MANAGER_IN_1_MINUTE},{up_to_sec:86400,string:ui_strings.S_COOKIE_MANAGER_IN_X_HOURS,string_singular:ui_strings.S_COOKIE_MANAGER_IN_1_HOUR},{up_to_sec:604800,string:ui_strings.S_COOKIE_MANAGER_IN_X_DAYS,string_singular:ui_strings.S_COOKIE_MANAGER_TOMORROW},{up_to_sec:2600640,string:ui_strings.S_COOKIE_MANAGER_IN_X_WEEKS,string_singular:ui_strings.S_COOKIE_MANAGER_IN_1_WEEK},{up_to_sec:31207680,string:ui_strings.S_COOKIE_MANAGER_IN_X_MONTHS,string_singular:ui_strings.S_COOKIE_MANAGER_IN_1_MONTH},{up_to_sec:Infinity,string:ui_strings.S_COOKIE_MANAGER_IN_X_YEARS,string_singular:ui_strings.S_COOKIE_MANAGER_IN_1_YEAR}];this._fuzzy_date=function(a,b){var c=new Date(a*1e3),d=Math.round((c.getTime()-(new Date).getTime())/1e3),e="",f=0,g=0;for(var g=0,h;h=b[g];g++)if(d<h.up_to_sec)break;var f;b[g-1]&&b[g-1].up_to_sec&&(f=Math.round(d/b[g-1].up_to_sec));var i=h.string.replace(/%s/,f);f===1&&h.string_singular&&(i=h.string_singular.replace(/%s/,f));return{string:i,is_disabled:!f}};this._update_expiry=function(){var a=this.data.get_cookies();for(var b=0,c;c=a[b];b++){var d=document.getElementById("expires_container_"+c._objectref);if(d){var e=this._fuzzy_date(c.expires,this._fuzzy_date_def);d.textContent=e.string;if(e.is_disabled){while(d.nodeName!=="tr"||!d.parentNode)d=d.parentNode;d.nodeName==="tr"&&d.addClass("expired_cookie")}}}};this._domain_renderer=function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.all_editable_domain(a._rt_id,this.data._rts,a.domain)};this._is_secure_renderer=function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_secure(a.isSecure)};this._is_http_only_renderer=function(a){if(!a._is_runtime_placeholder)return templates.cookie_manager.editable_http_only(a.isHTTPOnly)}};cls.CookieManager.CookieManagerViewBase.prototype=ViewBase;cls.CookieManager["1.1"]||(cls.CookieManager["1.1"]={});cls.CookieManager["1.1"].CookieManagerView=function(a,b,c,d){var e=d;typeof d=="function"&&(e=new d(this));this._init(a,b,c,e)};cls.CookieManager["1.1"].CookieManagerView.prototype=new cls.CookieManager.CookieManagerViewBase;cls.CookieManager.create_ui_widgets=function(){window.eventHandlers.dblclick["cookiemanager-init-edit-mode"]=function(a,b){this.broker.dispatch_action("cookie_manager","enter-edit-mode",a,b)};window.eventHandlers.click["cookiemanager-row-select"]=function(a,b){this.broker.dispatch_action("cookie_manager","select-row",a,b)};window.eventHandlers.click["cookiemanager-container"]=function(a,b){this.broker.dispatch_action("cookie_manager","check-to-exit-edit-mode",a,b)};window.eventHandlers.click["cookiemanager-add-cookie-row"]=function(a,b){this.broker.dispatch_action("cookie_manager","add-cookie",a,b)}};var JSSyntax=function(){};JSSyntax.is_valid_identifier=function(a){return/^[a-z$_][a-z$_0-9]*$/i.test(a)&&!js_keywords.hasOwnProperty(a)};var js_keywords={"break":1,"do":1,"instanceof":1,"typeof":1,"case":1,"else":1,"new":1,"var":1,"catch":1,"finally":1,"return":1,"void":1,"continue":1,"for":1,"switch":1,"while":1,"debugger":1,"function":1,"this":1,"with":1,"default":1,"if":1,"throw":1,"delete":1,"in":1,"try":1,"class":1,"enum":1,"extends":1,"super":1,"const":1,"export":1,"import":1,"implements":1,let:1,"private":1,"public":1,yield:1,"interface":1,"package":1,"protected":1,"static":1},js_builtins={Anchor:1,anchors:1,Applet:1,applets:1,Area:1,Array:1,Button:1,Checkbox:1,Date:1,document:1,FileUpload:1,Form:1,forms:1,Frame:1,frames:1,Hidden:1,history:1,Image:1,images:1,Link:1,links:1,Area:1,location:1,Math:1,MimeType:1,mimeTypes:1,navigator:1,options:1,Password:1,Plugin:1,plugins:1,Radio:1,Reset:1,Select:1,String:1,Submit:1,Text:1,Textarea:1,window:1};this.cls||(this.cls={});cls.SimpleJSParser=function(){};cls.SimpleJSParser.WHITESPACE=1;cls.SimpleJSParser.LINETERMINATOR=2;cls.SimpleJSParser.IDENTIFIER=3;cls.SimpleJSParser.NUMBER=4;cls.SimpleJSParser.STRING=5;cls.SimpleJSParser.PUNCTUATOR=6;cls.SimpleJSParser.DIV_PUNCTUATOR=7;cls.SimpleJSParser.REG_EXP=8;cls.SimpleJSParser.COMMENT=9;cls.SimpleJSParser.prototype=new function(){this.format=function(a,b,c,d,e,f){};this.format_source=function(a){};this.parse=function(a,b,c){};this.tokenize=function(a,b,c,d){};const a=0,b=1,c=2,d=3,e=4,f=cls.SimpleJSParser.WHITESPACE,g=cls.SimpleJSParser.LINETERMINATOR,h=cls.SimpleJSParser.IDENTIFIER,i=cls.SimpleJSParser.NUMBER,j=cls.SimpleJSParser.STRING,k=cls.SimpleJSParser.PUNCTUATOR,l=cls.SimpleJSParser.DIV_PUNCTUATOR,m=cls.SimpleJSParser.REG_EXP,n=cls.SimpleJSParser.COMMENT;var o=null,p=null,q="",r=0,s=String.fromCharCode,t="",u="",v="",w=0,x="<ol>",y="",z=1,A=0,B=2500,C=0,D=!1,E=0,F=0,G="",H=!0,I="",J=null,K=null,L=null,M=null,N=-1,O=-1,P="div",Q="",R=null,S=function(){if(q){K.push(q);L.push(t);if(t==h){u=t;v=q}}q=""},T=function(){K.push(q);L.push(g);q=""},U=function(){if(q){M.push([t,q]);if(t==h){u=t;v=q}}q=""},V=function(){M.push([g,q]);q=""},W=function(){if(q){R(t,q);if(t==h){u=t;v=q}}q=""},X=function(){R(g,q);q=""},Y={"\t":1,"":1,"\f":1," ":1," ":1},Z={"\n":1,"\r":1,"\r\n":1,"\u2028":1,"\u2029":1},$={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1},_={"{":1,"}":1,"(":1,")":1,"[":1,"]":1,";":1,",":1,"<":1,">":1,"=":1,"!":1,"+":1,"-":1,"*":1,"%":1,"&":1,"|":1,"^":1,"~":1,"?":1,":":1,".":1},ba={};ba[2]={start:{"<":1,">":1,"=":1,"!":1,"+":1,"-":1,"&":1,"|":1,"*":1,"%":1,"&":1,"|":1,"^":1},groups:{"<=":1,">=":1,"==":1,"!=":1,"++":1,"--":1,"<<":1,">>":1,"&&":1,"||":1,"+=":1,"-=":1,"*=":1,"%=":1,"&=":1,"|=":1,"^=":1}};ba[3]={start:{"==":1,"!=":1,">>":1,"<<":1},groups:{"===":1,"!==":1,">>>":1,"<<=":1,">>=":1}};ba[4]={start:{">>>":1},groups:{">>>=":1}};var bb={'"':1,"'":1},bc={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,a:1,b:1,c:1,d:1,e:1,f:1,A:1,B:1,C:1,D:1,E:1,F:1},bd={g:1,i:1,m:1},be={")":1,"]":1,"}":1},bf={"return":1},bg={"<":"&lt;","&":"&amp;"},bh=function(a){var b="",c="",d=0;v="";while(a){if(a in Y){bo();t=f;do{q+=a;a=p.charAt(++r)}while(a in Y);bo();t=h}if(a in Z){bo();q=b=a;b+=a=p.charAt(++r);if(b in Z){q=b;a=p.charAt(++r)}if(bs&&bs())return x;continue}if(a in $){bo();q+=a;t=i;a=p.charAt(++r);if(a=="x"||a=="X"){q+=a;a=bi(p.charAt(++r))}else a=bj(a,".");continue}if(a in bb){bo();w=a;q+=a;t=j;if(bk(p.charAt(++r)))return x;a=p.charAt(++r);continue}if(a=="."){bo();q+=a;a=p.charAt(++r);if(a in $){t=i;a=bj(a,0);continue}t=k;bo();t=h;continue}if(a in _){bo();t=k;q+=a in J?J[a]:a;c=a;a=p.charAt(++r);d=2;while(a){if(!(ba[d]&&c in ba[d].start&&(c+=a)in ba[d].groups))break;q+=a in J?J[a]:a;a=p.charAt(++r);d++}v=q;bo();u=t;t=h;continue}if(a=="/"){bo();q+=a;a=p.charAt(++r);if(a=="*"){q+=a;t=n;if(bl(p.charAt(++r)))return x;a=p.charAt(++r);continue}if(a=="/"){q+=a;t=n;if(bm(p.charAt(++r)))return x;a=p.charAt(r);continue}if(u==h&&!(v in bf)||u==i||u==k&&v in be){t=l;if(a=="="){q+=a;bo();a=p.charAt(++r)}else bo();t=h;continue}t=m;a=bn(a);continue}for(;;){q+=a in J?J[a]:a;a=p.charAt(++r);if(!a||a in _||a=="/"||a in Z||a in Y||a in bb)break}}bo()},bi=function(a){while(a in bc){q+=a;a=p.charAt(++r)}bo();u=t;t=h;return a},bj=function(a,b){while(a in $||a===b){a===b&&(b=0);q+=a;a=p.charAt(++r)}if(a=="e"||a=="E"){q+=a;a=p.charAt(++r);if(a=="+"||a=="-"){q+=a;a=p.charAt(++r)}while(a in $){q+=a;a=p.charAt(++r)}}bo();u=i;t=h;return a},bk=function(a){var b="";while(a){if(a=="\\"){q+=a;a=p.charAt(++r);if(a in Z){bo();q=b=a;b+=a=p.charAt(++r);if(b in Z){a=p.charAt(++r);q=b}if(bs&&bs())return x;continue}q+=a in J?J[a]:a;a=p.charAt(++r);continue}if(a==w||a in Z){q+=a;bo();u=j;t=h;break}q+=a in J?J[a]:a;a=p.charAt(++r)}},bl=function(a){var b="";while(a){if(a in Z){bo();q=b=a;b+=a=p.charAt(++r);if(b in Z){q=b;a=p.charAt(++r)}if(bs&&bs())return x;continue}if(a=="*"){q+=a;a=p.charAt(++r);if(a=="/"){q+=a;bo();t=h;break}continue}q+=a in J?J[a]:a;a=p.charAt(++r)}},bm=function(a){var b="";while(a){if(a in Z){bo();t=h;q=b=a;b+=a=p.charAt(++r);if(b in Z){q=b;r++}if(bs&&bs())return x;break}q+=a in J?J[a]:a;a=p.charAt(++r)}},bn=function(a){var b=!1;while(a){a=="["&&(b=!0);b&&a=="]"&&(b=!1);if(a=="\\"){q+=a;a=p.charAt(++r);q+=a in J?J[a]:a;a=p.charAt(++r);continue}if(!b&&a=="/"){q+=a;a=p.charAt(++r);while(a in bd){q+=a;a=p.charAt(++r)}bo();u=m;t=h;return a}if(a in Z){bo();u=m;t=h;return a}q+=a in J?J[a]:a;a=p.charAt(++r)}},bo=null,bp={"false":"boolean","true":"boolean","null":"null","undefined":"undefined"},bq=function(){if(q&&!D){C+=q.length;if(C>B){q="";D=!0}switch(t){case j:y+="<span class='string'>"+q+"</span>";break;case h:bp.hasOwnProperty(q)?y+="<span class='"+bp[q]+"'>"+q+"</span>":q in js_keywords?y+="<span class='js_keywords'>"+q+"</span>":q in js_builtins?y+="<span class='js_builtins'>"+q+"</span>":y+=q;break;case i:y+="<span class='number'>"+q+"</span>";break;case n:y+="<span class='comment'>"+q+"</span>";break;case m:y+="<span class='reg_exp'>"+q+"</span>";break;default:y+=q}if(t==h){u=t;v=q}D&&(y+=" … ")}q=""},br=function(){if(q&&!D){C+=q.length;if(C>B){q=q.slice(0,q.length-(C-B));D=!0}if(z<E)bq();else if(z==E){G+=q;if(F>=G.length)bq();else if(H){y="<div class='error-description'>"+helpers.escapeTextHtml(I)+"</div>"+"<span class='not-error'>"+y+"</span>"+"<span class='first-error'>"+q+"</span>";H=!1}else y+="<span class='error'>"+q+"</span>"}else y+=q;D&&(y+=" … ")}q=""},bs=null,bt=function(a){y||(y+=" ");x[x.length]=z>=N&&z<=O?"<"+Q+" class='highlight-source' data-line-number='"+(z+1)+"'>"+y+"</"+Q+">":"<"+Q+" data-line-number='"+(z+1)+"'>"+y+"</"+Q+">";y="";q="";D=!1;C=0;return++z>A},bu=function(a){y||(y+=" ");z<E?x[x.length]="<"+Q+" data-line-number='"+(z+1)+"'>"+y+"</"+Q+">":z==E?x[x.length]="<"+Q+" class='first-error-line' data-line-number='"+(z+1)+"'>"+y+"</"+Q+">":x[x.length]="<"+Q+" class='error-line error' data-line-number='"+(z+1)+"'>"+y+"</"+Q+">";y="";q="";D=!1;C=0;return++z>A},bv=function(){bs();return x},bw=function(a,b){x=[];y="";z=a;A=a+b;D=!1;C=0;B=32e3/window.defaults["js-source-char-width"]>>0},bx=[];bx[e]=function(){t=n;if(bl(p.charAt(r)))return x;r++};bx[b]=function(){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"state parsing not implemented in formatter.js for SINGLE_QUOTE")};bx[b]=function(){w="'";t=j;if(bk(p.charAt(r)))return x;r++};bx[c]=function(){w='"';t=j;if(bk(p.charAt(r)))return x;r++};bx[d]=function(){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"state parsing not implemented in formatter.js for REG_EXP")};this.format=function(a,b,c,d,e,f){if(typeof d=="number"&&typeof e=="number"){N=d;O=e}else{N=-1;O=-1}typeof f=="string"?Q=f:Q=P;bw(b,c);o=bh;u="";t=h;p=a.script_data;J=bg;var g=p.length;r=a.line_arr[b];if(a.parse_error){bo=br;bs=bu;E=a.parse_error.error_line;F=a.parse_error.error_line_offset;G="";H=!0;I=a.parse_error.description}else{bo=bq;bs=bt}if(a.state_arr[b]&&bx[a.state_arr[b]]())return x;if(o(p.charAt(r)))return x;if(bv)return bv()};this.parse=function(a,b,c){o=bh;u="";t=h;J={};p=a;r=0;K=b;L=c;bs=T;bo=S;o(p.charAt(r))};this.tokenize=function(a,b,c,d){o=bh;u="";t=h;J=c=="html"&&bg||{};p=a;r=0;R=b;bs=X;bo=W;(!d||!bx[d]())&&o(p.charAt(r))};var by=function(a){x.push(y);y="";q="";return!1};this.format_source=function(a){bw(0,0);o=bh;u="";t=h;p=a;J=bg;r=0;bo=bq;bs=by;o(p.charAt(r));bs();return x}};(function(){const a=cls.SimpleJSParser.WHITESPACE,b=cls.SimpleJSParser.LINETERMINATOR,c=cls.SimpleJSParser.IDENTIFIER,d=cls.SimpleJSParser.NUMBER,e=cls.SimpleJSParser.STRING,f=cls.SimpleJSParser.PUNCTUATOR,g=cls.SimpleJSParser.DIV_PUNCTUATOR,h=cls.SimpleJSParser.REG_EXP,i=cls.SimpleJSParser.COMMENT;var j=new cls.SimpleJSParser,k={};k[e]="string";k[d]="number";k[i]="comment";k[h]="reg_exp";var l={"false":"boolean","true":"boolean","null":"null","undefined":"undefined"},m=function(a,f,g){var j="";a.test_char_count+=g.length;switch(f){case b:if(a.online){a.online();a.test_char_count>a.max_char_count&&(a.max_char_count=a.test_char_count);a.test_char_count=0}break;case c:if(l.hasOwnProperty(g))j=l[g];else if(js_keywords.hasOwnProperty(g))j="js_keywords";else if(js_builtins.hasOwnProperty(g))j="js_builtins";else break;case e:case d:case i:case h:if(a.text){a.template.push(a.text);a.text=""}a.template.push(["span",g,"class",j||k[f]]);return}a.text+=g},n=function(a,f,g){var j="";switch(a){case b:g&&g();case c:if(l.hasOwnProperty(f))j=l[f];else if(js_keywords.hasOwnProperty(f))j="js_keywords";else if(js_builtins.hasOwnProperty(f))j="js_builtins";else break;case e:case d:case i:case h:return'<span class="'+(j||k[a])+'">'+f+"</span>"}return f};this.highlight_js_source=function(a,b,c,d,e){typeof e!="boolean"&&(e=!1);var f={template:d||["pre"],text:"",online:b,test_char_count:0,max_char_count:0};j.tokenize(a,function(a,b){m(f,a,b)},null,c);f.text&&f.template.push(f.text);f.test_char_count>f.max_char_count&&(f.max_char_count=f.test_char_count);!e&&window.defaults["js-source-char-width"]&&f.max_char_count*window.defaults["js-source-char-width"]>32e3&&f.template.push("style","white-space:pre-wrap; width: 32000px");return f.template};this.highlight_js_source_markup=function(a,b){var c="";j.tokenize(a,function(a,d){c+=n(a,d,b)},"html");return c}}).apply(window.templates||(window.templates={}));window.cls=window.cls||{};cls.MarkupTokenizer=function(){const a="\r",b="\n";this.CONFIG={EOL_TOKENS:!0};this._cached_state=null;this._EOL_buffer="";this._buffer="";this._current_pos=0;this.ontoken=function(){};this._token_type=cls.MarkupTokenizer.types.DATA;this._token_buffer="";this._last_tag_is_close_tag=!1;this._is_script=!1;this._is_style=!1;this.tokenize=function(a,b){this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;this._buffer=a;this._emitToken=b;while(this._tokenizer_state_handler!==this._tokenizer_state_handlers.EOF)this._tokenizer_state_handler.apply(this);this._tokenizer_state_handlers.EOF.apply(this)};this._emitToken=function(a,b){this.ontoken(a,b)};this._is_EOF=function(){if(this._current_pos>=this._buffer.length){this._tokenizer_state_handler=this._tokenizer_state_handlers.EOF;return!0}return!1};this._is_EOL=function(){if(this.CONFIG.EOL_TOKENS){var c=this._buffer.charAt(this._current_pos);if(c===a||c===b){this._cached_state=this._tokenizer_state_handler;this._tokenizer_state_handler=this._tokenizer_state_handlers.EOL;return!0}}return!1};this._next_data_is_script_or_style=function(){if(!this._last_tag_is_close_tag){if(this._last_tag_name.toLowerCase()==="script"){this._token_type=cls.MarkupTokenizer.types.SCRIPT_DATA;this._emitToken(cls.MarkupTokenizer.types.SCRIPT_DATA,"");this._tokenizer_state_handler=this._tokenizer_state_handlers.SCRIPT_DATA;return!0}if(this._last_tag_name.toLowerCase()==="style"){this._token_type=cls.MarkupTokenizer.types.STYLE_DATA;this._emitToken(cls.MarkupTokenizer.types.STYLE_DATA,"");this._tokenizer_state_handler=this._tokenizer_state_handlers.STYLE_DATA;return!0}}return!1};this._tokenizer_state_handlers={EOL:function(){if(this._token_buffer.length){this._emitToken(this._token_type,this._token_buffer);this._token_buffer=""}if(this._buffer.charAt(this._current_pos)===a){this._EOL_buffer+="\r";this._current_pos++;if(!this._is_EOF()&&this._buffer.charAt(this._current_pos)==b){this._EOL_buffer+="\n";this._current_pos++}this._emitToken(cls.MarkupTokenizer.types.EOL_DATA,this._EOL_buffer);this._EOL_buffer="";this._tokenizer_state_handler=this._cached_state;return!1}this._EOL_buffer+="\n";this._current_pos++;this._emitToken(cls.MarkupTokenizer.types.EOL_DATA,this._EOL_buffer);this._EOL_buffer="";this._tokenizer_state_handler=this._cached_state;return!1},EOF:function(){this._emitToken(this._token_type,this._token_buffer);this._emitToken(cls.MarkupTokenizer.types.EOF,"");return!1},DATA:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a!=="<"){this._token_buffer+=a;return!1}this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_OPEN;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_OPEN;return!1},TAG_OPEN:function(){if(this._is_EOF())return!1;if(this._is_EOL()){this._tokenizer_state_handler=this._tokenizer_state_handlers.COMMENT_OR_BOGUS_COMMENT_OPEN;return!1}var a=this._buffer.charAt(this._current_pos++);if(a==="!"||a==="?"){this._token_buffer+=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.COMMENT_OR_BOGUS_COMMENT_OPEN;return!1}if(a==="/"){this._token_buffer+=a;this._last_tag_is_close_tag=!0;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";this._token_type=cls.MarkupTokenizer.types.TAG_NAME;this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_NAME;return!1}this._last_tag_is_close_tag=!1;var b=a.toLowerCase().charCodeAt(0);if(b>96&&b<123||a===":"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_NAME;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_NAME;return!1}this._token_type=cls.MarkupTokenizer.types.BOGUS_DATA;this._token_buffer+=a;this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.DATA;this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1},COMMENT_OR_BOGUS_COMMENT_OPEN:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_buffer+=a;var b=this._buffer.substr(this._current_pos-1,2);if(b==="--"){this._token_type=cls.MarkupTokenizer.types.COMMENT;this._tokenizer_state_handler=this._tokenizer_state_handlers.COMMENT;return!1}this._token_type=cls.MarkupTokenizer.types.BOGUS_COMMENT;this._tokenizer_state_handler=this._tokenizer_state_handlers.BOGUS_COMMENT;return!1},COMMENT:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_buffer+=a;var b="-->",c=this._buffer.substr(this._current_pos,b.length);if(c===b){this._current_pos+=3;this._emitToken(this._token_type,this._token_buffer+"-->");this._token_type=cls.MarkupTokenizer.types.DATA;this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}return!1},BOGUS_COMMENT:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_buffer+=a;if(a===">"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.DATA;this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA}return!1},SCRIPT_DATA:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="<"){var b="/script>",c=this._buffer.substr(this._current_pos,b.length);if(c.toLowerCase()===b){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_OPEN;this._token_buffer="<";this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_OPEN;return!1}this._token_buffer+=a;return!1}this._token_buffer+=a;return!1},STYLE_DATA:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="<"){var b="/style>",c=this._buffer.substr(this._current_pos,b.length);if(c.toLowerCase()===b){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_OPEN;this._token_buffer="<";this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_OPEN;return!1}this._token_buffer+=a;return!1}this._token_buffer+=a;return!1},TAG_NAME:function(){if(this._is_EOF())return!1;if(this._is_EOL()){this._last_tag_name=this._token_buffer;this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}var a=this._buffer.charAt(this._current_pos++);this._last_tag_name=this._token_buffer;if(a in this._WHITESPACE){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_WHITESPACE;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}if(a==="/"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;return!1}if(a==="<"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_OPEN;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.TAG_OPEN;return!1}if(a===">"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";if(this._next_data_is_script_or_style())return!1;this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}this._token_buffer+=a;return!1},BEFORE_ATTRIBUTE:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a in this._WHITESPACE){this._token_buffer+=a;return!1}if(a===">"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";if(this._next_data_is_script_or_style())return!1;this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}if(a==="/"){this._emitToken(this._token_type,this._token_buffer);this._tokenizer_state_handler=this._tokenizer_state_handlers.SELF_CLOSING_TAG;this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;return!1}this._tokenizer_state_handler=this._tokenizer_state_handlers.ATTRIBUTE_NAME;this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.ATTRIBUTE_NAME;this._token_buffer=a;return!1},SELF_CLOSING_TAG:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a===">"){this._token_buffer+=a;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}this._token_type=cls.MarkupTokenizer.types.BOGUS_DATA;this._token_buffer+=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1},ATTRIBUTE_NAME:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="="){this._emitToken(this._token_type,this._token_buffer);this._token_buffer=a;this._emitToken(cls.MarkupTokenizer.types.ATTRIBUTE_ASSIGNMENT,this._token_buffer);this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE_VALUE;return!1}if(a==="/"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.SELF_CLOSING_TAG;return!1}if(a===">"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";if(this._next_data_is_script_or_style())return!1;this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}if(a in this._WHITESPACE){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_WHITESPACE;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}this._token_buffer+=a;return!1},BEFORE_ATTRIBUTE_VALUE:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a===">"){this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._emitToken(this._token_type,this._token_buffer);if(this._next_data_is_script_or_style())return!1;this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}this._token_type=cls.MarkupTokenizer.types.ATTRIBUTE_VALUE;this._token_buffer=a;if(a==='"'){this._tokenizer_state_handler=this._tokenizer_state_handlers.ATTRIBUTE_VALUE_DOUBLE_QUOTED;return!1}if(a==="'"){this._tokenizer_state_handler=this._tokenizer_state_handlers.ATTRIBUTE_VALUE_SINGLE_QUOTED;return!1}this._tokenizer_state_handler=this._tokenizer_state_handlers.ATTRIBUTE_VALUE_UNQUOTED;return!1},ATTRIBUTE_VALUE_DOUBLE_QUOTED:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="'"&&this._token_buffer.charAt(this._token_buffer.length-1)==="\\"){this._tmp_buffer+=a;return!1}if(a==='"'){this._token_buffer+=a;this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_WHITESPACE;this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}this._token_buffer+=a;return!1},ATTRIBUTE_VALUE_SINGLE_QUOTED:function(){if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==='"'&&this._token_buffer.charAt(this._token_buffer.length-1)==="\\"){this._tmp_buffer+=a;return!1}if(a==="'"){this._token_buffer+=a;this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_WHITESPACE;this._token_buffer="";this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}this._token_buffer+=a;return!1},ATTRIBUTE_VALUE_UNQUOTED:function(){if(this._is_EOF())return!1;if(this._is_EOL()){this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}var a=this._buffer.charAt(this._current_pos++);if(a in this._WHITESPACE){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_WHITESPACE;this._token_buffer=a;this._tokenizer_state_handler=this._tokenizer_state_handlers.BEFORE_ATTRIBUTE;return!1}if(a===">"){this._emitToken(this._token_type,this._token_buffer);this._token_type=cls.MarkupTokenizer.types.TAG_CLOSE;this._token_buffer=a;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";if(this._next_data_is_script_or_style())return!1;this._token_type=cls.MarkupTokenizer.types.DATA;this._tokenizer_state_handler=this._tokenizer_state_handlers.DATA;return!1}this._token_buffer+=a;return!1}};this._WHITESPACE={" ":1,"\t":1}};cls.MarkupTokenizer.types={UNKNOWN:0,TAG_OPEN:1,TAG_CLOSE:2,TAG_NAME:3,TAG_WHITESPACE:4,ATTRIBUTE_NAME:101,ATTRIBUTE_ASSIGNMENT:102,ATTRIBUTE_VALUE:103,COMMENT:201,DATA:202,ENTITY_REFERENCE:203,SCRIPT_DATA:204,STYLE_DATA:205,RAWTEXT:206,BOGUS_COMMENT:207,BOGUS_DATA:208,DOCTYPE:301,EOL_DATA:500,EOF:999};(function(){const a=cls.MarkupTokenizer.types.UNKNOWN,b=cls.MarkupTokenizer.types.TAG_OPEN,c=cls.MarkupTokenizer.types.TAG_CLOSE,d=cls.MarkupTokenizer.types.TAG_NAME,e=cls.MarkupTokenizer.types.TAG_WHITESPACE,f=cls.MarkupTokenizer.types.ATTRIBUTE_NAME,g=cls.MarkupTokenizer.types.ATTRIBUTE_ASSIGNMENT,h=cls.MarkupTokenizer.types.ATTRIBUTE_VALUE,i=cls.MarkupTokenizer.types.COMMENT,j=cls.MarkupTokenizer.types.DATA,k=cls.MarkupTokenizer.types.SCRIPT_DATA,l=cls.MarkupTokenizer.types.STYLE_DATA,m=cls.MarkupTokenizer.types.BOGUS_COMMENT,n=cls.MarkupTokenizer.types.BOGUS_DATA,o=cls.MarkupTokenizer.types.DOCTYPE,p=cls.MarkupTokenizer.types.EOL_DATA,q=cls.MarkupTokenizer.types.EOF;var r={};r[b]="markup-tag";r[f]="markup-attribute";r[h]="markup-attribute-value";r[i]="markup-comment";r[k]="";r[l]="";r[m]="markup-bogus-comment";r[n]="markup-bogus-comment";r[o]="markup-doctype";var s=function(a,c,d){a.onnewline&&c==p&&a.onnewline();{if(c!=i){if(c==m){a.template.push(a.text);a.text="";a.template.push(["span",d,"class",r[m]]);return}if(c==b){a.template.push(a.text);a.text=d;a.tag_template=["span"];v=u;return}a.text+=d;return}a.template.push(a.text);a
.text="";a.template.push(["span",d,"class",r[i]])}},t=function(a,b,c){if(b==p||b==k)a.text+=c;else{var d=this.templates.highlight_js_source(a.text,a.onnewline,null,["span"]);d.push("class","js-inline-resource");a.template.push(d);a.tag_template=["span"];a.text=c;v=u;return}},u=function(a,d,e){a.onnewline&&d==p&&a.onnewline();{if(d!=c){if(d==b){a.template.push(a.tag_template);a.tag_template=["span"];a.text=e;return}if(d==f||d==h){a.tag_template.push(a.text);a.text="";a.tag_template.push(["span",e,"class",r[d]]);return}if(d==q){a.template.push(["span",a.text,"class",r[b]]);a.text="";context_tag_template=null;v=s;return}a.text+=e;return}a.text+=e;a.tag_template.push(a.text,"class",r[b]);a.text="";a.template.push(a.tag_template);a.tag_template=[];v=s}},v=s;this.highlight_markup=function(a,b){var c=new cls.MarkupTokenizer;v=s;var d={template:["pre"],text:"",onnewline:b,tag_template:null,self:this};c.tokenize(a,function(a,b){v(d,a,b)});d.text&&d.template.push(d.text);return d.template}}).apply(window.templates||(window.templates={}));window.cls=window.cls||{};cls.CSSTokenizer=function(){const a="\r",b="\n",c="\\",d="{",e="}",f=/\\[0-9a-f]{1,6}/i;this._EOL_buffer="";this._buffer="";this._current_pos=0;this._escape_sequence="";this.ontoken=function(){};this._token_type=cls.CSSTokenizer.types.WHITESPACE;this._token_buffer="";this._sq_brackets=[];this._state_handler={};this._state_cache=[];this._quote_literal="";this.normalize_token=function(a){return a.replace(f,function(a,b,c){return String.fromCharCode(parseInt(b,16))})};this.tokenize=function(a,b){this._state_handler=this._state_handlers.BEFORE_RULE;this._buffer=a;this._emitToken=b;while(this._state_handler!==this._state_handlers.EOF)this._state_handler.apply(this);this._state_handlers.EOF.apply(this)};this._init_state=function(){this._handle_escape_status();if(this._is_EOF())return!0;if(this._is_EOL())return!0;if(this._is_string())return!0;if(this._is_comment())return!0;return!1};this._handle_escape_status=function(){var a=this._buffer.charAt(this._current_pos);{if(a!=="\\"){if(a in this._WHITESPACE){this._escape_sequence="";return}if(a in this._EOL_CHARS)return;if(a in this._HEX_NUMBERS&&this._escape_sequence.length&&this._escape_sequence.length<7){this._escape_sequence+=a;return}this._escape_sequence="";return}if(this._escape_sequence==="\\"){this._escape_sequence="";return}this._escape_sequence=a}};this._is_string=function(){var a=this._buffer.charAt(this._current_pos);if(a in this._QUOTES){this._state_cache.unshift(this._state_handler);this._quote_literal=a;this._state_handler=this._state_handlers.QUOTED_STRING;this._token_buffer+=a;this._current_pos++;return!0}return!1};this._is_comment=function(){var a=this._buffer.charAt(this._current_pos);if(this._quote_literal)return!1;if(a==="/"){var b=this._buffer.charAt(this._current_pos+1);if(b&&b==="*"){this._state_cache.unshift(this._state_handler);this._current_pos+=2;this._emitToken(this._token_type,this._token_buffer);this._token_buffer="/*";this._state_handler=this._state_handlers.COMMENT;return!0}}return!1};this._is_EOF=function(){if(this._current_pos>=this._buffer.length){this._state_handler=this._state_handlers.EOF;return!0}return!1};this._is_EOL=function(){var c=this._buffer.charAt(this._current_pos);if(c===a||c===b){this._state_cache.unshift(this._state_handler);this._state_handler=this._state_handlers.EOL;return!0}return!1};this._WHITESPACE={" ":1,"\t":1};this._HEX_NUMBERS={1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,0:1,a:1,b:1,c:1,d:1,e:1,f:1,A:1,B:1,C:1,D:1,E:1,F:1};this._QUOTES={'"':1,"'":1};this._EOL_CHARS={"\n":1,"\r":1};this._PUNCTUATION={".":1,",":1,";":1,":":1};this._BRACES={"(":1,")":1,"{":1,"}":1};this._state_handlers={EOF:function(){this._emitToken(this._token_type,this._token_buffer);this._emitToken(999,"");return!1},EOL:function(){this._handle_escape_status();var c=this._buffer.charAt(this._current_pos);if(this._token_buffer.length){this._emitToken(this._token_type,this._token_buffer);this._token_buffer=""}if(c===a){this._EOL_buffer+="\r";this._current_pos++;if(!this._is_EOF()&&this._buffer.charAt(this._current_pos)==b){this._EOL_buffer+=b;this._current_pos++}this._emitToken(cls.CSSTokenizer.types.EOL_DATA,this._EOL_buffer);this._EOL_buffer="";this._state_handler=this._state_cache.shift();return!1}this._EOL_buffer+=b;this._current_pos++;if(!this._escape_sequence&&this._quote_literal){this._quote_literal="";this._state_cache.shift()}this._emitToken(cls.CSSTokenizer.types.EOL_DATA,b);this._EOL_buffer="";this._state_handler=this._state_cache.shift();return!1},COMMENT:function(){this._token_type=cls.CSSTokenizer.types.COMMENT;if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="*"&&this._buffer.charAt(this._current_pos)=="/"){this._current_pos++;this._token_buffer+="*/";this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";this._state_handler=this._state_cache.shift();return!1}this._token_buffer+=a;return!1},BEFORE_RULE:function(){this._token_type=cls.CSSTokenizer.types.WHITESPACE;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a in this._WHITESPACE){this._token_buffer+=a;return!1}this._emitToken(this._token_type,this._token_buffer);this._token_buffer=a;if(a==="@"){this._state_handler=this._state_handlers.BEFORE_AT_RULE;return!1}if(a==="{"){this._state_handler=this._state_handlers.PROPERTY;this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_START,"{");this._token_buffer="";return!1}this._state_handler=this._state_handlers.SELECTOR;return!1},SELECTOR:function(){this._token_type=cls.CSSTokenizer.types.SELECTOR;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="{"){this._emitToken(this._token_type,this._token_buffer);this._state_handler=this._state_handlers.BEFORE_PROPERTY;this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_START,"{");this._token_buffer="";return!1}this._token_buffer+=a;return!1},BEFORE_PROPERTY:function(){if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a in this._WHITESPACE){this._token_buffer+=a;return!1}if(a===";"){this._emitToken(cls.CSSTokenizer.types.DECLARATION_TERMINATOR,a);this._token_buffer="";return!1}if(a===":"){this._emitToken(cls.CSSTokenizer.types.PROPERTY_SEPARATOR,a);this._token_buffer="";this._state_handler=this._state_handlers.PROPERTY_VALUE;return!1}if(a==="}"){this._emitToken(cls.CSSTokenizer.types.WHITESPACE,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_END,a);this._token_buffer="";this._state_handler=this._state_handlers.BEFORE_RULE;return!1}this._emitToken(cls.CSSTokenizer.types.WHITESPACE,this._token_buffer);this._token_buffer=a;this._state_handler=this._state_handlers.PROPERTY;return!1},PROPERTY:function(){this._token_type=cls.CSSTokenizer.types.PROPERTY;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a==="}"){this._emitToken(cls.CSSTokenizer.types.PROPERTY,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_END,"}");this._token_buffer="";this._state_handler=this._state_handlers.BEFORE_RULE;return!1}if(a==";"){this._emitToken(cls.CSSTokenizer.types.PROPERTY,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_TERMINATOR,";");this._token_buffer="";this._state_handler==this._state_handlers.BEFORE_PROPERTY;return!1}if(a!==":"){this._token_buffer+=a;return!1}this._emitToken(cls.CSSTokenizer.types.PROPERTY,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.PROPERTY_SEPARATOR,":");this._token_buffer="";this._state_handler=this._state_handlers.PROPERTY_VALUE;return!1},PROPERTY_VALUE:function(){this._token_type=cls.CSSTokenizer.types.PROPERTY_VALUE;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a===";"){this._emitToken(this._token_type,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_TERMINATOR,";");this._token_buffer="";this._state_handler=this._state_handlers.BEFORE_PROPERTY;return!1}if(a==="}"){this._emitToken(this.token_type,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_END,"}");this._token_buffer="";this._state_handler=this._state_handlers.BEFORE_RULE;return!1}this._token_buffer+=a;return!1},BEFORE_AT_RULE:function(){this._token_type=cls.CSSTokenizer.types.AT_RULE;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos),b="charset",c=this._buffer.substr(this._current_pos,b.length);if(b==c){this._current_pos+=b.length;this._token_buffer+=b;this._state_handler=this._state_handlers.CHARSET_RULE;return!1}this._current_pos++;this._token_buffer+=a;this._state_handler=this._state_handlers.AT_RULE;return!1},CHARSET_RULE:function(){this._token_type=cls.CSSTokenizer.types.AT_RULE;if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_buffer+=a;if(a===";"){this._emitToken(this._token_type,this._token_buffer);this._state_handler=this._state_handlers.BEFORE_RULE;this._token_buffer="";return!1}return!1},AT_RULE:function(){if(this._init_state())return!1;var a=this._buffer.charAt(this._current_pos++);if(a===";"){this._emitToken(cls.CSSTokenizer.types.AT_RULE,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_TERMINATOR,";");this._state_handler=this._state_handlers.BEFORE_RULE;this._token_buffer="";return!1}if(a==="{"){this._emitToken(cls.CSSTokenizer.types.AT_RULE,this._token_buffer);this._emitToken(cls.CSSTokenizer.types.DECLARATION_BLOCK_START,"{");this.normalize_token(this._token_buffer).trim().toLowerCase()=="@font-face"?this._state_handler=this._state_handlers.BEFORE_PROPERTY:this._state_handler=this._state_handlers.BEFORE_RULE;this._token_buffer="";return!1}this._token_buffer+=a;return!1},QUOTED_STRING:function(){this._handle_escape_status();if(this._is_EOF())return!1;if(this._is_EOL())return!1;var a=this._buffer.charAt(this._current_pos++);if(a===this._quote_literal){this._state_handler=this._state_cache.shift();this._token_buffer+=a;this._quote_literal="";return!1}this._token_buffer+=a;return!1}}};cls.CSSTokenizer.types={SELECTOR:1,AT_RULE:2,WHITESPACE:4,PROPERTY:101,PROPERTY_SEPARATOR:102,PROPERTY_VALUE:103,DECLARATION_TERMINATOR:104,DECLARATION_BLOCK_START:105,DECLARATION_BLOCK_END:106,COMMENT:201,SGML_COMMENT_DELIM:202,INVALID:401,INVALID_SELECTOR:402,INVALID_PROPERTY:403,INVALID_PROPERTY_VALUE:404,EOL_DATA:500,EOF:999};(function(){const a=cls.CSSTokenizer.types.AT_RULE,b=cls.CSSTokenizer.types.SELECTOR,c=cls.CSSTokenizer.types.WHITESPACE,d=cls.CSSTokenizer.types.PROPERTY,e=cls.CSSTokenizer.types.PROPERTY_SEPARATOR,f=cls.CSSTokenizer.types.PROPERTY_VALUE,g=cls.CSSTokenizer.types.DECLARATION_TERMINATOR,h=cls.CSSTokenizer.types.DECLARATION_BLOCK_START,i=cls.CSSTokenizer.types.DECLARATION_BLOCK_END,j=cls.CSSTokenizer.types.EOL_DATA,k=cls.CSSTokenizer.types.COMMENT,l=cls.CSSTokenizer.types.EOF;var m=[];m[a]="css-at-rule";m[b]="css-selector";m[d]="css-property";m[e]="css-property-separator";m[f]="css-property-value";m[h]="css-declaration";m[i]="css-declaration";m[g]="declaration-terminator";m[k]="comment";const n=/\\[0-9a-f]{1,6}/i;var o=function(a){return a.replace(n,function(a,b,c){return String.fromCharCode(parseInt(b,16))})},p=function(c,e,g){if(!!g){c.onnewline&&e==j&&c.onnewline();switch(e){case a:case d:case f:case b:case k:c.template.push(c.text);c.text="";c.template.push(["span",g,"class",m[e]]);break;default:c.text+=g}return}};this.highlight_css=function(a,b){var c=new cls.CSSTokenizer,d={template:["pre"],text:"",onnewline:b,tag_template:null,self:this};c.tokenize(a,function(a,b){p(d,a,b)});d.text&&d.template.push(d.text);return d.template}}).apply(window.templates||(window.templates={}));window.cls=window.cls||{};cls.HTTPHeaderTokenizer=function(){this._buffer="";this._current_pos=0;this._token_buffer="";this._state_handler={}};cls.HTTPHeaderTokenizerPrototype=function(){var a=":",b={"\t":1," ":1},c={"\r":1,"\n":1};this.tokenize=function(a,b){this._state_handler=this._state_handlers.FIRST_LINE_PART;this._buffer=a;this._emitToken=b;while(this._state_handler!==this._state_handlers.EOF)this._state_handler.apply(this);this._state_handlers.EOF.apply(this)};this._state_handlers={FIRST_LINE_PART:function(){if(this._is_EOF())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_type=cls.HTTPHeaderTokenizer.types.FIRST_LINE_PART;if(a in b){this._emitToken(this._token_type,this._token_buffer);this._token_buffer=""}else if(a in c){this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";this._state_handler=this._state_handlers.NAME}this._token_buffer+=a},NAME:function(){if(this._is_EOF())return!1;var b=this._buffer.charAt(this._current_pos++);this._token_type=cls.HTTPHeaderTokenizer.types.NAME;if(b===a){this._emitToken(this._token_type,this._token_buffer);this._emitToken(cls.HTTPHeaderTokenizer.types.PUNCTUATOR,b);this._token_buffer="";this._state_handler=this._state_handlers.VALUE;return!1}this._token_buffer+=b},VALUE:function(){if(this._is_EOF())return!1;var a=this._buffer.charAt(this._current_pos++);this._token_type=cls.HTTPHeaderTokenizer.types.VALUE;if(a in c&&!(this._buffer.charAt(this._current_pos)in b)){this._emitToken(this._token_type,this._token_buffer);this._token_buffer="";this._state_handler=this._state_handlers.NAME}this._token_buffer+=a},EOF:function(){this._emitToken(this._token_type,this._token_buffer)}};this._is_EOF=function(){if(this._current_pos>=this._buffer.length){this._state_handler=this._state_handlers.EOF;return!0}return!1}};cls.HTTPHeaderTokenizer.prototype=new cls.HTTPHeaderTokenizerPrototype;cls.HTTPHeaderTokenizer.types={FIRST_LINE_PART:1,NAME:2,VALUE:3,PUNCTUATOR:4};(function(){var a=cls.HTTPHeaderTokenizer.types,b=cls.HTTPHeaderTokenizer.classnames={};b[a.FIRST_LINE_PART]="first_line_part";b[a.NAME]="name";b[a.VALUE]="value";b[a.PUNCTUATOR]="punctuator"})();cls.HTTPHeaderTokenizer.TokenStateholder=function(a){this.data_spec_firstline_tokens=a;this.firstline_tokens=0};var ListTextSearch=function(){const a=50;var b=this,c="",d=[],e=-1,f=null,g=null,h=new Timeouts,i={},j="",k=null,l={},m="";this.search=function(a){var b=null,e=null,g=0,h="";if(a!=c){l[j]&&delete l[j];d=[];i[j]=c=a;b=f.getElementsByTagName("start-search-scope")[0];while(b&&(b=b.nextSibling)&&b.nodeName.toLowerCase()!="end-search-scope"){h=b.getElementsByTagName("key")[0].textContent.indexOf(c)==-1&&"none"||"";b.style.display=h;h||(d[d.length]=b);g=parseInt(b.getAttribute("depth"));e=b;while((e=e.nextSibling)&&e.nodeName.toLowerCase()!="end-search-scope"&&parseInt(b.getAttribute("depth"))<g){b=e;b.style.display=h}}}};this.searchDelayed=function(b){h.set(this.search,a,b)};var n=null,o=function(a,b,c){var d=n&&n.parentNode||f.getElementsByTagName(a)[0],e=0,g=0,h=0,i=0;while((d=d[b])&&(d.nodeName.toLowerCase()!="item"||d.style.display=="none"||!d.firstChild||!/input/i.test(d.firstChild.nodeName)));if(d&&d.nodeName.toLowerCase()=="item"){n&&n.parentNode.style.removeProperty("background-color");n=d.firstChild;d.style.backgroundColor=m;e=f.scrollTop;g=e+f.offsetHeight;h=d.offsetTop;i=h+d.offsetHeight;i>g?f.scrollTop+=50+i-g:h<e&&(f.scrollTop+=h-e-50)}else f.scrollTop+=c*50};this.handleKey=function(a,b){a.stopPropagation();a.preventDefault();switch(a.keyCode){case 40:o("start-search-scope","nextSibling",1);break;case 38:o("end-search-scope","previousSibling",-1);break;case 13:n&&n.click();break;default:if(n){n.parentNode.removeClass("selected");n=null}}};this.handleEnterKey=function(){switch(event.keyCode){case 13:if(d.length==1){var a=d[0].getElementsByTagName("input")[0];a&&a.click()}break;case 8:if(g&&!g.value){var b=p();b&&(b=b.getElementsByTagName("input")[0])&&(l[j]?b.click():l[j]=1)}}};var p=function(a){var b=null,c=null,d=0;if(f&&k){b=f.getElementsByTagName("item");for(;c=b[d];d++)if(c.getAttribute("obj-id")==k.obj_id&&c.getAttribute("depth")==k.depth&&c.getElementsByTagName("key")[0].textContent==k.key)break}return c};this.onNewContext=function(a){k=a;j=a.rt_id+"."+a.obj_id+"."+a.depth;g&&(i[j]?g.value=i[j]:g.value="")};this.setInput=function(a){g=a};this.setContainer=function(a){if(f!=a){f=a;m||(m=document.styleSheets.getPropertyValue("item.selected","background-color"))}};this.cleanup=function(){j="";k=null;d=[];g=null;f=null}},cls=window.cls||(window.cls={});window.cls.Helpers=function(){var a="selected";this.setSelected=function(b){var c=b.get_ancestor("container")||b.parentNode,d=c.querySelector("."+a);d&&d.removeClass(a);b.addClass(a)};this.get_script_name=function(a){var b=runtimes.getScript(a),c=b&&runtimes.getRuntime(b.runtime_id);if(!b||!c)return null;return b.uri||c.uri};this.basename=function(a){const b=40;if(!a)return"";if(a.startswith("data:")){var c=a.slice(0,b);return a.length>b?c+"…":c}var d=a.indexOf("?"),e=a.indexOf("#");e!=-1&&(d=Math.min(d,e));d!=-1&&(a=a.slice(0,d));var f=a.lastIndexOf("/")+1;a.slice(-1)=="/"&&(f=a.slice(0,a.lastIndexOf("/")).lastIndexOf("/")+1);return a.slice(f)};this.shortenURI=function(a){var b=a,c="",d=40;if(b&&b.length>d){c=a;b=a.split("?")[0];if(b.length>d){var e=/\/([^/]+)$/.exec(b);e&&(b=e[1])}}return{uri:b,title:c}};this.resolveURLS=function(a,b){if(b.trim().startswith("data:"))return b;return/^.{4,5}:\/\//.test(b)&&b||/^\//.test(b)&&/^.{4,5}:\/\/[^/]*/.exec(a)[0]+b||a.replace(/\?.*$/,"").replace(/#.*$/,"").replace(/\/[^/]*$/,"/")+b};this.escapeTextHtml=function(){var a=/&/g,b=/</g;return function(c){return c?c.replace(a,"&amp;").replace(b,"&lt;"):c}}();this.escapeAttributeHtml=function(){var a=/&/g,b=/</g,c=/"/g,d=/'/g;return function(e){return e.replace(a,"&amp;").replace(b,"&lt;").replace(c,"&quot;").replace(d,"&#x27;")}}();this.escape_input=function(){var a=[{regexp:/\\/g,replacement:"\\\\"},{regexp:/"/g,replacement:'\\"'},{regexp:/'/g,replacement:"\\'"},{regexp:/\n/g,replacement:"\\n"},{regexp:/\r/g,replacement:"\\r"},{regexp:/\u2028/g,replacement:"\\u2028"},{regexp:/\u2029/g,replacement:"\\u2029"}];return function(b){for(var c=0,d;d=a[c];c++)b=b.replace(d.regexp,d.replacement);return b}}();this.escape_whitespace=function(){var a={"\t":"\\t","":"\\v","\f":"\\f","\r":"\\r","\n":"\\n"};return function(b){var c="";for(var d=0,e;e=b[d];d++)c+=a[e]||"\\u"+e.charCodeAt(0).toString(16).zfill(4);return c}}();this.unescape_whitespace=function(){var a=/\\[tvfrn]|\\u[0-9A-fa-f]{4}/g,b={"\\t":"\t","\\v":"","\\f":"\f","\\r":"\r","\\n":"\n"};return function(c){var d=null,e="";while(d=a.exec(c))e+=b[d[0]]||String.fromCharCode(parseInt(d[0].slice(2).toString(10),16));return e}}();this.setCookie=function(a,b,c){document.cookie=a+"="+encodeURIComponent(b)+"; expires="+(new Date((new Date).getTime()+(c||31104e6))).toGMTString()+"; path=/"};this.getCookie=function(a){var b=(new RegExp(a+"=([^;]*)")).exec(document.cookie);return b&&decodeURIComponent(b[1])};this.breadcrumbSpotlight=function(a){var b=parseInt(a.target.getAttribute("obj-id"));b&&/^breadcrumb$/i.test(a.target.parentNode.nodeName)&&window.settings.dom.get("highlight-on-hover")&&hostspotlighter.soft_spotlight(b)};this.breadcrumbClearSpotlight=function(a){var b=a.target.getAttribute("obj-id");!b};this.service_dashed_name=function(a){for(var b="",c=0,d="";b=a[c];c++)d+=/[A-Z]/.test(b)&&(c?"-":"")+b.toLowerCase()||b;return d};this.service_class_name=window.app&&window.app.helpers.dash_to_class_name;this.scroll_dom_target_into_view=function(){var a=document.getElementById("target-element"),b=a;while(b&&!/container/i.test(b.nodeName))b=b.parentElement;if(a&&b){b.scrollTop-=b.getBoundingClientRect().top-a.getBoundingClientRect().top+Math.min(b.offsetHeight*.5,100);b.scrollLeft=0}return a&&b};this.copy_object=function(a){return JSON.parse(JSON.stringify(a))};this.capitalize_first_char=function(a){return a.replace(/(?:^| +)(.)/g,function(a){return a.toUpperCase()})};Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(o)=="[object Array]"});this.pretty_print_number=function(a){var b=String(a),c=b.split("."),d=c[0].split(""),e=c[1],f="";while(d.length>3)f=","+d.splice(d.length-3,3).join("")+f;d.length&&(f=d.join("")+f);e!=null&&(f=f+"."+e);return f};this.crispify_svg_value=function(a){return Math.floor(a)+.5};this.get_color_in_notation=function(a,b){if(!!a){a.alpha<1&&(b=({hhex:"rgba",rgb:"rgba",hsl:"hsla"})[b]||"rgba");return a[b]}};this.prop=function(){var a={};return function(b){return a[b]||(a[b]=function(a){return a[b]})}}();this.eq=function(a,b){return function(c){return c[a]===b}}};cls.Helpers.shortcut_search_cb=function(a,b,c){switch(a){case"highlight-next-match":this.highlight_next();return!1;case"highlight-previous-match":this.highlight_previous();return!1}};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].HostTabs=function(){var a=this,b="",c=[],d={},e="",f={},g={},h={},i={},j={},k=1,l=[],m={},n=function(a){if(a.profile==window.app.profiles.DEFAULT){c=[];b=0;d={};u()}},o=function(){var a=k;k++;j[a]=1;return a},p=function(a,b,c){var d="";for(d in j)if(h[d]==a&&f[d]==b&&g[d]==c)return!0;return!1},q=function(a,b){var c=[],d="";for(d in j)f[d]==a&&g[d]==b&&(c[c.length]=d);return c},r=function(){var a="",b=0,d="";for(;a=c[b];b++)for(d in i)i[d]==a&&v(d)};this.setActiveTab=function(a){if(!b||b!=a){a&&r();b=a;runtimes.setActiveWindowId(a);c=runtimes.getRuntimeIdsFromWindow(a);this.post_messages()}};this._has_changed=function(a,b){for(var c=0;c<a.length&&a[c]==b[c];c++);return c!=a.length||c!=b.length};this.updateActiveTab=function(){var a=runtimes.getRuntimeIdsFromWindow(b);if(this._has_changed(a,c)){c=a;u();for(var d=null,e=0;d=l[e];e++)t(d.type,d.cb,d.prevent_default,d.stop_propagation);this.post_messages()}};this.post_messages=function(){messages.post("active-tab",{activeTab:c,runtimes_with_dom:c.filter(function(a){return window.runtimes.runtime_has_dom(a)})});if(c.length&&c[0]!=e){e=c[0];messages.post("new-top-runtime",{top_runtime_id:e})}};this.getActiveTab=function(a){return c.slice()};this.is_runtime_of_active_tab=function(a){return c.indexOf(a)!=-1};this.isMultiRuntime=function(){return c.length>1};this.handleEventHandler=function(a,b){window.__times_spotlight__&&(window.__times_spotlight__[0]=(new Date).getTime());const c=0,d=1,e=2;b[d]in g&&g[b[d]]({object_id:b[c],"handler-id":b[d],"event-type":b[e],runtime_id:i[b[d]]})};var s=function(a,b,e){const j=0,k=3,l=0;var n="",q=null,r=null,s=null,t=0,v=null,w=0,x=0;if(b[j]=="completed"){x=b[k][l];d[e]=x;for(;v=m[e][w];w++){n=v[1];q=v[2];r=v[3];s=v[4];if(!p(x,n,q)){t=o();h[t]=x;f[t]=n;g[t]=q;i[t]=e;services["ecmascript-debugger"].requestAddEventHandler(33,[t,x,"",n,r&&1||0,s&&1||0])}}}else{u();c.contains(e)&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Error in host_tabs handleAddEventWithDocument")}},t=function(a,b,e,j){var k=window.services["ecmascript-debugger"],l="",n=0,q="";for(;l=c[n];n++){if(!window.runtimes.runtime_has_dom(l))continue;if(d[l]&&!p(d[l],a,b)){q=o();h[q]=d[l];f[q]=a;g[q]=b;i[q]=l;var r=[q,d[l],"",a,e&&1||0,j&&1||0];k.requestAddEventHandler(cls.TagManager.IGNORE_RESPONSE,r)}else if(m[l])m[l].push([l,a,b,e,j]);else{m[l]=[[l,a,b,e,j]];var t=tagManager.set_callback(null,s,[l]);k.requestEval(t,[l,0,0,"return window.document"])}}},u=function(){var a=null,b=0,d=0,e=0,f=null,g="",h="",j="";for(;a=l[b];b++){f=q(a.type,a.cb);for(d=0;g=f[d];d++){j=i[g];for(e=0;(h=c[e])&&j!=h;e++);h||v(g)}}},v=function(a){services["ecmascript-debugger"].requestRemoveEventHandler(0,[parseInt(a)]);delete h[a];delete f[a];delete g[a];delete i[a];delete j[a]};this.bind=function(b){b.handleAddEventHandler=b.handleRemoveEventHandler=function(a,b){};b.onHandleEvent=function(b,c){a.handleEventHandler(b,c)}};window.messages.addListener("profile-disabled",n);this.activeTab=new function(){var a=this;this.addEventListener=function(a,b,c,d){c!==!1&&(c=!0);d!==!1&&(d=!0);l[l.length]={type:a,cb:b,prevent_default:c,stop_propagation:d};t(a,b,c,d)};this.removeEventListener=function(a,b){var c=q(a,b),d="",e=0,f=null;for(;d=c[e];e++)v(d);for(e=0;e<l.length;e++){f=l[e];if(f&&f.type==a&&f.cb==b){l.splice(e,1);e--}}}}};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.14"]||(cls.EcmascriptDebugger["6.14"]={});cls.EcmascriptDebugger["6.14"].BacktraceFrameList=function(a){this.frameList=(a[0]||[]).map(function(a){return new cls.EcmascriptDebugger["6.14"].BacktraceFrame(a)});this.returnValueList=(a[1]||[]).map(function(a){return new cls.EcmascriptDebugger["6.14"].ReturnValue(a)})};cls.EcmascriptDebugger["6.14"].BacktraceFrame=function(a){this.functionID=a[0];this.argumentObject=a[1];this.variableObject=a[2];this.thisObject=a[3];this.objectValue=a[4]?new cls.EcmascriptDebugger["6.14"].ObjectValue(a[4],this):null;this.scriptID=a[5];this.lineNumber=a[6];this.scopeList=a[7]||[];this.argumentValue=a[8]?new cls.EcmascriptDebugger["6.14"].ObjectValue(a[8],this):null;this.thisValue=a[9]?new cls.EcmascriptDebugger["6.14"].ObjectValue(a[9],this):null};cls.EcmascriptDebugger["6.14"].ObjectValue=function(a){this.objectID=a[0];this.isCallable=a[1];this.type=a[2];this.prototypeID=a[3];this.className=a[4];this.functionName=a[5]};cls.EcmascriptDebugger["6.14"].ReturnValue=function(a){this.value=a[0]?new cls.EcmascriptDebugger["6.14"].Value(a[0],this):null;this.functionFrom=a[1]?new cls.EcmascriptDebugger["6.14"].ObjectValue(a[1],this):null;this.positionFrom=a[2]?new cls.EcmascriptDebugger["6.14"].Position(a[2],this):null;this.positionTo=a[3]?new cls.EcmascriptDebugger["6.14"].Position(a[3],this):null};cls.EcmascriptDebugger["6.14"].Value=function(a){this.type=a[0];this.number=a[1];this.str=a[2];this.object=a[3]?new cls.EcmascriptDebugger["6.14"].ObjectValue(a[3],this):null};cls.EcmascriptDebugger["6.14"].Value.Type={0:"UNDEFINED",1:"NULL",2:"TRUE",3:"FALSE",4:"NAN",5:"PLUS_INFINITY",6:"MINUS_INFINITY",7:"NUMBER",8:"STRING",9:"OBJECT"};cls.EcmascriptDebugger["6.14"].Position=function(a){this.scriptID=a[0];this.lineNumber=a[1]};(function(){var a=this,b=30,c=0,d=1,e=2,f=3,g=4,h=5,i=6,j=7,k=8,l=9,m={};m[c]="undefined";m[d]="null";m[e]="boolean";m[f]="boolean";m[g]="number";m[h]="number";m[i]="number";m[j]="number";m[k]="string";var n={};n[e]="true";n[f]="false";n[g]="NaN";n[h]="Infinity";n[i]="-Infinity";this.hello=function(a){var b=["ul"],c="",d={stpVersion:ui_strings.S_TEXT_ENVIRONMENT_PROTOCOL_VERSION,coreVersion:"Core Version",operatingSystem:ui_strings.S_TEXT_ENVIRONMENT_OPERATING_SYSTEM,platform:ui_strings.S_TEXT_ENVIRONMENT_PLATFORM,userAgent:ui_strings.S_TEXT_ENVIRONMENT_USER_AGENT};for(c in d)b[b.length]=["li",d[c]+": "+a[c]];ini.revision_number.indexOf("$")!=-1&&ini.mercurial_revision&&(ini.revision_number=ini.mercurial_revision);b[b.length]=["li",ui_strings.S_TEXT_ENVIRONMENT_DRAGONFLY_VERSION+": "+ini.dragonfly_version];b[b.length]=["li",ui_strings.S_TEXT_ENVIRONMENT_REVISION_NUMBER+": "+ini.revision_number];b.push("class","selectable");return["div",b,"class","padding"]};this.runtime_dropdown=function(a){return a.map(this.runtime,this)};this.runtime=function(a){var b=["cst-option",a.title,"rt-id",String(a.id)];a.title_attr&&b.push("title",a.title_attr);var c=[b];a.extensions&&a.extensions.length&&c.push(["cst-group",a.extensions.map(this.runtime,this)]);return c};this.script_dropdown=function(a,b,c,d){var e=this.script_dropdown_options(a,b,c,d);return[["div",["div",["input","type","text","handler",a+"-filter","shortcuts",a+"-filter","class","js-dd-filter"],"class","js-dd-filter-container"],["span","class","js-dd-clear-filter","handler","js-dd-clear-filter"],"class","js-dd-filter-bar"],e]};this.script_dropdown_options=function(a,b,c,d,e){var f=["div"];if(b&&b.length)for(var g=0,h;h=b[g];g++)f.push(this.runtime_script(h,c,d,e));f.push("class","js-dd-script-list","handler","js-dd-move-highlight");return f};this.runtime_script=function(a,b,c,d){var e=[],f=new HashMap,g=[],h=["cst-title",a.title],i=a.type=="extension"?"js-dd-ext-runtime":"js-dd-runtime";h.push("class",i+(a.selected?" selected-runtime":""));a.title!=a.uri&&h.push("title",a.uri);a.scripts.forEach(function(e){var h=this.script_option(e,b,c,d);if(h)if(e.script_type==="linked"){var i=this._uri_path(a,e,d);f[i]?f[i].push(h):f[i]=[h]}else g.push(h)},this);var j=[];Object.getOwnPropertyNames(f).sort().forEach(function(a){var b=["div"];a!="./"&&b.push(["cst-title",a,"class","js-dd-dir-path"]);b.extend(f[a]);b.push("class","js-dd-group js-dd-s-scope");e.push(b)});if(g.length)if(a.type=="extension")e.push(["div",g,"class","js-dd-group js-dd-s-scope"]);else{var k=["div"];k.push(["cst-title",ui_strings.S_SCRIPT_SELECT_SECTION_INLINE_AND_EVALS,"class","js-dd-dir-path"]);k.extend(g);k.push("class","js-dd-group");e.push(k)}if(a.type!="extension"){if(a.browser_js||a.user_js_s&&a.user_js_s.length){var l=[],m=null;if(a.browser_js){m=this.script_option(a.browser_js,b,c,d);m&&l.push(m)}if(a.user_js_s)for(var n=0,o;o=a.user_js_s[n];n++){m=this.script_option(o,b,c,d);m&&l.push(m)}l.length&&e.push(["div",["cst-title",ui_strings.S_SCRIPT_SELECT_SECTION_BROWSER_AND_USER_JS,"class","js-dd-dir-path"],["div",l,"class","js-dd-s-scope"],"class","js-dd-group"])}if(a.extensions)for(var n=0,p;p=a.extensions[n];n++){var q=this.runtime_script(p,b,c,d);q.length&&e.push(q)}}e.length&&e.unshift(h);return e};this._uri_path=function(a,b,c){var d=b.abs_dir;b.abs_dir.indexOf(a.abs_dir)==0&&(!c||!a.abs_dir.contains(c))?d="./"+b.abs_dir.slice(a.abs_dir.length):b.origin==a.origin&&(!c||!b.origin.contains(c))&&(d=b.dir_pathname);return d};this._script_type_map={inline:ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_INLINE,linked:ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_LINKED,unknown:ui_strings.S_TEXT_ECMA_SCRIPT_TYPE_UNKNOWN};this.script_option=function(a,b,c,d){var e=this._script_type_map[a.script_type]||a.script_type,f=null;if(d&&!(a.uri&&a.uri.toLowerCase().contains(d)||!a.uri&&e.toLowerCase().contains(d)))return f;if(a.uri){var g=a.script_type=="linked";f=["cst-option",["span",a.filename||a.uri,"data-tooltip",g&&"js-script-select","data-tooltip-text",g&&a.uri]];a.search&&f.push(["span",a.search,"class","js-dd-scr-query"]);a.hash&&f.push(["span",a.query,"class","js-dd-scr-hash"]);f.push("script-id",a.script_id.toString())}else{var h=a.script_data.slice(0,360).replace(/\s+/g," ").slice(0,120);f=["cst-option",["span",e.capitalize(!0),"class","js-dd-s-scope"]," – ",["code",h,"class","code-snippet"],"script-id",a.script_id.toString()]}var i=a.script_id==c?"selected":"";b==a.script_id&&(i+=(i?" ":"")+"stopped");i&&f.push("class",i);return f};this.runtime_dom=function(a){var b=a.title||helpers.shortenURI(a.uri).uri;return["cst-option",a.title||a.uri,"runtime-id",a.runtime_id.toString()].concat(dom_data.getDataRuntimeId()==a.runtime_id?["class","selected"]:[]).concat(b!=a.uri?["title",a.uri]:[])};this.frame=function(a,b){var c=a.script_id&&runtimes.getScript(a.script_id)?runtimes.getScript(a.script_id).uri||runtimes.getRuntime(a.rt_id).uri:null;return["li",["span",a.fn_name,"class","scope-name"],["span"," "+(c&&a.line?helpers.basename(c)+":"+a.line:""),"class","file-line"],"handler","show-frame","ref-id",String(a.id),"title",c].concat(b?["class","selected"]:[])};this.return_values=function(a,b){return["ol",a.return_value_list.map(function(c){return this.return_value(c,a.rt_id,b)},this),"class","return-values"]};this.return_value=function(a,o,p){var q=[],r="",s=m[a.value.type];switch(a.value.type){case c:case d:s.toLowerCase().contains(p)&&q.push(["item",["value",s,"class",s]]);break;case e:case f:case g:case h:case i:case j:r=a.value.type==j?String(a.value.number):n[a.value.type];r.toLowerCase().contains(p)&&q.push(["item",["value",r],"class",s]);break;case k:r=a.value.str;if(r.toLowerCase().contains(p)){var t=r.length>b?r.slice(0,b)+"…":null;t?q.push(["item",["input","type","button","handler","expand-value","class","folder-key"],["value",'"'+t+'"',"class",s,"data-value",'"'+r+'"']]):q.push(["item",["value",'"'+r+'"',"class",s]])}break;case l:var u=a.value.object,v=u.className==="Function"&&!u.functionName?ui_strings.S_ANONYMOUS_FUNCTION_NAME:u.functionName;r=window.templates.inspected_js_object(a.value.model,!0,null,p);r!==""&&q.push(r)}var u=a.functionFrom,w=u.functionName||ui_strings.S_ANONYMOUS_FUNCTION_NAME,x=window.inspections.get_object(u.objectID)||new cls.InspectableJSObject(o,u.objectID,w,u.className,null,null,!0),y=q.length?null:p,z=window.templates.inspected_js_object(x,!0,null,y);if(z===""&&!q.length)return[];var A=window.helpers.get_script_name(a.positionFrom.scriptID);A=A?(new URI(A)).basename:ui_strings.S_UNKNOWN_SCRIPT;var B=window.helpers.get_script_name(a.positionTo.scriptID);B=B?(new URI(B)).basename:ui_strings.S_UNKNOWN_SCRIPT;return[["li",["div",["div","class","return-value-arrow return-value-arrow-from","handler","goto-script-line","data-tooltip","return-value-tooltip","data-tooltip-text"
,ui_strings.S_RETURN_VALUES_FUNCTION_FROM.replace("%s",A).replace("%s",a.positionFrom.lineNumber),"data-script-id",String(a.positionFrom.scriptID),"data-script-line",String(a.positionFrom.lineNumber)],[z],"class","return-function-from"],q.length?["div",["div",["div","class","return-value-arrow-to","data-tooltip","return-value-tooltip","data-tooltip-text",ui_strings.S_RETURN_VALUES_FUNCTION_TO.replace("%s",B).replace("%s",a.positionTo.lineNumber)],"class","return-value-arrow","handler","goto-script-line","data-script-id",String(a.positionTo.scriptID),"data-script-line",String(a.positionTo.lineNumber)],q,"class","return-value"]:[]]]};this.configStopAt=function(a){var b=["ul"],c=["script","exception","error","abort"],d="",e=0;for(;d=c[e];e++)b[b.length]=this.checkbox(d,a[d]);return["div"].concat([b])};this.breakpoint=function(a,b){return["li","class","breakpoint","line_nr",a,"style","top:"+b+"px"]};this.breadcrumb=function(a,b,c,d,e){var f=window.settings.dom,g=a._get_css_path(b,c,f.get("force-lowercase"),f.get("show-id_and_classes-in-breadcrumb"),f.get("show-siblings-in-breadcrumb")),h=[];d||(d=b);if(g)for(var i=0;i<g.length;i++){h[h.length]=["breadcrumb",g[i].name,"ref-id",g[i].id.toString(),"handler","breadcrumb-link","data-menu","breadcrumb","class",(g[i].is_parent_offset?"parent-offset":"")+(g[i].id==d?" active":"")];e&&(h[h.length]=" "+g[i].combinator+" ")}return h};this.uiLangOptions=function(a){var b=[{browserLanguge:"be",key:"be",name:"Беларуская"},{browserLanguge:"bg",key:"bg",name:"Български"},{browserLanguge:"cs",key:"cs",name:"Česky"},{browserLanguge:"de",key:"de",name:"Deutsch"},{browserLanguge:"en",key:"en",name:"U.S. English"},{browserLanguge:"en-GB",key:"en-GB",name:"British English"},{browserLanguge:"es-ES",key:"es-ES",name:"Español (España)"},{browserLanguge:"es-LA",key:"es-LA",name:"Español (Latinoamérica)"},{browserLanguge:"et",key:"et",name:"Eesti keel"},{browserLanguge:"fr",key:"fr",name:"Français"},{browserLanguge:"fr-CA",key:"fr-CA",name:"Français Canadien"},{browserLanguge:"fy",key:"fy",name:"Frysk"},{browserLanguge:"gd",key:"gd",name:"Gàidhlig"},{browserLanguge:"hu",key:"hu",name:"Magyar"},{browserLanguge:"id",key:"id",name:"Bahasa Indonesia"},{browserLanguge:"it",key:"it",name:"Italiano"},{browserLanguge:"ja",key:"ja",name:"日本語"},{browserLanguge:"ka",key:"ka",name:"ქართული"},{browserLanguge:"mk",key:"mk",name:"македонски јазик"},{browserLanguge:"nb",key:"nb",name:"Norsk bokmål"},{browserLanguge:"nl",key:"nl",name:"Nederlands"},{browserLanguge:"nn",key:"nn",name:"Norsk nynorsk"},{browserLanguge:"pl",key:"pl",name:"Polski"},{browserLanguge:"pt",key:"pt",name:"Português"},{browserLanguge:"pt-BR",key:"pt-BR",name:"Português (Brasil)"},{browserLanguge:"ro",key:"ro",name:"Română"},{browserLanguge:"ru",key:"ru",name:"Русский язык"},{browserLanguge:"sk",key:"sk",name:"Slovenčina"},{browserLanguge:"sr",key:"sr",name:"српски"},{browserLanguge:"sv",key:"sv",name:"Svenska"},{browserLanguge:"tr",key:"tr",name:"Türkçe"},{browserLanguge:"uk",key:"uk",name:"Українська"},{browserLanguge:"zh-cn",key:"zh-cn",name:"简体中文"},{browserLanguge:"zh-tw",key:"zh-tw",name:"繁體中文"}],c=null,d=0,e=window.ui_strings.lang_code,f=[];for(;c=b[d];d++)f[f.length]=["option",c.name,"value",c.key].concat(e==c.key?["selected","selected"]:[]);return f}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});window.cls.NewScript=function(a){const b=0,c=1,d=2,e=3,f=4;this.runtime_id=a[b];this.script_id=a[c];this.script_type=a[d];this.script_data=a[e]||"";this.uri=a[f];this.breakpoints={};this.breakpoint_states=[];this.line_pointer={line:0,state:0};this.stop_ats=[];this.scroll_height=0;this.scroll_width=0};window.cls.NewScript.BP_NONE=0;window.cls.NewScript.BP_DISABLED=3;window.cls.NewScript.BP_DISABLED_CONDITION=6;window.cls.NewScript.BP_ENABLED=9;window.cls.NewScript.BP_ENABLED_CONDITION=12;window.cls.NewScript.LINE_POINTER_TOP=1;window.cls.NewScript.LINE_POINTER=2;window.cls.NewScript.DEFAULT_STATE=0;window.cls.NewScript.SINGLE_QUOTE_STATE=1;window.cls.NewScript.DOUBLE_QUOTE_STATE=2;window.cls.NewScript.REG_EXP_STATE=3;window.cls.NewScript.COMMENT_STATE=4;window.cls.NewScriptPrototype=function(){var a=cls.SimpleJSParser.WHITESPACE,b=cls.SimpleJSParser.LINETERMINATOR,c=cls.SimpleJSParser.IDENTIFIER,d=cls.SimpleJSParser.NUMBER,e=cls.SimpleJSParser.STRING,f=cls.SimpleJSParser.PUNCTUATOR,g=cls.SimpleJSParser.DIV_PUNCTUATOR,h=cls.SimpleJSParser.REG_EXP,i=cls.SimpleJSParser.COMMENT,j=0,k=1,l=new cls.SimpleJSParser;this.search_source=function(a,b,c){b&&!c&&(a=a.toLowerCase());c&&(a=new RegExp(a,b?"ig":"g"));if(this.search_term!=a||this.is_ignore_case!=b||this.is_reg_exp!=c){this.line_arr||this.set_line_states();this.clear_search();this.search_term=a;this.is_ignore_case=b;this.is_reg_exp=c;this.match_length=a.length;this.script_data_lower||(this.script_data_lower=this.script_data.toLowerCase());if(a){var d=-1,e=0,f=0,g=this.line_arr.length,h=null;for(;;){if(c){h=a.exec(this.script_data);d=h?h.index:-1}else b?d=this.script_data_lower.indexOf(a,d+1):d=this.script_data.indexOf(a,d+1);if(d==-1)break;while(e<g&&this.line_arr[e]<=d)++e;this.line_matches[f]=e;this.line_offsets[f]=d-this.line_arr[e-1];c&&(this.line_offsets_length[f]=h[0].length);f++}}}};this.get_line_length=function(a){return a>0?this.line_arr[a]-this.line_arr[a-1]:this.line_arr[0]};this.get_line=function(a){this.line_arr||this.set_line_states();if(a>0&&this.line_arr[a])return this.script_data.slice(this.line_arr[a-1],this.line_arr[a]);return""};this.clear_search=function(){this.search_term="";this.line_matches=[];this.line_offsets=[];this.line_offsets_length=[];this.match_cursor=-1;this.match_length=0};this.__defineGetter__("is_minified",function(){if(this._is_minified===undefined){var a=5e3,b=11,c=/\s+/g,d=0,e=null,f=this.script_data.slice(0,a);while(e=c.exec(f))d+=e[0].length;this._is_minified=100*d/f.length<b}return this._is_minified});this.__defineSetter__("is_minified",function(){});this.get_function=function(a){if(this.is_minified)return null;var b=-1,d=-1,e=-1,g=null,h=0;while(b==-1&&a>-1){g=this._get_tokens_of_line(a);for(var i=0,l;l=g[i];i++)if(l[j]==c&&l[k]=="function"){b=a;e=i}e==-1&&a--}while(!h&&a<=this.line_arr.length){for(var i=e,l;l=g[i];i++)if(l[j]==f&&l[k]=="{"){h++;e=i+1;break}if(!l){e=0;g=this._get_tokens_of_line(++a)}}while(h&&d==-1&&a<=this.line_arr.length){for(var i=e,l;l=g[i];i++)if(l[j]==f)if(l[k]=="{")h++;else if(l[k]=="}"){h--;if(!h){d=a;break}}if(d==-1){e=0;g=this._get_tokens_of_line(++a)}}return b>-1&&d>-1?{start_line:b,end_line:d}:null};this._get_tokens_of_line=function(a){this.line_arr||this.set_line_states();var b=[],c=this.get_line(a),d=this.state_arr[a-1];c&&l.tokenize(c,function(a,c){b.push([a,c])},!1,d);return b};this.set_line_states=function(){this.line_arr=[];this.state_arr=[];var a=this.script_data,b=this.line_arr,c=this.state_arr,d=-1,e=0,f=-1,g=-2,h=-2,i=-2,j=0,k=0,l=0,m="'",n='"',o="/",p="\n",q="\r",r=p;/\r(?!\n)/.test(a)&&(r=q);var s=0,t=0,u="",v="",w=a,x=window.cls.NewScript.DEFAULT_STATE,y=window.cls.NewScript.SINGLE_QUOTE_STATE,z=window.cls.NewScript.DOUBLE_QUOTE_STATE,A=window.cls.NewScript.REG_EXP_STATE,B=window.cls.NewScript.COMMENT_STATE,C="DEFAULT",D=1,E="",F=Math.min,G=Math.max,H=function(a,b){var c=0,d=0,e=w.indexOf(r,a+1);do{c&&e==a&&(e=w.indexOf(r,e+1));a=w.indexOf(b,a+1);if(e>-1&&e<a){a=e;d=r==p&&w[e-1]==q?1:0}c=0;while(w.charAt(a-c-1-d)=="\\")c++}while(c&1&&a!=-1);return a};while(l!=-1){E="";g!=-1&&g<=d&&(g=w.indexOf(m,d+1));h!=-1&&h<=d&&(h=w.indexOf(n,d+1));i!=-1&&i<=d&&(i=w.indexOf(o,d+1));l=G(g,h,i);if(g!=-1&&g<=l){l=g;E="SINGLE_QUOTE"}if(h!=-1&&h<=l){l=h;E="DOUBLE_QUOTE"}if(i!=-1&&i<=l){l=i;E="SLASH"}if(!E){if(!e&&!b.length){e=w.indexOf(r,e)+1;if(e||w.length)b[s++]=0}while(e){b[s++]=e;e=w.indexOf(r,e)+1}b[b.length-1]<w.length&&(b[s]=w.length);return}while(e<=l){b[s++]=e;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}switch(E){case"SINGLE_QUOTE":g=H(g,m);if(g!=-1){d=g;while(e<d){b[s]=e;c[s++]=y;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}}continue;case"DOUBLE_QUOTE":h=H(h,n);if(h!=-1){d=h;while(e<d){b[s]=e;c[s++]=z;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}}continue;case"SLASH":switch(w.charAt(i+1)){case"/":d=w.indexOf(r,i+2);while(e<d){b[s++]=e;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}continue;case"*":i++;do{i=w.indexOf("*",i+1);u=w.charAt(i+1)}while(i!=-1&&u&&u!="/");if(i!=-1){d=i+1;while(e<d){b[s]=e;c[s++]=B;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}}continue;default:t=1;do{u=w.charAt(i-t);t++}while(u==" "&&i-t>0);switch(u){case"=":case"(":case"[":case":":case",":case"!":v="REG_EXP";break;case"&":case"|":if(w.charAt(i-t)==u){v="REG_EXP";break};default:v=""}if(v=="REG_EXP"){do{i=w.indexOf(o,i+1);t=0;while(w.charAt(i-t-1)=="\\")t++}while(t&1&&i!=-1);if(i!=-1){d=i;while(e<d){b[s]=e;c[s++]=A;if((e=w.indexOf(r,e)+1)==0){b[b.length-1]<w.length&&(b[s]=w.length);return}}}continue}d=i;continue}}}}};window.cls.NewScriptPrototype.prototype=new URIPrototype("uri");window.cls.NewScript.prototype=new window.cls.NewScriptPrototype;window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].Runtime=function(a){var b=0,c=1,d=2,e=3,f=4,g=5;this.runtime_id=a[b];this.html_frame_path=a[c];this.window_id=a[d];this.object_id=a[e];this.uri=a[f];this.description=a[g]};cls.EcmascriptDebugger["6.0"].Runtime.prototype=new URIPrototype("uri");cls.EcmascriptDebugger["6.0"].DOMRuntime=function(a){this.type="document";this.id=a.runtime_id;this.uri=a.uri;this.title=a.title||a.uri;this.selected=a.selected;this.extensions=[]};cls.EcmascriptDebugger["6.0"].DOMRuntime.prototype=new URIPrototype("uri");cls.EcmascriptDebugger["6.0"].ExtensionRuntime=function(a){this.type="extension";this.id=a.runtime_id;this.uri=a.uri;this.title="Extension Runtime "+a.runtime_id};cls.EcmascriptDebugger["6.0"].Runtimes=function(a){var b=0,c=0,d=1,e=2,f=3,g=4,h=5,i=0,j=1,k=2,l=0,m={},n=cls.EcmascriptDebugger["6.0"].Runtime,o=cls.EcmascriptDebugger["6.0"].DOMRuntime,p=cls.EcmascriptDebugger["6.0"].ExtensionRuntime,q={},r=[],s={},t={},u="",v=[],w="",x={},y={},z="",A="",B=0,C="",D=!0,E={},F=[],G="",H=window.services["ecmascript-debugger"],I=function(a){for(var b in m)if(m[b]&&m[b].window_id==a.window_id&&m[b].is_top){m[b].title=a.title;window.messages.post("top-runtime-updated",{rt:m[b]});break}};this._on_debug_context_selected=function(a){this.setActiveWindowId(a.window_id)};var J=function(a){return["Greasemonkey JS","Browser JS","User JS","Extension JS"].indexOf(a)!=-1};this._on_reset_state=function(){m={};q={};r=[];s={};t={};u="";v=[];w="";A="";this.setSelectedRuntime();this.setSelectedScript()};this._on_profile_disabled=function(a){if(a.profile==window.app.profiles.DEFAULT){m={};q={};r=[];s={};t={};v=[];A="";S={};this.setSelectedRuntime();this.setSelectedScript()}};this._on_profile_enabled=function(a){if(a.profile==window.app.profiles.DEFAULT){t={};var b=window.window_manager_data.get_debug_context();if(b){var c=window.tag_manager.set_callback(this,this._set_new_debug_context,[b]);H.requestListRuntimes(c,[[],1])}}};var K=function(a){if(!(a in m)){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"runtime id does not exist");m[a]=null;var b=tagManager.set_callback(this,this.handleListRuntimes);services["ecmascript-debugger"].requestListRuntimes(b,[a])}};this._remove_runtime=function(a){for(var b=0,c;c=r[b]&&c!=a;b++);c&&r.splice(c,1);if(z==a){this.setSelectedRuntime();if(m[a]&&!m[a].is_top){var d=E[m[a].window_id];d&&this.setSelectedRuntime(d)}}messages.post("runtime-destroyed",{id:a});q[a]=m[a];delete m[a]};this._reset_window=function(a){for(var b in m)m[b]&&m[b].window_id==a&&this._remove_runtime(m[b].runtime_id)};var L=function(a){var b=F.indexOf(a);b>-1&&F.splice(b,1);return b!=-1};this.handleRuntimeStarted=function(a){parseRuntime(a)};this.handleRuntimesReplay=function(a){parseRuntime(a)};var M=function(a){return a.html_frame_path.indexOf("_top")==0&&a.html_frame_path.indexOf("[")==-1},N=function(a){var b="",c=null;for(b in q){c=q[b];if(c&&c.uri==a.uri&&c.window_id==a.window_id&&c.html_frame_path==a.html_frame_path){a["unfolded-script"]=c["unfolded-script"]||!1;a["unfolded-css"]=c["unfolded-css"]||!1;return}}};this.handleListRuntimes=function(a,c){c[b].forEach(this._handle_runtime,this)};this.onRuntimeStarted=function(a,b){this._handle_runtime(b)};this._handle_runtime=function(a){var b=0,d=0,e=0,f=a[c],g="",h="",i=null,j=null,k=0,l="",o=null,p=!1,q=0;if(f&&!m[f]){r.contains(f)||r.push(f);var o=new n(a);o.window_id||(o.window_id=u);N(o);if(o.is_top=M(o)){var v=o.window_id;v in s?this._reset_window(v):s[v]=!0;E[o.window_id]=o;u&&v!=u&&(o.opener_window_id=u);G||(G=o.html_frame_path);this.setSelectedScript()}var x=window.window_manager_data.get_window(v);x&&(o.title=x.title);m[f]=o;if(A==f){this.setSelectedRuntime(o);A=""}if(o.window_id==w){this.setActiveWindowId(w);q=w;w=""}t[o.window_id]==1&&(t[o.window_id]=2);G==o.html_frame_path&&u==o.window_id&&f!=z&&this.setSelectedRuntimeId(f);if(o.window_id==u||o.opener_window_id==u)p=!0;o.is_top&&views.js_source.update()}q&&host_tabs.setActiveTab(q);p&&host_tabs.updateActiveTab()};this.runtime_has_dom=function(a){return m[a]&&(m[a].description=="document"||m[a].description===undefined)};this._register_script=function(a){var b=null,c=!1,d=a.script_id,e=m[a.runtime_id],f=null,g="";for(b in x){f=m[x[b].runtime_id]||q[x[b].runtime_id]||{};if((x[b].uri&&x[b].uri==a.uri||x[b].script_data==a.script_data)&&f.uri==e.uri&&(f.window_id==e.window_id||e.opener_window_id&&f.opener_window_id==e.opener_window_id)&&f.html_frame_path==e.html_frame_path){c=!0;break}}x[d]=a;if(c){this._bps.copy_breakpoints(a,x[b]);x[b].script_id==B&&this.setSelectedScript(d);if(f.window_id==e.window_id){y[b]=a;delete x[b]}}var h=window.stop_at.get_script_ids_in_callstack();(!B&&(!a.is_console_script||h.contains(d))||J(C)&&!J(a.script_type))&&this.setSelectedScript(d)};var O=1,P=function(){return(O++).toString()},Q=function(a,b,c,d){const e=3,f=2,g=2,h=2,l=3,m=4,n="  ",o="\n",p=["thread started","thread stopped","thread finished"];var q=[p[a],":",o];T.length&&q.push(n,T.join(" "));q.push(n,"runtime id: ",c,o);q.push(n,"thread id: ",d,o);switch(a){case i:q.push(n,"parent thread id: ",b[f],o);q.push(n,"thread type: ",b[e],o);break;case j:q.push(n,"script id: ",b[h],o);q.push(n,"line number: ",b[l],o);q.push(n,"stopped reason: ",b[m],o);break;case k:q.push(n,"status: ",b[g],o)}v.push(q.join(""))};this.setActiveWindowId=function(a){if(a!=u){u=a;W();settings.runtimes.set("selected-window",a)}};this.createAllRuntimesOnDebugContextChange=function(a){G="";t={};this.setSelectedScript();var b=tagManager.set_callback(this,this._set_new_debug_context,[a]);H.requestListRuntimes(b,[[],1])};this._set_new_debug_context=function(a,c,d){if(a===l){c[b]&&c[b].forEach(this._handle_runtime,this);host_tabs.setActiveTab(d);if(c[b]&&c[b].length)settings.runtimes.get("reload-runtime-automatically")&&this.reloadWindow();else{d in s?this._reset_window(d):s[d]=!0;this.setSelectedRuntime();this.setSelectedScript()}}};this.getThreads=function(){return v};this.clearThreadLog=function(){v=[]};this.onNewScript=function(a,b){var c=new cls.NewScript(b);if(c.is_console_script=L(c.script_data))c.script_type="Console Script";if(X(c.runtime_id)){K(c.runtime_id);this._register_script(c)}};this.onParseError=function(a,b){const c=0,d=1,e=2,f=3,g=4,h=5;if(x[b[d]]){var i=x[b[d]].parse_error={runtime_id:b[c],script_id:b[d],line_nr:b[e],offset:b[f],context:b[g],description:b[h]};if(settings.js_source.get("error")||views.js_source.isvisible()&&views.js_source.getCurrentScriptId()==b[d]){views.js_source.isvisible()||window.topCell.showView("js_source");runtimes.setSelectedScript(i.script_id);views.js_source.showLine(i.script_id,i.line_nr,!0)}}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"script source is missing in onParseError handler in runtimes")};var R={},S={},T=[],U={},V=function(a,b){var c=a+": "+JSON.stringify(b)+"\n"+"_thread_queues: "+JSON.stringify(S)+"\n"+"_runtime_stopped_queue: "+JSON.stringify(T)+"\n"+"_stopped_threads: "+JSON.stringify(U)+"\n";opera.postError(c)},W=function(){const a=1;while(T.length){var b=T.shift(),c=U[b].shift();if(c){var d=[b,c[a],"run"];services["ecmascript-debugger"].requestContinueThread(0,d)}}R={};S={};U={};T=[]},X=function(a){var b=m[a];return b&&(b.window_id==u||(b=E[b.window_id])&&b.opener_window_id==u)},Y=function(a,b){var c=S[a];if(c){for(var d=0;cur=c[d];d++)if(cur==b){c.splice(d,1);break}}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"got a thread finished event \n"+"in a runtime where the thread \n"+"has never started: "+a+" "+b)};this.onThreadStarted=function(a,b){var c=0,d=1,e=2,f=b[c],g=b[d],h=b[e];S[f]||(S[f]=[]);S[f].push(g)};this.onThreadStoppedAt=function(a,b){var c=0,d=1,e=b[c],f=b[d],g=S[e];if(!stop_at.is_stopped&&(!g||f==g.last))stop_at.handle(b);else{U[e]||(U[e]=[]);U[e].push(b);T.push(e)}};this.onThreadFinished=function(a,b){var c=0,d=1,e=2,f=b[c],g=b[d];Y(f,g);b[e]=="cancelled-by-scheduler"&&stop_at.is_stopped&&stop_at.on_thread_cancelled(b);!stop_at.is_stopped&&T.length&&stop_at.handle(U[T.shift()].shift())};this.onThreadMigrated=function(a,b){var c=0,d=1,e=2,f=b[d],g=b[e],h=b[c],i=S[f];if(i&&i.contains(h)){Y(f,h);S[g]||(S[g]=[]);S[g].push(h)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"not possible to migrate thread")};var Z=function(a){!stop_at.is_stopped&&T.length&&stop_at.handle(U[T.shift()].shift())};this.onRuntimeStopped=function(a,b){var c=b[0];if(c){this._remove_runtime(c);host_tabs.updateActiveTab();messages.post("runtime-stopped",{id:c})}};this.getActiveWindowId=function(){return u};this.get_dom_runtimes=function(a){var b=this.getRuntimes(u),c=null;for(var d=0;(c=b[d])&&!c.selected;d++);if(!c&&b[0])opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"no runtime selected");else{var e=[],f={};for(var d=0,g=0;c=b[d];d++){g=c.runtime_id;if(c.description=="extensionjs"){var h=f[c.uri];if(h){var i=new p(c);a&&(i.scripts=this.getScripts(g,!0));h.extensions.push(i)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"extension rt without owner rt in get_dom_runtimes")}else{var i=new o(c);if(a){var j=this.getScripts(g,!0),k=null,l=[];for(var m=j.length-1,n;n=j[m];m--)switch(n.script_type){case"Browser JS":k=j.splice(m,1)[0];break;case"User JS":l.push(j.splice(m,1)[0])}i.scripts=j;i.browser_js=k;i.user_js_s=l}f[c.uri]=i;e.push(i)}}return e}};this.getRuntimes=function(a){var b=[],c="";for(c in m)m[c]&&m[c].window_id&&(m[c].window_id==a||m[c].opener_window_id==a)&&(b[b.length]=m[c]);return b};this.getRuntime=function(a){return m[a]||null};this.getRuntimeIdsFromWindow=function(a){var b=[],c="";for(c in m)m[c]&&m[c].window_id&&(m[c].window_id==a||m[c].opener_window_id==a)&&(m[c].is_top&&!m[c].opener_window_id?b=[m[c].runtime_id].concat(b):b[b.length]=m[c].runtime_id);return b};this.get_runtime_ids=function(){return this.getRuntimeIdsFromWindow(u)};this.get_dom_runtime_ids=function(){return this.getRuntimeIdsFromWindow(u).filter(this.runtime_has_dom)};this.getRuntimeIdWithURL=function(a){var b="";for(b in m)if(m[b].uri==a)return m[b];return null};this.getURI=function(a){for(var b in m)if(m[b].runtime_id==a)return m[b].uri;return""};this.getScript=function(a){return x[a]||y[a]||null};this.getStoppedAt=function(a){return x[a]&&x[a].stop_ats||null};this.getScriptsRuntimeId=function(a){return x[a]&&x[a].runtime_id||null};this.getScriptSource=function(a){if(x[a])return x[a].script_data;return null};this.getScripts=function(a,b){var c=[],d=null,e=b?window.stop_at.get_script_ids_in_callstack():null;for(var f in x){d=x[f];d.runtime_id==a&&(!b||!d.is_console_script||e.contains(d.script_id))&&(c[c.length]=d)}return c};this.setObserve=function(a,b){m[a]&&(m[a].observe=b)};this.getObserve=function(a){return m[a]&&m[a].observe||!1};this.setSelectedRuntime=function(a){for(var b in m)if(m[b]&&m[b]==a){m[b].selected=!0;z=m[b].runtime_id}else m[b]&&(m[b].selected=!1);a||(z="");window.messages.post("runtime-selected",{id:z})};this.setSelectedScript=function(a){if(a!=B){B=a||0;var b=a&&x[a];if(b){C=b.script_type;b.runtime_id!=z&&this.setSelectedRuntimeId(b.runtime_id)}window["cst-selects"]["js-script-select"].updateElement();window.views.js_source.update()}};this.getSelectedScript=function(){return B};this.setSelectedRuntimeId=function(a){m[a]?this.setSelectedRuntime(m[a]):A=a};this.getSelectedRuntimeId=function(){return z};this.getSelecetdScriptIdFromSelectedRuntime=function(){var a=this.getScripts(z),b=null,c=0;for(;b=a[c];c++)if(b.selected)return b.script_id;return null};this.getRuntimeIdWithScriptId=function(a){return x[a]&&x[a].runtime_id||null};this.reloadWindow=function(a){a||(a=u);if(a){t[a]||(t[a]=1);var b=this.getRuntimeIdsFromWindow(a)[0];if(window.services["ecmascript-debugger"]&&window.services["ecmascript-debugger"].is_enabled&&(b&&m[b].uri.indexOf("widget://")!=-1||!window.services.exec||!window.services.exec.is_implemented)){var c=[b,0,0,"location.reload()"];window.services["ecmascript-debugger"].requestEval(0,c)}else if(window.services.exec&&window.services.exec.is_implemented){var c=[[["reload",null,window.window_manager_data.get_debug_context()]]];window.services.exec.requestExec(cls.TagManager.IGNORE_RESPONSE,c)}}};this.isReloadedWindow=function(a){return t[a]==2};this.is_runtime_of_reloaded_window=function(a){var b=this.getRuntime(a),c=b&&b.window_id;return c?this.isReloadedWindow(c):!1};this.get_execution_context=function(){var a=window.stop_at.getSelectedFrame();return a?{rt_id:a.runtime_id,thread_id:a.thread_id,frame_index:a.index}:{rt_id:this.getSelectedRuntimeId(),thread_id:0,frame_index:0}};var $=function(a){var b=a.stop_at.script_id;if(b&&x[b]){var c=x[b].stop_ats;c[c.length]=a.stop_at}},_=function(a){var b=a.stop_at.script_id,c=x[b]&&x[b].stop_ats,d=null,e=0;if(c)for(;d=c[e];e++)if(d==a.stop_at){c.splice(e,1);return}},ba=function(a){F.push(a.script)};this._bps=cls.Breakpoints.get_instance();messages.addListener("thread-stopped-event",$);messages.addListener("thread-continue-event",_);messages.addListener("host-state",Z);messages.addListener("reset-state",this._on_reset_state.bind(this));messages.addListener("window-updated",I);messages.addListener("debug-context-selected",this._on_debug_context_selected.bind(this));messages.addListener("console-script-submitted",ba);messages.addListener("profile-disabled",this._on_profile_disabled.bind(this));messages.addListener("profile-enabled",this._on_profile_enabled.bind(this));this.bind=function(a){a.handleEval=function(a,b){};a.handleListRuntimes=this.handleListRuntimes.bind(this);a.onRuntimeStarted=this.onRuntimeStarted.bind(this);a.onRuntimeStopped=this.onRuntimeStopped.bind(this);a.onNewScript=this.onNewScript.bind(this);a.onThreadStarted=this.onThreadStarted.bind(this);a.onThreadStoppedAt=this.onThreadStoppedAt.bind(this);a.onThreadFinished=this.onThreadFinished.bind(this);a.onThreadMigrated=this.onThreadMigrated.bind(this);a.onParseError=this.onParseError.bind(this);a.addListener("window-filter-change",function(a){this.createAllRuntimesOnDebugContextChange(a.filter[1][0])}.bind(this))}};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].StopAt=function(){var a={script:1,exception:0,error:0,abort:0,gc:0,debugger_statement:1,reformat_javascript:1,use_reformat_condition:1},b={script:0,exception:1,error:2,abort:3,gc:4,debugger_statement:5,reformat_javascript:6,use_reformat_condition:7},c={6:[6,13],7:[6,13]},d=["var MAX_LINE_LENGTH = 160;","var last = 0;","var index = 0;",'while ((index = scriptData.indexOf("\\n", last)) > -1)',"{","  if (index - last > MAX_LINE_LENGTH)","    return true;","  last = index + 1;","}","return scriptData.length - last > MAX_LINE_LENGTH;"].join(""),e=this,f=window.services["ecmascript-debugger"],g={},h="",i=[],j={},k=[],l=!1,m=!1,n=1,o=-1,p="",q=function(){return n++},r=!1,s=function(b){if(b.id=="js_source"){var c=b.key,d=settings.js_source.get(c);a[c]=d;var e=t();f.requestSetConfiguration(cls.TagManager.IGNORE_RESPONSE,e);b.key=="reformat_javascript"&&(new ConfirmDialog(ui_strings.D_REFORMAT_SCRIPTS,[function(){window.runtimes.reloadWindow()}],ConfirmDialog.YES_NO)).show()}},t=function(){var e=[];for(var g in a){var h=b[g],i=c[h];if(i&&!f.satisfies_version.apply(f,i))continue;g=="script"?e[h]=1:g=="use_reformat_condition"?e[h]=a[g]?d:"":e[h]=a[g]?1:0}return e};this.getRuntimeId=function(){return h};this.getControlsEnabled=function(){return l};this.__defineGetter__("is_stopped",function(){return m});this.__defineSetter__("is_stopped",function(){});this.getFrames=function(){return i};this.get_return_values=function(){return j};this.get_script_ids_in_callstack=function(){return k};this.getFrame=function(a){return i[a]};this.getThreadId=function(){return g&&g.thread_id||""};this.getSelectedFrameIndex=function(){return o};this.getSelectedFrame=function(){if(o>-1){var a=i[o];return{runtime_id:a.rt_id,scope_id:a.scope_id,thread_id:g.thread_id,index:o,argument_id:a.argument_id,scope_list:a.scope_list}}return null};var u=function(a,b,c){const d=0,e=0,f=1,g=2,h=3,m=4,n=5,o=6,q=0,r=5,s=7,t=8,u=9;if(a)opera.postError("parseBacktrace failed scope message: "+b);else{var v=b[d],w=null,x=0,y="",z="",A="",B="",C="",D=v.length,E=D<=ini.max_frames,F=0;i=[];k=[];for(;w=v[x];x++){F=w[o];!x&&typeof c.line_number=="number"&&Math.abs(F-c.line_number)<3&&(F=c.line_number);i[x]={fn_name:E&&x==D-1?ui_strings.S_GLOBAL_SCOPE_NAME:w[m]&&w[m][r]||ui_strings.S_ANONYMOUS_FUNCTION_NAME,line:F,script_id:w[n],argument_id:w[f],scope_id:w[g],this_id:w[h],id:x,rt_id:c.runtime_id,scope_list:w[s],argument_value:w[t],this_value:w[u]};k[x]=w[n]}var G=new cls.EcmascriptDebugger["6.14"].BacktraceFrameList(b),H=G&&G.returnValueList;H&&(j={rt_id:c.runtime_id,return_value_list:H});p!="frame"&&messages.post("active-inspection-type",{inspection_type:"frame"});messages.post("frame-selected",{frame_index:0});views.callstack.update();views["return-values"].update();views.js_source.isvisible()||topCell.showView(views.js_source.id);var I=i[0];if(views.js_source.showLine(I.script_id,I.line)){runtimes.setSelectedScript(I.script_id);views.js_source.showLinePointer(I.line,!0)}toolbars.js_source.enableButtons("continue");messages.post("thread-stopped-event",{stop_at:c});messages.post("host-state",{state:"waiting"});setTimeout(function(){l=!0},50)}};this.setInitialSettings=function(){if(!r){for(var b in a){var c=window.settings.js_source.get(b);typeof c=="boolean"&&(a[b]=c)}var d=t();f.requestSetConfiguration(cls.TagManager.IGNORE_RESPONSE,d);r=!0}};this.__continue=function(a,b){var c=tag_manager.set_callback(this,this._handle_continue,[a,b]),d=[g.runtime_id,g.thread_id,a];services["ecmascript-debugger"].requestContinueThread(c,d)};this.continue_thread=function(a){l&&this.__continue(a,!0)};this._handle_continue=function(a,b,c,d){this._clear_stop_at_error();i=[];j={};k=[];runtimes.setObserve(g.runtime_id,c!="run");messages.post("frame-selected",{frame_index:-1});messages.post("thread-continue-event",{stop_at:g});if(d){l=!1;m=!1;toolbars.js_source.disableButtons("continue")}messages.post("host-state",{state:"ready"});window.views["return-values"].update()};this.on_thread_cancelled=function(a){const b=1;if(a[b]==g.thread_id){this._clear_stop_at_error();i=[];j={};k=[];messages.post("frame-selected",{frame_index:-1});l=!1;m=!1;toolbars.js_source.disableButtons("continue");messages.post("host-state",{state:"ready"})}};this.handle=function(a){const b=0,c=1,d=2,e=3,f=4,i=5,j=6,k=3,l=0;g={runtime_id:a[b],thread_id:a[c],script_id:a[d],line_number:a[e],stopped_reason:a[f],breakpoint_id:a[i]};if(a[j]){var m=a[j]&&a[j][k]&&a[j][k][l];if(m){g.error=a[j];g.error_obj_id=m}}var n=g.line_number;if(typeof n=="number")if(g.stopped_reason=="unknown"||g.stopped_reason=="new script"){h=g.runtime_id;settings.js_source.get("script")||runtimes.getObserve(h)||this._bps.script_has_breakpoint_on_line(g.script_id,n)?this._stop_in_script(g):this.__continue("run")}else{var o=this._bps.get_condition(g.breakpoint_id);if(o){var p=tagManager.set_callback(this,this._handle_condition,[g]),q=[g.runtime_id,g.thread_id,0,"Boolean("+o+")",[["dummy",0]]];services["ecmascript-debugger"].requestEval(p,q)}else this._stop_in_script(g)}else opera.postError("not a line number: "+g.line_number+"\n"+JSON.stringify(g))};this._handle_condition=function(a,b,c){const d=0,e=1,f=2;if(a){opera.postError("Evaling breakpoint condition failed");this.__continue("run")}else b[d]=="completed"&&b[e]=="boolean"&&b[f]=="true"?this._stop_in_script(c):this.__continue("run")};this._handle_error=function(a,b,c){if(a)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" error inspection failed in StopAt handle_error");else{const d=0,e=0,f=0,g=4,h=1,i=0,j=3,k=0,l=2;var m=b&&(b=b[d])&&(b=b[0])&&(b=b[e])&&b[0];if(m){c.error_class=m[f]&&m[f][g]||"Error";var n=m[h];if(n)for(var o=0,p;p=n[o];o++)p[k]=="message"&&(c.error_message=p[l]);var q=window.runtimes.getScript(c.script_id);if(q){q.stop_at_error=c;window.views.js_source.show_stop_at_error()}}}};this._clear_stop_at_error=function(){if(g.error){var a=window.runtimes.getScript(g.script_id);a&&(a.stop_at_error=null);window.views.js_source.clear_stop_at_error()}};this._stop_in_script=function(a){m=!0;var b=tagManager.set_callback(null,u,[a]),c=[a.runtime_id,a.thread_id,ini.max_frames];services["ecmascript-debugger"].requestGetBacktrace(b,c);if(a.error){var b=tagManager.set_callback(this,this._handle_error,[a]),c=[a.runtime_id,[a.error_obj_id],0,0,0];window.services["ecmascript-debugger"].requestExamineObjects(b,c)}};var v=function(a){if(g&&g.runtime_id==a.id){views.callstack.clearView();views.inspection.clearView();e.__continue("run")}};this._on_profile_disabled=function(a){if(a.profile==window.app.profiles.DEFAULT){this._clear_stop_at_error();i=[];k=[];window.views.js_source.clearLinePointer();window.views.callstack.clearView();window.views.inspection.clearView();window.messages.post("frame-selected",{frame_index:-1});window.messages.post("thread-continue-event",{stop_at:g});l=!1;m=!1;window.toolbars.js_source.disableButtons("continue");window.messages.post("host-state",{state:"ready"})}};messages.addListener("runtime-destroyed",v);messages.addListener("profile-disabled",this._on_profile_disabled.bind(this));var w=function(a){p=a.inspection_type},x=function(a){o=a.frame_index};this._bps=cls.Breakpoints.get_instance();messages.addListener("active-inspection-type",w);messages.addListener("setting-changed",s);messages.addListener("frame-selected",x);this.bind=function(a){var b=this;a.handleSetConfiguration=a.handleContinueThread=function(a,b){};a.addListener("enable-success",function(){b.setInitialSettings()})};this._bps=window.cls.Breakpoints.get_instance()};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});window.cls.EcmascriptDebugger["6.0"].RuntimeOnloadHandler=function(){var a="complete",b=0,c=1,d=1,e=2,f=50;this._reset_state_handler=function(){this._rts={};this._onload_handlers={};this._error_handlers={};this._rts_checked={}};this._poll=function(a){this._rts_is_checking[a]=!0;if(this._blocked_rts[a])setTimeout(this._poll.bind(this,a),f);else{var b=this._tagman.set_callback(this,this._handle_ready_state,[a]),c="return document.readyState";this._esde.requestEval(b,[a,0,0,c])}};this._call_callbacks=function(a){while(a&&a.length)a.shift()()};this._handle_ready_state=function(b,c,d){var e=0,f=0,g=2;this._rts_is_checking[d]=!1;if(b==e&&c[f]=="completed"){this._rts_checked[d]=!0;if(c[g]==a){this._rts[d]=a;this._call_callbacks(this._onload_handlers[d])}}else this._call_callbacks(this._error_handlers[d])};this.register=function(a,b,c,d){if(!this._onload_handlers[a]){this._onload_handlers[a]=[];this._error_handlers[a]=[];!this._rts_checked[a]&&!this._rts_is_checking[a]&&this._poll(a)}var e=this._onload_handlers[a];for(var f=0,g;(g=e[f])&&g!=b;f++);e[f]=b;if(c){e=this._error_handlers[a];for(var f=0,g;(g=e[f])&&g!=b;f++);e[f]=c}if(d){var h=this._timeout_handler.bind(this,a,b);setTimeout(h,d)}};this.register_onload_handler=this.register;this._timeout_handler=function(a,b,c){var d=this._onload_handlers[a];if(d){var e=d.indexOf(b);e>-1&&d.splice(e,1)[0]()}};this.is_loaded=function(b){return this._rts[b]==a};this._on_thread_stopped=function(a){this._blocked_rts[a.stop_at.runtime_id]=!0};this._on_thread_continue=function(a){this._blocked_rts[a.stop_at.runtime_id]=!1};this._onloadhandler=function(d){var f=d[b];this._rts_checked[f]=!0;if(d[c]==e){
this._rts[f]=a;this._onload_handlers[f]&&this._call_callbacks(this._onload_handlers[f])}};this._init=function(){this._rts={};this._onload_handlers={};this._error_handlers={};this._rts_checked={};this._rts_is_checking={};this._blocked_rts={};this._timeouts={};this._esde=window.services["ecmascript-debugger"];this._tagman=window.tag_manager;var a=window.messages;a.addListener("thread-stopped-event",this._on_thread_stopped.bind(this));a.addListener("thread-continue-event",this._on_thread_continue.bind(this));a.addListener("reset-state",this._reset_state_handler.bind(this));this._esde.addListener("readystatechanged",this._onloadhandler.bind(this))};this._init()};var cls=window.cls||(window.cls={});cls.RuntimesView=function(a,b,c){this.init(a,b,c)};cls.RuntimesView.prototype=ViewBase;new cls.RuntimesView("runtimes",ui_strings.M_VIEW_LABEL_SCRIPTS,"scroll runtimes");new Settings("runtimes",{"selected-window":"","reload-runtime-automatically":!1},{"reload-runtime-automatically":ui_strings.S_SWITCH_RELOAD_SCRIPTS_AUTOMATICALLY},{checkboxes:["reload-runtime-automatically"]},null,"script");window.cls||(window.cls={});cls.ReturnValuesView=function(a,b,c){this.createView=function(a){this._container=a;this._text_search.setContainer(this._container);this._text_search.setFormInput(window.views[this.id].getToolbarControl(this._container,"return-values-text-search"));if(this._create_view_bound)this._create_view_bound();else{var b=stop_at.get_return_values(),c=b&&b.return_value_list;if(c&&c.length){c.forEach(function(a){var c=a.value.object;if(c){var d=c.className==="Function"&&!c.functionName?ui_strings.S_ANONYMOUS_FUNCTION_NAME:c.functionName;a.value.model=new cls.InspectableJSObject(b.rt_id,c.objectID,d,c.className)}});this._create_view_bound=this._create_view.bind(this,b);this._create_view_bound()}else{this._remove_bound_view();a.clearAndRender(this._return_values_no_content())}}};this._create_view=function(a){this._container&&this._container.clearAndRender(templates.return_values(a,this._search_term))};this.ondestroy=function(){this._container=null;this._text_search.cleanup()};this._remove_bound_view=function(){this._create_view_bound=null};this._return_values_no_content=function(){return["div",ui_strings.M_VIEW_LABEL_NO_RETURN_VALUES,"class","not-content inspection"]};this._onbeforesearch=function(a){if(this._create_view_bound&&this.isvisible()){this._search_term=a.search_term;this._create_view_bound()}};this._init=function(a,b,c){View.prototype.init.call(this,a,b,c);this.required_services=["ecmascript-debugger"];this._container=null;this._search_term="";this._tooltip=Tooltips.register("return-value-tooltip");this._text_search=new TextSearch(1);this._text_search.add_listener("onbeforesearch",this._onbeforesearch.bind(this));window.messages.addListener("thread-continue-event",this._remove_bound_view.bind(this));window.event_handlers.input["return-values-text-search"]=function(a,b){this._text_search.searchDelayed(b.value)}.bind(this);ActionBroker.get_instance().get_global_handler().register_shortcut_listener("return-values-text-search",cls.Helpers.shortcut_search_cb.bind(this._text_search))};this._init(a,b,c)};cls.ReturnValuesView.create_ui_widgets=function(){new ToolbarConfig({view:"return-values",groups:[{type:UI.TYPE_INPUT,items:[{handler:"return-values-text-search",shortcuts:"return-values-text-search",title:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]}]})};window.cls||(window.cls={});cls.CallstackView=function(a,b,c){this._clear_view=function(){var a=document.getElementById(this._container_id);if(a){a.innerHTML=this._not_stopped_content;this._clear_timeout=0}};this.createView=function(a){var b=a.getElementsByTagName("ul")[0];if(!b){a.innerHTML="<div id='backtrace-container'><ul id='backtrace'></ul></div>";b=a.getElementsByTagName("ul")[0]}if(this._clear_timeout){clearTimeout(this._clear_timeout);this._clear_timeout=0}var c=stop_at.getFrames();b.innerHTML=c.length?"":this._not_stopped_content;for(var d=0,e;e=c[d];d++)b.render(templates.frame(e,d==this._selected_frame))};this.clearView=function(){this._clear_timeout=setTimeout(this._clear_view_bound,150)};this._onframeselected=function(a){this._selected_frame=a.frame_index};this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this._container_id="backtrace";this._clear_timeout=0;this._not_stopped_content="<li class='not-stopped'>"+ui_strings.M_VIEW_LABEL_NOT_STOPPED+"</li>";this._selected_frame=0;this._clear_view_bound=this._clear_view.bind(this);window.messages.addListener("frame-selected",this._onframeselected.bind(this));this.init(a,b,c)};this._init(a,b,c)};window.cls||(window.cls={});cls.EnvironmentView=function(a,b,c){var d=this;this.createView=function(a){a.innerHTML="";a.render(templates.hello(window.services.scope.get_hello_message()))};this.init(a,b,c)};cls.EnvironmentView.create_ui_widgets=function(){new Settings("environment",{environment:!0},{},{customSettings:["environment"]},{environment:function(a){return templates.hello(window.services.scope.get_hello_message())}},"about")};cls.AboutView=function(a,b,c){this.init(a,b,c)};cls.AboutView.create_ui_widgets=function(){new Settings("about",{about:!0},{},{customSettings:["about"]},{about:function(a){(new XMLHttpRequest).loadResource("AUTHORS",function(a){var b=document.getElementById("about-authors"),c=a.responseText;b&&c&&(b.textContent=c)});return["ul",["li","id","about-authors","class","padding selectable"]]}},"about")};cls.GeneralView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.init(a,b,c)};cls.GeneralView.create_ui_widgets=function(){new Settings("general",{"show-views-menu":!1,"window-attached":!0,"show-only-normal-and-gadget-type-windows":!0,shortcuts:null,"shortcuts-hash":"","track-usage":!0},{"show-views-menu":ui_strings.S_SWITCH_SHOW_VIEWS_MENU,"show-only-normal-and-gadget-type-windows":ui_strings.S_SWITCH_SHOW_ONLY_NORMAL_AND_GADGETS_TYPE_WINDOWS,"track-usage":ui_strings.S_SWITCH_TRACK_USAGE},{checkboxes:["show-only-normal-and-gadget-type-windows","track-usage"],customSettings:["hr","ui-language"]},{hr:function(a){return["hr"]},"ui-language":function(a){return[["setting-composite",ui_strings.M_LABEL_UI_LANGUAGE+": ",["select",templates.uiLangOptions(),"handler","set-ui-language"],["span",ui_strings.S_BUTTON_LOAD_PO_FILE,"handler","show-po-selector","class","ui-button","tabindex","1"]]]}},"general");eventHandlers.click["show-po-selector"]=function(a){UIWindowBase.showWindow("test-po-file")};eventHandlers.change["set-ui-language"]=function(a){helpers.setCookie("ui-lang",a.target.value);helpers.setCookie("ui-lang-set","1");var b=a.target.parentNode,c=b.getElementsByClassName("change-ui-lang-info")[0]||b.render(["div","class","change-ui-lang-info selectable"]),d=ui_strings.S_LABEL_CHANGE_UI_LANGUAGE_INFO.split("%s"),e=[["h2",d[0]+" ",["a","opera:config#DeveloperTools|DeveloperToolsURL","href","opera:config#DeveloperTools|DeveloperToolsURL","target","_blank"]," "+d[1]],["ul",["","cutting-edge/","experimental/"].map(function(b){return["li",["code","https://dragonfly.opera.com/app/"+b+"client-"+a.target.value+".xml"]]})]];c.clearAndRender(e)}};cls.HostSpotlightView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.init(a,b,c)};cls.HostSpotlightView.create_ui_widgets=function(){new Settings("host-spotlight",{"spotlight-color":"3875d7"},{},{checkboxes:[],customSettings:["colors"]},{colors:function(a){return hostspotlighter.colorSelectsTemplate()}},"document")};cls.DocumentationView=function(a,b,c){var d="";this.setURL=function(a){d=a};this.createView=function(a){d&&a.render(["iframe","width","100%","height","100%","style","dispaly:block;border:none","src",d])};this.init(a,b,c)};cls.DebugRemoteSettingView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.init(a,b,c)};cls.DebugRemoteSettingView.create_ui_widgets=function(){const a=7001,b=1024,c=65535;new Settings("debug_remote_setting",{"debug-remote":!1,port:a},{"debug-remote":ui_strings.S_SWITCH_REMOTE_DEBUG},{customSettings:["debug-remote"]},{"debug-remote":function(a){if(!settings.debug_remote_setting.get("debug-remote")){Overlay.get_instance().set_info_content([["p",ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_HEADER],["ol",["li",ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_1],["li",ui_strings.S_REMOTE_DEBUG_GUIDE_PRECONNECT_STEP_2]]]);return[["setting-composite",window.templates.remote_debug_settings(a.get("port"))]]}return["setting-composite",["span",ui_strings.S_BUTTON_CANCEL_REMOTE_DEBUG,"handler","cancel-remote-debug","class","ui-button","tabindex","1"]]}},"remote_debug");eventHandlers.click["apply-remote-debugging"]=function(a,d){var e=parseInt(d.parentNode.getElementsByTagName("input")[0].value);if(typeof e=="number")if(b<=e&&e<=c){settings.debug_remote_setting.set("debug-remote",!0);settings.debug_remote_setting.set("port",e);window.helpers.setCookie("debug-remote","true");window.helpers.setCookie("port",JSON.stringify(e));client.setup(!0)}else{document.getElementById("remote-debug-info").textContent=ui_strings.S_INFO_NO_VALID_PORT_NUMBER.replace("%s",b).replace("%s",c);d.parentNode.getElementsByTagName("input")[0].value=e<b?b:c}};eventHandlers.click["cancel-remote-debug"]=function(a,b){Overlay.get_instance().hide();settings.debug_remote_setting.set("debug-remote",!1);window.helpers.setCookie("debug-remote","false");client.setup()}};cls.ModebarView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.init(a,b,c)};cls.MainView=function(){};cls.MainView.create_ui_widgets=function(){new ToolbarConfig("main-view",[{handler:"toggle-console",title:ui_strings.S_BUTTON_TOGGLE_CONSOLE},{handler:"toggle-settings-overlay",title:ui_strings.S_BUTTON_TOGGLE_SETTINGS},{handler:"toggle-remote-debug-overlay",title:ui_strings.S_BUTTON_TOGGLE_REMOTE_DEBUG}],null,null,[]);eventHandlers.click["reload-window"]=function(a,b){var c=Number(b.get_attr("parent-node-chain","data-reload-window-id"));runtimes.reloadWindow(c)}};window.cls||(window.cls={});cls.JSSidePanelView=function(a,b,c,d){this.required_services=["ecmascript-debugger"];this.init(a,b,c,d)};cls.JSSidePanelView.prototype=SidePanelView.prototype;window.cls||(window.cls={});cls.PrettyPrinter=function(){};cls.PrettyPrinter.ELEMENT=1;cls.PrettyPrinter.DATE=2;cls.PrettyPrinter.FUNCTION=3;cls.PrettyPrinter.ERROR=4;cls.PrettyPrinter.REGEXP=5;cls.PrettyPrinter.types={};cls.PrettyPrinter.types[cls.PrettyPrinter.ELEMENT]={type:cls.PrettyPrinter.ELEMENT,is_type:function(a){return/Element$/.test(a)},traversal:"node",template:function(a,b){var c=0,d=0,e=2,f=4,g=5,h=0,i=1,j=2,k=[],l=a[c]&&a[c][d];if(l){var m=settings.dom.get("force-lowercase"),n=settings.dom.get("dom-tree-style"),o=l[f]?l[f]+":":"";o+=l[e];m&&(o=o.toLowerCase());if(l[g]&&l[g].length){k.push("node",(n?"":"<")+o+" ");l[g].forEach(function(a){var b=a[h]?a[h]+":":"";b+=m?a[i].toLowerCase():a[i];k.push(["key",b]);k.push("=");k.push(["value",'"'+a[j]+'"']);k.push(" ")});k.pop();n||k.push(">")}else k.push("node",n?o:"<"+o+">");k=["div",k,"class","dom mono"]}return k}};cls.PrettyPrinter.types[cls.PrettyPrinter.DATE]={type:cls.PrettyPrinter.DATE,is_type:function(a){return a=="Date"},script:"object.toString()",template:function(a,b){var c=2;return["span",a[c],"class","mono"]}};cls.PrettyPrinter.types[cls.PrettyPrinter.FUNCTION]={type:cls.PrettyPrinter.FUNCTION,is_type:function(a){return a=="Function"},script:"object.toString()",template:function(a,b){var c=[];if(b.script_data){c.push("div");window.templates.highlight_js_source(b.script_data,null,0,c);c.push("class","tooltip-function-source")}else if(b.function_definition){var d=b.script,e=b.function_definition.start_line,f=b.function_definition.end_line,g=["ul"],h=["div"],i=[],j=window.templates.script_link_with_line_number(d,e);j&&(j.push("handler","show-log-entry-source","data-scriptid",String(d.script_id),"data-scriptline",String(e),"data-script-endline",String(f)),i=["h2",j,"class","js-tooltip-title"]);for(var k=e;k<=f;k++){var l=d.get_line(k),m=d.state_arr[k-1],n=["div"];window.templates.highlight_js_source(l,null,m,n);h.push(n);var o=["li"];o.push(["span",String(k),"class","line-number"]);o.push(["span","handler","set-break-point","class","break-point"]);g.push(o)}h.push("class","js-source-content js-source mono");g.push("class","js-source-line-numbers");c=["div",i,["div",["div",h,g,"class","position-relative"],"class","js-tooltip-examine-container mono"],"class","tooltip-function-source","data-script-id",String(d.script_id)]}else{var p=2;c=templates.highlight_js_source(a[p]);c.push("class","pretty-printed-code mono")}return c},after_render:function(){var a=document.querySelector(".tooltip-function-source");if(a){var b=a.querySelector(".js-source-line-numbers"),c=b&&b.get_ancestor_attr("data-script-id"),d=window.runtimes.getScript(Number(c));cls.JsSourceView.update_breakpoints(d,b)}},init:function(){if(!this._is_initialized){this._is_initialized=!0;window.messages.addListener("breakpoint-updated",this.after_render)}}};cls.PrettyPrinter.types[cls.PrettyPrinter.ERROR]={type:cls.PrettyPrinter.ERROR,is_type:function(a){return/(Error|Exception)$/.test(a)},script:"object.message",template:function(a,b){var c=2;return["span",a[c],"class","mono"]}};cls.PrettyPrinter.types[cls.PrettyPrinter.REGEXP]={type:cls.PrettyPrinter.REGEXP,is_type:function(a){return a=="RegExp"},script:"object.toString()",template:function(a,b){var c=2;return["span",a[c],"class","reg_exp mono"]}};cls.PrettyPrinter.prototype=new function(){var a=0;this.register_types=function(a){};this.unregister_types=function(a){};this.print=function(a){};this.register_types=function(a){this._types||(this._types=[]);a.forEach(function(a){var b=cls.PrettyPrinter.types[a];if(cls.PrettyPrinter.types.hasOwnProperty(a)&&!this._types.contains(b)){this._types.push(b);b.init&&b.init()}},this)};this.unregister_types=function(a){a.forEach(function(a){var b=this._types.indexOf(cls.PrettyPrinter.types[a]);b>-1&&this._types.splice(b,1)},this)};this._get_type=function(a){for(var b=0,c;c=this._types[b];b++)if(c.is_type(a))return c;return null};this._print_element=function(a){var b=tag_manager.set_callback(this,this._handle_element,[a]),c=[a.obj_id,a.type.traversal];services["ecmascript-debugger"].requestInspectDom(b,c)};this._handle_element=function(a,b,c){c.template=!a&&c.type.template(b,c);c.callback(c)};this._print_object=function(a){var b=window.runtimes.get_execution_context(),c=b.rt_id,d=b.thread_id,e=b.frame_index;if(a.rt_id!=c){c=a.rt_id;d=0;e=0}var f=tagManager.set_callback(this,this._handle_object,[a]),g=[c,d,e,a.type.script,[["object",a.obj_id]]];services["ecmascript-debugger"].requestEval(f,g)};this._handle_object=function(a,b,c){var d=0;c.template=!a&&b[d]=="completed"&&c.type.template(b,c);c.callback(c)};this._print_function=function(a){if(a.script_data){a.template=a.type.template(null,a);a.callback(a)}else if(services["ecmascript-debugger"].requestGetFunctionPositions){var b=tagManager.set_callback(this,this._handle_function,[a]),c=[a.rt_id,[a.obj_id]];services["ecmascript-debugger"].requestGetFunctionPositions(b,c)}else this._print_object(a)};this._handle_function=function(b,c,d){var e=0,f=1,g=0,h=1,i=null;if(b===a&&(i=c[e])&&(i=i[0])&&(i=i[f])){var j=window.runtimes.getScript(i[g]);if(j){var k=j.get_function(i[h]);if(k){d.function_definition=k;d.script=j;d.template=d.type.template(c,d);d.callback(d);return}}}this._print_object(d)};this.print=function(a){(a.type=this._get_type(a.class_name))?a.type.traversal?this._print_element(a):a.type.type==cls.PrettyPrinter.FUNCTION?this._print_function(a):this._print_object(a):a.callback(a)}};window.cls||(window.cls={});cls.JSInspectionTooltip=function(){var a=3,b=4,c=0,d="tooltip-selected",e=null,f=null,g=null,h=null,i=function(a){if(h&&a.object==h&&document.documentElement.contains(a.target)&&a.template){g=a;g.target.addClass(d);e.show(a.template);a.type.after_render&&a.type.after_render()}else j()},j=function(){g&&g.target.removeClass(d);g=null;h=null;e.hide()},k=function(a){if(!!g)switch(g.type.type){case cls.PrettyPrinter.ELEMENT:settings.dom.get("highlight-on-hover")&&hostspotlighter.spotlight(g.obj_id,!0)}},l=function(a){if(!!g)switch(g.type.type){case cls.PrettyPrinter.ELEMENT:settings.dom.get("highlight-on-hover")&&(views.dom.isvisible()&&dom_data.target?hostspotlighter.spotlight(dom_data.target,!0):hostspotlighter.clearSpotlight())}},m=function(a){if(!!g)switch(g.type.type){case cls.PrettyPrinter.ELEMENT:dom_data.get_dom(g.rt_id,g.obj_id);j();UI.get_instance().show_view("dom")}},n=function(c,d){if(!g||g.target!=d){j();var e=d.get_attr("parent-node-chain","data-id"),k=parseInt(d.get_attr("parent-node-chain","obj-id")),l=inspections[e],m=l&&l.get_object_with_id(k);if(m&&m[a]){h=m;f.print({target:d,rt_id:l.runtime_id,obj_id:k,class_name:m[a][b]||"",object:m,callback:i})}else{var n=Number(d.get_ancestor_attr("data-rt-id")),k=Number(d.get_ancestor_attr("data-obj-id")),o=d.get_ancestor_attr("data-class-name");if(n&&k&&o){h={rt_id:n,obj_id:k,class_name:o};f.print({target:d,rt_id:n,obj_id:k,class_name:o,object:h,callback:i})}else{var p=d.get_ancestor_attr("data-script-data");if(p&&o){h={script_data:p,class_name:o};f.print({target:d,script_data:p,class_name:o,object:h,callback:i})}}}}};this.handle_function_source=function(a,b){var c=Number(b.get_ancestor_attr("data-rt-id")),d=Number(b.get_ancestor_attr("data-obj-id"));h&&g&&h.rt_id==c&&h.obj_id==d&&g.script&&g.function_definition&&window.views.js_source&&window.views.js_source.show_script(g.script.script_id,g.function_definition.start_line,g.function_definition.end_line)};var o=function(a){e=Tooltips.register(cls.JSInspectionTooltip.tooltip_name,{type:Tooltips.TYPE_SUPPORT_CONTEXT,dynamic_size:!0,set_selected:!0,max_height_target:".js-tooltip-examine-container"});f=new cls.PrettyPrinter;f.register_types([cls.PrettyPrinter.ELEMENT,cls.PrettyPrinter.DATE,cls.PrettyPrinter.FUNCTION,cls.PrettyPrinter.ERROR,cls.PrettyPrinter.REGEXP]);e.ontooltip=n;e.onhide=j;e.ontooltipenter=k;e.ontooltipleave=l;e.ontooltipclick=m};o()};cls.JSInspectionTooltip.tooltip_name="js-inspection";cls.JSInspectionTooltip.register=function(){this._tooltip=new cls.JSInspectionTooltip};cls.JSInspectionTooltip.get_tooltip=function(){return this._tooltip};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].InspectableJSObject=function(a,b,c,d,e,f,g){this._init(a,b,e||null,c,d,f,g)};cls.EcmascriptDebugger["6.0"].InspectableJSObject.prototype=new function(){this.id;this.runtime_id;this.object_id;this.expand=function(a,b){};this.collapse=function(a){};this.get_data=function(a){};this.get_expanded_tree=function(a,b){};this.expand_prototype=function(a){};this.collapse_prototype=function(a){};this.expand_scope_chain=function(){};this.collapse_scope_chain=function(){};this.has_data=function(){};this.get_object_with_id=function(a){};this.set_getter_value=function(a,b){};this.norm_path=function(a,b){};var a=Object.prototype.hasOwnProperty;this._init=function(a,b,c,d,e,f,g){this.id=this._get_id();this._obj_map={0:[[[b],[[d||"","object",,[b,,,,e||""]]]]]};this._queried_map={};this._expand_tree=new Dict({object_id:0,protos:new Dict});this._rt_id=a;this._obj_id=b;this._identifier=d||"";this._virtual_props=c;this._root_path=[this._identifier,this._obj_id,0];this._root_path_joined=this._root_path.join();this.scope_list=f&&f.slice(1);this._has_data=!1;window.inspections||(window.inspections=new cls.Inspections);window.inspections.add(this,g)};this._get_subtree=function(a){var b=0,c=1,d=2,e=this._expand_tree;for(var f=0;a&&a[f];f++){var g=a[f][b],h=a[f][c],i=a[f][d];if(f<a.length-1&&!e.get_chain(["protos",i,g]))throw"not valid path in InspectableJSObject._get_subtree";e.get("protos")||e.set("protos",new Dict);var j=e.get("protos");j.get(i)||j.set(i,new Dict);var k=j.get(i);!k.get(g)&&!isNaN(h)&&k.set(g,new Dict({object_id:h,protos:new Dict}));e=k.get(g)}return e};this._remove_subtree=function(a){var b=0,c=1,d=2,e=this._expand_tree,f=null;for(var g=0;a&&a[g];g++){var h=a[g][b],i=a[g][c],j=a[g][d],k=e.get_chain(["protos",j,h]);if(!k)return f;if(g==a.length-1){f=k;e.get_chain(["protos",j]).delete(h);break}e=k}return f};this._handle_examine_object=function(a,b,c,d,e){const f=0,g=0,h=0,i=1,j=4,k=0,l=4;var m=this._expand_tree,n=null,o=null,p=0,q="",r=null,s=null,t=null,p=0,u=/^\d+$/;if(a)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" failed to examine object");else if(m){this._has_data=!0;n=b[f][0][g];for(p=0;proto=n[p];p++){q=proto[h][j];o=proto[i];o&&proto[i].sort(this._sort_name);if(p==0&&d==this._obj_id&&this._virtual_props){const k=0,v="arguments";if(this._property_list_has_property(proto[i],v))for(var w=0,x=this._virtual_props.length-1;w>-1;w--)this._virtual_props[p][k]==v&&this._virtual_props.splice(p,1);proto[i]=this._virtual_props.concat(proto[i]||[])}}this._obj_map[this._get_subtree(c).get("object_id")]=n;e&&e()}};this._property_list_has_property=function(a,b){const c=0;for(var d=0;a&&d<a.length&&a[d][c]!=b;d++);return Boolean(a&&a[d])};this._sort_name=function(a,b){var c=0,d=/^\d+$/;a=a[c];b=b[c];if(d.test(a)&&d.test(b)){a=Number(a);b=Number(b)}return a<b?-1:a>b?1:0};this._get_all_ids=function b(a,c){c||(c=[]);if(a&&a.get("object_id")){c.push(a.get("object_id"));var d=a.get("protos");d.keys().forEach(function(a){var e=d.get(a);e.keys().forEach(function(a){b(e.get(a),c)})})}return c};this._get_id=function(){var a=0;return function(){a++;return"inspection-id-"+a.toString()}}();this._norm_path=function(a){a[0]&&a[0].join()!=this._root_path_joined&&a.splice(0,0,this._root_path);return a};this._cleanup_maps=function(a){var b=this._get_all_ids(a),c=this._get_all_ids(this._expand_tree);for(var d=0;b[d];d++)c.indexOf(b[d])==-1&&(this._obj_map[b[d]]=this._queried_map[b[d]]=null)};this.expand=function(a,b){const c=1;b===undefined&&(b=[this._root_path]);if(b){this._norm_path(b);var d=b[b.length-1][c];if(this._obj_map[d])a();else{var e=window.tag_manager.set_callback(this,this._handle_examine_object,[b,d,a]),f=window.settings.inspection,g=f.get("show-prototypes")?1:0,h=f.get("show-non-enumerables")?0:1,i=[this._rt_id,[d],g,h];window.services["ecmascript-debugger"].requestExamineObjects(e,i)}}};this.collapse=function(a){if(a){this._norm_path(a);var b=this._remove_subtree(a);b&&this._cleanup_maps(b)}else{this._obj_map=null;this._queried_map=null;this._expand_tree=null;this._virtual_props=null;this._rt_id=0;this._obj_id=0}};this.expand_prototype=function(a){this._norm_path(a);this._get_subtree(a)};this.collapse_prototype=function(a){const b=2;a=this._norm_path(a).slice(0);var c=a.pop()[b],d=this._get_subtree(a),e=d.get(["protos",c]);d.get("protos").delete(c);this._cleanup_maps(e)};this.get_data=function(a){return this._obj_map[a]};this.get_expanded_tree=function(a,b){typeof a=="boolean"&&(b=a?null:[this._root_path]);return this._get_subtree(b)};this.expand_scope_chain=function(){this.scope_list&&(this.scope_list_models=this.scope_list.map(function(a,b,c){var d=b==c.length-1?ui_strings.S_SCOPE_GLOBAL:ui_strings.S_SCOPE_INNER.replace("%s",b+1);return new cls.InspectableJSObject(this._rt_id,a,d)},this));return this.scope_list_models||[]};this.collapse_scope_chain=function(){this.scope_list_models.forEach(function(a){a.collapse()});this.scope_list_models=null};this.has_data=function(){return this._has_data};this.get_object_with_id=function(a){var b=1,c=3,d=0;for(var e in this._obj_map){var f=this._obj_map[e];if(f)for(var g=0,h;h=f[g];g++){var i=h[b];if(i)for(var j=0,k;k=i[j];j++)if(k[c]&&k[c][d]==a)return k}}return null};this.set_getter_value=function(a,b,c){var d=this._obj_map[a],e=1,f=0,g=1,h=2,i=3;if(d)for(var j=0,k,l;!l&&(k=d[j]);j++){var m=k[e];if(m)for(var n=0;l=m[n];n++)if(l[f]==b&&l[g]=="script_getter")break}if(l){l[g]=c[g];l[g]=="object"?l[i]=c[i]:l[h]=c[h];return!0}return!1};this.norm_path=this._norm_path;this.__defineGetter__("runtime_id",function(){return this._rt_id});this.__defineSetter__("runtime_id",function(){});this.__defineGetter__("object_id",function(){return this._obj_id});this.__defineSetter__("object_id",function(){})};(function(){this.register_enabled_listener=function(){window.services["ecmascript-debugger"].addListener("enable-success",this.set_property_filter)};this.set_property_filter=function(a){var b=window.tag_manager.set_callback(this,function(a,b){a&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"static method InspectableJSObject.set_property_filter failed, "+JSON.stringify(b))}),c=[[cls.EcmascriptDebugger["6.0"].property_filter]];window.services["ecmascript-debugger"].requestSetPropertyFilter(b,c)};this.create_filters=function(){var a=cls.EcmascriptDebugger["6.0"].inspection_filters;window.inspectionfilters={};for(var b in a)b.indexOf("_")!=0&&(window.inspectionfilters[b]=new a[b])};this.create_filter=function(a){var b="["+["this","document.createElement('test')","document.implementation.createDocument('', 'test', null)","document.implementation.createHTMLDocument('')","document.createAttribute('foo')","document.createTextNode('')","document.createCDATASection('')","document.createComment('')","document.createDocumentFragment()","document.createElement('div').getElementsByTagName('*')","document.createElement('div').attributes","document.createEvent('Events')","document.createElement('html')","document.createElement('head')","document.createElement('link')","document.createElement('title')","document.createElement('meta')","document.createElement('base')","document.createElement('style')","document.createElement('body')","document.createElement('foo')","document.createElement('input')","document.createElement('isindex')","document.createElement('form')","document.createElement('select')","document.createElement('optgroup')","document.createElement('option')","document.createElement('textarea')","document.createElement('button')","document.createElement('label')","document.createElement('fieldset')","document.createElement('legend')","document.createElement('ul')","document.createElement('ol')","document.createElement('dl')","document.createElement('dir')","document.createElement('menu')","document.createElement('li')","document.createElement('div')","document.createElement('p')","document.createElement('h1')","document.createElement('q')","document.createElement('blockquote')","document.createElement('pre')","document.createElement('br')","document.createElement('basefont')","document.createElement('font')","document.createElement('ins')","document.createElement('a')","document.createElement('image')","document.createElement('object')","document.createElement('param')","document.createElement('applet')","document.createElement('map')","document.createElement('area')","document.createElement('script')","document.createElement('table')","document.createElement('caption')","document.createElement('col')","document.createElement('thead')","document.createElement('tbody')","document.createElement('tr')","document.createElement('td')","document.createElement('frameset')","document.createElement('frame')","document.createElement('iframe')"].join(",")+"]",c=window.runtimes.getSelectedRuntimeId(),d=window.tag_manager.set_callback(this,this.handle_create_filter,[c,a]);window.services["ecmascript-debugger"].requestEval(d,[c,0,0,b])};this.handle_create_filter=function(a,b,c,d){const e=0,f=3,g=0;if(a||b[e]!="completed"||!b[f])opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"static method InspectableJSObject.create_filter failed, "+a+", "+JSON.stringify(b));else{var h=b[f][g],i=window.tag_manager.set_callback(this,this.handle_get_objects,[c,d]),j=[c,[h],0,1,0];window.services["ecmascript-debugger"].requestExamineObjects(i,j)}};this.handle_get_objects=function(a,b,c,d){const e=0,f=0,g=0,h=1,i=3,j=0;if(a)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"static method InspectableJSObject.handle_create_filter failed, "+a+", "+JSON.stringify(b));else{var k=(b&&(b=b[f])&&(b=b[0])&&(b=b[g])&&(b=b[0])&&(b=b[h])||[]).map(function(a){return a[i]?a[i][j]:0}),l=b[i][j],m=window.tag_manager.set_callback(this,this.print_filter,[c,d]),n=[c,k,0,1,0];window.services["ecmascript-debugger"].requestExamineObjects(m,n)}};this.print_filter=function(a,b,c,d){const e=0,f=0,g=0,h=1,i=4,j=0,k=1,l=2,m=3,n=1;var o=null,p=null,q=null,r=0,s=0,t="",u=null,v=[],w=null,x=[];if(a)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"static method InspectableJSObject.handle_get_objects "+a+", "+JSON.stringify(b));else for(;o=b[e][r];r++){p=o[f];u=p&&p[0];w=[];if(u){t=u[g][i];q=u[h];if(q)for(s=0;prop=q[s];s++)prop[k]=="null"?w.push([prop[j],1]):prop[k]=="string"&&prop[l]==""&&w.push([prop[j],5,null,null,""])}w.length&&v.push([t,w])}var y=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length&&a[c]==b[c];c++);return c==a.length},z=function(a){var b=["HTMLObjectElement","HTMLAppletElement"];return a.indexOf("Element")>-1&&b.indexOf(a)==-1},A=null;for(r=0;w=v[r];r++)z(w[j])&&(A?A=A.filter(function(a){for(var b,c=0;b=w[n][c];c++)if(y(a,b))return!0;return!1}):A=w[n]);for(r=0;w=v[r];r++)z(w[j])&&(w[n]=w[n].filter(function(a){for(var b,c=0;b=A[c];c++)if(y(a,b))return!1;return!0}));const B="  ",C="\n",D='"',E='cls.EcmascriptDebugger["6.0"]',F='cls.EcmascriptDebugger["6.0"].inspection_filters';var G=function(a){return Array(a+1).join(B)},H=function(a){return G(this)+JSON.stringify(a)+","},I=function(a){const b=0,c=1,d=1,e=5,f=4;if(a[c]==d)return G(this)+"this."+a[b]+' = {type: "null"};';if(a[c]==e)return G(this)+"this."+a[b]+' = {type: "string", value: "'+a[f]+'"};'};if(d=="js"){x.push('/**\n  * created with cls.EcmascriptDebugger["6.0"].InspectableJSObject.create_filter("js")\n  * filters work the same way as the according scope filters:\n  * if a property has the same type and optionally the same value\n  * as the one in the filter, it will not be displayed.\n  * documentation of the scope filters:\n  *   http://dragonfly.opera.com/app/scope-interface/services/EcmascriptDebugger/EcmascriptDebugger_6_0.html#setpropertyfilter\n  *\n  * 1: // null\n  * 2: // undefined\n  * 3: // boolean\n  * 4: // number\n  * 5: // string\n  * 6: // object\n  */',C,C,C);x.push("window.cls || (window.cls = {});",C);x.push("cls.EcmascriptDebugger || (cls.EcmascriptDebugger = {});",C);x.push(E," || (",E," = {});",C);x.push(F," = {};",C,C);x.push(F,"._Element = new function()",C,"{",C);x.push(A.map(I,1).join(C),C,"};",C,C);for(r=0;w=v[r];r++)x.push(F,".",w[j]," = function()",C,"{",C,w[n].map(I,1).join(C),C,"};",C,C,z(w[j])?F+"."+w[j]+".prototype = "+C+G(2)+F+"._Element;"+C+C:"")}else{x.push('/**\n  * created with cls.EcmascriptDebugger["6.0"].InspectableJSObject.create_filter()\n  * documentation of the filter see\n  *   http://dragonfly.opera.com/app/scope-interface/services/EcmascriptDebugger/EcmascriptDebugger_6_0.html#setpropertyfilter\n  *\n  * 1: // null\n  * 2: // undefined\n  * 3: // boolean\n  * 4: // number\n  * 5: // string\n  * 6: // object\n  */',C,C,C);x.push("window.cls || (window.cls = {});",C);x.push("cls.EcmascriptDebugger || (cls.EcmascriptDebugger = {});",C);x.push(E," || (",E," = {});",C);x.push(E,".ElementFilter =",C);x.push("[",C,A.map(H,1).join(C),C,"]",C,C);x.push(E,".property_filter =",C);x.push("[",C);for(r=0;w=v[r];r++)x.push(G(1),"[",D,w[j],D,",",C,G(2),"[",C,w[n].map(H,3).join(C),C,G(2),"]",z(w[j])?".concat("+E+".ElementFilter)":"",C,G(1),"],",C);x.push("];",C,C)}window.open("data:text/plain,"+encodeURIComponent(x.join("")))}}).apply(cls.EcmascriptDebugger["6.0"].InspectableJSObject);cls.Inspections=function(){this.init()};cls.InspectionsPrototype=function(){this.add=function(a,b){b&&(this._objects[a.object_id]=a);var c=a.id||a.name;if(c)this[c]=a;else throw"The object must have and id or a name"};this.get_object=function(a){return this._objects[a]||null};this.init=function(){this._objects=new HashMap}};cls.Inspections.prototype=new cls.InspectionsPrototype;window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].InspectionView=function(a,b,c){this._data=null;this._last_selected="";this.clearView=function(){};this._tmpl_no_content=function(){return["div",ui_strings.M_VIEW_LABEL_NO_INSPECTION,"class","not-content inspection"]};this._on_object_selected=function(a){this._data=new cls.InspectableJSObject(a.rt_id,a.obj_id);this._last_selected=="object"&&this.update()};this._on_trace_frame_selected=function(a){var b=[["arguments","object",,[a.arg_id,0,"object",,""]],["this","object",,[a.rt_id=="0"?a.rt_id:a.this_id,0,"object",,""]]];this._data=new cls.InspectableJSObject(a.rt_id,a.obj_id,null,null,b);this.update()};this._on_frame_selected=function(a){var b=stop_at
.getFrame(a.frame_index);if(b){var c=b.argument_id&&[["arguments","object",,b.argument_value||[b.argument_id,0,"object",,""]],["this","object",,b.this_value||[b.this_id=="0"?b.rt_id:b.this_id,0,"object",,""]]]||null;this._data=new cls.InspectableJSObject(b.rt_id,b.scope_id,null,null,c,b.scope_list)}else if(this._data&&this._last_selected=="frame"){this._data.collapse();this._data=null}this._last_selected=="frame"&&this.update()};this._on_runtime_destroyed=function(a){if(this._data&&this._data._rt_id==a.id){this._data.collapse();this._data=null;this.clearAllContainers()}};this._on_active_inspection_type=function(a){this._last_selected=a.inspection_type};this._super_init=this.init;this.init=function(a,b,c){this.required_services=["ecmascript-debugger"];var d=window.messages;d.addListener("object-selected",this._on_object_selected.bind(this));d.addListener("frame-selected",this._on_frame_selected.bind(this));d.addListener("trace-frame-selected",this._on_trace_frame_selected.bind(this));d.addListener("runtime-destroyed",this._on_runtime_destroyed.bind(this));d.addListener("active-inspection-type",this._on_active_inspection_type.bind(this));d.addListener("setting-changed",this._on_setting_change.bind(this));this.onbeforesearch=function(a){this._onbeforesearch(a.search_term)}.bind(this);this._super_init(a,b,c)};this.init(a,b,c)};cls.EcmascriptDebugger["6.0"].InspectionView.DEFAULT_COLLAPSED_PROTOS=["*"];cls.EcmascriptDebugger["6.0"].InspectionView.create_ui_widgets=function(){new Settings("inspection",{"show-non-enumerables":!0,"show-prototypes":!0,"show-default-nulls-and-empty-strings":!0,"collapsed-prototypes":this.DEFAULT_COLLAPSED_PROTOS},{"show-prototypes":ui_strings.S_SWITCH_SHOW_PROTOTYPES,"show-default-nulls-and-empty-strings":ui_strings.S_SWITCH_SHOW_FEFAULT_NULLS_AND_EMPTY_STRINGS,"show-non-enumerables":ui_strings.S_SWITCH_SHOW_NON_ENUMERABLES},{checkboxes:["show-prototypes","show-non-enumerables","show-default-nulls-and-empty-strings"],customSettings:["collapsed_protos"]},{collapsed_protos:function(a){return[["setting-composite",["label",ui_strings.S_LABEL_COLLAPSED_INSPECTED_PROTOTYPES,["input","type","text","handler","update-collapsed-prototypes","class","collapsed-prototypes","value",a.get("collapsed-prototypes").join(", ")]],["span","  "],["span",ui_strings.S_BUTTON_TEXT_APPLY,"handler","apply-collapsed-prototypes","class","ui-button","tabindex","1"],["span",ui_strings.S_BUTTON_SET_DEFAULT_VALUE,"handler","default-collapsed-prototypes","class","ui-button","tabindex","1"],"class"," "]]}},"script");window.eventHandlers.input["update-collapsed-prototypes"]=function(a,b){};window.eventHandlers.click["apply-collapsed-prototypes"]=function(a,b){var c=b.parentNode.getElementsByTagName("input")[0].value;try{c=JSON.parse('["'+c.split(",").join('", "')+'"]')}catch(d){alert("Not a valid input.");c=null}c&&window.settings.inspection.set("collapsed-prototypes",c)};window.eventHandlers.click["default-collapsed-prototypes"]=function(a,b){var c=cls.EcmascriptDebugger["6.0"].InspectionView.DEFAULT_COLLAPSED_PROTOS;b.parentNode.getElementsByTagName("input")[0].value=c.join(", ");window.settings.inspection.set("collapsed-prototypes",c)};new ToolbarConfig("inspection",null,[{handler:"inspection-text-search",shortcuts:"inspection-text-search",title:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]);new Switches("inspection",["show-non-enumerables","show-default-nulls-and-empty-strings"]);var a=new TextSearch(1);a.add_listener("onbeforesearch",window.views.inspection.onbeforesearch);var b=function(b){if(b.id=="inspection"){a.setContainer(b.container);a.setFormInput(views.inspection.getToolbarControl(b.container,"inspection-text-search"))}},c=function(b){b.id=="inspection"&&a.cleanup()};messages.addListener("view-created",b);messages.addListener("view-destroyed",c);eventHandlers.input["inspection-text-search"]=function(b,c){a.searchDelayed(c.value)};ActionBroker.get_instance().get_global_handler().register_shortcut_listener("inspection-text-search",cls.Helpers.shortcut_search_cb.bind(a));var d=ActionBroker.get_instance(),e=ContextMenu.get_instance();e.register("object-inspection-key",[{callback:function(a,b){if(b.has_attr("parent-node-chain","data-menu").parentNode.get_attr("parent-node-chain","data-menu")!="watches"){var c=b.parentNode,d=[];while(c){c.nodeName.toLowerCase()=="item"&&d.unshift(c.querySelector("key").textContent);c=c.parentNode}b.get_ancestor(".scope-chain")&&d.shift();if(!d.length)return;var e=/^0$|^[1-9][0-9]*$/,f=d.reduce(function(a,b){if(JSSyntax.is_valid_identifier(b))b="."+b;else{e.test(b)||(b='"'+b+'"');b="["+b+"]"}return a+b});return{label:ui_strings.M_CONTEXTMENU_ADD_WATCH.replace("%s",f.replace("$","$$$")),handler:function(a,b){window.views.watches.add_watch(f)}}}}}])};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].InspectionBaseView=function(){this.createView=function(a){this._is_destroyed=!1;var b=this._data||window.inspections&&window.inspections[this._cur_data];if(b){this._create_view_bound=this._create_view.bind(this,a,b);b.expand(this._create_view_bound)}else{this._create_view_bound=null;a.clearAndRender(this._tmpl_no_content())}};this._on_setting_change=function(a){if(a.id=="inspection")switch(a.key){case"show-default-nulls-and-empty-strings":this.update()}};this._create_view=function(a,b){if(!this._is_destroyed){var c=window.templates.inspected_js_object(b,!1,null,this._searchterm);a.clearAndRender(c)}};this._onbeforesearch=function(a){if(this._create_view_bound&&this.isvisible()){this._searchterm=a;this._create_view_bound()}};this._tmpl_no_content=function(){return[]};this.ondestroy=function(){this._is_destroyed=!0}};cls.EcmascriptDebugger["6.0"].InspectionBaseView.prototype=ViewBase;window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].DOMAttrsView=function(a,b,c){this._data=null;this.required_services=["ecmascript-debugger"];this._on_element_selected=function(a){this._data=a.rt_id&&a.obj_id&&new cls.InspectableJSObject(a.rt_id,a.obj_id)||null;this.update()};this._super_init=this.init;this.init=function(a,b,c){var d=window.messages;d.addListener("element-selected",this._on_element_selected.bind(this));d.addListener("setting-changed",this._on_setting_change.bind(this));this.onbeforesearch=function(a){this._onbeforesearch(a.search_term)}.bind(this);this._super_init(a,b,c)};this.init(a,b,c)};cls.EcmascriptDebugger["6.0"].DOMAttrsView.create_ui_widgets=function(){new ToolbarConfig("dom_attrs",null,[{handler:"dom-attrs-text-search",shortcuts:"dom-attrs-text-search",title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]);new Switches("dom_attrs",["inspection.show-non-enumerables","inspection.show-default-nulls-and-empty-strings"]);var a=new TextSearch(1);a.add_listener("onbeforesearch",window.views.dom_attrs.onbeforesearch);var b=function(b){if(b.id=="dom_attrs"){a.setContainer(b.container);a.setFormInput(views.dom_attrs.getToolbarControl(b.container,"dom-attrs-text-search"))}},c=function(b){b.id=="dom_attrs"&&a.cleanup()};messages.addListener("view-created",b);messages.addListener("view-destroyed",c);eventHandlers.input["dom-attrs-text-search"]=function(b,c){a.searchDelayed(c.value)};ActionBroker.get_instance().get_global_handler().register_shortcut_listener("dom-attrs-text-search",cls.Helpers.shortcut_search_cb.bind(a))};(function(){this.inspected_js_object=function(a,b,c){};this.inspected_js_prototype=function(a,b,c){};const a=0,b=1,c=0,d=4,e=0,f=1,g=2,h=3,i=30,j="style='background-position: 0px -11px' ",k=5,l=6,m=cls.JSInspectionTooltip.tooltip_name;var n=function(a,b,c,d){if(!b)return!0;var e=a.get_chain(["protos",b]);if(!e)return d[0]=="*"?!1:d.indexOf(c)==-1;return!0},o=function(a,b,c,d,e,f){var g=[],h=a.get_data(c);if(h){for(var i=null,j=0;i=h[j];j++)g.extend(p(a,b,i,j,d,e,f,c));if(g.length){g.unshift("<examine-objects data-id='"+a.id+"' data-menu='object-inspection-key'>");g.push("</examine-objects>")}}return g},p=function(c,e,f,g,h,i,j,k){var l=[],m=f[a][d]||"",o=n(e,g,m,h),p=e.get_chain(["protos",g])||new Dict,q=o&&r(c,p,f[b]||[],h,i,m,g,j,k),s=!j||m.toLowerCase().contains(j);if(s||q.length){l.push("<div class='prototype' data-proto-index='"+g+"'>");g&&l.push("<div handler='expand-prototype' class='prototype-chain-object"+(s?"":" no-match")+(o?" unfolded":"")+"'>"+"<input type='button' "+"class='folder-key' "+"proto-index='"+g+"' "+"/>","<key>"+m+"</key>","</div>");o&&l.extend(q);l.push("</div>")}return l},q=function(a){if(a[k])return" data-prop-uid='"+a[l]+"' ";return""},r=function(a,b,k,l,n,p,r,s,t){var u=[],v="",w="",x="",y="",z=0,A=!r&&n&&n[p],B=!1,C=null;for(var D=null,E=0;D=k[E];E++){w=D[g];v=helpers.escapeAttributeHtml(D[e]);switch(x=D[f]){case"number":case"boolean":case"error":(!s||D[e].toLowerCase().contains(s)||w.toLowerCase().contains(s))&&u.push("<item><key class='no-expander' data-spec='dom#"+v+"'"+q(D)+">"+v+"</key> "+"<value class='"+x+"'>"+w+"</value>"+"</item>");break;case"script_getter":(!s||D[e].toLowerCase().contains(s)||w.toLowerCase().contains(s))&&u.push("<item obj-id='"+t+"'>"+"<key class='no-expander' data-spec='dom#"+v+"'"+q(D)+">"+v+"</key> "+"<value class='"+x+"' handler='get-getter-value'>"+"getter</value>"+"</item>");break;case"string":if(A&&D[e]in A&&A[D[e]].type=="string"&&A[D[e]].value===w)continue;y=w.length>i?w.slice(0,i)+"…":"";w=helpers.escapeAttributeHtml(w);y?(!s||D[e].toLowerCase().contains(s)||y.toLowerCase().contains(s))&&u.push("<item><input type='button' handler='expand-value' class='folder-key'/><key data-spec='dom#"+v+"'"+q(D)+">"+v+"</key> "+"<value class='"+x+"' data-value='\""+w+"\"'>"+'"'+helpers.escapeTextHtml(y)+'"'+"</value>"+"</item>"):(!s||D[e].toLowerCase().contains(s)||w.toLowerCase().contains(s))&&u.push("<item><key class='no-expander' data-spec='dom#"+v+"'"+q(D)+">"+v+"</key> "+"<value class='"+x+"'>\""+w+'"</value>'+"</item>");break;case"null":if(A&&D[e]in A&&A[D[e]].type=="null")continue;case"undefined":(!s||D[e].toLowerCase().contains(s)||x.toLowerCase().contains(s))&&u.push("<item><key class='no-expander' data-spec='dom#"+v+"'"+q(D)+">"+v+"</key> "+"<value class='"+x+"'>"+x+"</value>"+"</item>");break;case"object":z=D[h][c];C=b.get(D[e])&&o(a,b.get(D[e]),z,l,n,s);w=D[h][d];B=!s||D[e].toLowerCase().contains(s)||w.toLowerCase().contains(s);if(B||C&&C.length){u.push("<item obj-id='"+z+"'>"+"<input "+"type='button' "+"handler='examine-object'  "+"class='folder-key"+(B?"":" no-match")+"' ");b.get(D[e])&&u.push(j);u.push("/><key "+(B?"":" class='no-match'")+"data-spec='dom#"+v+"'"+q(D)+">"+v+"</key>"+(v?" ":"")+"<value class='object"+(B?"":" no-match")+"' "+"data-spec='dom#"+w+"' "+"data-tooltip='"+m+"' >"+w+"</value>");b.get(D[e])&&u.extend(C);u.push("</item>")}}}return u};this.inspected_js_object=function(a,b,c,d){d=d&&d.toLowerCase();var e=a.get_expanded_tree(b,c),f=window.settings.inspection,g=f.get("collapsed-prototypes"),h=!f.get("show-default-nulls-and-empty-strings")&&window.inspectionfilters,i=o(a,e,e.get("object_id"),g,h,d).join("");a.scope_list&&a.scope_list.length&&!c&&(i+=this.inspected_js_scope_chain(a,d));return i};this.inspected_js_prototype=function(a,b,c,d){var e=1,f=a.get_expanded_tree(null,b),g=f&&a.get_data(f.get("object_id")),h=window.settings.inspection,i=h.get("collapsed-prototypes"),j=!h.get("show-default-nulls-and-empty-strings")&&window.inspectionfilters;return g?p(a,f,g[c],c,i,j,null,b.last[e]).join(""):""};this.inspected_js_scope_chain=function(a,b){var c=[],d=ui_strings.S_LABEL_SCOPE_CHAIN,e=!b||d.toLowerCase().contains(b);if(a.scope_list_models)for(var f=0,g,h;g=a.scope_list_models[f];f++)(h=this.inspected_js_object(g,!0,null,b))&&c.push(h);if(e||c.length){c.unshift("<div class='scope-chain'><header handler='expand-scope-chain' data-id='"+a.id+"' "+(e?"":" class='no-match'")+">"+"<input type='button' "+"class='"+(a.scope_list_models?"unfolded":"")+"' >"+d+"</header>");c.push("</div>")}return c.join("")}}).apply(window.templates||(window.templates={}));(function(){var a=function(a){var b=[],c=null;while(a&&(c=a.parentNode)&&c.parentNode.nodeName.toLowerCase()=="examine-objects"){b.push([a.getElementsByTagName("key")[0].textContent,parseInt(a.getAttribute("obj-id")),parseInt(c.getAttribute("data-proto-index"))]);a=c.parentNode.parentNode}return b.reverse()},b=function(a,b,c,d){b.render(window.templates.inspected_js_object(c,null,d));a.style.backgroundPosition="0px -11px"};window.eventHandlers.click["expand-prototype"]=function(b,c){const d=2;var e=window.inspections[c.get_attr("parent-node-chain","data-id")],f=c.hasClass("unfolded"),g=a(c),h=c.getElementsByTagName("key")[0].textContent;f?e.collapse_prototype(g):e.expand_prototype(g);var i=g.pop()[d],j=window.templates.inspected_js_prototype(e,g,i,h);c.parentNode.re_render(j)};window.eventHandlers.click["examine-object"]=function(c,d){const e=1;var f=d.parentNode,g=window.inspections[f.get_attr("parent-node-chain","data-id")],h=f.getElementsByTagName("examine-objects")[0],i=a(f);if(g)if(h){if(!d.disabled){g.collapse(i);f.removeChild(h);d.style.removeProperty("background-position")}}else{var j=b.bind(this,d,f,g,i);g.expand(j,i)}};window.eventHandlers.click["get-getter-value"]=function(b,c){var e=Number(c.get_attr("parent-node-chain","obj-id")),f=window.inspections[c.get_attr("parent-node-chain","data-id")],g=c.get_ancestor("item"),h=g&&g.querySelector("key"),i=f&&f.norm_path(a(g));if(e&&f&&h&&i){var j=h.textContent,k=d.bind(null,c,e,f,j,i),l=window.tag_manager.set_callback(null,k,[]),m=window.runtimes.get_execution_context(),n=m.rt_id,o=m.thread_id,p=m.frame_index;if(f.runtime_id!=n){n=f.runtime_id;o=0;p=0}var q='obj["'+window.helpers.escape_input(j)+'"]',r=[n,o,p,q,[["obj",e]]];window.services["ecmascript-debugger"].requestEval(l,r)}};window.eventHandlers.click["expand-scope-chain"]=function(a,b){var c=b.parentNode,d=window.inspections[b.getAttribute("data-id")],e=c.getElementsByTagName("examine-objects")[0];if(e){d.collapse_scope_chain();c.re_render(window.templates.inspected_js_scope_chain(d))}else{d.expand_scope_chain();c.re_render(window.templates.inspected_js_scope_chain(d))}};var d=function(a,b,c,d,e,f,g){var h=2,i=0;if(f===i&&c.set_getter_value(b,d,g)&&a.parentNode&&a.parentNode.parentNode){var j=e.pop()[h],k=window.templates.inspected_js_prototype(c,e,j);a.parentNode.parentNode.re_render(k)}},e=function(a,b,c){messages.post("active-inspection-type",{inspection_type:"object"});c&&UI.get_instance().show_view(views.inspection.id);messages.post("object-selected",{rt_id:a,obj_id:b})};window.eventHandlers.click["inspect-object-link"]=function(a,b){var c=Number(b.get_ancestor_attr("rt-id")||b.get_ancestor_attr("data-rt-id")),d=Number(b.get_ancestor_attr("obj-id")||b.get_ancestor_attr("data-obj-id"));c&&d&&e(c,d,!0)};window.eventHandlers.click["inspect-object-inline-link"]=function(a,b){if(a.target.nodeName.toLowerCase()=="key"&&a.target.parentNode.hasAttribute("obj-id")){var c=parseInt(a.target.parentNode.getAttribute("obj-id")),d=a.target.get_attr("parent-node-chain","data-id"),f=d&&window.inspections[d],g=f&&f.runtime_id;e(g,c)}}})();window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].inspection_filters={};cls.EcmascriptDebugger["6.0"].inspection_filters._Element=new function(){this.accessKey={type:"string",value:""};this.className={type:"string",value:""};this.dir={type:"string",value:""};this.firstChild={type:"null"};this.firstElementChild={type:"null"};this.id={type:"string",value:""};this.innerHTML={type:"string",value:""};this.innerText={type:"string",value:""};this.lang={type:"string",value:""};this.lastChild={type:"null"};this.lastElementChild={type:"null"};this.namespaceURI={type:"null"};this.nextElementSibling={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.offsetParent={type:"null"};this.parentElement={type:"null"};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousElementSibling={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""};this.title={type:"string",value:""};this.unselectable={type:"string",value:""};this.onscroll={type:"null"};this.onfocusin={type:"null"};this.onfocusout={type:"null"};this.onclick={type:"null"};this.onmousedown={type:"null"};this.onmouseup={type:"null"};this.onmouseover={type:"null"};this.onmouseenter={type:"null"};this.onmousemove={type:"null"};this.onmouseout={type:"null"};this.onmouseleave={type:"null"};this.onmousewheel={type:"null"};this.onkeypress={type:"null"};this.onkeydown={type:"null"};this.onkeyup={type:"null"};this.onload={type:"null"};this.onunload={type:"null"};this.onabort={type:"null"};this.onerror={type:"null"};this.onfocus={type:"null"};this.onblur={type:"null"};this.ondblclick={type:"null"};this.oncontextmenu={type:"null"};this.onreadystatechange={type:"null"};this.oninvalid={type:"null"};this.onloadstart={type:"null"};this.onprogress={type:"null"};this.onsuspend={type:"null"};this.onstalled={type:"null"};this.onloadend={type:"null"};this.onemptied={type:"null"};this.onplay={type:"null"};this.onpause={type:"null"};this.onloadedmetadata={type:"null"};this.onloadeddata={type:"null"};this.onwaiting={type:"null"};this.onplaying={type:"null"};this.onseeking={type:"null"};this.onseeked={type:"null"};this.ontimeupdate={type:"null"};this.onended={type:"null"};this.oncanplay={type:"null"};this.oncanplaythrough={type:"null"};this.onratechange={type:"null"};this.ondurationchange={type:"null"};this.onvolumechange={type:"null"};this.ontouchstart={type:"null"};this.ontouchmove={type:"null"};this.ontouchend={type:"null"};this.ontouchcancel={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.Window=function(){this.defaultStatus={type:"string",value:""};this.event={type:"null"};this.frameElement={type:"null"};this.name={type:"string",value:""};this.opener={type:"null"};this.status={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUnknownElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUnknownElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.XMLDocument=function(){this.attributes={type:"null"};this.baseURI={type:"null"};this.cookie={type:"string",value:""};this.defaultView={type:"null"};this.doctype={type:"null"};this.documentURI={type:"null"};this.localName={type:"null"};this.location={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.ownerDocument={type:"null"};this.parentNode={type:"null"};this.parentWindow={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.referrer={type:"string",value:""};this.textContent={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDocument=function(){this.activeElement={type:"null"};this.alinkColor={type:"string",value:""};this.attributes={type:"null"};this.baseURI={type:"null"};this.bgColor={type:"string",value:""};this.cookie={type:"string",value:""};this.defaultView={type:"null"};this.dir={type:"string",value:""};this.documentURI={type:"null"};this.fgColor={type:"string",value:""};this.linkColor={type:"string",value:""};this.localName={type:"null"};this.location={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.ownerDocument={type:"null"};this.parentNode={type:"null"};this.parentWindow={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.referrer={type:"string",value:""};this.textContent={type:"null"};this.title={type:"string",value:""};this.vlinkColor={type:"string",value:""};this.onscroll={type:"null"};this.onfocusin={type:"null"};this.onfocusout={type:"null"};this.onclick={type:"null"};this.onmousedown={type:"null"};this.onmouseup={type:"null"};this.onmouseover={type:"null"};this.onmousemove={type:"null"};this.onmouseout={type:"null"};this.onmousewheel={type:"null"};this.onkeypress={type:"null"};this.onkeydown={type:"null"};this.onkeyup={type:"null"};this.onload={type:"null"};this.onabort={type:"null"};this.onerror={type:"null"};this.onselect={type:"null"};this.onchange={type:"null"};this.onsubmit={type:"null"};this.onreset={type:"null"};this.onfocus={type:"null"};this.onblur={type:"null"};this.ondblclick={type:"null"};this.oncontextmenu={type:"null"};this.onreadystatechange={type:"null"};this.oninput={type:"null"};this.oninvalid={type:"null"};this.onloadstart={type:"null"};this.onprogress={type:"null"};this.onsuspend={type:"null"};this.onstalled={type:"null"};this.onemptied={type:"null"};this.onplay={type:"null"};this.onpause={type:"null"};this.onloadedmetadata={type:"null"};this.onloadeddata={type:"null"};this.onwaiting={type:"null"};this.onplaying={type:"null"};this.onseeking={type:"null"};this.onseeked={type:"null"};this.ontimeupdate={type:"null"};this.onended={type:"null"};this.oncanplay={type:"null"};this.oncanplaythrough={type:"null"};this.onratechange={type:"null"};this.ondurationchange={type:"null"};this.onvolumechange={type:"null"};this.ontouchstart={type:"null"};this.ontouchmove={type:"null"};this.ontouchend={type:"null"};this.ontouchcancel={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.Attr=function(){this.attributes={type:"null"};this.firstChild={type:"null"};this.lastChild={type:"null"};this.localName={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"string",value:""};this.ownerElement={type:"null"};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.text={type:"string",value:""};this.textContent={type:"string",value:""};this.value={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.Text=function(){this.attributes={type:"null"};this.data={type:"string",value:""};this.firstChild={type:"null"};this.lastChild={type:"null"};this.localName={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"string",value:""};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""};this.wholeText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.CDATASection=function(){this.attributes={type:"null"};this.data={type:"string",value:""};this.firstChild={type:"null"};this.lastChild={type:"null"};this.localName={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"string",value:""};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""};this.wholeText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.Comment=function(){this.attributes={type:"null"};this.data={type:"string",value:""};this.firstChild={type:"null"};this.lastChild={type:"null"};this.localName={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"string",value:""};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.DocumentFragment=function(){this.attributes={type:"null"};this.firstChild={type:"null"};this.lastChild={type:"null"};this.localName={type:"null"};this.namespaceURI={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.Event=function(){this.currentTarget={type:"null"};this.srcElement={type:"null"};this.target={type:"null"};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHtmlElement=function(){this.outerText={type:"string",value:""};this.version={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHtmlElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHeadElement=function(){this.outerText={type:"string",value:""};this.profile={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHeadElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLinkElement=function(){this.charset={type:"string",value:""};this.href={type:"string",value:""};this.hreflang={type:"string",value:""};this.media={type:"string",value:""};this.outerText={type:"string",value:""};this.rel={type:"string",value:""};this.rev={type:"string",value:""};this.target={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLinkElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTitleElement=function(){this.outerText={type:"string",value:""};this.text={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTitleElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMetaElement=function(){this.content={type:"string",value:""};this.httpEquiv={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.scheme={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMetaElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBaseElement=function(){this.href={type:"string",value:""};this.outerText={type:"string",value:""};this.target={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBaseElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLStyleElement=function(){this.media={type:"string",value:""};this.outerText={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLStyleElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBodyElement=function(){this.aLink={type:"string",value:""};this.background={type:"string",value:""};this.bgColor={type:"string",value:""};this.link={type:"string",value:""};this.outerText={type:"string",value:""};this.text={type:"string",value:""};this.vLink={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBodyElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUnknownElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUnknownElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLInputElement=function(){this.accept={type:"string",value:""};this.align={type:"string",value:""};this.alt={type:"string",value:""};this.autocomplete={type:"string",value:""};this.defaultValue={type:"string",value:""};this.files={type:"null"};this.form={type:"null"};this.formAction={type:"string",value:""};this.formEnctype={type:"string",value:""};this.formMethod={type:"string",value:""};this.formTarget={type:"string",value:""};this.inputmode={type:"string",value:""};this.list={type:"null"};this.max={type:"string",value:""};this.min={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.pattern={type:"string",value:""};this.placeholder={type:"string",value:""};this.selectedOption={type:"null"};this.src={type:"string",value:""};this.step={type:"string",value:""};this.useMap={type:"string",value:""};this.validationMessage={type:"string",value:""};this.value={type:"string",value:""};this.valueAsDate={type:"null"};this.onselect={type:"null"};this.onchange={type:"null"};this.onsubmit={type:"null"};this.onreset={type:"null"};this.oninput={type:"null"};this.onforminput={type:"null"};this.onformchange={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLInputElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLIsIndexElement=function(){this.form={type:"null"};this.outerText={type:"string",value:""};this.prompt={type:"string",value:""};this.validationMessage={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLIsIndexElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFormElement=function(){this.acceptCharset={type:"string",value:""};this.action={type:"string",value:""};this.encoding={type:"string",value:""};this.enctype={type:"string",value:""};this.method={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.target={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFormElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLSelectElement=function(){this.autocomplete={type:"string",value:""};this.form={type:"null"};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.validationMessage={type:"string",value:""};this.value={type:"string",value:""};this.onselect={type:"null"};this.onchange={type:"null"};this.onsubmit={type:"null"};this.onreset={type:"null"};this.oninput={type:"null"};this.onforminput={type:"null"};this.onformchange={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLSelectElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOptGroupElement=function(){this.label={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOptGroupElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOptionElement=function(){this.form={type:"null"};this.label={type:"string",value:""};this.outerText={type:"string",value:""};this.text={type:"string",value:""};this.validationMessage={type:"string",value:""};this.value={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOptionElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTextAreaElement=function(){this.defaultValue={type:"string",value:""};this.form={type:"null"};this.inputmode={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.pattern={type:"string",value:""};this.placeholder={type:"string",value:""};this.validationMessage={type:"string",value:""};this.value={type:"string",value:""};this.wrap={type:"string",value:""};this.onselect={type:"null"};this.onchange={type:"null"};this.onsubmit={type:"null"};this.onreset={type:"null"};this.oninput={type:"null"};this.onforminput={type:"null"};this.onformchange={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTextAreaElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLButtonElement=function(){this.form={type:"null"};this.formAction={type:"string",value:""};this.formEnctype={type:"string",value:""};this.formMethod={type:"string",value:""};this.formTarget={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.validationMessage={type:"string",value:""};this.value={type:"string",value:""};this.onselect={type:"null"};this.onchange={type:"null"};this.onsubmit={type:"null"};this.onreset={type:"null"};this.oninput={type:"null"};this.onforminput={type:"null"};this.onformchange={type:"null"}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLButtonElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLabelElement=function(){this.control={type:"null"};this.form={type:"null"};this.htmlFor={type:"string",value:""};this.outerText={type:"string",value:""};this.validationMessage={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters
.HTMLLabelElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFieldSetElement=function(){this.form={type:"null"};this.outerText={type:"string",value:""};this.validationMessage={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFieldSetElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLegendElement=function(){this.align={type:"string",value:""};this.form={type:"null"};this.outerText={type:"string",value:""};this.validationMessage={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLegendElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUListElement=function(){this.outerText={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLUListElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOListElement=function(){this.outerText={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLOListElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDListElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDListElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDirectoryElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDirectoryElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMenuElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMenuElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLIElement=function(){this.outerText={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLLIElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDivElement=function(){this.align={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLDivElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLParagraphElement=function(){this.align={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLParagraphElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHeadingElement=function(){this.align={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLHeadingElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLQuoteElement=function(){this.cite={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLQuoteElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLQuoteElement=function(){this.cite={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLQuoteElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLPreElement=function(){this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLPreElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBRElement=function(){this.clear={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBRElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBaseFontElement=function(){this.color={type:"string",value:""};this.face={type:"string",value:""};this.outerText={type:"string",value:""};this.size={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLBaseFontElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFontElement=function(){this.color={type:"string",value:""};this.face={type:"string",value:""};this.outerText={type:"string",value:""};this.size={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFontElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLModElement=function(){this.cite={type:"string",value:""};this.dateTime={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLModElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLAnchorElement=function(){this.charset={type:"string",value:""};this.coords={type:"string",value:""};this.href={type:"string",value:""};this.hreflang={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.rel={type:"string",value:""};this.rev={type:"string",value:""};this.shape={type:"string",value:""};this.target={type:"string",value:""};this.text={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLAnchorElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLImageElement=function(){this.align={type:"string",value:""};this.alt={type:"string",value:""};this.border={type:"string",value:""};this.longDesc={type:"string",value:""};this.lowsrc={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.src={type:"string",value:""};this.useMap={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLImageElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLObjectElement=function(){this.accessKey={type:"string",value:""};this.align={type:"string",value:""};this.archive={type:"string",value:""};this.border={type:"string",value:""};this.classId={type:"string",value:""};this.className={type:"string",value:""};this.code={type:"string",value:""};this.codeBase={type:"string",value:""};this.codeType={type:"string",value:""};this.contentDocument={type:"null"};this.contentWindow={type:"null"};this.data={type:"string",value:""};this.dir={type:"string",value:""};this.firstChild={type:"null"};this.firstElementChild={type:"null"};this.form={type:"null"};this.height={type:"string",value:""};this.id={type:"string",value:""};this.innerHTML={type:"string",value:""};this.innerText={type:"string",value:""};this.lang={type:"string",value:""};this.lastChild={type:"null"};this.lastElementChild={type:"null"};this.name={type:"string",value:""};this.namespaceURI={type:"null"};this.nextElementSibling={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.offsetParent={type:"null"};this.outerText={type:"string",value:""};this.parentElement={type:"null"};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousElementSibling={type:"null"};this.previousSibling={type:"null"};this.standby={type:"string",value:""};this.textContent={type:"string",value:""};this.title={type:"string",value:""};this.type={type:"string",value:""};this.unselectable={type:"string",value:""};this.useMap={type:"string",value:""};this.validationMessage={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLParamElement=function(){this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.type={type:"string",value:""};this.value={type:"string",value:""};this.valueType={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLParamElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLAppletElement=function(){this.accessKey={type:"string",value:""};this.align={type:"string",value:""};this.alt={type:"string",value:""};this.archive={type:"string",value:""};this.className={type:"string",value:""};this.code={type:"string",value:""};this.codeBase={type:"string",value:""};this.dir={type:"string",value:""};this.firstChild={type:"null"};this.firstElementChild={type:"null"};this.height={type:"string",value:""};this.id={type:"string",value:""};this.innerHTML={type:"string",value:""};this.innerText={type:"string",value:""};this.lang={type:"string",value:""};this.lastChild={type:"null"};this.lastElementChild={type:"null"};this.name={type:"string",value:""};this.namespaceURI={type:"null"};this.nextElementSibling={type:"null"};this.nextSibling={type:"null"};this.nodeValue={type:"null"};this.object={type:"string",value:""};this.offsetParent={type:"null"};this.outerText={type:"string",value:""};this.parentElement={type:"null"};this.parentNode={type:"null"};this.prefix={type:"null"};this.previousElementSibling={type:"null"};this.previousSibling={type:"null"};this.textContent={type:"string",value:""};this.title={type:"string",value:""};this.unselectable={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMapElement=function(){this.name={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLMapElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLAreaElement=function(){this.alt={type:"string",value:""};this.coords={type:"string",value:""};this.href={type:"string",value:""};this.outerText={type:"string",value:""};this.shape={type:"string",value:""};this.target={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLAreaElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLScriptElement=function(){this.charset={type:"string",value:""};this.outerText={type:"string",value:""};this.src={type:"string",value:""};this.text={type:"string",value:""};this.type={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLScriptElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableElement=function(){this.align={type:"string",value:""};this.bgColor={type:"string",value:""};this.border={type:"string",value:""};this.caption={type:"null"};this.cellPadding={type:"string",value:""};this.cellSpacing={type:"string",value:""};this.frame={type:"string",value:""};this.outerText={type:"string",value:""};this.rules={type:"string",value:""};this.summary={type:"string",value:""};this.tFoot={type:"null"};this.tHead={type:"null"};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableCaptionElement=function(){this.align={type:"string",value:""};this.outerText={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableCaptionElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableColElement=function(){this.align={type:"string",value:""};this.ch={type:"string",value:""};this.chOff={type:"string",value:""};this.outerText={type:"string",value:""};this.vAlign={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableColElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableSectionElement=function(){this.align={type:"string",value:""};this.ch={type:"string",value:""};this.chOff={type:"string",value:""};this.outerText={type:"string",value:""};this.vAlign={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableSectionElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableSectionElement=function(){this.align={type:"string",value:""};this.ch={type:"string",value:""};this.chOff={type:"string",value:""};this.outerText={type:"string",value:""};this.vAlign={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableSectionElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableRowElement=function(){this.align={type:"string",value:""};this.bgColor={type:"string",value:""};this.ch={type:"string",value:""};this.chOff={type:"string",value:""};this.height={type:"string",value:""};this.outerText={type:"string",value:""};this.vAlign={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableRowElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableCellElement=function(){this.abbr={type:"string",value:""};this.align={type:"string",value:""};this.axis={type:"string",value:""};this.bgColor={type:"string",value:""};this.ch={type:"string",value:""};this.chOff={type:"string",value:""};this.headers={type:"string",value:""};this.height={type:"string",value:""};this.outerText={type:"string",value:""};this.scope={type:"string",value:""};this.vAlign={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLTableCellElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFrameSetElement=function(){this.cols={type:"string",value:""};this.outerText={type:"string",value:""};this.rows={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFrameSetElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFrameElement=function(){this.contentDocument={type:"null"};this.contentWindow={type:"null"};this.frameBorder={type:"string",value:""};this.longDesc={type:"string",value:""};this.marginHeight={type:"string",value:""};this.marginWidth={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.scrolling={type:"string",value:""};this.src={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLFrameElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLIFrameElement=function(){this.align={type:"string",value:""};this.contentDocument={type:"null"};this.contentWindow={type:"null"};this.frameBorder={type:"string",value:""};this.height={type:"string",value:""};this.longDesc={type:"string",value:""};this.marginHeight={type:"string",value:""};this.marginWidth={type:"string",value:""};this.name={type:"string",value:""};this.outerText={type:"string",value:""};this.scrolling={type:"string",value:""};this.src={type:"string",value:""};this.width={type:"string",value:""}};cls.EcmascriptDebugger["6.0"].inspection_filters.HTMLIFrameElement.prototype=cls.EcmascriptDebugger["6.0"].inspection_filters._Element;window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].InspectableDOMNode=function(a,b,c){this._init(a,b,c)};cls.EcmascriptDebugger["6.0"].InspectableDOMNode.OBJECT_ID=0;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.TYPE=1;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.NAME=2;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.DEPTH=3;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.NAMESPACE_PREFIX=4;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.ATTRIBUTE_LIST=5;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.CHILDREN_LENGTH=6;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.VALUE=7;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PUBLIC_ID=8;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.SYSTEM_ID=9;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.RUNTIME_ID=10;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.CONTENT_DOCUMENT=11;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.FRAME_ELEMENT=12;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.MATCH_REASON=13;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_ELEMENT=14;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.EVENT_LISTENER_LIST=15;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_NODE=0;cls.EcmascriptDebugger["6.0"].InspectableDOMNode.prototype=new function(){var a=0,b=0,c=1,d=2,e=3,f=5,g=0,h=1,i=2,j=6,k=4,l=5,m=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.MATCH_REASON,n="search",o=1,p=2,q=3,r=0,s=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_ELEMENT,t=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_NODE,u=1,v=2,w=3,x=4,y=[u,w,x],z=[v],A=0,B={},C=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.EVENT_LISTENER_LIST;B[u]="before";B[v]="after";B[w]="first-letter";B[x]="first-line";this._set_mime=function(){if(this._data)for(var a=null,b=0;a=this._data[b];b++)if(a[c]==1)return/^[A-Z][A-Z0-9]*$/.test(a[d])&&"text/html"||"application/xml";return""};this.get_mime=function(){return this._mime};this.isTextHtml=function(){return this._data.length&&this._mime=="text/html"||!1};this.expand=function(a,b,c){this._get_dom(b,c||"children",a)};this.search=function(a,b,c,d,e){this._isprocessing=!0;var f=window.tag_manager.set_callback(this,this.__handle_dom,[d,n,e]);this.search_type=b;var g=[this._data_runtime_id,a,b,d||null,c||0];services["ecmascript-debugger"].requestSearchDom(f,g)};this.get_match_count=function(){var a=0,b=0,c=this._data?this._data.length:0;for(;a<c;a++)this._data[a][m]==q&&b++;return b};this.clear_search=function(){for(var a=0;this._data[a];a++)this._data[a][m]=o};this.node_has_attr=function(a,b){var c=this.get_node(a),d=c&&c[f];return d&&d.some(function(a){return a[h]==b})};this._get_dom=function(a,b,c){this._isprocessing=!0;var d=window.tag_manager.set_callback(this,this.__handle_dom,[a,b,c]);services["ecmascript-debugger"].requestInspectDom(d,[a,b])};this.__handle_dom=function(c,d,e,f,g){var h=d[a]||[],i=ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this.__handle_dom failed in DOMBaseData",j=null,k=0;if(!c){switch(f){case n:case"parent-node-chain-with-children":if(f!="search"||!e){this._data=h;this._unfold_pseudos();break};case"subtree":case"children":case"node":for(;this._data[k]&&this._data[k][b]!=e;k++);if(this._data[k]){if(f=="search"){this.clear_search();for(var l=0;h[l]&&h[l][b]!=e;l++);h[l]&&(h=h.slice(l))}if(h[0])if(e==h[0][b]){this.collapse(e);this._data.insert(k,h,1)}else this._data.insert(k+1,h);this._unfold_pseudos(k,h.length,f=="subtree")}else if(!this._data.length){this._data=h;this._unfold_pseudos()}else opera.postError(i)}this._mime=this._set_mime();g&&g()}else if(f=="search"){this._data=[];g()}else if(this._has_error_handling){this.error=d[A];g&&g()}else opera.postError(i+" "+JSON.stringify(d));this._isprocessing=!1};this._unfold_pseudos=function(a,b,c){typeof a=="number"||(a=0);typeof b=="number"||(b=this._data?this._data.length:0);if(this._data&&this._data[a]){var d=this._data[a][e],f=[],g=a,h=0,i=null;for(;g<=a+b&&(i=this._data[g+h]);g++){if(i[e]>d){f.push(this._data[g+h-1]);h+=this._insert_pseudos(f.last,g+h,y);d++}else if(i[e]<d)while(i[e]<d){h+=this._insert_pseudos(f.last,g+h,z);f.pop();d--}if(!i[j]&&(c||d==this._data[a][e])){h+=this._insert_pseudos(i,g+h+1,y);h+=this._insert_pseudos(i,g+h+1,z)}}while(f.length)h+=this._insert_pseudos(f.pop(),g+h,z)}};this._insert_pseudos=function(a,c,d){var f=[];if(a&&a[s])for(var g=0,h;h=a[s][g];g++)d.contains(h[r])&&f.push([a[b],t,B[h[r]],a[e]+1]);f.length&&this._data.insert(c,f);return f.length};this.__defineGetter__("isprocessing",function(){return this._isprocessing});this.__defineSetter__("isprocessing",function(){});this.collapse=function(a){var c=0,d=0,f=0;for(;this._data[c]&&this._data[c][b]!=a;c++);if(this._data[c]){f=this._data[c][e];c+=1;d=c;while(this._data[d]&&this._data[d][e]>f)d++;d-c&&this._data.splice(c,d-c)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing refrence in collapse_node in DOMBaseData")};this._get_element_name=function(a,b,c){var e=a[d],g=a[f],j="",k="";b&&(e=e.toLowerCase());if(c)for(var l,m=0;l=g[m];m++){l[h]=="id"&&(j="#"+l[i]);l[h]=="class"&&l[i].trim()&&(k="."+l[i].trim().replace(/\s+/g,"."))}return e+j+k};this._parse_parent_offset=function(a){var b=!1,c=null;if(a){c=a.pop();c?b=c[1]=="1":opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed in this._parse_parent_offset in InspectableDOMNode")}return b};this.get_css_path=this._get_css_path=function(a,d,f,g,h){var i=0,j=0,k=[];if(a){d&&(d=d.slice(0));for(;this._data[i]&&this._data[i][b]!=a;i++);if(this._data[i]){this._data[i][c]==1&&k.unshift({name:this._get_element_name(this._data[i],f,g),id:this._data[i][b],combinator:"",is_parent_offset:this._parse_parent_offset(d)});j=i;i--;for(;this._data[i];i--)if(this._data[i][c]==1&&this._data[i][e]<=this._data[j][e]){this._data[i][e]<this._data[j][e]?k.unshift({name:this._get_element_name(this._data[i],f,g),id:this._data[i][b],combinator:">",is_parent_offset:this._parse_parent_offset(d)}):h&&k.unshift({name:this._get_element_name(this._data[i],f,g),id:this._data[i][b],combinator:"+",is_parent_offset:!1});j=i}}}return k};this.has_data=function(){return Boolean(this._data&&this._data.length)};this.get_node=function(a){if(this.has_data()){for(var c=0;this._data[c]&&this._data[c][b]!=a;c++);return this._data[c]}return null};this.has_node=function(a){return Boolean(this.get_node(a))};this.get_ev_listeners=function(a){var b=this.get_node(a);return b&&b[C]||[]};this.get_data=this.getData=function(){return this._data};this.getParentElement=function(a){var d=0,f=0;for(;this._data[d]&&this._data[d][b]!=a;d++);if(this._data[d]){f=this._data[d][e];for(;this._data[d]&&(this._data[d][c]!=1&&this._data[d][c]!=9||!(this._data[d][e]<f));d--);return this._data[d]&&this._data[d][b]||0}};this.getRootElement=function(){for(var a=0;this._data[a]&&this._data[a][c]!=1;a++);return this._data[a]&&this._data[a][b]||0};this.get_depth_of_first_element=function(){for(var a=0;this._data[a]&&this._data[a][c]!=1;a++);return this._data[a]&&this._data[a][e]||0};this.getDataRuntimeId=function(){return this._data_runtime_id};this._get_id=function(){var a=0;return function(){a++;return"dom-inspection-id-"+a.toString()}}();this._init=function(a,b,c){this.id=this._get_id();this._data_runtime_id=a||0;this._root_obj_id=b||0;this._has_error_handling=c;this._data=[];this._mime="";window.dominspections||new cls.Namespace("dominspections");window.dominspections.add(this)}};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].DOMData=function(a){this.get_dom=function(a,b,c,d){};this.get_snapshot=function(){};this.bind=function(a){};const b=0,c=1,d=3,e=6,f=0,g=1,h=2,i=3,j=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_NODE;this._view_id=a;this._settings_id=a;this._current_target=0;this._active_window=[];this._element_selected_state=f;this._reset_spotlight_timeouts=new Timeouts;this._is_waiting=!1;this._editor_active=!1;this._last_selectors={};this._spotlight=function(a){this._reset_spotlight_timeouts.clear();window.settings.dom.get("highlight-on-hover")&&hostspotlighter.soft_spotlight(a.object_id)};this._reset_spotlight=function(){this._current_target&&window.settings.dom.get("highlight-on-hover")&&hostspotlighter.spotlight(this._current_target)};this._set_reset_spotlight=function(a){this._reset_spotlight_timeouts.set(this._reset_spotlight_bound,70)};this._on_setting_change=function(a){a.id==this._settings_id&&window.views[this._view_id].isvisible()&&a.key in this._settings&&this._handle_setting(a.key)};this._on_show_view=function(a){if(a.id==this._view_id)if(this._active_window.length){this._data_runtime_id||(this._data_runtime_id=this._active_window[0]);for(var b in this._settings)window.settings[this._settings_id].get(b)&&this._handle_setting(b);if(!this._is_waiting)if(!this._data.length&&this._element_selected_state==g){var c=this._data_runtime_id;if(runtime_onload_handler.is_loaded(c))this._get_initial_view(c);else{var d=this._get_initial_view.bind(this,c);runtime_onload_handler.register(c,d,d,500)}}else this._element_selected_state!=g&&this._element_selected_state!=i&&this._get_selected_element(this._data_runtime_id)}else{window.views.dom.update();window.messages.post("element-selected",{obj_id:0,rt_id:0,model:null})}};this._on_hide_view=function(a){a.id==this._view_id&&this._remove_all_active_window_listeners()};this._settings={"highlight-on-hover":{events:[["mouseover","_spotlight_bound"],["mouseout","_set_reset_spotlight_bound"]],off:function(){window.hostspotlighter.clearSpotlight()},on:function(){window.dom_data.target&&window.hostspotlighter.spotlight(window.dom_data.target)}},"find-with-click":{events:[["click","_click_handler_host_bound"]]},"update-on-dom-node-inserted":{events:[["DOMNodeRemoved","_dom_node_removed_handler_bound"]]}};this._handle_setting=function(a){var b=0,c=1,d=window.host_tabs.activeTab,e=window.settings[this._settings_id].get(a),f=this._settings[a].events,g=null,h=(e?"add":"remove")+"EventListener",i=0;for(;g=f[i];i++)d[h](g[b],this[g[c]]);!e&&this._settings[a].off&&this._settings[a].off();e&&this._settings[a].on&&this._settings[a].on()};this._remove_all_active_window_listeners=function(){var a=0,b=1,c=window.host_tabs.activeTab,d=null,e=null,f="",g=0;for(f in this._settings){d=this._settings[f].events;for(g=0;e=d[g];g++)c.removeEventListener(e[a],this[e[b]])}};this._get_selected_element=function(a){var b=tagManager.set_callback(this,this._on_object_selected,[a,!0]);window.services["ecmascript-debugger"].requestGetSelectedObject(b)};this._on_object_selected=function(a,b,c,d){const e=0,f=1,j=2;this._element_selected_state=g;if(b[e]){this._data_runtime_id=b[j];if(!window.views[this._view_id].isvisible()){if(b[f]==window.window_manager_data.get_debug_context())this._element_selected_state=h;else{this._element_selected_state=i;window.window_manager_data.set_debug_context(b[f])}this._data=[];window.topCell.showView(this._view_id)}else if(b[f]==window.window_manager_data.get_debug_context()){window["cst-selects"]["document-select"].updateElement();this._get_dom_sub(b[j],b[e],!0)}else{this._element_selected_state=i;window.window_manager_data.set_debug_context(b[f])}}else d&&this._get_initial_view(c)};this._on_profile_disabled=function(a){a.profile==window.app.profiles.DEFAULT&&this._on_reset_state()};this._on_reset_state=function(){this._data=[];this._mime="";this._data_runtime_id=0;this._current_target=0;this._active_window=[];this.target=0;window.messages.post("element-selected",{obj_id:0,rt_id:0,model:null})};this._on_active_tab=function(a){if(!this._data_runtime_id||a.activeTab.indexOf(this._data_runtime_id)==-1)if(this._element_selected_state==i){this._get_selected_element();this._active_window=a.activeTab.slice()}else{this._on_reset_state();this._data_runtime_id=a.activeTab[0];window["cst-selects"]["document-select"].updateElement();this._active_window=a.activeTab.slice();window.views[this._view_id].isvisible()&&this._on_show_view({id:this._view_id})}};this._on_top_runtime_update=function(){window["cst-selects"]["document-select"].updateElement()};this._on_dom_editor_active=function(a){this._editor_active=a.editor_active};this._click_handler_host=function(a){var b=a.runtime_id,c=a.object_id,d=a.highlight===!1?!1:!0;this._get_dom_sub(b,c,d)};this._get_dom_sub=function(a,b,c,d){var e=this._handle_get_dom.bind(this,a,b,c,d);this._current_target=b;this._data=[];this._mime="";this._get_dom(b,"parent-node-chain-with-children",e)};this._dom_node_removed_handler=function(a){var f=a.runtime_id,g=a.object_id,h=null,i=0,k=0,l=0,m=0,n="";if(this._data_runtime_id==f){for(;(h=this._data[i])&&g!=h[b];i++);if(h){l=h[d];k=i+1;while(this._data[k]&&this._data[k][d]>l)k++;this._data.splice(i,k-i);i--;l--;while(this._data[i]&&this._data[i][d]>l)i--;if(this._data[i]){var o=0;k=i+1;while(this._data[k]&&this._data[k][d]>l){this._data[k][d]==l+1&&this._data[k][c]!==j&&o++;k++}this._data[i][e]=o}this._editor_active||window.views[this._view_id].update()}}};this._on_runtime_stopped=function(a){if(a.id==this._data_runtime_id){this._data=[];this._mime="";this._data_runtime_id=0;window.views[this._view_id].clearAllContainers()}};this._handle_get_dom=function(a,d,e,f){for(var g=0;this._data[g]&&this._data[g][b]!=d;g++);while(this._data[g]&&this._data[g][c]!=1)g--;this._data[g]&&this._data[g][b]!=d&&(this._current_target=d=this._data[g][b]);e&&window.settings.dom.get("highlight-on-hover")&&window.hostspotlighter.spotlight(this._current_target,f);if(a!=this._data_runtime_id){this._data_runtime_id=a;window["cst-selects"]["document-select"].updateElement()}if(d){this.breadcrumbhead=null;this.breadcrumb_offsets=null;this.target=d;window.dominspections.active=this;messages.post("element-selected",{obj_id:d,rt_id:a,model:this})}window.views[this._view_id].update();this._is_waiting=!1};this._get_initial_view=function(a){var b=this._last_selectors[window.runtimes.getActiveWindowId()],c=b?'document.querySelector("'+b+'") || ':"",d=tagManager.set_callback(this,this._handle_initial_view,[a]),e="return ("+c+"document.body || document.documentElement)";services["ecmascript-debugger"].requestEval(d,[a,0,0,e])};this._handle_initial_view=function(a,b,c){const d=0,e=3,f=0;b[d]=="completed"?b[e]&&this._click_handler_host({runtime_id:c,object_id:b[e][f],highlight:!1}):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this._handle_initial_view failed in dom_data\n")};this._handle_snapshot=function(a,b,c){const d=0,e=3,f=0;if(b[d]=="completed"&&b[e]){this._data=[];this._get_dom(b[e][f],"subtree",this._handle_get_dom.bind(this,c))}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this._handle_snapshot in dom_data has failed")};this._on_element_selected=function(a){var b=window.runtimes.getActiveWindowId(),c=this.get_css_path(a.obj_id,null,!0,!1,!0),d=!1,e=c.reduce(function(a,b){a=a+b.name+(d?":first-child ":" ")+(b.combinator?b.combinator+" ":"");d=b.combinator==">";return a},"");e&&(this._last_selectors[b]=e)};this.get_dom=function(a,b,c,d){if(b)this._get_dom_sub(a,b,c,d);else if(a!=this._data_runtime_id||!this._data.length)if(runtime_onload_handler.is_loaded(a))this._get_initial_view(a);else{var e=this._get_initial_view.bind(this,a);runtime_onload_handler.register(a,e,e)}this._is_waiting=!0}.bind(this);this.get_snapshot=function(){var a=tagManager.set_callback(this,this._handle_snapshot,[this._data_runtime_id]),b="return document.documentElement && document.documentElement.ownerDocument;";services["ecmascript-debugger"].requestEval(a,[this._data_runtime_id,0,0,b])};this.remove_node=function(a,b){this._dom_node_removed_handler({object_id:b,runtime_id:a})};this.bind=function(a){a.onObjectSelected=a.handleGetSelectedObject=this._on_object_selected.bind(this)};this._on_reset_state_bound=this._on_reset_state.bind(this);this._on_profile_disabled_bound=this._on_profile_disabled.bind(this);this._on_active_tab_bound=this._on_active_tab.bind(this);this._click_handler_host_bound=this._click_handler_host.bind(this);this._on_setting_change_bound=this._on_setting_change.bind(this);this._on_show_view_bound=this._on_show_view.bind(this);this._on_hide_view_bound=this._on_hide_view.bind(this);this._dom_node_removed_handler_bound=this._dom_node_removed_handler.bind(this);this._on_runtime_stopped_bound=this._on_runtime_stopped.bind(this);this._spotlight_bound=this._spotlight.bind(this);this._reset_spotlight_bound=this._reset_spotlight.bind(this);this._set_reset_spotlight_bound=this._set_reset_spotlight.bind(this);this._on_top_runtime_update_bound=this._on_top_runtime_update.bind(this);this._on_dom_editor_active_bound=this._on_dom_editor_active.bind(this);this._on_element_selected_bound=
this._on_element_selected.bind(this);this._init(0,0);messages.addListener("active-tab",this._on_active_tab_bound);messages.addListener("show-view",this._on_show_view_bound);messages.addListener("hide-view",this._on_hide_view_bound);messages.addListener("setting-changed",this._on_setting_change_bound);messages.addListener("runtime-stopped",this._on_runtime_stopped_bound);messages.addListener("runtime-destroyed",this._on_runtime_stopped_bound);messages.addListener("reset-state",this._on_reset_state_bound);messages.addListener("top-runtime-updated",this._on_top_runtime_update_bound);messages.addListener("dom-editor-active",this._on_dom_editor_active_bound);messages.addListener("profile-disabled",this._on_profile_disabled_bound);messages.addListener("element-selected",this._on_element_selected_bound)};cls.EcmascriptDebugger["6.0"].DOMData.prototype=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.prototype;cls.EcmascriptDebugger["6.0"].DOMData.DISREGARD_FORCE_LOWER_CASE_WHITELIST=["svg","math"];window.js_object_filters||(window.js_object_filters={});window.dom_interfaces||(window.dom_interfaces={});dom_interfaces.NodeList=function(){this.item="object";this.length="0";this.namedItem="object";this.tags="object"};js_object_filters.NodeList=new dom_interfaces.NodeList;dom_interfaces.Window=function(){this.Array="object";this.Attr="object";this.Audio="object";this.Boolean="object";this.ByteArray="object";this.CDATASection="object";this.CSSMediaRule="object";this.CSSPrimitiveValue="object";this.CSSRule="object";this.CSSRuleList="object";this.CSSStyleDeclaration="object";this.CSSStyleSheet="object";this.CanvasGradient="object";this.CanvasPattern="object";this.CanvasRenderingContext2D="object";this.CanvasRenderingContext2DGame="object";this.CanvasRenderingContext3D="undefined";this.ClientRect="object";this.ClientRectList="object";this.Comment="object";this.DOMError="object";this.DOMException="object";this.DOMImplementationLS="object";this.DOMParser="object";this.Date="object";this.Document="object";this.DocumentFragment="object";this.DocumentType="object";this.Element="object";this.Entity="object";this.EntityReference="object";this.Error="object";this.EvalError="object";this.Event="object";this.Function="object";this.HTMLAnchorElement="object";this.HTMLAppletElement="object";this.HTMLAreaElement="object";this.HTMLBRElement="object";this.HTMLBaseElement="object";this.HTMLBaseFontElement="object";this.HTMLBodyElement="object";this.HTMLButtonElement="object";this.HTMLCanvasElement="object";this.HTMLCollection="object";this.HTMLDListElement="object";this.HTMLDataListElement="object";this.HTMLDirectoryElement="object";this.HTMLDivElement="object";this.HTMLDocument="object";this.HTMLElement="object";this.HTMLEmbedElement="object";this.HTMLFieldSetElement="object";this.HTMLFontElement="object";this.HTMLFormElement="object";this.HTMLFrameElement="object";this.HTMLFrameSetElement="object";this.HTMLHRElement="object";this.HTMLHeadElement="object";this.HTMLHeadingElement="object";this.HTMLHtmlElement="object";this.HTMLIFrameElement="object";this.HTMLImageElement="object";this.HTMLInputElement="object";this.HTMLIsIndexElement="object";this.HTMLLIElement="object";this.HTMLLabelElement="object";this.HTMLLegendElement="object";this.HTMLLinkElement="object";this.HTMLMapElement="object";this.HTMLMarqueeElement="object";this.HTMLMenuElement="object";this.HTMLMetaElement="object";this.HTMLModElement="object";this.HTMLOListElement="object";this.HTMLObjectElement="object";this.HTMLOptGroupElement="object";this.HTMLOptionElement="object";this.HTMLOptionsCollection="object";this.HTMLOutputElement="object";this.HTMLParagraphElement="object";this.HTMLParamElement="object";this.HTMLPreElement="object";this.HTMLQuoteElement="object";this.HTMLScriptElement="object";this.HTMLSelectElement="object";this.HTMLStyleElement="object";this.HTMLTableCaptionElement="object";this.HTMLTableCellElement="object";this.HTMLTableColElement="object";this.HTMLTableElement="object";this.HTMLTableRowElement="object";this.HTMLTableSectionElement="object";this.HTMLTextAreaElement="object";this.HTMLTitleElement="object";this.HTMLUListElement="object";this.HTMLUnknownElement="object";this.Image="object";this.ImageData="object";this.Infinity="Infinity";this.LSException="object";this.LSParser="object";this.LSParserFilter="object";this.Math="object";this.MediaList="object";this.MemoryError="object";this.MutationEvent="object";this.NaN="NaN";this.NamedNodeMap="object";this.Node="object";this.NodeFilter="object";this.NodeList="object";this.Notation="object";this.Number="object";this.Object="object";this.Option="object";this.Packages="object";this.ProcessingInstruction="object";this.RGBColor="object";this.Range="object";this.RangeError="object";this.RangeException="object";this.ReferenceError="object";this.RegExp="object";this.RepetitionElement="object";this.RepetitionEvent="object";this.SVGAElement="object";this.SVGAngle="object";this.SVGAnimateColorElement="object";this.SVGAnimateElement="object";this.SVGAnimateMotionElement="object";this.SVGAnimateTransformElement="object";this.SVGAnimationElement="object";this.SVGAudioElement="object";this.SVGCircleElement="object";this.SVGClipPathElement="object";this.SVGDefsElement="object";this.SVGDescElement="object";this.SVGDocument="object";this.SVGEllipseElement="object";this.SVGException="object";this.SVGFEBlendElement="object";this.SVGFEColorMatrixElement="object";this.SVGFEComponentTransferElement="object";this.SVGFECompositeElement="object";this.SVGFEConvolveMatrixElement="object";this.SVGFEDiffuseLightingElement="object";this.SVGFEDisplacementMapElement="object";this.SVGFEDistantLightElement="object";this.SVGFEFloodElement="object";this.SVGFEFuncAElement="object";this.SVGFEFuncBElement="object";this.SVGFEFuncGElement="object";this.SVGFEFuncRElement="object";this.SVGFEGaussianBlurElement="object";this.SVGFEImageElement="object";this.SVGFEMergeElement="object";this.SVGFEMergeNodeElement="object";this.SVGFEMorphologyElement="object";this.SVGFEOffsetElement="object";this.SVGFEPointLightElement="object";this.SVGFESpecularLightingElement="object";this.SVGFESpotLightElement="object";this.SVGFETileElement="object";this.SVGFETurbulenceElement="object";this.SVGFilterElement="object";this.SVGFontElement="object";this.SVGForeignObjectElement="object";this.SVGGElement="object";this.SVGGlyphElement="object";this.SVGImageElement="object";this.SVGLength="object";this.SVGLineElement="object";this.SVGLinearGradientElement="object";this.SVGMPathElement="object";this.SVGMarkerElement="object";this.SVGMaskElement="object";this.SVGMatrix="object";this.SVGMissingGlyphElement="object";this.SVGNumber="object";this.SVGPaint="object";this.SVGPath="object";this.SVGPathElement="object";this.SVGPathSeg="object";this.SVGPatternElement="object";this.SVGPoint="object";this.SVGPolygonElement="object";this.SVGPolylineElement="object";this.SVGPreserveAspectRatio="object";this.SVGRGBColor="object";this.SVGRadialGradientElement="object";this.SVGRect="object";this.SVGRectElement="object";this.SVGSVGElement="object";this.SVGScriptElement="object";this.SVGSetElement="object";this.SVGStopElement="object";this.SVGStyleElement="object";this.SVGSwitchElement="object";this.SVGSymbolElement="object";this.SVGTRefElement="object";this.SVGTSpanElement="object";this.SVGTextAreaElement="object";this.SVGTextContentElement="object";this.SVGTextElement="object";this.SVGTextPathElement="object";this.SVGTitleElement="object";this.SVGTransform="object";this.SVGUnitTypes="object";this.SVGUseElement="object";this.SVGVideoElement="object";this.SVGViewElement="object";this.SVGZoomAndPan="object";this.String="object";this.StyleSheetList="object";this.SyntaxError="object";this.Text="object";this.TypeError="object";this.URIError="object";this.VXMLAudioRecording="object";this.XMLDocument="object";this.XMLHttpRequest="object";this.XMLSerializer="object";this.XPathEvaluator="object";this.XPathException="object";this.XPathExpression="object";this.XPathNSResolver="object";this.XPathNamespace="object";this.XPathResult="object";this.XSLTProcessor="object";this.__Opera_Internal_OHVBS="object";this.addEventListener="object";this.addEventStream="object";this.alert="object";this.attachEvent="object";this.back="object";this.captureEvents="object";this.clearInterval="object";this.clearTimeout="object";this.closed="false";this.confirm="object";this.decodeURI="object";this.decodeURIComponent="object";this.defaultStatus="";this.detachEvent="object";this.dispatchEvent="object";this.document="object";this.encodeURI="object";this.encodeURIComponent="object";this.escape="object";this.eval="object";this.event="object";this.forward="object";this.frameElement="null";this.frames="object";this.getComputedStyle="object";this.getSelection="object";this.history="object";this.innerHeight="730";this.innerWidth="1056";this.isFinite="object";this.isNaN="object";this.java="object";this.length="0";this.location="object";this.name="";this.navigate="object";this.navigator="object";this.netscape="object";this.open="object";this.opener="null";this.opera="object";this.outerHeight="793";this.outerWidth="1065";this.pageXOffset="0";this.pageYOffset="0";this.parent="object";this.parseFloat="object";this.parseInt="object";this.print="object";this.prompt="object";this.releaseEvents="object";this.removeEventListener="object";this.removeEventStream="object";this.screen="object";this.screenLeft="1386";this.screenTop="217";this.screenX="-4";this.screenY="-23";this.self="object";this.setDocument="undefined";this.setInterval="object";this.setTimeout="object";this.status="";this.stop="object";this.sun="object";this.top="object";this.undefined="undefined";this.unescape="object";this.window="object"};js_object_filters.Window=new dom_interfaces.Window;dom_interfaces.Node=function(){this.ATTRIBUTE_NODE="2";this.CDATA_SECTION_NODE="4";this.COMMENT_NODE="8";this.DOCUMENT_FRAGMENT_NODE="11";this.DOCUMENT_NODE="9";this.DOCUMENT_POSITION_CONTAINED_BY="16";this.DOCUMENT_POSITION_CONTAINS="8";this.DOCUMENT_POSITION_DISCONNECTED="1";this.DOCUMENT_POSITION_FOLLOWING="4";this.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC="32";this.DOCUMENT_POSITION_PRECEDING="2";this.DOCUMENT_TYPE_NODE="10";this.ELEMENT_NODE="1";this.ENTITY_NODE="6";this.ENTITY_REFERENCE_NODE="5";this.NOTATION_NODE="12";this.PROCESSING_INSTRUCTION_NODE="7";this.TEXT_NODE="3";this.addEventListener="object";this.addEventSource="object";this.appendChild="object";this.attachEvent="object";this.attributes="null";this.childNodes="object";this.cloneNode="object";this.compareDocumentPosition="object";this.detachEvent="object";this.dispatchEvent="object";this.document="object";this.firstChild="null";this.getFeature="object";this.hasAttributes="object";this.hasChildNodes="object";this.insertBefore="object";this.isDefaultNamespace="object";this.isSameNode="object";this.isSupported="object";this.lastChild="null";this.localName="null";this.lookupNamespaceURI="object";this.lookupPrefix="object";this.namespaceURI="null";this.nextSibling="null";this.nodeName="";this.nodeType="";this.nodeValue="null";this.normalize="object";this.ownerDocument="null";this.parentNode="null";this.prefix="null";this.previousSibling="null";this.removeChild="object";this.removeEventListener="object";this.removeEventSource="object";this.replaceChild="object";this.selectNodes="object";this.selectSingleNode="object";this.textContent="null"};js_object_filters.Node=new dom_interfaces.Node;dom_interfaces.NamedNodeMap=function(){this.getNamedItem="object";this.getNamedItemNS="object";this.item="object";this.length="0";this.removeNamedItem="object";this.removeNamedItemNS="object";this.setNamedItem="object";this.setNamedItemNS="object"};js_object_filters.NamedNodeMap=new dom_interfaces.NamedNodeMap;dom_interfaces.Event=function(){this.bubbles="false";this.cancelBubble="false";this.cancelable="false";this.currentTarget="null";this.eventPhase="1";this.initEvent="object";this.preventDefault="object";this.srcElement="null";this.stopPropagation="object";this.target="null";this.timeStamp="0";this.type=""};js_object_filters.Event=new dom_interfaces.Event;dom_interfaces.Document=function(){this.adoptNode="object";this.characterSet="windows-1252";this.charset="windows-1252";this.cookie="";this.createAttribute="object";this.createAttributeNS="object";this.createCDATASection="object";this.createComment="object";this.createDocumentFragment="object";this.createElement="object";this.createElementNS="object";this.createEvent="object";this.createExpression="object";this.createNSResolver="object";this.createNodeIterator="object";this.createProcessingInstruction="object";this.createRange="object";this.createTextNode="object";this.createTreeWalker="object";this.defaultView="null";this.designMode="off";this.doctype="null";this.documentElement="object";this.documentURI="null";this.evaluate="object";this.execCommand="object";this.firstChild="object";this.getElementById="object";this.getElementsByClassName="object";this.getElementsByTagName="object";this.getElementsByTagNameNS="object";this.implementation="object";this.importNode="object";this.lastChild="object";this.lastModified="January 1, 1970 GMT";this.location="null";this.nodeName="#document";this.nodeType="9";this.parentWindow="null";this.queryCommandEnabled="object";this.queryCommandState="object";this.queryCommandSupported="object";this.queryCommandValue="object";this.querySelector="object";this.querySelectorAll="object";this.readyState="complete";this.referrer="";this.styleSheets="object"};dom_interfaces.Document.prototype=js_object_filters.Node;js_object_filters.Document=new dom_interfaces.Document;dom_interfaces.CharacterData=function(){this.appendData="object";this.data="";this.deleteData="object";this.insertData="object";this.length="0";this.nodeValue="";this.ownerDocument="object";this.replaceData="object";this.substringData="object";this.textContent=""};dom_interfaces.CharacterData.prototype=js_object_filters.Node;js_object_filters.CharacterData=new dom_interfaces.CharacterData;dom_interfaces.Attr=function(){this.name="foo";this.nodeName="foo";this.nodeType="2";this.nodeValue="";this.ownerDocument="object";this.ownerElement="null";this.specified="true";this.text="";this.textContent="";this.value=""};dom_interfaces.Attr.prototype=js_object_filters.Node;js_object_filters.Attr=new dom_interfaces.Attr;dom_interfaces.DocumentFragment=function(){this.nodeName="#document-fragment";this.nodeType="11";this.ownerDocument="object";this.querySelector="object";this.querySelectorAll="object";this.textContent=""};dom_interfaces.DocumentFragment.prototype=js_object_filters.Node;js_object_filters.DocumentFragment=new dom_interfaces.DocumentFragment;dom_interfaces.Element=function(){this.addRepetitionBlock="object";this.addRepetitionBlockByIndex="object";this.all="object";this.attributes="object";this.blur="object";this.childElementCount="0";this.children="object";this.className="";this.clientHeight="0";this.clientLeft="0";this.clientTop="0";this.clientWidth="0";this.contains="object";this.contentEditable="false";this.currentStyle="object";this.dir="";this.firstElementChild="null";this.focus="object";this.getAttribute="object";this.getAttributeNS="object";this.getAttributeNode="object";this.getAttributeNodeNS="object";this.getBoundingClientRect="object";this.getClientRects="object";this.getElementsByClassName="object";this.getElementsByTagName="object";this.getElementsByTagNameNS="object";this.hasAttribute="object";this.hasAttributeNS="object";this.id="";this.innerHTML="";this.innerText="";this.insertAdjacentElement="object";this.insertAdjacentHTML="object";this.insertAdjacentText="object";this.isContentEditable="false";this.lang="";this.lastElementChild="null";this.localName="";this.moveRepetitionBlock="object";this.nextElementSibling="null";this.nodeType="1";this.offsetHeight="0";this.offsetLeft="0";this.offsetParent="null";this.offsetTop="0";this.offsetWidth="0";this.onblur="null";this.onclick="null";this.ondblclick="null";this.onfocus="null";this.onkeydown="null";this.onkeypress="null";this.onkeyup="null";this.onload="null";this.onmousedown="null";this.onmousemove="null";this.onmouseout="null";this.onmouseover="null";this.onmouseup="null";this.onunload="null";this.outerHTML="";this.outerText="";this.ownerDocument="object";this.parentElement="null";this.previousElementSibling="null";this.querySelector="object";this.querySelectorAll="object";this.removeAttribute="object";this.removeAttributeNS="object";this.removeAttributeNode="object";this.removeNode="object";this.removeRepetitionBlock="object";this.repeatMax="";this.repeatMin="";this.repeatStart="";this.repetitionBlocks="null";this.repetitionIndex="0";this.repetitionTemplate="null";this.repetitionType="0";this.scrollHeight="0";this.scrollIntoView="object";this.scrollLeft="0";this.scrollTop="0";this.scrollWidth="0";this.setAttribute="object";this.setAttributeNS="object";this.setAttributeNode="object";this.setAttributeNodeNS="object";this.sourceIndex="-1";this.style="object";this.tabIndex="-1";this.tagName="";this.textContent="";this.title="";this.toString="object";this.unselectable=""};dom_interfaces.Element.prototype=js_object_filters.Node;js_object_filters.Element=new dom_interfaces.Element;dom_interfaces.XMLDocument=function(){this.async="true";this.load="object"};dom_interfaces.XMLDocument.prototype=js_object_filters.Document;js_object_filters.XMLDocument=new dom_interfaces.XMLDocument;dom_interfaces.HTMLDocument=function(){this.URL="http://localhost:8881/html-document";this.activeElement="object";this.alinkColor="";this.all="[object HTMLCollection]";this.anchors="object";this.applets="object";this.bgColor="";this.body="object";this.captureEvents="object";this.clear="object";this.close="object";this.compatMode="CSS1Compat";this.dir="";this.domain="localhost";this.elementFromPoint="object";this.embeds="object";this.fgColor="";this.forms="object";this.frames="object";this.getElementsByName="object";this.getSelection="object";this.images="object";this.linkColor="";this.links="object";this.moveFocusDown="object";this.moveFocusLeft="object";this.moveFocusRight="object";this.moveFocusUp="object";this.onload="null";this.onunload="null";this.open="object";this.plugins="object";this.releaseEvents="object";this.scripts="object";this.selection="object";this.title="";this.vlinkColor="";this.write="object";this.writeln="object"};dom_interfaces.HTMLDocument.prototype=js_object_filters.Document;js_object_filters.HTMLDocument=new dom_interfaces.HTMLDocument;dom_interfaces.HTMLElement=function(){};dom_interfaces.HTMLElement.prototype=js_object_filters.Element;js_object_filters.HTMLElement=new dom_interfaces.HTMLElement;dom_interfaces.Comment=function(){this.nodeName="#comment";this.nodeType="8"};dom_interfaces.Comment.prototype=js_object_filters.CharacterData;js_object_filters.Comment=new dom_interfaces.Comment;dom_interfaces.Text=function(){this.nodeName="#cdata-section";this.nodeType="4";this.replaceWholeText="object";this.splitText="object";this.wholeText=""};dom_interfaces.Text.prototype=js_object_filters.CharacterData;js_object_filters.Text=new dom_interfaces.Text;dom_interfaces.HTMLBRElement=function(){this.clear="";this.localName="BR";this.nodeName="BR";this.outerHTML="<BR>";this.outerText="%0A";this.tagName="BR";this.text=""};dom_interfaces.HTMLBRElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLBRElement=new dom_interfaces.HTMLBRElement;dom_interfaces.HTMLOListElement=function(){this.compact="false";this.localName="OL";this.nodeName="OL";this.outerHTML="<OL></OL>";this.start="1";this.tagName="OL";this.text="";this.type=""};dom_interfaces.HTMLOListElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLOListElement=new dom_interfaces.HTMLOListElement;dom_interfaces.HTMLFontElement=function(){this.color="";this.face="";this.localName="FONT";this.nodeName="FONT";this.outerHTML="<FONT></FONT>";this.size="";this.tagName="FONT";this.text=""};dom_interfaces.HTMLFontElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLFontElement=new dom_interfaces.HTMLFontElement;dom_interfaces.HTMLMapElement=function(){this.areas="object";this.localName="MAP";this.name="";this.nodeName="MAP";this.outerHTML="<MAP></MAP>";this.tagName="MAP";this.text=""};dom_interfaces.HTMLMapElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLMapElement=new dom_interfaces.HTMLMapElement;dom_interfaces.HTMLButtonElement=function(){this.accessKey="";this.action="";this.autofocus="false";this.checkValidity="object";this.click="object";this.disabled="false";this.dispatchChange="object";this.dispatchFormChange="object";this.enctype="";this.form="null";this.forms="object";this.htmlTemplate="null";this.labels="object";this.localName="BUTTON";this.method="";this.name="";this.nodeName="BUTTON";this.onchange="null";this.onformchange="null";this.onforminput="null";this.oninput="null";this.onreset="null";this.onselect="null";this.onsubmit="null";this.outerHTML="<BUTTON></BUTTON>";this.replace="";this.selectionEnd="0";this.selectionStart="0";this.setCustomValidity="object";this.tabIndex="0";this.tagName="BUTTON";this.target="";this.template="null";this.text="";this.textLength="0";this.type="submit";this.validationMessage="";this.validity="object";this.value="";this.willValidate="false"};dom_interfaces.HTMLButtonElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLButtonElement=new dom_interfaces.HTMLButtonElement;dom_interfaces.HTMLFrameSetElement=function(){this.cols="";this.localName="FRAMESET";this.nodeName="FRAMESET";this.outerHTML="<FRAMESET></FRAMESET>";this.rows="";this.tagName="FRAMESET";this.text=""};dom_interfaces.HTMLFrameSetElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLFrameSetElement=new dom_interfaces.HTMLFrameSetElement;dom_interfaces.HTMLOptGroupElement=function(){this.disabled="false";this.label="";this.localName="OPTGROUP";this.nodeName="OPTGROUP";this.outerHTML="<OPTGROUP></OPTGROUP>";this.tagName="OPTGROUP";this.text=""};dom_interfaces.HTMLOptGroupElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLOptGroupElement=new dom_interfaces.HTMLOptGroupElement;dom_interfaces.HTMLLinkElement=function(){this.charset="";this.disabled="false";this.href="";this.hreflang="";this.localName="LINK";this.media="";this.nodeName="LINK";this.outerHTML="<LINK>";this.rel="";this.rev="";this.tagName="LINK";this.target="";this.text="";this.type=""};dom_interfaces.HTMLLinkElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLLinkElement=new dom_interfaces.HTMLLinkElement;dom_interfaces.HTMLObjectElement=function(){this.align="";this.archive="";this.border="";this.classId="";this.code="";this.codeBase="";this.codeType="";this.contentDocument="null";this.contentWindow="null";this.data="";this.declare="false";this.form="null";this.getSVGDocument="object";this.height="";this.hspace="0";this.localName="OBJECT";this.name="";this.nodeName="OBJECT";this.outerHTML="<OBJECT></OBJECT>";this.standby="";this.tagName="OBJECT";this.text="";this.type="";this.useMap="";this.vspace="0";this.width=""};dom_interfaces.HTMLObjectElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLObjectElement=new dom_interfaces.HTMLObjectElement;dom_interfaces.HTMLTableSectionElement=function(){this.align="";this.ch="";this.chOff="";this.deleteRow="object";this.insertRow="object";this.localName="TBODY";this.nodeName="TBODY";this.outerHTML="<TBODY></TBODY>";this.rows="object";this.tagName="TBODY";this.text="";this.vAlign=""};dom_interfaces.HTMLTableSectionElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableSectionElement=new dom_interfaces.HTMLTableSectionElement;dom_interfaces.CDATASection=function(){};dom_interfaces.CDATASection.prototype=js_object_filters.Text;js_object_filters.CDATASection=new dom_interfaces.CDATASection;dom_interfaces.HTMLFrameElement=function(){this.contentDocument="null";this.contentWindow="null";this.frameBorder="";this.getSVGDocument="object";this.localName="FRAME";this.location="null";this.longDesc="";this.marginHeight="";this.marginWidth="";this.name="";this.noResize="false";this.nodeName="FRAME";this.outerHTML="<FRAME>";this.scrolling="";this.src="";this.tagName="FRAME";this.text=""};dom_interfaces.HTMLFrameElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLFrameElement=new dom_interfaces.HTMLFrameElement;dom_interfaces.HTMLTableCaptionElement=function(){this.align="";this.localName="CAPTION";this.nodeName="CAPTION";this.outerHTML="<CAPTION></CAPTION>";this.tagName="CAPTION";this.text=""};dom_interfaces.HTMLTableCaptionElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableCaptionElement=new dom_interfaces.HTMLTableCaptionElement;dom_interfaces.HTMLBaseFontElement=function(){this.color="";this.face="";this.localName="BASEFONT";this.nodeName="BASEFONT";this.outerHTML="<BASEFONT>";this.size="";this.tagName="BASEFONT";this.text=""};dom_interfaces.HTMLBaseFontElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLBaseFontElement=new dom_interfaces.HTMLBaseFontElement;dom_interfaces.HTMLDListElement=function(){this.compact="false";this.localName="DL";this.nodeName="DL";this.outerHTML="<DL></DL>";this.tagName="DL";this.text=""};dom_interfaces.HTMLDListElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLDListElement=new dom_interfaces.HTMLDListElement;dom_interfaces.HTMLBodyElement=function(){this.aLink="";this.background="";this.bgColor="";this.leftMargin="0";this.link="";this.localName="BODY";this.nodeName="BODY";this.outerHTML="<BODY></BODY>";this.tagName="BODY";this.text="";this.topMargin="0";this.vLink=""};dom_interfaces.HTMLBodyElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLBodyElement=new dom_interfaces.HTMLBodyElement;dom_interfaces.HTMLTableRowElement=function(){this.align="";this.bgColor="";this.cells="object";this.ch="";this.chOff="";this.deleteCell="object";this.height="";this.insertCell="object";this.localName="TR";this.nodeName="TR";this.outerHTML="<TR></TR>";this.rowIndex="-1";this.sectionRowIndex="-1";this.tagName="TR";this.text="";this.vAlign="";this.width=""};dom_interfaces.HTMLTableRowElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableRowElement=new dom_interfaces.HTMLTableRowElement;dom_interfaces.HTMLTextAreaElement=function(){this.accept="";this.accessKey="";this.autofocus="false";this.checkValidity="object";this.cols="0";this.createTextRange="object";this.defaultValue="";this.disabled="false";this.dispatchChange="object";this.dispatchFormChange="object";this.form="null";this.forms="object";this.inputmode="";this.labels="object";this.localName="TEXTAREA";this.maxLength="0";this.name="";this.nodeName="TEXTAREA";this.onchange="null";this.onformchange="null";this.onforminput="null";this.oninput="null";this.onreset="null";this.onselect="null";this.onsubmit="null";this.outerHTML="<TEXTAREA></TEXTAREA>";this.pattern="";this.readOnly="false";this.required="false";this.rows="0";this.select="object";this.selectionEnd="0";this.selectionStart="0";this.setCustomValidity="object";this.setSelectionRange="object";this.tabIndex="0";this.tagName="TEXTAREA";this.template="null";this.text="";this.textLength="0";this.type="textarea";this.validationMessage="";this.validity="object";this.value="";this.willValidate="false";this.wrap=""};dom_interfaces.HTMLTextAreaElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTextAreaElement=new dom_interfaces.HTMLTextAreaElement;dom_interfaces.HTMLInputElement=function(){this.accept="";this.accessKey="";this.action="";this.align="";this.alt="";this.autocomplete="";this.autofocus="false";this.checkValidity="object";this.checked="false";this.click="object";this.createTextRange="object";this.defaultChecked="false";this.defaultValue="";this.disabled="false";this.dispatchChange="object";this.dispatchFormChange="object";this.enctype="";this.form="null";this.forms="object";this.htmlTemplate="null";this.inputmode="";this.labels="object";this.list="null";this.localName="INPUT";this.max="";this.maxLength="-1";this.method="";this.min="";this.name="";this.nodeName="INPUT";this.onchange="null";this.onformchange="null";this.onforminput="null";this.oninput="null";this.onreset="null";this.onselect="null";this.onsubmit="null";this.outerHTML="<INPUT>";this.pattern="";this.readOnly="false";this.replace="";this.required="false";this.select="object";this.selectedOption="null";this.selectionEnd="0";this.selectionStart="0";this.setCustomValidity="object";this.setSelectionRange="object";this.size="0";this.src="";this.step="";this.stepDown="object";this.stepUp="object";this.tabIndex="0";this.tagName="INPUT";this.target="";this.template="null";this.text="";this.textLength="0";this.type="text";this.useMap="";this.validationMessage="";this.validity="object";this.value="";this.valueAsDate="null";this.valueAsNumber="NaN";this.willValidate="false"};dom_interfaces.HTMLInputElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLInputElement=new dom_interfaces.HTMLInputElement;dom_interfaces.HTMLIsIndexElement=function(){this.form="null";this.forms="object";this.labels="object";this.localName="ISINDEX";this.nodeName="ISINDEX";this.outerHTML="<ISINDEX>";this.prompt="";this.tagName="ISINDEX";this.template="null";this.text="";this.validationMessage="";this.validity="object";this.willValidate="false"};dom_interfaces.HTMLIsIndexElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLIsIndexElement=new dom_interfaces.HTMLIsIndexElement;dom_interfaces.HTMLDivElement=function(){this.align="";this.localName="DIV";this.nodeName="DIV";this.outerHTML="<DIV></DIV>";this.tagName="DIV";this.text=""};dom_interfaces.HTMLDivElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLDivElement=new dom_interfaces.HTMLDivElement;dom_interfaces.HTMLFieldSetElement=function(){this.checkValidity="object";this.disabled="false";this.elements="object";this.form="null";this.forms="object";this.labels="object";this.localName="FIELDSET";this.nodeName="FIELDSET";this.outerHTML="<FIELDSET></FIELDSET>";this.setCustomValidity="object";this.tagName="FIELDSET";this.template="null";this.text="";this.validationMessage="";this.validity="object";this.willValidate="false"};dom_interfaces.HTMLFieldSetElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLFieldSetElement=new dom_interfaces.HTMLFieldSetElement;dom_interfaces.HTMLScriptElement=function(){this.charset="";this.defer="false";this.localName="SCRIPT";this.nodeName="SCRIPT";this.outerHTML="<SCRIPT></SCRIPT>";this.readyState="loaded";this.src="";this.tagName="SCRIPT";this.text="";this.type=""};dom_interfaces.HTMLScriptElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLScriptElement=new dom_interfaces.HTMLScriptElement;dom_interfaces.HTMLStyleElement=function(){this.disabled="false";this.localName="STYLE";this.media="";this.nodeName="STYLE";this.outerHTML="<STYLE></STYLE>";this.sheet="object";this.tagName="STYLE";this.text="";this.type=""};dom_interfaces.HTMLStyleElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLStyleElement=new dom_interfaces.HTMLStyleElement;dom_interfaces.HTMLUnknownElement=function(){this.localName="foo";this.nodeName="foo";this.outerHTML="<foo></foo>";this.tagName="foo";this.text=""};dom_interfaces.HTMLUnknownElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLUnknownElement=new dom_interfaces.HTMLUnknownElement;dom_interfaces.HTMLMetaElement=function(){this.content="";this.httpEquiv="";this.localName="META";this.name="";this.nodeName="META";this.outerHTML="<META>";this.scheme="";this.tagName="META";this.text=""};dom_interfaces.HTMLMetaElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLMetaElement=new dom_interfaces.HTMLMetaElement;dom_interfaces.HTMLAppletElement=function(){this.align="";this.alt="";this.archive="";this.code="";this.codeBase="";this.height="";this.hspace="0";this.localName="APPLET";this.name="";this.nodeName="APPLET";this.object="";this.outerHTML="<APPLET></APPLET>";this.tagName="APPLET";this.text="";this.vspace="0";this.width=""};dom_interfaces.HTMLAppletElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLAppletElement=new dom_interfaces.HTMLAppletElement;dom_interfaces.HTMLSelectElement=function(){this.accessKey="";this.add="object";this.autocomplete="";this.autofocus="false";this.checkValidity="object";this.data="";this.disabled="false";this.dispatchChange="object";this.dispatchFormChange="object";this.form="null";this.forms="object";this.item="object";this.labels="object";this.length="0";this.localName="SELECT";this.multiple="false";this.name=""
;this.namedItem="object";this.nodeName="SELECT";this.onchange="null";this.onformchange="null";this.onforminput="null";this.oninput="null";this.onreset="null";this.onselect="null";this.onsubmit="null";this.options="object";this.outerHTML="<SELECT></SELECT>";this.remove="object";this.selectedIndex="-1";this.selectedOptions="object";this.selectionEnd="0";this.selectionStart="0";this.setCustomValidity="object";this.size="0";this.tabIndex="0";this.tagName="SELECT";this.template="null";this.type="select-one";this.validationMessage="";this.validity="object";this.value="";this.willValidate="false"};dom_interfaces.HTMLSelectElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLSelectElement=new dom_interfaces.HTMLSelectElement;dom_interfaces.HTMLImageElement=function(){this.align="";this.alt="";this.border="";this.complete="true";this.height="0";this.hspace="0";this.isMap="false";this.localName="IMG";this.longDesc="";this.lowsrc="";this.name="";this.nodeName="IMG";this.outerHTML="<IMG>";this.src="";this.tagName="IMG";this.text="";this.useMap="";this.vspace="0";this.width="0"};dom_interfaces.HTMLImageElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLImageElement=new dom_interfaces.HTMLImageElement;dom_interfaces.HTMLModElement=function(){this.cite="";this.dateTime="";this.localName="INS";this.nodeName="INS";this.outerHTML="<INS></INS>";this.tagName="INS";this.text=""};dom_interfaces.HTMLModElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLModElement=new dom_interfaces.HTMLModElement;dom_interfaces.HTMLHtmlElement=function(){this.localName="HTML";this.nodeName="HTML";this.outerHTML="<HTML></HTML>";this.tagName="HTML";this.text="";this.version=""};dom_interfaces.HTMLHtmlElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLHtmlElement=new dom_interfaces.HTMLHtmlElement;dom_interfaces.HTMLFormElement=function(){this.accept="";this.acceptCharset="";this.action="";this.checkValidity="object";this.data="";this.dispatchFormChange="object";this.dispatchFormInput="object";this.elements="object";this.encoding="";this.enctype="";this.item="object";this.length="0";this.localName="FORM";this.method="";this.name="";this.namedItem="object";this.nodeName="FORM";this.outerHTML="<FORM></FORM>";this.replace="";this.reset="object";this.resetFromData="object";this.submit="object";this.tagName="FORM";this.target="";this.templateElements="object";this.text=""};dom_interfaces.HTMLFormElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLFormElement=new dom_interfaces.HTMLFormElement;dom_interfaces.HTMLParagraphElement=function(){this.align="";this.localName="P";this.nodeName="P";this.outerHTML="<P></P>";this.tagName="P";this.text=""};dom_interfaces.HTMLParagraphElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLParagraphElement=new dom_interfaces.HTMLParagraphElement;dom_interfaces.HTMLIFrameElement=function(){this.align="";this.contentDocument="null";this.contentWindow="null";this.frameBorder="";this.getSVGDocument="object";this.height="";this.localName="IFRAME";this.location="null";this.longDesc="";this.marginHeight="";this.marginWidth="";this.name="";this.noResize="false";this.nodeName="IFRAME";this.outerHTML="<IFRAME></IFRAME>";this.scrolling="";this.src="";this.tagName="IFRAME";this.text="";this.width=""};dom_interfaces.HTMLIFrameElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLIFrameElement=new dom_interfaces.HTMLIFrameElement;dom_interfaces.HTMLQuoteElement=function(){this.cite="";this.localName="BLOCKQUOTE";this.nodeName="BLOCKQUOTE";this.outerHTML="<BLOCKQUOTE></BLOCKQUOTE>";this.tagName="BLOCKQUOTE";this.text=""};dom_interfaces.HTMLQuoteElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLQuoteElement=new dom_interfaces.HTMLQuoteElement;dom_interfaces.HTMLBaseElement=function(){this.href="";this.localName="BASE";this.nodeName="BASE";this.outerHTML="<BASE>";this.tagName="BASE";this.target="";this.text=""};dom_interfaces.HTMLBaseElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLBaseElement=new dom_interfaces.HTMLBaseElement;dom_interfaces.HTMLTableColElement=function(){this.align="";this.ch="";this.chOff="";this.localName="COL";this.nodeName="COL";this.outerHTML="<COL>";this.span="0";this.tagName="COL";this.text="";this.vAlign="";this.width=""};dom_interfaces.HTMLTableColElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableColElement=new dom_interfaces.HTMLTableColElement;dom_interfaces.HTMLHeadElement=function(){this.localName="HEAD";this.nodeName="HEAD";this.outerHTML="<HEAD></HEAD>";this.profile="";this.tagName="HEAD";this.text=""};dom_interfaces.HTMLHeadElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLHeadElement=new dom_interfaces.HTMLHeadElement;dom_interfaces.HTMLHeadingElement=function(){this.align="";this.localName="H1";this.nodeName="H1";this.outerHTML="<H1></H1>";this.tagName="H1";this.text=""};dom_interfaces.HTMLHeadingElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLHeadingElement=new dom_interfaces.HTMLHeadingElement;dom_interfaces.HTMLTableCellElement=function(){this.abbr="";this.align="";this.axis="";this.bgColor="";this.cellIndex="undefined";this.ch="";this.chOff="";this.colSpan="1";this.headers="";this.height="";this.localName="TD";this.noWrap="false";this.nodeName="TD";this.outerHTML="<TD></TD>";this.rowSpan="1";this.scope="";this.tagName="TD";this.text="";this.vAlign="";this.width=""};dom_interfaces.HTMLTableCellElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableCellElement=new dom_interfaces.HTMLTableCellElement;dom_interfaces.HTMLOptionElement=function(){this.defaultSelected="false";this.disabled="false";this.form="null";this.forms="object";this.index="0";this.label="";this.labels="object";this.length="undefined";this.localName="OPTION";this.nodeName="OPTION";this.outerHTML="<OPTION></OPTION>";this.selected="false";this.tagName="OPTION";this.template="null";this.text="";this.validationMessage="";this.validity="object";this.value="";this.willValidate="false"};dom_interfaces.HTMLOptionElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLOptionElement=new dom_interfaces.HTMLOptionElement;dom_interfaces.HTMLLIElement=function(){this.localName="LI";this.nodeName="LI";this.outerHTML="<LI></LI>";this.tagName="LI";this.text="";this.type="";this.value="0"};dom_interfaces.HTMLLIElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLLIElement=new dom_interfaces.HTMLLIElement;dom_interfaces.HTMLParamElement=function(){this.localName="PARAM";this.name="";this.nodeName="PARAM";this.outerHTML="<PARAM>";this.tagName="PARAM";this.text="";this.type="";this.value="";this.valueType=""};dom_interfaces.HTMLParamElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLParamElement=new dom_interfaces.HTMLParamElement;dom_interfaces.HTMLLegendElement=function(){this.accessKey="";this.align="";this.form="null";this.forms="object";this.labels="object";this.localName="LEGEND";this.nodeName="LEGEND";this.outerHTML="<LEGEND></LEGEND>";this.tagName="LEGEND";this.template="null";this.text="";this.validationMessage="";this.validity="object";this.willValidate="false"};dom_interfaces.HTMLLegendElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLLegendElement=new dom_interfaces.HTMLLegendElement;dom_interfaces.HTMLUListElement=function(){this.compact="false";this.localName="UL";this.nodeName="UL";this.outerHTML="<UL></UL>";this.tagName="UL";this.text="";this.type=""};dom_interfaces.HTMLUListElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLUListElement=new dom_interfaces.HTMLUListElement;dom_interfaces.HTMLLabelElement=function(){this.accessKey="";this.control="null";this.form="null";this.forms="object";this.htmlFor="";this.labels="object";this.localName="LABEL";this.nodeName="LABEL";this.outerHTML="<LABEL></LABEL>";this.tagName="LABEL";this.template="null";this.text="";this.validationMessage="";this.validity="object";this.willValidate="false"};dom_interfaces.HTMLLabelElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLLabelElement=new dom_interfaces.HTMLLabelElement;dom_interfaces.HTMLDirectoryElement=function(){this.compact="false";this.localName="DIR";this.nodeName="DIR";this.outerHTML="<DIR></DIR>";this.tagName="DIR";this.text=""};dom_interfaces.HTMLDirectoryElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLDirectoryElement=new dom_interfaces.HTMLDirectoryElement;dom_interfaces.HTMLMenuElement=function(){this.compact="false";this.localName="MENU";this.nodeName="MENU";this.outerHTML="<MENU></MENU>";this.tagName="MENU";this.text=""};dom_interfaces.HTMLMenuElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLMenuElement=new dom_interfaces.HTMLMenuElement;dom_interfaces.HTMLTitleElement=function(){this.localName="TITLE";this.nodeName="TITLE";this.outerHTML="<TITLE></TITLE>";this.tagName="TITLE";this.text=""};dom_interfaces.HTMLTitleElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTitleElement=new dom_interfaces.HTMLTitleElement;dom_interfaces.HTMLPreElement=function(){this.localName="PRE";this.nodeName="PRE";this.outerHTML="<PRE></PRE>";this.tagName="PRE";this.text="";this.width="0"};dom_interfaces.HTMLPreElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLPreElement=new dom_interfaces.HTMLPreElement;dom_interfaces.HTMLTableElement=function(){this.align="";this.bgColor="";this.border="";this.caption="null";this.cellPadding="";this.cellSpacing="";this.cells="object";this.createCaption="object";this.createTFoot="object";this.createTHead="object";this.deleteCaption="object";this.deleteRow="object";this.deleteTFoot="object";this.deleteTHead="object";this.frame="";this.insertRow="object";this.localName="TABLE";this.nodeName="TABLE";this.outerHTML="<TABLE></TABLE>";this.rows="object";this.rules="";this.summary="";this.tBodies="object";this.tFoot="null";this.tHead="null";this.tagName="TABLE";this.text="";this.width=""};dom_interfaces.HTMLTableElement.prototype=js_object_filters.HTMLElement;js_object_filters.HTMLTableElement=new dom_interfaces.HTMLTableElement;window.cls||(window.cls={});cls.DOMSearchView=function(a,b,c){const d=0,e=1,f=2,g="clear-style-highlight-node",h="show-search-match";this.createView=function(a){a.clearAndRender(window.templates.search_panel(this,"dom",g));this._adjust_search_controls(a);this._search_container=a.childNodes[1];this._search.set_container(this._search_container);var b='[handler="'+this.controls[d].handler+'"]';this._input=a.querySelector(b);this._search.set_form_input(this._input);var c=a.getElementsByClassName("search-info-badge")[0];this._search.set_info_element(c);this._search.show_last_search()};this._adjust_search_controls=PanelSearch.adjust_search_controls;this.onresize=function(a){this._adjust_search_controls(a)};ActionHandlerInterface.apply(this);this.focus=function(a,b){setTimeout(this._focus_input,50)};this.focus_search_field=function(){this._focus_input()};this._focus_input=function(){if(this._input){this._input.selectionStart=0;this._input.selectionEnd=this._input.value.length;this._input.focus()}}.bind(this);this._handlers["highlight-next-match"]=function(a,b,c){this._search.highlight_next();return!1}.bind(this);this._handlers["highlight-previous-match"]=function(a,b,c){this._search.highlight_previous();return!1}.bind(this);this._handlers["show-script"]=function(a,b,c){var d=this._search.get_current_hit_element();d&&d.dispatchMouseEvent("click");return!1}.bind(this);this._ondomviewupdated=function(a){if(this._search_hit){window.views.dom.highlight_search_hit(this._search_hit);this._search_hit=null}};this._show_search_hit=function(a,b){if(b.get_ancestor(".panel-search-container")){this._search.update_match_highlight(a,b);this._search_hit=this._search.get_search_hit();window.host_tabs.is_runtime_of_active_tab(this._search_hit.runtime_id)?eventHandlers.click["inspect-node-link"](a,b):(new ConfirmDialog(ui_strings.D_REDO_SEARCH,this._redo_search_bound)).show()}else{var c=Number(b.get_ancestor_attr("data-rt-id"));window.host_tabs.is_runtime_of_active_tab(c)&&eventHandlers.click["inspect-node-link"](a,b)}};this._onsettingchange=function(a){a.id=="dom"&&(a.key=="dom-tree-style"||a.key=="force-lowercase")&&this.update()};this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this.init(a,b,c);this.shared_shortcuts="search";this.shared_shortcuts_label=ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH;this._search=new DOMSearch;this._redo_search_bound=this._search.highlight_next.bind(this._search);this.controls=[{handler:this.id+"-simple-text-search","class":"panel-search-input-container",shortcuts:this.id+"-simple-text-search",title:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH},{handler:this.id+"-move-highlight-up",type:"search_control","class":"search-move-highlight-up",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_UP},{handler:this.id+"-move-highlight-down",type:"search_control","class":"search-move-highlight-down",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_DOWN}];["search_type","ignore_case","search_only_selected_node","is_token_search"].forEach(function(a){this.__defineGetter__(a,function(){return this._search[a]});this.__defineSetter__(a,function(){})},this);eventHandlers.click[this.controls[f].handler]=this._handlers["highlight-next-match"];eventHandlers.click[this.controls[e].handler]=this._handlers["highlight-previous-match"];eventHandlers.mouseover[g]=this._search.clear_style_highlight_node.bind(this._search);eventHandlers.click[h]=this._show_search_hit.bind(this);eventHandlers.mouseover[h]=eventHandlers.mouseover["inspect-node-link"];this._broker=ActionBroker.get_instance();this._broker.register_handler(this);this._broker.get_global_handler().register_shortcut_listener(this.controls[d].shortcuts,this.handle.bind(this),["highlight-next-match","highlight-previous-match","hide-search"]);this._broker.get_global_handler().register_search_panel(this.id);messages.addListener("setting-changed",this._onsettingchange.bind(this));messages.addListener("dom-view-updated",this._ondomviewupdated.bind(this))};this._init(a,b,c)};var cls=window.cls||(window.cls={});cls.JsSourceView=function(a,b,c){var d="js-source-content",e="."+d,f="js-source-line-numbers",g="container > .js-source-line-numbers",h="js-source-scroller",i="js-source-scroll-content",j="js-source-scroll-container",k="stop-at-error",l="error-description",m="."+d+" div",n=this,o="",p={},q={},r=null,s=null,t=0,u=0,v=0,w=!0,x=!1,y=0,z={},A=0,B=null,C=!0;const D=window.cls.NewScript.LINE_POINTER_TOP,E=window.cls.NewScript.LINE_POINTER,F=3,G=24,H=12,I=["","selected-js-source-line","selected-js-redirected-line"],J=["","selected-js-bp-disabled","selected-js-bp-disabled-condition","selected-js-bp","selected-js-bp-condition"];z.line_nummer_container=function(a){var b=["ul"],c=0;for(;c<a;c++)b[b.length]=z.line_nummer();b.push("class",f);return b};z.line_nummer=function(){return["li",["input"],["span","handler","set-break-point","class","break-point"]]};var K=function(a){var b=s.getElementsByTagName("input"),c=null,d=0,e=s.getElementsByTagName("span");if(q.line_arr){for(;c=b[d];d++)c.value=a++;M()}else b[0].value=1},L=function(){var a=s.getElementsByTagName("input"),b=s.getElementsByTagName("span");for(var c=0,d;d=a[c];c++){c==0?d.value="1":d.value="";b[c].style.backgroundPosition="0 0"}},M=function(a){a&&s&&(s.style.visibility="hidden");cls.JsSourceView.update_breakpoints(q,s,t);a&&setTimeout(O,0);N()},N=function(){if(r&&q){var a=r.getElementsByTagName("div"),b=q.breakpoint_states;if(b){var c,d;for(var e=0,f;f=a[e];e++){if(f.parentNode!=r)continue;c="";if(d=b[t+e])c=I[d%3]+" "+J[d>>3];f.className.indexOf("error")>-1?f.className=Array.prototype.filter.call(f.classList,function(a){return a.indexOf("error")>-1}).join(" ")+" "+c:f.className=c}}}},O=function(){s&&(s.style.visibility="visible")};this._set_style=function(){p["line-height"]=defaults["js-source-line-height"];p["scrollbar-width"]=defaults["scrollbar-width"];p["bp-line-pointer-default"]=(defaults["js-source-line-height"]-H)/2>>0;var a=null,b=document.styleSheets;if(a=b.getDeclaration("#"+j))a.width=defaults["scrollbar-width"]+"px";if(a=b.getDeclaration(m))a.lineHeight=a.height=p["line-height"]+"px";if(a=b.getDeclaration(".js-source-line-numbers li"))a.height=p["line-height"]+"px";cls.JsSourceView.update_default_y()};this.createView=function(a){C=C&&q.script_id&&runtimes.getSelectedScript()&&runtimes.getSelectedScript()!=q.script_id||!runtimes.getSelectedScript();if(C){q={};t=0}B=a;o=a.id;a.innerHTML="<div id='"+i+"'>"+"<div class='"+d+"' "+"data-menu='js-source-content' "+"data-tooltip='"+cls.JSSourceTooltip.tooltip_name+"'></div>"+"</div>"+"<div id='"+j+"' handler='scroll-js-source'>"+"<div id='"+h+"'></div>"+"</div>";p["line-height"]||this._set_style();p["container-height"]=parseInt(a.style.height);var b=null,c=0;r=document.querySelector(e);if(r){document.getElementById(j)&&(document.getElementById(j).onscroll=this.scroll);u=p["container-height"]/p["line-height"]>>0;var f=document.querySelector(g);f&&f.parentElement.removeChild(f);a.render(z.line_nummer_container(u||1));s=document.querySelector(g);var k=runtimes.getSelectedScript();if(k&&k!=q.script_id){var l=runtimes.getStoppedAt(k);if(l&&l[0]){var m=parseInt(l[0].line_number);this.showLine(k,m);this.showLinePointer(t,!0)}else this.showLine(k,0)}else if(q.script_id){T(q.script_id,t);this.showLine(q.script_id,t)}else{K(0);runtimes.getSelectedRuntimeId()?document.getElementById(i).render(runtimes.isReloadedWindow(runtimes.getActiveWindowId())?["div",["p",ui_strings.S_INFO_RUNTIME_HAS_NO_SCRIPTS],"class","info-box"]:["div",["span","class","ui-button reload-window","handler","reload-window","tabindex","1"],["p",ui_strings.S_INFO_RELOAD_FOR_SCRIPT],"class","info-box"]):document.getElementById(i).render(["div",["p",ui_strings.S_INFO_WINDOW_HAS_NO_RUNTIME],"class","info-box"])}}};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this.onresize=function(a){if(this.isvisible()&&p["container-height"]!=parseInt(a.style.height)){w=!0;this.createView(a);messages.post("view-created",{id:this.id,container:a})}};var P=function(){r&&r.innerHTML&&(r.innerHTML="");y||(y=setTimeout(Q,60))},Q=function(){if(q.line_arr){n.setup();T(q.script_id,t);n.showLine(q.script_id,t)}else n.setup(1);y=0},R=function(){var a=0,b=0,c=0,d=0,e=q.line_arr,f=e.length;for(;a<f;a++){if(e[a]-d>b){b=e[a]-d;c=a}d=e[a]}return c},S=function(){if(q.scroll_width&&q.scroll_width>r.offsetWidth){document.getElementById(j).style.bottom=p["scrollbar-width"]+"px";r.style.minWidth=q.scroll_width+"px"}else{document.getElementById(j).style.removeProperty("bottom");r.style.removeProperty("min-width")}document.getElementById(h).style.height=q.scroll_height+"px";q.scroll_height>p["line-height"]*u?document.getElementById(i).style.right=p["scrollbar-width"]+"px":document.getElementById(i).style.right="0px"},T=function(a,b){r.innerHTML="<div style='visibility:hidden'>"+simple_js_parser.format(q,R()-1,1).join("")+"</div>";var c=q.scroll_width=document.getElementById(i).scrollWidth,d=document.getElementById(i).offsetWidth;q.scroll_width>32766&&(q.scroll_width=32766);c>d?u=(p["container-height"]-p["scrollbar-width"])/p["line-height"]>>0:u=p["container-height"]/p["line-height"]>>0;u>q.line_arr.length&&(u=q.line_arr.length);var e=document.querySelector(g);e&&e.parentElement.removeChild(e);document.getElementById(o).render(z.line_nummer_container(u));s=document.querySelector(g);r.style.height=p["line-height"]*u+"px";q.scroll_height=q.line_arr.length*p["line-height"];S();r.innerHTML="";return!0},U=function(){u=1;document.getElementById(j).style.removeProperty("bottom");r.style.removeProperty("width");var a=document.querySelector(g);a.parentElement.removeChild(a);document.getElementById(o).render(z.line_nummer_container(u));document.getElementById(h).style.height="auto";document.getElementById(i).style.right="0px"};this.highlight=function(a,b,c,d){this.isvisible()&&this.show_and_flash_line(a,b)};this.show_script=function(a,b,c){window.runtimes.setSelectedScript(a);UI.get_instance().show_view("js_mode");this.show_and_flash_line(a,b,c)};this.show_and_flash_line=function(a,b,c){if(typeof b=="number"){c||(c=b);this.showLine(a,b);this._change_highlight_class_lines(Element.prototype.addClass,b,c);var d=this._change_highlight_class_lines.bind(this,Element.prototype.removeClass,b,c);setTimeout(d,1e3)}};this._change_highlight_class_lines=function(a,b,c){for(var d=b,e;d<=c;d++)(e=this.get_line_element(d))&&a.call(e,"selected-js-source-line")};this.get_line_element=function(a){var b=document.querySelector(e),c=b&&b.querySelectorAll("div:not(."+l+")"),d=typeof a=="number"&&c&&c[a-t];return d};this.get_scroll_container=function(){return document.getElementById(i)};this.showLine=function(a,b,c,d){A&&(A=clearTimeout(A));r=document.querySelector(e);var f=Boolean(r);q.parse_error&&(c=!0);var g=q.script_id==a;if(!g||c){var i=runtimes.getScript(a);if(!i){document.getElementById(h).innerHTML="";typeof a=="number"&&!isNaN(a)&&typeof b=="number"&&!isNaN(b)?(new ConfirmDialog(ui_strings.D_RELOAD_SCRIPTS,function(){runtimes.reloadWindow()})).show():opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"script source is missing for given id "+"in views.js_source.showLine");return}i.line_arr||i.set_line_states();q=i;if(i.parse_error){var k=0;while(k<i.line_arr.length&&i.line_arr[k]<=i.parse_error.offset)k++;i.parse_error.error_line=k-1;i.parse_error.error_line_offset=i.parse_error.offset-i.line_arr[k-1]}f&&!g&&T(a,b);messages.post("script-selected",{script_id:a});runtimes.setSelectedScript(a);t=0}b<1&&(b=1);if(f){q.scroll_width||T(a,b);C&&S();var l=this._is_line_within_view(b)&&b<this.getBottomLine()-F;if(!l||w||!r.innerHTML||d){t=b;if(!d){t=Math.max(1,b-F);t=Math.max(1,Math.min(t,q.line_arr.length-u))}r.innerHTML=V(t,this.getMaxLines()-1);K(t);q.stop_at_error&&this.show_stop_at_error();var m=document.getElementById(j);if(m){x=!0;m.scrollTop=t/q.line_arr.length*m.scrollHeight}w=!1}}C=!1;d&&messages.post("view-scrolled",{id:this.id,top_line:this.getTopLine(),bottom_line:this.getBottomLine()});return f};var V=function(a,b){return simple_js_parser.format(q,a-1,b).join("")};this._is_line_within_view=function(a){return t&&a>=t&&a<t+u};this.getTopLine=function(){return t};this.getMaxLines=function(){return u};this.getBottomLine=function(){return t+u};this.showLinePointer=function(a,b){this._clear_line_pointer(!1);var c=q&&q.breakpoint_states;if(c){v=q.script_id;q.line_pointer.line=a;q.line_pointer.state=b?D:E;c[a]||(c[a]=0);c[a]+=q.line_pointer.state}M()};this.clearLinePointer=function(a){this._clear_line_pointer();a!==!1&&M()};this._clear_line_pointer=function(){if(v){var a=window.runtimes.getScript(v);if(a){a.breakpoint_states[a.line_pointer.line]-=a.line_pointer.state;a.line_pointer.line=0;a.line_pointer.state=0}v=0}};this.getCurrentScriptId=function(){return q&&q.script_id};this.get_current_script=function(){return runtimes.getScript(this.getCurrentScriptId())};this.get_line_number_with_offset=function(a){if(q&&q.script_id){var b=t+Math.floor(a/p["line-height"]);if(b<=q.line_arr.length)return b}return-1};this.higlight_slice=function(a,b,c,d){if(q&&q.script_id){this._slice_highlighter.clear_hit();var e=this.get_line_element(a);while(e&&typeof c=="number"&&!isNaN(c)&&c>0){this._slice_highlighter.set_hit(e,b,c,TextSearch.HIGHLIGHT_STYLE,!0,".error-description");c-=q.get_line_length(a)-b;b=0;a++;e=e.nextElementSibling}}};this.show_stop_at_error=function(){if(q&&q.stop_at_error&&this._is_line_within_view(q.stop_at_error.line_number)){var a=q.stop_at_error,b=this.get_line_element(a.line_number);if(b){b.className=k;var c=["div","Unhandled "+a.error_class+": "+a.error_message,"class",l];b.firstChild?b.insertBefore(document.render(c),b.firstChild):b.render(c)}}};this.clear_stop_at_error=function(){var a=document.querySelector(e),b=a&&a.querySelector("."+l);if(b){b.parentNode.removeClass(k);b.parentNode.removeChild(b)}};this.clearView=function(){A||(A=setTimeout(W,100))};var W=function(){r=document.querySelector(e);if(r&&r.parentElement){var a=r.parentElement.parentElement.getElementsByTagName("div"),b=null,c=0;r.innerHTML="";for(;b=a[c];c++)b.removeAttribute("style");L()}q={};n.clearLinePointer();t=0;A=0;C=!0;w=!0;runtimes.setSelectedScript()},X=function(a){q&&runtimes.getRuntimeIdWithScriptId(q.script_id)==a.id&&W()};this.ondestroy=function(){w=!0};this.handle=function(a,b,c){};this.get_action_list=function(){};this.focus=function(a){};this.blur=function(){};this.onclick=function(a){};this.handle=function(a,b,c){if(a in this._handlers)return this._handlers[a](b,c)};this.get_action_list=function(){var a=[],b="";for(b in this._handlers)a.push(b);return a};this.mode="default";this._handlers={};this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT};const Y=20,Z=2;this.scroll=function(){if(!C&&!x){var a=document.getElementById(j).scrollTop,b=Math.ceil(a/p["line-height"]);t!=b&&n.showLine(q.script_id,b,!1,!0)}x=!1};this._scroll_lines=function(a,b,c){if(q&&q.line_arr){var d=Math.max(1,Math.min(t+a,q.line_arr.length-u));t!=d&&this.showLine(q.script_id,d,!1,!0)}return!1};this._onbreakpointupdated=function(a){q&&q.script_id==a.script_id&&M()};this._onmonospacefontchange=function(a){this._set_style();if(this.isvisible()&&B){w=!0;this.createView(B)}};this._on_setting_change=function(a){a.id==this.id&&a.key=="show-js-tooltip"&&this.handle_tooltip_setting()};this.handle_tooltip_setting=function(){if(window.settings.js_source.get("show-js-tooltip"))this._tooltip||(this._tooltip=new cls.JSSourceTooltip(this));else{this._tooltip&&this._tooltip.unregister();this._tooltip=null}};eventHandlers.mousewheel["scroll-js-source-view"]=function(a,b){this._scroll_lines((a.detail>0?1:-1)*3,a,b)}.bind(this);this._handlers["show-window-go-to-line"]=function(a,b){UIWindowBase.showWindow(this._go_to_line.id,this._go_to_line.window_top,this._go_to_line.window_left,this._go_to_line.window_width,this._go_to_line.window_height);return!1}.bind(this);this.required_services=["ecmascript-debugger"];this._handlers["scroll-page-up"]=this._scroll_lines.bind(this,-Y);this._handlers["scroll-page-down"]=this._scroll_lines.bind(this,Y);this._handlers["scroll-arrow-up"]=this._scroll_lines.bind(this,-Z);this._handlers["scroll-arrow-down"]=this._scroll_lines.bind(this,Z);this.init(a,b,c,null,"scroll-js-source-view");this._go_to_line=new cls.GoToLine(this);messages.addListener("update-layout",P);messages.addListener("runtime-destroyed",X);messages.addListener("breakpoint-updated",this._onbreakpointupdated.bind(this));messages.addListener("monospace-font-changed",this._onmonospacefontchange.bind(this));messages.addListener("setting-changed",this._on_setting_change.bind(this));ActionBroker.get_instance().register_handler(this);var $={css_classes:{selected_match_class:"js-identifier-selected",selected_match_class_first:"js-identifier-selected-first",selected_match_class_between:"js-identifier-selected-between",selected_match_class_last:"js-identifier-selected-last"}};this._slice_highlighter=new VirtualTextSearch($);this._tooltip=null};cls.JsSourceView.update_breakpoints=function(a,b,c){if(a&&b){var d=24,e=b.querySelectorAll(".break-point"),f=a&&a.breakpoint_states;if(typeof c!="number"){var g=b.querySelector(".line-number");c=g&&Number(g.textContent)}if(e&&f&&typeof c=="number")for(var h=0,i;i=e[h];h++){var j=f[c+h]?this.default_y-1*f[c+h]*d:0;i.style.backgroundPosition="0 "+j+"px"}}};cls.JsSourceView.__defineGetter__("default_y",function(){this._default_y||this.update_default_y();return this._default_y});cls.JsSourceView.__defineSetter__("default_y",function(){});cls.JsSourceView.update_default_y=function(){var a=12,b=window.defaults["js-source-line-height"];this._default_y=(b-a)/2>>0};cls.JsSourceView.prototype=ViewBase;cls.GoToLine=function(a){this.window_top=80;this.window_left=80;this.window_width=100;this.window_height=45;this.window_resizable=!1;this.window_statusbar=!1;ActionHandlerInterface.apply(this);this._handlers.submit=function(a,b){var c=a.target.value.trim();UIWindowBase.closeWindow(this.id);var d=this._js_source_view.getCurrentScriptId();if(d&&c.isdigit()){this._js_source_view.show_and_flash_line(d,parseInt(c));var e=this._js_source_view.get_container();e&&e.dispatchMouseEvent("click")}}.bind(this);this.createView=function(a){a.clearAndRender(["input","class","go-to-line-input"]).focus()};this._js_source_view=a;this.init("go-to-line",ui_strings.M_VIEW_LABEL_GO_TO_LINE,"go-to-line");ActionBroker.get_instance().register_handler(this)};cls.GoToLine.prototype=ViewBase;cls.JsSourceView.create_ui_widgets=function(){var a=[{handler:"continue",rawtitle:ui_strings.S_BUTTON_LABEL_CONTINUE,id:"continue-run",disabled:!0},{handler:"continue",rawtitle:ui_strings.S_BUTTON_LABEL_STEP_INTO,id:"continue-step-into-call",disabled:!0},{handler:"continue",rawtitle:ui_strings.S_BUTTON_LABEL_STEP_OVER,id:"continue-step-next-line",disabled:!0},{handler:"continue",rawtitle:ui_strings.S_BUTTON_LABEL_STEP_OUT,id:"continue-step-out-of-call",disabled:!0}],b=function(){var b=ActionBroker.get_instance(),c=ActionBroker.GLOBAL_HANDLER_ID;a.forEach(function(a){if(a.rawtitle){var d=b.get_shortcut_with_handler_and_action(c,a.id);d=window.helpers.capitalize_first_char(d);a.title=a.rawtitle.replace("%s",d)}})};new ToolbarConfig("js_source",a,null,null,[{handler:"select-window",title:ui_strings.S_BUTTON_LABEL_SELECT_WINDOW,type:"dropdown","class":"window-select-dropdown",template:window["cst-selects"]["js-script-select"].getTemplate()}],!0);var c=window.services["ecmascript-debugger"],d=c.satisfies_version(6,8),e=["script","exception","error","abort","show-js-tooltip"],f=["script","error"];if(c.satisfies_version(6,13)){e.push("use_reformat_condition");f.push("reformat_javascript")}new Settings("js_source",{script:!1,exception:!1,error:d,abort:!1,"tab-size":4,"js-search-type":DOMSearch.PLAIN_TEXT,"js-search-ignore-case":!0,"js-search-all-files":!1,"js-search-injected-scripts":!0,"max-displayed-search-hits":1e3,"show-js-tooltip":!0,"js-dd-match-history":[],reformat_javascript:!0,use_reformat_condition:!0},{script:ui_strings.S_BUTTON_LABEL_STOP_AT_THREAD,exception:ui_strings.S_BUTTON_LABEL_AT_EXCEPTION,error:ui_strings.S_BUTTON_LABEL_AT_ERROR,abort:ui_strings.S_BUTTON_LABEL_AT_ABORT,"tab-size":ui_strings.S_LABEL_TAB_SIZE,"max-displayed-search-hits":ui_strings.S_LABEL_MAX_SEARCH_HITS,"show-js-tooltip":ui_strings.S_LABEL_SHOW_JS_TOOLTIP,reformat_javascript:ui_strings.S_BUTTON_LABEL_REFORMAT_JAVASCRIPT,use_reformat_condition:ui_strings.S_LABEL_SMART_REFORMAT_JAVASCRIPT},{checkboxes:e,customSettings:["hr","tab-size","max-displayed-search-hits"],contextmenu:["error","show-js-tooltip"]},{hr:function(a){return["hr"]},"tab-size":function(a){return["setting-composite",["label",a.label_map["tab-size"]+": ",["input","type","number","handler","set-tab-size","max","8","min","0","value",a.get("tab-size")]]]},"max-displayed-search-hits":function(a){return["setting-composite",["label",a.label_map["max-displayed-search-hits"]+": ",["input","type","number","handler","set-max-search-hits","max","10000","min","100","value",a.get("max-displayed-search-hits")]]]}},"script");window.views.js_source.handle_tooltip_setting();new Switches("js_source",f);eventHandlers.change["set-tab-size"]=function(a,b){var c=document.styleSheets.getDeclaration(DIV_SELECTOR),d=a.target.value;if(c&&/[0-8]/.test(d)){c.setProperty("-o-tab-size",d,0);settings.js_source.set("tab-size",d)}};eventHandlers.change["set-max-search-hits"]=function(a,b){var c=Number(a.target.value);100<c&&c<1e4&&settings.js_source.set("max-displayed-search-hits",c)};eventHandlers.click["show-event-breakpoint-view"]=function(a,b){var c=window.views["event-breakpoints"];UIWindowBase.showWindow(c.id,c.window_top,c.window_left,c.window_width,window.innerHeight>=c.window_height+80?c.window_height:window.innerHeight-80)};window.messages.addListener("shortcuts-changed",b);b();var g=ActionBroker.get_instance(),h=ContextMenu.get_instance(),i=cls.Breakpoints.get_instance();h.register("js_source",[{callback:function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","data-line-number")),d=views.js_source.getCurrentScriptId(),e=window.views.breakpoints,f=[];if(!c){var g=a.target.parentNode.firstElementChild;c=g&&parseInt(g.value)}if(c){var h=window.getSelection();if(!h.isCollapsed){var j=h.toString();f.push({label:ui_strings.M_CONTEXTMENU_ADD_WATCH.replace("%s",j),handler:function(a,b){window.views.watches.add_watch(j)}})}var k=i.get_breakpoint_on_script_line(d,c);k?k.is_enabled?f.push({label:k.condition?ui_strings.M_CONTEXTMENU_EDIT_CONDITION:ui_strings.M_CONTEXTMENU_ADD_CONDITION
,handler:e.show_and_edit_condition.bind(e,d,c)},{label:ui_strings.M_CONTEXTMENU_DELETE_CONDITION,handler:function(a,b){i.set_condition("",k.id)},disabled:!k.condition},{label:ui_strings.M_CONTEXTMENU_DISABLE_BREAKPOINT,handler:function(a,b){i.remove_breakpoint(d,c)}},{label:ui_strings.M_CONTEXTMENU_DELETE_BREAKPOINT,handler:function(a,b){var e=i.remove_breakpoint(d,c);i.delete_breakpoint(e)}}):f.push({label:ui_strings.M_CONTEXTMENU_ENABLE_BREAKPOINT,handler:function(a,b){i.add_breakpoint(d,c)}}):f.push({label:ui_strings.M_CONTEXTMENU_ADD_BREAKPOINT,handler:function(a,b){i.add_breakpoint(d,c)}})}f.length&&f.push(ContextMenu.separator);return f}}],!0)};window.cls||(window.cls={});cls.ScriptSelect=function(a,b){var c="",d=0,e="",f=10;this.getSelectedOptionTooltipText=function(){d=runtimes.getSelectedScript();var a=d&&runtimes.getScript(d);return a&&a.script_type=="linked"&&a.uri||null};this.getSelectedOptionText=function(){d=runtimes.getSelectedScript();if(d){var a=runtimes.getScript(d);if(a){var b=a.script_type.capitalize(!0);return a.uri?a.filename||a.uri:b+" – "+(a.script_data.replace(/\s+/g," ").slice(0,300)||ui_strings.S_TEXT_ECMA_SCRIPT_SCRIPT_ID+": "+a.script_id)}if(d==-1)return" ";opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing script in getSelectedOptionText in cls.ScriptSelect")}else if(runtimes.getSelectedRuntimeId()&&runtimes.isReloadedWindow(runtimes.getActiveWindowId()))return ui_strings.S_INFO_RUNTIME_HAS_NO_SCRIPTS;return""};this.getSelectedOptionValue=function(){};this.templateOptionList=function(a){this._runtimes=runtimes.get_dom_runtimes(!0);this._selected_script=runtimes.getSelectedScript();return templates.script_dropdown(this._id,this._runtimes,e,this._selected_script)};this.onshowoptionlist=function(a){var b=a.querySelector("input");if(b){this._input=b;this._clear_button=a.querySelector(".js-dd-clear-filter");this._container=a;this._script_list=a.querySelector(".js-dd-script-list");this._filter.setContainer(a);this._filter.setFormInput(b);b.focus();this._get_option_ele_list();this._update_clear_button_state();this._match_cursor=0}};this.onhideoptionlist=function(){this._filter.cleanup();this._filter.set_search_term("");this._input=null;this._clear_button=null;this._container=null;this._option_eles=null;this._option_box=null;this._option_ele_cursor=0};this.checkChange=function(a){var b=a.get_attr("parent-node-chain","script-id"),e=b&&parseInt(b);if(e){if(e!=d){runtimes.setSelectedScript(e);topCell.showView(views.js_source.id);d=e}c=a.textContent;var g=this._option_eles&&this._option_eles[this._option_ele_cursor];if(g){this._setting||this._init_match_history();if(this._input&&this._input.value&&!this._match_history.contains(this._input.value)){this._match_history.push(this._input.value);while(this._match_history.length>f)this._match_history.shift();this._setting&&this._setting.set("js-dd-match-history",this._match_history)}}return!0}return!1};var g=function(a){e=a.stop_at.script_id},h=function(a){e=""},i=function(){eventHandlers.change["set-tab-size"]({target:{value:settings.js_source.get("tab-size")}})};this._onfilterinput=function(a,b){this._update_clear_button_state();this._filter.searchDelayed(b.value)};this._update_clear_button_state=function(){if(this._input&&this._clear_button)if(this._input.value&&!this._is_clear_button_visible){this._is_clear_button_visible=!0;this._clear_button.addClass("js-dd-visible")}else if(!this._input.value&&this._is_clear_button_visible){this._is_clear_button_visible=!1;this._clear_button.removeClass("js-dd-visible")}};this._onshortcut=function(a,b,c){switch(a){case"highlight-next-match":case"highlight-previous-match":var c=this._option_eles[this._option_ele_cursor];c&&c.dispatchMouseEvent("mouseup");return!1;case"up":if(this._option_eles.length>1){var d=this._option_ele_cursor-1;d<0&&(d=this._option_eles.length-1);this._move_highlight(d,!0)}return!1;case"down":if(this._option_eles.length>1){var d=this._option_ele_cursor+1;d>this._option_eles.length-1&&(d=0);this._move_highlight(d,!0)}return!1;case"shift-down":this._setting||this._init_match_history();this._match_cursor++;this._match_cursor>this._match_history.length-1&&(this._match_cursor=0);this._set_filter_value();return!1;case"shift-up":this._setting||this._init_match_history();this._match_cursor--;this._match_cursor<0&&(this._match_cursor=this._match_history.length?this._match_history.length-1:0);this._set_filter_value();return!1}};this._set_filter_value=function(){if(this._match_history[this._match_cursor]&&this._input){this._input.value=this._match_history[this._match_cursor];this._input.selectionStart=0;this._input.selectionEnd=this._input.value.length;this._filter.search(this._input.value);this._update_clear_button_state()}};this._onbeforesearch=function(a){if(this._script_list){var b=templates.script_dropdown_options(this._id,this._runtimes,e,this._selected_script,a.search_term);this._script_list.clearAndRender(b);this._get_option_ele_list()}};this._get_option_ele_list=function(){var a=this._script_list.querySelectorAll("cst-option");this._option_eles=Array.prototype.slice.call(a);var b=0;if(this._option_eles.length){for(var c;c=this._option_eles[b];b++)if(c.hasClass("selected"))break;this._option_eles[b]||(b=0);this._option_eles[b].addClass("hover")}this._option_ele_cursor=b;this._option_box=this._container?this._container.getBoundingClientRect():null;if(this._option_box&&!this._option_box_delta){var d=getComputedStyle(this._container);this._option_box_delta=parseInt(d.getPropertyValue("border-top-width"))}};this._onclearfilter=function(a,b){this._filter.searchDelayed(this._input.value="");this._update_clear_button_state()};this._onmouseover=function(a,b){var c=a.target.get_ancestor("cst-option"),d=this._option_eles.indexOf(c);d>-1&&this._move_highlight(d)};this._move_highlight=function(a,b){if(a<this._option_eles.length){this._option_eles[this._option_ele_cursor]&&this._option_eles[this._option_ele_cursor].removeClass("hover");this._option_ele_cursor=a;var c=this._option_eles[this._option_ele_cursor];c.addClass("hover");if(this._option_box&&b){var d=c.getBoundingClientRect();d.bottom>this._option_box.bottom?c.scrollIntoView():d.top<this._option_box.top+this._option_box_delta&&(this._container.scrollTop-=this._option_box.top-d.top+this._option_box.height-d.height)}}};this._init_match_history=function(){this._setting=window.settings.js_source;this._match_history=this._setting&&this._setting.get("js-dd-match-history");this._match_cursor=0};this._init=function(a,b){this.init(a,b);this.ignore_option_handlers=!0;this._is_clear_button_visible=!1;this._filter=new TextSearch(1);this._filter.set_query_selector(".js-dd-s-scope");this._filter.no_highlight=!0;this._clear_button=null;this._onbeforesearch_bound=this._onbeforesearch.bind(this);this._filter.addListener("onbeforesearch",this._onbeforesearch_bound);eventHandlers.input[this._id+"-filter"]=this._onfilterinput.bind(this);eventHandlers.click["js-dd-clear-filter"]=this._onclearfilter.bind(this);eventHandlers.mouseover["js-dd-move-highlight"]=this._onmouseover.bind(this);this._onshortcut_bound=this._onshortcut.bind(this);var c=ActionBroker.get_instance().get_global_handler();c.register_shortcut_listener(this._id+"-filter",this._onshortcut_bound,["highlight-next-match","highlight-previous-match","show-script","next","previous"]);messages.addListener("thread-stopped-event",g);messages.addListener("thread-continue-event",h);messages.addListener("application-setup",i);this._tooltip=Tooltips.register("js-script-select",{type:Tooltips.TYPE_SUPPORT_CONTEXT});this._setting=null;this._match_history=[];this._match_cursor=0;this._option_box_delta=0};this._init(a,b)};cls.ScriptSelect.prototype=new CstSelect;(function(){const a=0,b=1,c=2,d=3,e=4,f=7,g=5,h=0,i=1,j=2,k=6,l=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.MATCH_REASON,m="  ",n="\n",o=2,p=Node.ELEMENT_NODE,q=Node.TEXT_NODE,r=Node.CDATA_SECTION_NODE,s=Node.PROCESSING_INSTRUCTION_NODE,t=Node.COMMENT_NODE,u=Node.DOCUMENT_NODE,v=Node.DOCUMENT_TYPE_NODE,w=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.PSEUDO_NODE,x=14,y=0,z=1,A=1,B=2,C=3,D=4,E=15;var F='<span class="ev-listener" data-tooltip="event-listener" ></span>';this._pseudo_element_map={};this._pseudo_element_map[A]="before";this._pseudo_element_map[B]="after";this._pseudo_element_map[C]="first-letter";this._pseudo_element_map[D]="first-line";this._node_name_map={};this._node_name_map[q]="<span class='text-node'>#text</span> ";this._node_name_map[r]="<span class='cdata-node'>#cdata-section</span>";var G=cls.EcmascriptDebugger["6.0"].DOMData.DISREGARD_FORCE_LOWER_CASE_WHITELIST,H=function(a){return G.indexOf(a[c].toLowerCase())!=-1};this._get_doctype_external_identifier=function(a){const b=8,c=9;var d=a[b],e=a[c];return(d?' PUBLIC "'+d+'"':"")+(!d&&e?" SYSTEM":"")+(e?' "'+e+'"':"")};this._get_pseudo_elements=function(b){var c=window.settings.dom.get("dom-tree-style"),d=b[x],e={};d&&d.forEach(function(d){var f=this._pseudo_element_map[d[y]];e[d[y]]="<div handler='spotlight-node' class='spotlight-node'ref-id='"+b[a]+"'"+"data-pseudo-element='"+f+"'"+this._margin_style(b)+">"+"<node class='pseudo-element'>"+(c?"::"+f:"&lt::"+f+"/>")+"</node>"+"</div>"},this);return e};var I=function(a,b){var c=a.split(" "),d="",e=0,f="",g=null;for(;e<c.length;e++)if(d=c[e]){g=d.split("=");f+=" <key>"+(b?g[0].toLowerCase():g[0])+"</key>=<value>"+g[1]+"</value>"}return f},J=function(a,b){return((a[h]?a[h]+":":"")+(b?a[i].toLowerCase():a[i])).replace(/</g,"&lt;")};this._dom_attrs=function(a,b,c){for(var d=0,e,f,h="";e=a[g][d];d++){f=helpers.escapeAttributeHtml(e[j]);typeof c!="boolean"||c?h+=" <key>"+J(e)+'</key>=<value>"'+f+'"</value>':h+=" "+J(e)+'="'+f+'"'}return h};this._dom_attrs_search=function(a,b){for(var c=0,d,e,f="";d=a[g][c];c++){e=helpers.escapeAttributeHtml(d[j]);f+=" <key><match-token>"+J(d)+"</match-token>"+'</key>=<value>"'+"<match-token>"+e+"</match-token>"+'"</value>'}return f};this.dom_search=function(g){var h=g.getData(),i=window.settings.dom.get("dom-tree-style"),j="<div rt-id='"+g.getDataRuntimeId()+"'"+" data-model-id='"+g.id+"'"+">",m=h.length,n=null,q=g.isTextHtml()&&window.settings.dom.get("force-lowercase"),r=window.settings.dom.get("show-comments"),x="",y=0,z=i?"":"&lt;",A=i?"":"&gt;",B="";for(var C=0,D;D=h[C];C++){if(D[l]==o)continue;x=(D[e]?D[e]+":":"")+D[c];x=helpers.escapeTextHtml(x);if(q&&H(D)){y=D[d];q=!1}else if(y&&y==D[d]){y=0;q=g.isTextHtml()&&window.settings.dom.get("force-lowercase")}q&&(x=x.toLowerCase());B=D[E]&&D[E].length?F:"";switch(D[b]){case w:break;case p:n=this._dom_attrs_search(D,q);j+="<div class='search-match dom-search' obj-id='"+D[a]+"' "+"handler='show-search-match' "+">"+"<node>"+z+"<match-token>"+x+"</match-token>"+n;A?j+=D[k]?"&gt;</node>…<node>&lt;/"+x+"&gt;</node>":"/&gt;</node>":j+="</node>";j+=B+"</div>";break;case s:j+="<div class='search-match dom-search processing-instruction' obj-id='"+D[a]+"' handler='show-search-match' >"+"&lt;?"+D[c]+" "+I(D[f],q)+"?&gt;</div>";break;case t:r&&!/^\s*$/.test(D[f])&&(j+="<div class='search-match dom-search comment pre-wrap' obj-id='"+D[a]+"' handler='show-search-match' >"+(z?z+"!--":"#comment")+"<match-token>"+helpers.escapeTextHtml(D[f])+"</match-token>"+(A?"--"+A:"")+"</div>");break;case u:B&&(j+="<div class='search-match dom-search document' rt-id='"+String(g.getDataRuntimeId())+"' "+"obj-id='"+String(D[a])+"' "+"handler='inspect-object-link' >"+"document"+B+"</div>");break;case v:j+="<div class='search-match dom-search doctype' obj-id='"+D[a]+"' handler='show-search-match' >"+"&lt;!DOCTYPE "+D[c]+this._get_doctype_external_identifier(D)+"&gt;"+"</div>";break;default:/^\s*$/.test(D[f])||(j+="<div class='search-match dom-search' obj-id='"+D[a]+"' handler='show-search-match' >"+"<span class='dom-search-text-node'>#text</span>"+"<match-token>"+helpers.escapeTextHtml(D[f])+"</match-token>"+"</div>")}}j+="</div>";return j};this._inspected_dom_node_markup_style=function(l,m,n,o){var r=l.getData(),y="<div class='padding dom-tree'"+(n?" edit-handler='edit-dom'":"")+" rt-id='"+l.getDataRuntimeId()+"'"+" data-model-id='"+l.id+"'"+">",z=0,A=null,B=r.length,C=null,D=null,G=0,J="",K="",L=!1,M=!1,N="",O=0,P=0,Q=0,R=0,S=[],T=l.isTextHtml()&&window.settings.dom.get("force-lowercase"),U=window.settings.dom.get("show-comments"),V="",W=/script|style|#comment/i,X=null,Y=!0,Z=ini.debug,$=0,_=l.get_depth_of_first_element(),ba=window.settings.dom.get("show-pseudo-elements"),bb=!1;for(;A=r[z];z+=1){while(O>A[d]){y+=S.pop();O--}O=A[d];R=A[k];bb=R||ba&&A[x]&&A[x].length;P=0;if(T&&H(A)){$=A[d];T=!1}else if($&&$==A[d]){$=0;T=l.isTextHtml()&&window.settings.dom.get("force-lowercase")}switch(A[b]){case w:ba&&(y+="<div "+this._margin_style(A,_)+"ref-id='"+A[a]+"' "+"handler='spotlight-node' "+"data-pseudo-element='"+A[c]+"' "+"class='spotlight-node'>"+"<node class='pseudo-element'>"+"&lt;::"+A[c]+"&gt;"+"</node>"+"</div>");break;case p:var bc=(A[e]?A[e]+":":"")+A[c];bc=helpers.escapeTextHtml(bc);var bd=A[E]&&A[E].length?F:"";T&&(bc=bc.toLowerCase());Y=A[c].toLowerCase()=="script";C="";for(G=0;D=A[g][G];G++){K=helpers.escapeAttributeHtml(D[j]);C+=" <key>"+((D[h]?D[h]+":":"")+(T?D[i].toLowerCase():D[i])).replace(/</g,"&lt;")+"</key>=<value"+(/^href|src$/i.test(D[i])?" handler='open-resource-tab' class='dom-resource-link' data-resource-url='"+K+"' ":"")+'>"'+K+'"</value>'}P=z+1;L=r[P]&&A[d]<r[P][d];if(L){N="";M=!1;Q=r[P][d];for(;r[P]&&r[P][d]==Q;P+=1){M=!0;if(r[P][b]!=q){M=!1;N="";break}if(!N||!/^\s*$/.test(r[P][f]))N+="<text ref-id='"+r[P][a]+"' "+">"+helpers.escapeTextHtml(r[P][f])+"</text>"}if(M){V=" class='spotlight-node";if(W.test(bc)){V+=" pre-wrap";Y&&(V+=" non-editable")}V+="'";y+="<div "+(A[a]==m?"id='target-element'":"")+this._margin_style(A,_)+"ref-id='"+A[a]+"' handler='spotlight-node' "+(o?"":"data-menu='dom-element' ")+V+">"+"<input handler='get-children' type='button' class='open' />"+"<node>&lt;"+bc+C+"&gt;</node>"+N+"<node>&lt;/"+bc+"&gt;</node>"+(Z&&" <d>["+A[a]+"]</d>"||"")+bd+"</div>";z=P-1}else{y+="<div "+(A[a]==m?"id='target-element'":"")+this._margin_style(A,_)+"ref-id='"+A[a]+"' handler='spotlight-node' "+(o?"":"data-menu='dom-element' ")+"class='spotlight-node "+(Y?"non-editable":"")+"'>"+(bb?"<input handler='get-children' type='button' class='open' />":"")+"<node>&lt;"+bc+C+"&gt;</node>"+(Z&&" <d>["+A[a]+"]</d>"||"")+bd+"</div>";S.push("<div"+this._margin_style(A,_)+"ref-id='"+A[a]+"' handler='spotlight-node' "+"class='spotlight-node' "+(o?"":"data-menu='dom-element' ")+"><node>"+"&lt;/"+bc+"&gt;"+"</node></div>")}}else y+="<div "+(A[a]==m?"id='target-element'":"")+this._margin_style(A,_)+"ref-id='"+A[a]+"' handler='spotlight-node' "+(o?"":"data-menu='dom-element' ")+"class='spotlight-node "+(Y?"non-editable":"")+"'>"+(bb?"<input handler='get-children' type='button' class='close' />":"")+"<node>&lt;"+bc+C+(bb?"":"/")+"&gt;</node>"+(Z&&" <d>["+A[a]+"]</d>"||"")+bd+"</div>";break;case s:y+="<div"+this._margin_style(A,_)+"class='processing-instruction'>&lt;?"+A[c]+" "+I(A[f],T)+"?&gt;</div>";break;case t:U&&(/^\s*$/.test(A[f])||(y+="<div"+this._margin_style(A,_)+"ref-id='"+A[a]+"' "+"class='comment pre-wrap'>"+"&lt;!--"+helpers.escapeTextHtml(A[f])+"--&gt;</div>"));break;case u:break;case v:y+="<div"+this._margin_style(A,_)+"class='doctype'>"+"&lt;!DOCTYPE "+A[c]+this._get_doctype_external_identifier(A)+"&gt;</div>";break;default:/^\s*$/.test(A[f])||(y+="<div"+this._margin_style(A,_)+(o?"":"data-menu='dom-element' ")+">"+"<text ref-id='"+A[a]+"' "+">"+helpers.escapeTextHtml(A[f])+"</text>"+"</div>")}}while(S.length)y+=S.pop();y+="</div>";return y};this._inspected_dom_node_tree_style=function(l,m,n,o){var r=l.getData(),s=l.isTextHtml()&&window.settings.dom.get("force-lowercase"),y=window.settings.dom.get("show-comments"),z=window.settings.dom.get("show-whitespace-nodes"),A="<div class='padding dom-tree'"+(n?" edit-handler='edit-dom'":"")+" rt-id='"+l.getDataRuntimeId()+"'"+" data-model-id='"+l.id+"'"+"><div class='tree-style'>",B=0,C=null,D=r.length,G=null,I="",J="",K=!1,L=!1,M="",N=0,O=0,P=0,Q=0,R=0,S=[],T="",U=/script|style/i,V=null,W=!0,X=0,Y=l.get_depth_of_first_element(),Z=window.settings.dom.get("show-pseudo-elements"),$=[],_=null,ba=!1,bb="";for(;C=r[B];B+=1){while(N>C[d])N--;N=C[d];R=C[k];ba=R||Z&&C[x];O=0;while((_=$.last)&&N<=_[d])$.pop();if(s&&H(C)){X=C[d];s=!1}else if(X&&X==C[d]){X=0;s=l.isTextHtml()&&window.settings.dom.get("force-lowercase")}bb=C[E]&&C[E].length?F:"";switch(C[b]){case w:Z&&(A+="<div "+this._margin_style(C,Y)+"ref-id='"+C[a]+"' "+"handler='spotlight-node' "+"data-pseudo-element='"+C[c]+"' "+"class='spotlight-node'>"+"<node class='pseudo-element'>"+"::"+C[c]+"</node>"+"</div>");break;case p:var bc=(C[e]?C[e]+":":"")+C[c];bc=helpers.escapeTextHtml(bc);s&&(bc=bc.toLowerCase());var bd=Z&&this._get_pseudo_elements(C);W=C[c].toLowerCase()=="script";G="";for(Q=0;attr=C[g][Q];Q++){J=helpers.escapeAttributeHtml(attr[j]);G+=" <key>"+(attr[h]?attr[h]+":":"")+(s?attr[i].toLowerCase():attr[i]).replace(/</g,"&lt;")+"</key>=<value"+(/^href|src$/i.test(attr[i])?" handler='open-resource-tab' class='dom-resource-link' data-resource-url='"+J+"' ":"")+'>"'+J+'"</value>'}O=B+1;K=r[O]&&C[d]<r[O][d];if(K){L=!C.hasOwnProperty(x);M="";P=r[O][d];for(;r[O]&&r[O][d]==P;O+=1){M+=r[O][f];if(r[O][b]!=q){L=!1;M="";break}}A+="<div "+(C[a]==m?"id='target-element'":"")+this._margin_style(C,Y)+"ref-id='"+C[a]+"' handler='spotlight-node' "+(o?"":"data-menu='dom-element' ")+"class='spotlight-node "+(W?"non-editable":"")+"'>"+(ba?"<input handler='get-children' type='button' class='open' />":"")+"<node>"+bc+G+"</node>"+bb+"</div>"}else A+="<div "+(C[a]==m?"id='target-element'":"")+this._margin_style(C,Y)+"ref-id='"+C[a]+"' handler='spotlight-node' "+(o?"":"data-menu='dom-element' ")+"class='spotlight-node "+(W?"non-editable":"")+"'>"+(ba?"<input handler='get-children' type='button' class='close' />":"")+"<node>"+bc+G+"</node>"+bb+"</div>";$.push(C);break;case t:y&&(A+="<div"+this._margin_style(C,Y)+"ref-id='"+C[a]+"' "+"class='comment pre-wrap'>"+"<span class='comment-node'>#comment</span>"+helpers.escapeTextHtml(C[f])+"</div>");break;case u:A+="<div"+this._margin_style(C,Y)+"ref-id='"+C[a]+"'>"+"<span class='document-node'>#document</span>"+bb+"</div>";break;case v:A+="<div"+this._margin_style(C,Y)+">"+"<span class='doctype'>"+C[c]+" "+this._get_doctype_external_identifier(C)+"</span></div>";break;default:T="";_=$.last;U.test(_)&&(T=_[c].toLowerCase()=="script"?" class='pre-wrap non-editable' ":" class='pre-wrap' ");if(!z&&C[b]==q)/^\s*$/.test(C[f])||(A+="<div"+this._margin_style(C,Y)+T+(o?"":"data-menu='dom-element' ")+">"+(C[c]?C[c]:this._node_name_map[C[b]])+"<text ref-id='"+C[a]+"' >"+helpers.escapeTextHtml(C[f])+"</text>"+"</div>");else{var be=/^\s*$/.test(C[f]);A+="<div"+this._margin_style(C,Y)+T+(o?"":"data-menu='dom-element' ")+">"+(C[c]?C[c]:this._node_name_map[C[b]])+"<text ref-id='"+C[a]+"' "+" class='"+(be?"only-whitespace":"")+"'>"+(be?helpers.escape_whitespace(C[f]):helpers.escapeTextHtml(C[f]))+"</text>"+"</div>"}}}A+="</div></div>";return A};this.inspected_dom_node=function(a,b,c,d){return window.settings.dom.get("dom-tree-style")?this._inspected_dom_node_tree_style(a,b,c,d):this._inspected_dom_node_markup_style(a,b,c,d)};this._margin_style=function(a,b){const c=16;return" style='margin-left:"+c*(a[d]-(b||0))+"px;' "};this._offsets=function(a,b){this._OFFSETS||(this._OFFSETS=cls.ElementLayout.OFFSETS);return Boolean(b)?["tr",["th",this._OFFSETS[b]],["td",a,"class","number"],"data-spec","dom#"+this._OFFSETS[b]]:[]};this.offset_values=function(a){var b=window.dominspections.active,c=[];if(b){if(b.breadcrumbhead&&!b.has_node(b.breadcrumbhead)){b.breadcrumbhead=null;b.breadcrumb_offsets=null}var d=!b.breadcrumbhead||b.breadcrumbhead==b.target;d&&(b.breadcrumb_offsets=window.helpers.copy_object(a[0]));c=[["h2",ui_strings.M_VIEW_SUB_LABEL_PARENT_OFFSETS],["parent-node-chain",d?this.breadcrumb(b,b.target,a[0],null,!0):this.breadcrumb(b,b.breadcrumbhead,b.breadcrumb_offsets,b.target,!0),"onmouseover",helpers.breadcrumbSpotlight,"onmouseout",helpers.breadcrumbClearSpotlight,"class","mono"],["h2",ui_strings.M_VIEW_SUB_LABEL_OFFSET_VALUES],["table",a.map(this._offsets),"class","offsets"]]}return c};this.disabled_view=function(){return["div",["p",window.app.profiles[window.app.profiles.PROFILER].is_enabled?ui_strings.S_INFO_PROFILER_MODE:ui_strings.S_INFO_HTTP_PROFILER_MODE],["p",["span",ui_strings.S_LABEL_ENABLE_DEFAULT_FEATURES,"class","container-button ui-button","handler","enable-ecmascript-debugger","unselectable","on","tabindex","1"]],"class","info-box"]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});window.cls.DOMSerializer=function(){};window.cls.DOMSerializer.prototype=new function(){const a=0,b=1,c=2,d=3,e=4,f=7,g=5,h=0,i=1,j=2,k=6,l=8,m=9,n="  ",o="\n",p={area:1,base:1,basefont:1,bgsound:1,br:1,col:1,embed:1,frame:1,hr:1,img:1,input:1,link:1,meta:1,param:1,spacer:1,wbr:1,command:1,"event-source":1,source:1};var q=function(a){var b="";a&&a--;while(a>0){b+=n;a--}return b};this["text/html"]=function(a,e){const n="\r\n";var o=a.getData(),r="",s=0,t=null,u=o.length,v="",w=null,x=0,y="",z=0,A=0,B="",C=0,D=0,E=0,F=0,G=0,H=[],I=window.settings.dom.get("force-lowercase"),J="",K="",L=o[0][d]-1,M=cls.EcmascriptDebugger["6.0"].DOMData.DISREGARD_FORCE_LOWER_CASE_WHITELIST,N=0;for(;t=o[s];s++){while(C>t[d]){r+=H.pop();C--}C=t[d];G=t[k];D=0;J=t[c];if(I&&M.indexOf(t[c].toLowerCase())!=-1){N=t[d];I=!1}else if(N&&N==t[d]){N=0;I=a.isTextHtml()&&window.settings.dom.get("force-lowercase")}I&&(J=J.toLowerCase());switch(t[b]){case 0:break;case 1:v="";for(x=0;w=t[g][x];x++)v+=" "+(w[h]?w[h]+":":"")+(I?w[i].toLowerCase():w[i])+'="'+w[j].replace(/"/g,"&quot;")+'"';D=s+1;z=o[D]&&t[d]<o[D][d];if(z){A=1;B="";E=o[D][d];for(;o[D]&&o[D][d]==E;D++){B+=o[D][f];if(o[D][b]!=3){A=0;B="";break}}}if(z)if(A){r+=n+q(t[d]-L)+"<"+J+v+">"+helpers.escapeTextHtml(B)+"</"+J+">";s=D-1}else{r+=n+q(t[d]-L)+"<"+J+v+">";J in p||H.push(n+q(t[d]-L)+"</"+J+">")}else r+=n+q(t[d]-L)+"<"+J+v+(e&&"/>"||">"+(J in p?"":"</"+J+">"));break;case 7:r+=n+q(t[d]-L)+"<?"+t[c]+(t[f]?" "+t[f]:"")+"?>";break;case 8:r+=n+q(t[d]-L)+"<!--"+(t[f]||" ")+"-->";break;case 9:break;case 10:r+=n+q(t[d]-L)+"<!DOCTYPE "+t[c]+(t[l]?' PUBLIC "'+t[l]+'"':"")+(!t[l]&&t[m]?" SYSTEM":"")+(t[m]?' "'+t[m]+'"':"")+">";break;default:/^\s*$/.test(t[f])||(r+=n+q(t[d]-L)+helpers.escapeTextHtml(t[f]))}}while(H.length)r+=H.pop();return r.replace(/^(?:\r\n)+/,"")};this["application/xml"]=function(a){return this["text/html"](a,!0)};this.serialize=function(a){return this[a.get_mime()](a)}};window.cls||(window.cls={});cls.DOMView=function(a,b,c){this.createView=function(a){if(this._create_view_no_data_timeout){clearTimeout(this._create_view_no_data_timeout);this._create_view_no_data_timeout=0}if(dom_data.has_data()){var b=window.dominspections.active,c=a.scrollTop;a.clearAndRender(window.templates.inspected_dom_node(window.dom_data,b&&b.target,!0));a.firstElementChild.addEventListener("mouseleave",this._clear_soft_spotlight,!1);window.helpers.scroll_dom_target_into_view()||(a.scrollTop=c);if(b==window.dom_data){this._modebar||(this._modebar=UI.get_instance().get_modebar("dom"));this._modebar&&this._modebar.set_content(b.id,window.templates.breadcrumb(b,b.target),!0)}setTimeout(function(){window.messages.post("dom-view-updated",{model:b})},0)}else this._create_view_no_data_timeout=setTimeout(this._create_view_no_data,100,a)};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._clear_soft_spotlight=function(){window.settings.dom.get("highlight-on-hover")&&window.hostspotlighter.spotlight(window.dom_data.target)};this._create_view_no_data_timeout=0;this._create_view_no_data=function(a){dom_data.getDataRuntimeId()?a.innerHTML="<div class='padding' edit-handler='edit-dom'><p></p></div>":a.innerHTML="<div class='padding'><div class='info-box'>"+ui_strings.S_INFO_WINDOW_HAS_NO_RUNTIME+"</div></div>"};this.ondestroy=function(){window.hostspotlighter.clearSpotlight()};this.highlight_search_hit=function(a){var b=this.get_container();if(b){var c=b.querySelector('[ref-id="'+a.object_id+'"]');c&&(this._search_hit=this._highlighter.set_hit(c,a.offset,a.length,TextSearch.HIGHLIGHT_STYLE,!0))}};this._onscroll=function(a,b){if(this._search_hit){this._highlighter.cleanup();this._search_hit=null}};this._on_setting_change=function(a){if(a.id==this.id)switch(a.key){case"dom-tree-style":this.update()}};messages.addListener("setting-changed",this._on_setting_change.bind(this));this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this._highlighter=new VirtualTextSearch;this._highlight_style=this._highlighter.get_match_style("highlight");this.init(a,b,c,"","clear-search-hit");var d=this._onscroll.bind(this);eventHandlers.scroll["clear-search-hit"]=d;window.messages.addListener("panel-search-executed",d)};this._init(a,b,c)};cls.DocumentSelect=function(a){var b="";this.getSelectedOptionText=function(){var a=dom_data.getDataRuntimeId();if(a){var b=runtimes.getRuntime(a);if(b)return b.title||helpers.shortenURI(b.uri).uri}return""};this.getSelectedOptionValue=function(){};this.templateOptionList=function(a){var b=runtimes.getActiveWindowId();if(b){var c=runtimes.getRuntimes(b),d=null,e=0;c=c.filter(function(a){return["extensionjs"].indexOf(a.description)==-1});for(;(d=c[e])&&!d.selected;e++);if(!d&&c[0]){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"no runtime selected");return}return c.map(templates.runtime_dom,templates)}};this.checkChange=function(a){var b=parseInt(a.getAttribute("runtime-id"));if(b!=dom_data.getDataRuntimeId()){b?dom_data.get_dom(b):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing runtime id in cls.DocumentSelect.checkChange");return!0}return!1};this.init(a)};cls.DOMView.create_ui_widgets=function(){function i(a,c){b.dispatch_action("dom","remove-node",a,a.target)}function h(a,c){b.dispatch_action("dom","remove-attribute",a,a.target)}function g(a,c){b.dispatch_action("dom","insert-attribute-edit",a,a.target)}function f(a,c){c=a.target;while(c&&c.nodeName.toLowerCase()!="node")c=c.parentNode;c&&b.dispatch_action("dom","edit-dom",a,c)}function e(a,c){b.dispatch_action("dom","edit-dom",a,a.target)}var a=["force-lowercase","dom-tree-style","show-comments","show-whitespace-nodes","find-with-click","highlight-on-hover","update-on-dom-node-inserted","show-id_and_classes-in-breadcrumb","scroll-into-view-on-spotlight","lock-selected-elements","show-pseudo-elements"];new Settings("dom",{"find-with-click":!0,"highlight-on-hover":!0,"update-on-dom-node-inserted":!1,"force-lowercase":!0,"show-comments":!0,"show-whitespace-nodes":!0,"dom-tree-style":!1,"show-siblings-in-breadcrumb":!1,"show-id_and_classes-in-breadcrumb":!0,"scroll-into-view-on-spotlight":!0,"lock-selected-elements":!1,"spotlight-color":"3875d7","dom-search-type":DOMSearch.PLAIN_TEXT,"dom-search-ignore-case":1,"dom-search-only-selected-node":0,"show-pseudo-elements":!0},{"find-with-click":ui_strings.S_SWITCH_FIND_ELEMENT_BY_CLICKING,"highlight-on-hover":ui_strings.S_SWITCH_HIGHLIGHT_SELECTED_OR_HOVERED_ELEMENT,"update-on-dom-node-inserted":ui_strings.S_SWITCH_UPDATE_DOM_ON_NODE_REMOVE,"force-lowercase":ui_strings.S_SWITCH_USE_LOWER_CASE_TAG_NAMES,"show-comments":ui_strings.S_SWITCH_SHOW_COMMENT_NODES,"show-whitespace-nodes":ui_strings.S_SWITCH_SHOW_WHITE_SPACE_NODES,"dom-tree-style":ui_strings.S_SWITCH_SHOW_DOM_INTREE_VIEW,"show-siblings-in-breadcrumb":ui_strings.S_SWITCH_SHOW_SIBLINGS_IN_BREAD_CRUMB,"show-id_and_classes-in-breadcrumb":ui_strings.S_SWITCH_SHOW_ID_AND_CLASSES_IN_BREAD_CRUMB,"scroll-into-view-on-spotlight":ui_strings.S_SWITCH_SCROLL_INTO_VIEW_ON_FIRST_SPOTLIGHT,"lock-selected-elements":ui_strings.S_SWITCH_LOCK_SELECTED_ELEMENTS,"show-pseudo-elements":ui_strings.S_SWITCH_SHOW_PSEUDO_ELEMENTS},{checkboxes:a,contextmenu:["dom-tree-style","show-comments","lock-selected-elements"]},null,"document",{"lock-selected-elements":function(a){a&&!this.get("highlight-on-hover")&&this.set("highlight-on-hover",!0,!0)}});new Settings("modebar",{"show-modebar-dom":!0},{"show-modebar-dom":ui_strings.S_TOGGLE_DOM_MODEBAR},{checkboxes:["show-modebar-dom"]},null,"document");new ToolbarConfig("dom",[{handler:"dom-inspection-snapshot",title:ui_strings.S_BUTTON_LABEL_GET_THE_WOHLE_TREE},{handler:"dom-inspection-export",title:ui_strings.S_BUTTON_LABEL_EXPORT_DOM}],null,null,[{handler:"select-window",title:ui_strings.S_BUTTON_LABEL_SELECT_WINDOW,type:"dropdown","class":"window-select-dropdown",template:window["cst-selects"]["document-select"].getTemplate()}],!0);var b=ActionBroker.get_instance(),c=ContextMenu.get_instance(),d=[{label:ui_strings.M_CONTEXTMENU_EDIT_MARKUP,handler:f},{label:ui_strings.M_CONTEXTMENU_REMOVE_NODE,handler:i}];c.register("dom-element",[{callback:function(a,c){var c=a.target,f=c.has_attr("parent-node-chain","ref-id");if(!f||!f.hasClass("non-editable")&&!f.parentNode.hasClass("non-editable")){var h=[];while(c!=document&&!/^(?:key|value|text|node)$/i.test(c.nodeName))c=c.parentNode;switch(c.nodeName.toLowerCase()){case"node":var i=c.parentNode.querySelector("[handler='get-children']"),j=i?i.hasClass("open"):null;h=[{label:ui_strings.M_CONTEXTMENU_ADD_ATTRIBUTE,handler:g}].concat(ContextMenu.separator).concat(d);i&&h.extend([ContextMenu.separator,{label:ui_strings.M_CONTEXTMENU_EXPAND_SUBTREE,handler:function(a,c){b.dispatch_action("dom","expand-node",a,a.target)}},{label:ui_strings.M_CONTEXTMENU_COLLAPSE_SUBTREE,handler:function(a,c){b.dispatch_action("dom","expand-collapse-whole-node",a,a.target)},disabled:!j}]);break;case"key":h=[{label:ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE,handler:e},{label:ui_strings.M_CONTEXTMENU_ADD_ATTRIBUTE,handler:g}].concat(ContextMenu.separator).concat(d);break;case"value":h=[{label:ui_strings.M_CONTEXTMENU_EDIT_ATTRIBUTE_VALUE,handler:e},{label:ui_strings.M_CONTEXTMENU_ADD_ATTRIBUTE,handler:g}].concat(ContextMenu.separator).concat(d);break;case"text":h=[{label:ui_strings.M_CONTEXTMENU_EDIT_TEXT,handler:e}]}return h}}}]);new Switches("dom",["find-with-click","highlight-on-hover","update-on-dom-node-inserted"])};var cls=window.cls||(window.cls={});cls.DOMInspectorActions=function(a){this.view_id=a;this.id=a;const b=30,c="default",d="edit-attributes-and-text",e="edit-markup";this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT,"edit-attributes-and-text":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_ATTR_AND_TEXT,"edit-markup":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT_MARKUP};var f=this,g=null,h=null,i=null,j=null,k=null,l=ActionBroker.get_instance();this.serializer=new cls.DOMSerializer;this._handlers={};this._mode=c;this.__defineSetter__("mode",function(a){this._mode=a;messages.post("dom-editor-active",{editor_active:a!=c})});this.__defineGetter__("mode",function(){return this._mode});this._expand_collapse_node=function(a,b,c,d){var e=a.target.parentNode,f=e.nextElementSibling,g=parseInt(e.style.marginLeft)||0,h=f&&parseInt(f.style.marginLeft)||0,i=parseInt(e.getAttribute("ref-id"));if(e=e.has_attr("parent-node-chain","data-model-id")){var j=a.target.get_attr("parent-node-chain","data-menu")!="dom-element",k=window.dominspections[e.getAttribute("data-model-id")],b=document.getElementById("target-element"),l=e.hasAttribute("edit-handler"),m=null,n=0;if(!k.isprocessing){e.contains(b)&&(n=parseInt(b.getAttribute("ref-id")));if(!d&&(h>g||a.target.parentNode.querySelector("text"))){k.collapse(i);this._get_children_callback(e,k,n,l,j)}else{d&&k.collapse(i);m=this._get_children_callback.bind(this,e,k,n,l,j);k.expand(m,i,c)}}}};this._get_children_callback=function(a,b,c,d,e){var f=window.templates.inspected_dom_node(b,c,d,e);a.re_render(f);window.messages.post("dom-view-updated",{model:b})};this._select_node=function(a,b){var c=parseInt(a.getAttribute("ref-id")),d=a.get_attr("parent-node-chain","data-model-id"),e=a.getAttribute("data-pseudo-element"),f=window.dominspections,g=null,h=!1,i=0,j=0;if(d&&c){g=f[d];if(window.settings.dom.get("highlight-on-hover")){i=f.active&&f.active.target;h=settings.dom.get("scroll-into-view-on-spotlight")&&c!=i;hostspotlighter.spotlight(c,h)}j=g.breadcrumbhead||g.target;g.target=c;f.active=g;window.messages.post("element-selected",{model:g,obj_id:c,rt_id:g.getDataRuntimeId(),pseudo_element:e});document.getElementById("target-element")&&document.getElementById("target-element").removeAttribute("id");a.id="target-element";if(b)g.breadcrumbhead=j;else{g.breadcrumbhead=g.target;this._modebar||(this._modebar=UI.get_instance().get_modebar("dom"));if(this._modebar){a.nodeName.toLowerCase()=="text"&&(c=a.parentNode.get_attr("parent-node-chain","ref-id"));this._modebar.set_content(g.id,window.templates.breadcrumb(g,c),!0)}}}return g};var m=function(a){switch(
a.nodeName.toLowerCase()){case"value":case"key":return/^<?script/i.test(a.parentNode.firstChild.nodeValue);case"text":return a.parentNode.hasClass("non-editable");case"node":return a.firstChild&&/^<?\/?script/i.test(a.firstChild.nodeValue);default:return!1}},n=function(a){return a.hasClass("pseudo-element")},o={attr_text:function(a){if(!m(a))switch(a.nodeName.toLowerCase()){case"text":case"key":case"value":return!0;case"node":return!a.getElementsByTagName("key")[0]&&!/<\//.test(a.textContent)}return!1},left_right:function(a){return!m(a)&&(/^key|value|input|node$/.test(a.nodeName.toLowerCase())||"text"==a.nodeName.toLowerCase()&&a.textContent.length)},up_down:function(a,b){return"input"==a.nodeName.toLowerCase()&&!a.parentNode.contains(b)||!m(a)&&"node"==a.nodeName.toLowerCase()&&(a.textContent.slice(0,2)!="</"||a.parentNode.getElementsByTagName("node")[0]==a)&&"input"!=a.parentNode.firstElementChild.nodeName.toLowerCase()}};this.editor=null;this.is_dom_type_tree=!1;this.editors={"dom-attr-text-editor":new DOMAttrAndTextEditor(o),"dom-markup-editor":new DOMMarkupEditor(o)};this.set_editor=function(a){this.editor&&this.editor.submit();if(!this.editor||this.editor.type!=a)this.editor=this.editors[a]};this.getFirstTarget=function(){return g&&(document.getElementById("target-element")||g).getElementsByTagName("input")[0]};this.resetTarget=function(){if(g&&i){var a=g;document.documentElement.contains(a)||(a=document.getElementById(a.id));if(a&&a.firstChild){var b=a.firstChild.getElementsByTagName("*"),c=h.getElementsByTagName("*"),d=c.indexOf(i),e=null;i=b[d];g=a;h=a.firstChild;e=g.firstElementChild;e=e&&e.firstElementChild;this.is_dom_type_tree=e&&e.hasClass("tree-style");this.setSelected(i||(i=this.getFirstTarget()))}}};var p=function(a){a.target.nodeType==1&&i&&!document.documentElement.contains(i)&&f.resetTarget()};this.setContainer=function(a,b){document.addEventListener("DOMNodeInserted",p,!1);g=b;h=b.firstChild;j=getSelection();k=document.createRange();if(b.firstElementChild){this.is_dom_type_tree=b.firstElementChild.firstElementChild.hasClass("tree-style");if(a.type=="click"||a.type=="contextmenu")switch(a.target.nodeName.toLowerCase()){case"node":case"key":case"value":case"text":case"input":i=a.target;break;case"div":a.target.getElementsByTagName("node")[0]&&(i=a.target.getElementsByTagName("node")[0])}i||(i=this.getFirstTarget());this.setSelected(i)}};this.setSelected=function(a,c){var d=0,e=0;if(a){i&&i.blur();j&&j.removeAllRanges();i=a;if(c){d=a.getBoundingClientRect().top-g.getBoundingClientRect().top;e=d+a.offsetHeight+b-g.offsetHeight;e<0&&(e=d-b)>0&&(e=0);g.scrollTop+=e}switch(a.nodeName.toLowerCase()){case"node":var f=a.firstChild,h=0,l=f.nodeValue.length;if(!this.is_dom_type_tree){h+=1;l-=1}else f.nextSibling&&(l-=1);f.nodeValue[1]=="/"&&(h+=1);f.nodeValue.slice(-2,-1)=="/"&&(l-=1);k.setStart(f,h);k.setEnd(f,l);j.addRange(k);break;case"value":firstChild=a.firstChild;k.setStart(firstChild,1);k.setEnd(firstChild,firstChild.nodeValue.length-1);j.addRange(k);break;case"value":firstChild=a.firstChild;k.setStart(firstChild,1);k.setEnd(firstChild,firstChild.nodeValue.length-1);j.addRange(k);break;case"key":case"text":k.selectNodeContents(a);j.addRange(k);break;case"input":i.focus()}}return a};this.keyhandler_onclick=function(a){var b=a.target,c=g&&g.contains(b);c&&b!=i&&/^input|node|key|value|text$/i.test(b.nodeName)&&this.setSelected(b);return!0};this.focus=function(a,b){this.mode==c&&this.setContainer(a,b)};this.blur=function(a){this.mode!=c&&this.editor&&this.editor.submit();j&&j.removeAllRanges();g=null;h=null;i=null;j=null;k=null;document.removeEventListener("DOMNodeInserted",p,!1)};this.onclick=function(a){if(this.mode==c)return this.keyhandler_onclick(a);return this.edit_onclick(a)};this.handle=function(a,b,c){if(a in this._handlers)return this._handlers[a](b,c)};this.get_action_list=function(){var a=[],b="";for(b in this._handlers)a.push(b);return a};this._handlers["expand-collapse-node"]=function(a,b){this._expand_collapse_node(a,b,"children")}.bind(this);this._handlers["expand-collapse-whole-node"]=function(a,b){this._expand_collapse_node(a,b,"subtree")}.bind(this);this._handlers["expand-node"]=function(a,b){this._expand_collapse_node(a,b,"subtree",!0)}.bind(this);this._handlers["spotlight-node"]=function(a,b){if(window.settings.dom.get("highlight-on-hover")){var c=parseInt(b.getAttribute("ref-id")||b.getAttribute("obj-id"));window.hostspotlighter.soft_spotlight(c)}}.bind(this);this._handlers["select-node"]=function(a,b){var c=parseInt(b.getAttribute("ref-id"));if(!window.settings.dom.get("dom-tree-style")&&b.firstChild&&/<\//.test(b.firstChild.textContent))while((b=b.previousSibling)&&(b.getAttribute("ref-id")!=c||b.hasAttribute("data-pseudo-element")));if(b)var d=this._select_node(b)}.bind(this);this._handlers["inspect-node-link"]=function(a,b){var c=parseInt(b.getAttribute("obj-id")),d=parseInt(b.getAttribute("rt-id"))||parseInt(b.get_attr("parent-node-chain","rt-id"));if(c&&d){window.dom_data.get_dom(d,c,!0,!0);window.views.dom.isvisible()||window.topCell.showView("dom")}}.bind(this);this._handlers["select-node-in-breadcrumb"]=function(a,b){a.target.parentNode.querySelector(".active").removeClass("active");a.target.addClass("active");var c=parseInt(b.getAttribute("ref-id")),b=document.getElementById("target-element");if(b){while(b&&!/container/i.test(b.nodeName)&&(b=b.parentElement));if(b){var d=b.getElementsByTagName("div"),e=null,f=0;for(;(e=d[f])&&e.getAttribute("ref-id")!=c;f++);e&&this._select_node(e,!0)}window.helpers.scroll_dom_target_into_view()}}.bind(this);this._handlers["export-markup"]=function(a,b){var c=this.serializer.serialize(window.dom_data);window.open("data:text/plain;charset=utf-8,"+encodeURIComponent(c))}.bind(this);this._handlers["expand-whole-dom"]=function(a,b){window.dom_data.get_snapshot()};this._handlers["dom-resource-link"]=function(a,b){var c=b.get_attr("parent-node-chain","rt-id"),d=window.runtimes.getURI(c),e=b.textContent.slice(1,-1),f=window.helpers.resolveURLS(d,e);window.open(f,"_blank")}.bind(this);this._handlers["nav-up"]=function(a,b){if(g){var c=i&&i.getPreviousWithFilter(g,o.up_down)||!i&&this.getFirstTarget();this.setSelected(c,!0)||(g.scrollTop=0)}return!0}.bind(this);this._handlers["nav-down"]=function(a,b){if(g){var c=i&&i.getNextWithFilter(g,o.up_down)||!i&&this.getFirstTarget();this.setSelected(c,!0)||(g.scrollTop=g.scrollHeight)}return!0}.bind(this);this._handlers["nav-left"]=function(a,b){if(g){var c=i&&i.getPreviousWithFilter(g,o.left_right)||!i&&this.getFirstTarget();this.setSelected(c,!0)}return!0}.bind(this);this._handlers["nav-right"]=function(a,b){if(g){var c=i&&i.getNextWithFilter(g,o.left_right)||!i&&this.getFirstTarget();this.setSelected(c,!0)}return!0}.bind(this);this._handlers["dispatch-click"]=function(a,b){i&&i.dispatchMouseEvent("click",a.ctrlKey,a.altKey,a.shiftKey);return!1}.bind(this);this._handlers["dispatch-dbl-click"]=function(a,b){i&&i.dispatchMouseEvent("dblclick",a.ctrlKey,a.altKey,a.shiftKey);return!1}.bind(this);this._handlers["edit-dom"]=function(a,b){if(!m(b)&&!n(b)&&document.documentElement.contains(b))switch(b.nodeName.toLowerCase()){case"span":/^(?:key|value|text|node)$/.test(b.parentElement.nodeName.toLowerCase())&&b.parentElement.releaseEvent("dblclick");break;case"key":case"value":case"text":this.mode=d;document.documentElement.addClass("modal");f.setSelected(b.parentNode);f.set_editor("dom-attr-text-editor");f.editor.edit(a,b);break;case"node":var c=b;if(/^<\//.test(c.textContent)){c=b.getPreviousWithFilter(b.parentNode.parentNode,f.makeFilterGetStartTag(b));if(!c){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed getting start tag in this.editDOM in action_dom.js");return}}this.mode=e;document.documentElement.addClass("modal");f.setSelected(c.parentNode);f.set_editor("dom-markup-editor");f.editor.edit(a,c)}}.bind(this);this._handlers["submit-edit"]=function(a,b){if(this.mode==d&&this.editor.type==this.editors["dom-attr-text-editor"].type||this.mode==e&&this.editor.type==this.editors["dom-markup-editor"].type){this.setSelected(this.editor.submit()||this.getFirstTarget());this.mode=c;document.documentElement.removeClass("modal");return!1}return!0}.bind(this);this._handlers["insert-attribute-edit"]=function(a,b){if(!m(b)){var b=a.target;b.nodeName.toLowerCase()!="node"&&(b=b.parentNode);a.preventDefault();a.stopPropagation();this.mode=d;document.documentElement.addClass("modal");f.setSelected(b);f.set_editor("dom-attr-text-editor");f.editor.edit(a,b);var c=b.has_attr("parent-node-chain","ui-id"),e=c.querySelector("[ref-id='"+b.get_attr("parent-node-chain","ref-id")+"'] node");this.editor.insert_attribute_edit(e)}}.bind(this);this._handlers["enable-ecmascript-debugger"]=function(a,b){window.services.scope.enable_profile(window.app.profiles.DEFAULT)}.bind(this);this._remove_from_dom=function(a,b,c){var d=a.target.has_attr("parent-node-chain","ref-id");if(d){var e=parseInt(d.get_attr("parent-node-chain","rt-id")),f=parseInt(d.get_attr("parent-node-chain","ref-id")),g=0;if(!settings.dom.get("update-on-dom-node-inserted")){var h=window.dom_data.remove_node.bind(window.dom_data,e,f);g=tag_manager.set_callback(null,h)}services["ecmascript-debugger"].requestEval(g,[e,0,0,c,[["el",f]]])}}.bind(this);this._handlers["remove-attribute"]=function(a,b){this._remove_from_dom(a,b,'el.removeAttribute("'+b.textContent+'")')}.bind(this);this._handlers["edit-next"]=function(a,b){if(this.editor.type=="dom-attr-text-editor"){if(!this.editor.nav_next(a)){this.mode=c;document.documentElement.removeClass("modal")}return!1}this.editor.nav_next(a);return!1}.bind(this);this._handlers["edit-previous"]=function(a,b){if(this.editor.type=="dom-attr-text-editor"){if(!this.editor.nav_previous(a)){this.mode=c;document.documentElement.removeClass("modal")}return!1}return!0}.bind(this);this._handlers["exit-edit"]=function(a,b){this.editor.type=="dom-attr-text-editor"?this.setSelected(this.editor.cancel()||this.getFirstTarget()):this.editor.cancel();this.mode=c;document.documentElement.removeClass("modal");return!1}.bind(this);this._handlers["remove-node"]=function(a,b){var c=a.target.has_attr("parent-node-chain","ref-id");if(c&&!c.hasAttribute("data-pseudo-element")){var d=parseInt(c.get_attr("parent-node-chain","rt-id")),e=parseInt(c.get_attr("parent-node-chain","ref-id")),f=0;if(!settings.dom.get("update-on-dom-node-inserted")){var g=window.dom_data.remove_node.bind(window.dom_data,d,e);f=tag_manager.set_callback(null,g)}services["ecmascript-debugger"].requestEval(f,[d,0,0,"el.parentNode.removeChild(el)",[["el",e]]])}}.bind(this);this.edit_onclick=function(a){if(this.editor&&!this.editor.onclick(a)){this.mode=c;document.documentElement.removeClass("modal")}return!1};this.makeFilterGetStartTag=function(a){var b=a.textContent.replace(/[\/>]/g,""),c=a.parentElement.style.marginLeft;return function(a){return a.nodeName.toLowerCase()=="node"&&a.textContent.indexOf(b)==0&&a.parentElement.style.marginLeft==c}};ActionBroker.get_instance().register_handler(this)};window.event_handlers.click["get-children"]=function(a,b){a.shiftKey?this.broker.dispatch_action("dom","expand-collapse-whole-node",a,b):this.broker.dispatch_action("dom","expand-collapse-node",a,b)};window.event_handlers.click["spotlight-node"]=function(a,b){this.broker.dispatch_action("dom","select-node",a,b)};window.event_handlers.click["breadcrumb-link"]=function(a,b){this.broker.dispatch_action("dom","select-node-in-breadcrumb",a,b)};window.event_handlers.mouseup["breadcrumb-link"]=function(a,b){var c=window.getSelection();c.isCollapsed||c.removeAllRanges()};window.event_handlers.mouseover["breadcrumb-link"]=window.event_handlers.mouseover["spotlight-node"]=function(a,b){this.broker.dispatch_action("dom","spotlight-node",a,b)};window.event_handlers.click["dom-inspection-export"]=function(a,b){this.broker.dispatch_action("dom","export-markup",a,b)};window.event_handlers.click["dom-inspection-snapshot"]=function(a,b){this.broker.dispatch_action("dom","expand-whole-dom",a,b)};window.event_handlers.click["dom-resource-link"]=function(a,b){this.broker.delay_action("click","dom","dom-resource-link",a,b)};window.event_handlers.dblclick["edit-dom"]=function(a,b){this.broker.clear_delayed_actions("click");this.broker.dispatch_action("dom","edit-dom",a,a.target)};window.event_handlers.click["inspect-node-link"]=function(a,b){this.broker.dispatch_action("dom","inspect-node-link",a,b)};window.event_handlers.mouseover["inspect-node-link"]=function(a,b){this.broker.dispatch_action("dom","spotlight-node",a,b)};window.event_handlers.click["df-show-live-source"]=function(a,b){window.debug_helpers.liveSource.open()};window.event_handlers.click["enable-ecmascript-debugger"]=function(a,b){this.broker.dispatch_action("dom","enable-ecmascript-debugger",a,b)};var DOMAttrAndTextEditor=function(a){var b=function(a){return helpers.escape_input(a.replace(/\r\n/g,"\n"))};this._onmonospacefontchange=function(a){this.base_style["font-size"]=0};this.edit=function(a,b){var c=b||a.target,d=null,e={type:"",rt_id:"",obj_id:"",text:"",key:"",value:"",has_value:!1},f="";this.base_style["font-size"]||this.get_base_style(c);this.textarea_container.parentElement&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this.textarea_container.parentElement is not null in submit");d=c.parentNode;while(d&&d.nodeType==1&&!d.hasAttribute("data-model-id"))d=d.parentNode;d&&d.hasAttribute("data-model-id")&&(e.model=window.dominspections[d.getAttribute("data-model-id")]);switch(e.type=c.nodeName.toLowerCase()){case"key":d=c.parentElement.parentElement;e.rt_id=parseInt(d.parentElement.getAttribute("rt-id")||d.parentElement.parentElement.getAttribute("rt-id"));e.obj_id=parseInt(d.getAttribute("ref-id"));e.key=c.textContent;e.has_value=c.nextElementSibling&&c.nextElementSibling.nodeName.toLowerCase()=="value";e.value=e.has_value&&c.nextElementSibling.textContent.replace(/^"|"$/g,"")||"";this.textarea.value=c.textContent;c.textContent="";c.appendChild(this.textarea_container);break;case"value":d=c.parentElement.parentElement;e.rt_id=parseInt(d.parentElement.getAttribute("rt-id")||d.parentElement.parentElement.getAttribute("rt-id"));e.obj_id=parseInt(d.getAttribute("ref-id"));e.key=c.previousElementSibling&&c.previousElementSibling.nodeName.toLowerCase()=="key"&&c.previousElementSibling.textContent||"";e.value=c.textContent.replace(/^"|"$/g,"");this.textarea.value=c.textContent.replace(/^"|"$/g,"");c.textContent='"';c.appendChild(this.textarea_container);c.appendChild(document.createTextNode('"'));break;case"text":d=c.parentElement;e.rt_id=parseInt(d.parentElement.getAttribute("rt-id")||d.parentElement.parentElement.getAttribute("rt-id"));e.obj_id=parseInt(c.getAttribute("ref-id"));c.hasClass("only-whitespace")?e.text=helpers.unescape_whitespace(c.textContent):e.text=c.textContent;this.textarea.value=e.text;c.textContent="";c.appendChild(this.textarea_container)}this.max_width=parseInt(getComputedStyle(d,null).getPropertyValue("width"));this._set_textarea_dimensions();this.context_enter=e;for(f in e)this.context_cur[f]=e[f];a&&this.textarea.focus();this.textarea.selectionStart=0;this.textarea.selectionEnd=this.textarea.value.length};this.oninput=function(a){var c="",d=this.context_cur,e=0;if(this.textarea_container.parentElement){this._set_textarea_dimensions();switch(d.type){case"key":d.oldkey=d.key;d.key=this.textarea.value;e=d.key.indexOf("=");if(e>-1){d.value=d.key.slice(e+1);d.key=d.key.slice(0,e);this.nav_next()}if(d.value!=null){c=(d.oldkey?'node.removeAttribute("'+b(d.oldkey)+'");':"")+'node.setAttribute("'+b(d.key)+'",'+'"'+b(d.value)+'")';services["ecmascript-debugger"].requestEval(0,[d.rt_id,0,0,c,[["node",d.obj_id]]])}break;case"value":c='node.setAttribute("'+b(d.key)+'","'+b(d.value=this.textarea.value)+'")';services["ecmascript-debugger"].requestEval(0,[d.rt_id,0,0,c,[["node",d.obj_id]]]);break;case"text":c='node.nodeValue = "'+b(d.text=this.textarea.value)+'"';services["ecmascript-debugger"].requestEval(0,[d.rt_id,0,0,c,[["node",d.obj_id]]])}}};this.submit=function(a){var b="",c=this.context_cur,d=this.textarea_container.parentElement,e=null;if(d){var f=this._select_node.bind(this,d.has_attr("parent-node-chain","ref-id"));switch(c.type){case"key":if(c.key&&(!a||c.value)){(c.key!=this.context_enter.key||c.value!=this.context_enter.value)&&this.context_enter.model.expand(f,c.obj_id,"node");d.textContent=c.key}else d=this.remove_attribute();break;case"value":if(c.key&&c.value!=null){(c.key!=this.context_enter.key||c.value!=this.context_enter.value)&&this.context_enter.model.expand(f,c.obj_id,"node");d.textContent='"'+c.value+'"'}else d=this.remove_attribute();break;case"text":c.text!=this.context_enter.text&&this.context_enter.model.expand(f,c.obj_id,"node");if(settings.dom.get("dom-tree-style")&&/^\s*$/.test(c.text)){d.addClass("only-whitespace");d.textContent=helpers.escape_whitespace(c.text)}else{d.removeClass("only-whitespace");d.textContent=c.text}}}return d};this.cancel=function(){var c="",d=this.context_enter,e=null;if(this.textarea_container.parentElement&&!this.context_cur.is_new){e=this.textarea_container.parentElement;switch(d.type){case"key":if(d.key){c='node.setAttribute("'+b(d.key)+'","'+b(d.value)+'")';var f=[d.rt_id,0,0,c,[["node",d.obj_id]]];services["ecmascript-debugger"].requestEval(0,f);e.textContent=d.key;break}var g=b(this.context_cur.key);c='node.removeAttribute("'+g+'")';var f=[d.rt_id,0,0,c,[["node",d.obj_id]]];services["ecmascript-debugger"].requestEval(0,f);case"value":if(d.key&&d.value!=null){c='node.setAttribute("'+b(d.key)+'","'+b(d.value)+'")';services["ecmascript-debugger"].requestEval(0,[d.rt_id,0,0,c,[["node",d.obj_id]]]);e.textContent='"'+d.value+'"';break}e=e.parentNode;this.remove_attribute();e=(e.lastElementChild||e).getNextWithFilter(e.parentElement.parentElement,a.left_right)||e.lastElementChild||e.getPreviousWithFilter(e.parentElement.parentElement,a.left_right);break;case"text":c='node.nodeValue = "'+b(d.text)+'"';services["ecmascript-debugger"].requestEval(0,[d.rt_id,0,0,c,[["node",d.obj_id]]]);settings.dom.get("dom-tree-style")&&/^\s*$/.test(d.text)?e.textContent=helpers.escape_whitespace(d.text):e.textContent=d.text}}return e};this.nav_previous=function(b,c){var d=this.context_cur,e=this.textarea_container.parentElement,f=e.parentElement,g=e.previousElementSibling,h=g&&g.previousElementSibling,i=this.submit(!0),j=f.parentElement.parentElement;switch(d.type){case"key":case"value":g&&(i||g.parentElement)||(g=h)||(g=f.getPreviousWithFilter(j,a.attr_text));break;case"text":g=e.getPreviousWithFilter(j,a.attr_text)}if(g||(g=i&&e)||(g=f)){if(g.nodeName.toLowerCase()=="node"){g.firstChild.splitText(g.firstChild.nodeValue.replace(/\/?>$/,"").length);g=this.create_new_edit(g.firstChild)}else g.parentElement!=f&&g.nodeName.toLowerCase()=="value"&&g==g.parentElement.lastElementChild&&(g=this.create_new_edit(g));g&&this.edit({},g)}return g};this.nav_next=function(b,c){var d=this.context_cur,e=this.textarea_container.parentElement,f=e.parentElement,g=e.nextElementSibling,h=g&&g.nextElementSibling,i=this.submit(),j=f.parentElement.parentElement;switch(d.type){case"key":case"value":i&&(g||(g=this.create_new_edit(i)))||g&&g.parentElement||(g=h)||(g=(f.lastElementChild||f).getNextWithFilter(j,a.attr_text));break;case"text":g=e.getNextWithFilter(j,a.attr_text)}if(g||(g=i&&e)||(g=f)){if(g.nodeName.toLowerCase()=="node"){g.firstChild.splitText(g.firstChild.nodeValue.replace(/\/?>$/,"").length);g=this.create_new_edit(g.firstChild)}this.edit({},g)}return g};this.create_new_edit=function(a){var b=a.nodeName.toLowerCase(),c=a.parentNode,d=c.insertBefore(document.createTextNode(b=="key"&&"="||" "),a.nextSibling);return c.insertBefore(document.createElement(b=="key"&&"value"||"key"),d.nextSibling)};this.insert_attribute_edit=function(a){if(a){if(a.lastChild.nodeType==3){a.lastChild.splitText(a.lastChild.nodeValue.replace(/\/?>$/,"").length);a=this.create_new_edit(a.lastChild.previousSibling)}else a=this.create_new_edit(a.lastChild);this.edit({},a)}};this.remove_attribute=function(){var a='node.removeAttribute("'+this.context_enter.key+'")',b=this.context_cur,c=this.textarea_container.parentElement,d=c.parentElement,e=c.nodeName.toLowerCase()=="key"&&"next"||"previous",f=c.nodeName.toLowerCase()=="key"&&"value"||"key";if(this.context_enter.key){services["ecmascript-debugger"].requestEval(0,[b.rt_id,0,0,a,[["node",b.obj_id]]]);b.key=this.context_enter.key;delete b.value;this.context_enter.model.expand(null,b.obj_id,"node")}c.textContent="";cur=c[e+"ElementSibling"];cur&&cur.nodeName.toLowerCase()==f&&d.removeChild(cur);cur=c[e+"Sibling"];cur&&/=/.test(cur.nodeValue)&&d.removeChild(cur);cur=c.previousSibling;cur&&/ +/.test(cur.nodeValue)&&(/^ +$/.test(cur.nodeValue)?d.removeChild(cur):cur.nodeValue=cur.nodeValue.replace(/ +$/,""));d.removeChild(c);d.normalize();return null};this.onclick=function(a){a.preventDefault();a.stopPropagation();if(!this.textarea_container.contains(a.target)){this.submit(!0);return!1}return!0};this._select_node=function(a){ActionBroker.get_instance().dispatch_action("dom","select-node",null,a)};this._init=function(){this.base_init(this);messages.addListener("monospace-font-changed",this._onmonospacefontchange.bind(this));this.type="dom-attr-text-editor";this.textarea_container_name="textarea-container-inline";this.context_enter={type:"",rt_id:"",obj_id:"",text:"",key:"",value:"",has_value:!1,is_new:!1};this.context_cur={type:"",rt_id:"",obj_id:"",text:"",key:"",value:"",has_value:!1,is_new:!1}};this._init()};DOMAttrAndTextEditor.prototype=BaseEditor;var DOMMarkupEditor=function(){this.base_init(this);this.type="dom-markup-editor";this.domnodeserializer=new cls.DOMSerializer;this.context_enter={rt_id:"",obj_id:"",parent_obj_id:"",outerHTML:"",host_target:""};this.context_cur={rt_id:"",obj_id:"",parent_obj_id:"",outerHTML:"",host_target:""};const a=0,b=3,c=0,d=0;this.edit=function(a,b){var c=b||a.target,d=parseInt(c.get_attr("parent-node-chain","rt-id")),e=parseInt(c.parentElement.getAttribute("ref-id")),f=c.get_attr("parent-node-chain","data-model-id"),g="",h="",i="",j=c,k=null,l=null,m=null;while(j&&!/container/i.test(j.nodeName)&&(j=j.parentElement));if(j&&f){k=window.dominspections[f];this.context_enter={rt_id:d,obj_id:e,parent_obj_id:k.getParentElement(e),outerHTML:"",host_target:"",model:k};this.context_cur={};for(i in this.context_enter)this.context_cur[i]=this.context_enter[i];g=this["return new Host_updater(target)"];h=tagManager.set_callback(this,this.register_host_updater,[d]);services["ecmascript-debugger"].requestEval(h,[d,0,0,g,[["target",e]]]);l=new cls.InspectableDOMNode(d,e);m=this.handle_get_outer_html.bind(this,l,d,e,c,a);l.expand(m,e,"subtree")}};this.oninput=function(a){var b="",c=this.context_cur;window.hostspotlighter.clearSpotlight();if(this.textarea_container.parentElement&&c.host_target){this.set_textarea_dimensions();c.outerHTML=this.textarea.value;var b='host_target.outerHTML = "'+e(c.outerHTML)+'";';services["ecmascript-debugger"].requestEval(0,[c.rt_id,0,0,b,[["host_target",c.host_target]]])}};this.submit=function(){var a=this.context_cur,b=this.textarea_container.parentElement;if(b){var c=tagManager.set_callback(this,this.on_exit_edit,[a,b]),d="host_target.exit_edit()";services["ecmascript-debugger"].requestEval(c,[a.rt_id,0,0,d,[["host_target",a.host_target]]])}return b};this.cancel=function(){var a="",b=this.context_enter,c=this.textarea_container.parentElement;if(c)if(b.outerHTML!=this.context_cur.outerHTML){var d=tagManager.set_callback(this,this.on_exit_edit,[b,c]),a="host_target.cancel_edit()";services["ecmascript-debugger"].requestEval(d,[b.rt_id,0,0,a,[["host_target",b.host_target]]])}else{c.textContent="";this.context_cur=this.context_enter=null;views.dom.update()}return c};this.nav_next=function(){var a=this.textarea.value,b=this.textarea.selectionStart,c=this.textarea.selectionEnd,d="  ";this.textarea.value=a.slice(0,b)+d+a.slice(c);this.textarea.selectionStart=b+d.length;this.textarea.selectionEnd=b+d.length};this.set_textarea_dimensions=function(){this.textarea.style.height=0;this.textarea.style.height=this.textarea.scrollHeight+"px"};this.__is_active=function(){return this.context_enter&&this.context_enter.host_target&&!0||!1};this.onclick=function(a){if(!this.textarea_container.contains(a.target)){this.submit(!0);return!1}return!0};this.on_exit_edit=function(b,c,d,e){if(c[a]=="completed"){var f=new Element.ScrollPosition(e),g=function(){window.views.dom.update();f.reset(document.getElementById("target-element"));e.textContent=""};this.context_enter.model.collapse(d.parent_obj_id);this.context_enter.model.expand(g,d.parent_obj_id,"children");this.context_cur=this.context_enter=null}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"exit markup edit failed in DOMMarkupEditor")};var e=function(a){return helpers.escape_input(a.replace(/\r\n/g,"\n"))},f=function(a){var b=document.createRange(),c=0,d="",e=null,f=function(a){while(a){if(a.nodeType==Node.ELEMENT_NODE)if(a.nodeName.toLowerCase()=="script"){var b=a.getAttribute("type");a.setAttribute("type",(b&&b!="edited"?b+"/":"")+"edited")}else f(a.firstElementChild);a=a.nextElementSibling}},g=function(a){var g=b.createContextualFragment(d);if(g.childNodes.length){e?b.deleteContents():e=b.extractContents();f(g.childNodes[0]);var h=g.childNodes[0],i=g.childNodes[g.childNodes.length-1];b.insertNode(g);b.setStartBefore(h);b.setEndAfter(i)}c=0};b.selectNode(a);this.__defineSetter__("outerHTML",function(a){d=a;c||(c=setTimeout(g,100))});this.cancel_edit=function(){c&&(c=clearTimeout(c));if(e){b.deleteContents();b.insertNode(e)}this.exit_edit()};this.exit_edit=function(){if(c){c=clearTimeout(c);g()}b=c=d=e=g=null}};this["return new Host_updater(target)"]="return new ("+f.toString()+")(target)";this.register_host_updater=function(d,e,f){var d=e[a],g=e[b][c];d=="completed"&&g?this.context_enter.host_target=this.context_cur.host_target=g:opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed register_host_updater in DOMMarkupEditor")};this.handle_get_outer_html=function(a,b,c,d,e){var f=this.domnodeserializer.serialize(a),g=d.parentNode,h=g.parentElement,i=parseInt(g.style.marginLeft),j=null;this.context_enter.outerHTML=this.context_cur.outerHTML=f;this.base_style["font-size"]||this.get_base_style(d);this.textarea_container.parentElement&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"this.textarea_container.parentElement is not null in submit");this.textarea.value=f;var k=new Element.ScrollPosition(g);g.innerHTML="";g.appendChild(this.textarea_container);while((j=g.nextElementSibling)&&parseInt(j.style.marginLeft)>i)h.removeChild(j);j&&parseInt(j.style.marginLeft)==i&&/<\//.test(j.textContent)&&h.removeChild(j);this.set_textarea_dimensions();e&&this.textarea.focus();k.reset(null,this.textarea);this.textarea.selectionEnd=this.textarea.selectionStart=0;this.set_textarea_dimensions()};this._onmonospacefontchange=function(a){this.base_style["font-size"]=0};messages.addListener("monospace-font-changed",this._onmonospacefontchange.bind(this))};DOMMarkupEditor.prototype=BaseEditor;window.cls||(window.cls={});cls.ThreadsView=function(a,b,c){var d=this,e=null,f=0;const g=" ",h="\n";this.createView=function(a){var b=runtimes.getThreads();if(!e||!a.firstChild){a.innerHTML="";e=a.render(["div",["pre"],"class","padding"]).firstElementChild}e.textContent+=b.slice(f).join("\n")+"\n";f=b.length;a.scrollTop=a.scrollHeight};this.ondestroy=function(){e=null;f=0};this.resetCursor=function(){f=0};this.exportLog=function(){};this.init(a,b,c)};cls.ThreadsView.create_ui_widgets=function(){new Settings("threads",{"log-threads":!1},{"log-threads":ui_strings.S_BUTTON_LABEL_LOG_THREADS},{checkboxes:["log-threads"]},null,"script");new ToolbarConfig("threads",[{handler:"threads-clear-log",title:ui_strings.S_BUTTON_LABEL_CLEAR_LOG},{handler:"threads-export-log",title:ui_strings.S_BUTTON_LABEL_EXPORT_LOG}]);eventHandlers.click["threads-clear-log"]=function(a,b,c){runtimes.clearThreadLog();views.threads.resetCursor();c&&c.firstChild&&(c.firstChild.innerHTML="")};eventHandlers.click["threads-export-log"]=function(a,b,c){views.threads.exportLog()}};window.eventHandlers.click["show-frame"]=function(a){var b=a.target.has_attr("parent-node-chain","ref-id"),c=parseInt(b.getAttribute("ref-id")),d=stop_at.getFrame(c);if(d){topCell.showView(views.inspection.id);messages.post("active-inspection-type",{inspection_type:"frame"});messages.post("frame-selected",{frame_index:c});if(a.type=="click"){helpers.setSelected(b);if(views.js_source.isvisible())if(d.script_id){views.js_source.showLine(d.script_id,d.line);views.js_source.showLinePointer(d.line,d.id==0)}else views.js_source.clearView()}}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"missing frame in 'show-frame' handler")};window.eventHandlers.click["goto-script-line"]=function(a,b){var c=Number(a.target.get_attr("parent-node-chain","data-script-id")),d=Number(a.target.get_attr("parent-node-chain","data-script-line"));window.views.js_source.show_and_flash_line(c,d)};window.eventHandlers.click["expand-value"]=function(a,b){var c=b.parentNode.getElementsByTagName("value")[0],d=c.textContent;c.textContent=c.getAttribute("data-value");c.setAttribute("data-value",d);b.style.backgroundPosition?b.style.removeProperty("background-position"):b.style.backgroundPosition="0px -11px"};window.eventHandlers.click["examine-object-2"]=function(a,b){var c=b.parentNode,d=c.parentNode,e=parseInt(c.getAttribute("obj-id")),f=parseInt(c.getAttribute("depth")),g=parseInt(d.getAttribute("rt-id")),h=d.getAttribute("data-id"),i=null,j=c.getElementsByTagName("examine-objects")[0];if(window[h])if(j){if(!b.disabled){window[h].clearData(g,e,f,c.getElementsByTagName("key")[0].textContent);c.removeChild(j);b.style.removeProperty("background-position")}}else if(i=window[h].getData(g,e,f,arguments))if(i.length){j=d.cloneNode(!1);j.innerHTML=window[h].prettyPrint(i,f,settings.inspection.get("hide-default-properties"),window[h].filter_type);c.appendChild(j);b.style.backgroundPosition="0px -11px"}else b.disabled=!0};window.eventHandlers.click["continue"]=function(a){this.broker.dispatch_action("global",a.target.id)};window.eventHandlers.click["set-stop-at"]=function(a){stop_at.setUserStopAt(a.target.value,a.target.checked)};window.eventHandlers.click["set-break-point"]=function(a){var b=cls.Breakpoints.get_instance(),c=a.target,d=c.get_ancestor("li");if(d){var e=d.querySelector("input"),f=e&&Number(e.value);if(!f){var g=d.querySelector(".line-number");f=g&&Number(g.textContent)}var h=window.views.js_source.getCurrentScriptId()||Number(c.get_ancestor_attr("data-script-id"));if(h&&f)if(b.script_has_breakpoint_on_line(h,f)){var i=b.remove_breakpoint(h,f);b.delete_breakpoint(i)}else b.add_breakpoint(h,f)}};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].Hostspotlighter=function(){this.spotlight=function(a,b,c){};this.soft_spotlight=function(a){};this.clearSpotlight=function(){};this.invertColors=function(){};this.colorSelectsTemplate=function(){};this.colorAdvancedSelectsTemplate=function(){};this.metricsMouseoutHandler=function(a){};this.metricsMouseoverHandler=function(a){};const a=0,b=1,c=2,d=["background-color: ","border-color: ","border-color: "],e={"background-color":"backgroundColor","border-color":"borderColor",color:"color"},f=2,g=0,h=1,i=2,j=3,k=4,l=5,m=6;var n=this,o=[],p={},q={},r=new Color,s="",t=new Timeouts,u=[],v=0,w="dom",x=null,y=new Timeouts,z=["margin","border","padding","dimension"],A=null,B={},C=function(a){if(a.profile==window.app.profiles.DEFAULT){s="";A=null;u=[]}},D=function(a,b,c){return[a,b&&1||0,q[c]]},E=function(a){return D(a,0,"locked")},F=function(a){s="";a||(a=dom_data.getRootElement());a?services["ecmascript-debugger"].requestSpotlightObjects(0,[settings.dom.get("lock-selected-elements")&&u.map(E)||[[a,0,[[0,0]]]]]):G(F)},G=function(a){var b=window.runtimes.get_execution_context(),c=b.rt_id,d=b.thread_id,e=b.frame_index,f="return document.documentElement",g=[c,d,e,f],h=window.tag_manager.set_callback(null,H,[a]);window.services["ecmascript-debugger"].requestEval(h,g)},H=function(a,b,c){var d=0,e=1,f=2,g=3,h=0;!a&&b[d]=="completed"&&b[g]&&b[g][h]&&c(b[g][h])},I={"default":[[52,0,0],[104,0,0],[208,0,128],[156,0,0]],hover:[[24,0,0],[52,0,0],[104,0,64],[76,0,0]],locked:[[52,0,0],[52,0,0],[52,128,0],[0,0,0]],dimension:[[200,0,0],[0,0,0],[0,0,128],[0,0,0]],padding:[[0,0,0],[200,0,0],[0,0,128],[0,0,0]],border:[[0,0,0],[0,0,0],[200,0,128],[0,0,0]],margin:[[0,0,0],[0,0,0],[0,0,128],[200,0,0]]},J=function(a,b){var c=[],d=(new Color).setHex(a).getRGB();for(var e=0,f,g,h;e<4;e++){f=[];c
.push(f);g=I[b][e];for(h=0;h<3;h++)f.push(g[h]?d.concat([g[h]]):0)}return c},K=function(a){var a=null,b="",c=null,d=null,e=0,f=0,g=0;for(e=0;e<o.length;e++){a=o[e];for(f=0;f<4;f++)if(c=a[f])for(g=0;g<3;g++)c[g]&&(c[g]=r.setRGB(c[g]).invert().getRGB().concat(c[g][3]))}},L=function(){var a=window.settings["host-spotlight"].get("spotlight-color"),b=(new Color).setHex(a),c=(360+b.getHue()-120)%360;b=b.setHue(c).getHex();o[g]=J(a,"default");o[h]=J(a,"hover");o[i]=J(b,"locked");o[j]=J(a,"dimension");o[k]=J(a,"padding");o[l]=J(a,"border");o[m]=J(a,"margin");P();M()},M=function(){var a=[o[h][0]].concat(o[h]);q["default"]=N(o[g]);q.hover=N(o[h]);q.locked=N(o[i]);q.dimension=N(o[j]);q.padding=N(o[k]);q.border=N(o[l]);q.margin=N(o[m]);O(o[j][0],p.dimension={});O(o[k][1],p.padding={});O(o[l][2],p.border={});O(o[m][3],p.margin={})},N=function(a){var b=[],c=null,d=null,e=0,f=0,g=0,h=0;for(;e<4;e++)if(c=a[e]){h=0;d=[e];for(f=3;f--;f)if(h+=g=T(c[f]))d[f+1]=g;h&&(b[b.length]=d)}return b},O=function(a,b){var c=["background-color"],d=null,e=0;for(e=0;e<c.length;e++)if(d=a[e])b[c[e]]=U(d);b.color=r.getGrayValue()>130&&"#000"||"#fff";return b},P=function(){var a=null,b=0,c=0,d=0;for(b=0;b<3;b++){a=o[b];for(c=0;c<4;c++)a[c]||(a[c]=[0,0,0])}},Q=function(a){if(a.activeTab[0]!=v){for(var b in B)if(B[b]&&a.activeTab.indexOf(b)==-1){F(B[b].root_id);B[b]=null}v=a.activeTab[0];u=[]}},R=function(a){B[a.rt_id]||(B[a.rt_id]={root_id:dom_data.getRootElement()});a.rt_id&&a.obj_id&&settings.dom.get("lock-selected-elements")&&window.host_tabs.is_runtime_of_active_tab(a.rt_id)&&(u[u.length]=a.obj_id)},S=function(a){if(a.id==w)switch(a.key){case"lock-selected-elements":if(!settings[w].get(a.key)){u=[];A=null;n.clearSpotlight()}}},T=function(a){return a&&a.length==4&&(a[0]<<23)*2+(a[1]<<16)+(a[2]<<8)+(a[3]<<0)||0},U=function(a){var b=4,c=0;if(a&&a.length==4){r.setRGB(a.slice(0,3));var d=parseFloat(r.getLuminosity());r.setLuminosity(d+(100-d)*(1-a[3]/255));return"#"+r.getHex()}return""};this._oneditcolor=function(a){this._edit_context.ele_value.style.backgroundColor=a.hhex;window.settings["host-spotlight"].set("spotlight-color",a.hex);L()}.bind(this);this._set_style_metrics_target=function(a,b){var c=z.indexOf(b)+1,d=a.style,f=p[b];if(c){x=a;for(var g in f)d[e[g]]=f[g];if(b!="dimension"){d=a.getElementsByClassName(z[c])[0].style;f={"background-color":"#fff",color:"#000"};for(var g in f)d[e[g]]=f[g]}}};this._clear_style_metrics_target=function(){if(x){x.style.cssText="";var a=z.indexOf(x.className)+1;a&&a<4&&(x.getElementsByClassName(z[a])[0].style.cssText="")}x=null};eventHandlers.click["reset-default-spotlight-colors"]=function(a,b){window.settings["host-spotlight"].set("spotlight-color",window.ini.spotlight_color);a.target.previousElementSibling&&(a.target.previousElementSibling.style.backgroundColor="#"+window.ini.spotlight_color);L()};eventHandlers.click["select-spotlight-color"]=function(a,b){var c=b,d=(new Color).parseCSSColor(c.style.backgroundColor);this._edit_context={initial_color:d,current_color:d,ele_value:c,vertical_anchor_selector:".spotlight-color-select",horizontal_anchor_selector:".spotlight-color-select",callback:this._oneditcolor,edit_class:"edited-color",alpha_disabled:!0,palette_disabled:!0,z_index:301};window.views["color-selector"].show_color_picker(c,this._edit_context)}.bind(this);eventHandlers.mouseover["spotlight-box"]=function(a,b){var c=a.target,d="",e=null;this._clear_style_metrics_target();while(c&&c!=b&&!(d=c.className))c=c.parentNode;this._set_style_metrics_target(c,d);(e=window.dominspections&&window.dominspections.active)&&window.settings.dom.get("highlight-on-hover")&&this.spotlight(e.target,0,d||"default")}.bind(this);this.spotlight=function(a,b,c){c||(c="default");t.clear();var d=Array.prototype.join;if(d.call(arguments)!=s){s=d.call(arguments);var e=settings.dom.get("lock-selected-elements")&&u.map(E)||null,f=[D(a,b,c)];A=[D(a,!1,c)];if(e){f.push.apply(f,e);A.push.apply(A,e)}services["ecmascript-debugger"].requestSpotlightObjects(0,[f])}};this.soft_spotlight=function(a){var b=[(A||[]).concat([D(a,0,"hover")])];services["ecmascript-debugger"].requestSpotlightObjects(0,b);s=""};this.clearSpotlight=function(){t.set(F,50)};this.invertColors=function(){K();M();s=[];var a=window.dominspections&&window.dominspections.active;a&&window.views.dom.isvisible()&&this.spotlight(a.target,0)};this.colorSelectsTemplate=function(){var a=ActionBroker.get_instance().get_shortcut_with_handler_and_action("global","invert-spotlight-colors"),b=window.settings["host-spotlight"].get("spotlight-color");return["setting-composite",["div",["span","style","background-color: #"+b,"class","spotlight-color-select","handler","select-spotlight-color"],["span",ui_strings.S_BUTTON_SPOTLIGHT_RESET_DEFAULT_COLORS,"handler","reset-default-spotlight-colors","class","reset-defaults ui-button","tabindex","1"],["p",ui_strings.S_INFO_INVERT_ELEMENT_HIGHLIGHT.replace("%s",a)],"class","host-spotlight"]]};messages.addListener("element-selected",R);messages.addListener("active-tab",Q);messages.addListener("setting-changed",S);messages.addListener("profile-disabled",C);window.app.addListener("services-created",function(){L()});this.bind=function(a){a.handleSpotlightObjects=function(a,b){}}};window.cls||(window.cls={});cls.EventBreakpoints=function(){if(cls.EventBreakpoints.instance)return cls.EventBreakpoints.instance;cls.EventBreakpoints.instance=this;this.get_events=function(){};this.handle_breakpoint=function(a,b,c){};this.remove_all_breakpoints=function(){};this.has_breakpoints=function(){};this.expand_all_sections=function(){};this.set_unfold=function(a,b){};const a=0,b=1;this._is_synced=!1;this._breakpoints={};this._bps=cls.Breakpoints.get_instance();this._events=[{title:"DOM Level 3",spec:"http://www.w3.org/TR/2010/WD-DOM-Level-3-Events-20100907/#event-types-list",events:[["abort",0],["blur",0],["click",0],["compositionstart",0],["compositionupdate",0],["compositionend",0],["dblclick",0],["DOMActivate",0],["DOMAttributeNameChanged",0],["DOMAttrModified",0],["DOMCharacterDataModified",0],["DOMElementNameChanged",0],["DOMFocusIn",0],["DOMFocusOut",0],["DOMNodeInserted",0],["DOMNodeInsertedIntoDocument",0],["DOMNodeRemoved",0],["DOMNodeRemovedFromDocument",0],["DOMSubtreeModified",0],["error",0],["focus",0],["focusin",0],["focusout",0],["keydown",0],["keypress",0],["keyup",0],["load",0],["mousedown",0],["mouseenter",0],["mouseleave",0],["mousemove",0],["mouseout",0],["mouseover",0],["mouseup",0],["resize",0],["scroll",0],["select",0],["textInput",0],["unload",0],["wheel",0]],is_unfolded:!1},{title:"HTML5",spec:"http://dev.w3.org/html5/spec/index.html#events-0",events:[["DOMContentLoaded",0],["afterprint",0],["beforeprint",0],["beforeunload",0],["change",0],["contextmenu",0],["formchange",0],["forminput",0],["hashchange",0],["input",0],["invalid",0],["message",0],["offline",0],["online",0],["pagehide",0],["pageshow",0],["popstate",0],["readystatechange",0],["redo",0],["reset",0],["show",0],["submit",0],["undo",0]],is_unfolded:!1},{title:"HTML5 media elements",spec:"http://dev.w3.org/html5/spec/video.html#mediaevents",events:[["loadstart",0],["progress",0],["suspend",0],["emptied",0],["stalled",0],["play",0],["pause",0],["loadedmetadata",0],["loadeddata",0],["waiting",0],["playing",0],["canplay",0],["canplaythrough",0],["seeking",0],["seeked",0],["timeupdate",0],["ended",0],["ratechange",0],["durationchange",0],["volumechange",0]],is_unfolded:!1},{title:"HTML5 application cache events",spec:"http://dev.w3.org/html5/spec/offline.html#appcacheevents",events:[["checking",0],["noupdate",0],["downloading",0],["cached",0],["updateready",0],["obsolete",0]],is_unfolded:!1},{title:"HTML5 drag-and-drop events",spec:"http://dev.w3.org/html5/spec/dnd.html#dndevents",events:[["dragstart",0],["drag",0],["dragenter",0],["dragleave",0],["dragover",0],["drop",0],["dragend",0]],is_unfolded:!1},{title:"Touch events",spec:"https://dvcs.w3.org/hg/webevents/raw-file/tip/touchevents.html",events:[["touchstart",0],["touchend",0],["touchmove",0],["touchenter",0],["touchleave",0],["touchcancel",0]],is_unfolded:!1},{title:"Opera User JavaScript",spec:"http://www.opera.com/docs/userjs/specs/#evlistener",events:[["BeforeExternalScript",0],["BeforeScript",0],["AfterScript",0],["BeforeEvent",0],["BeforeEvent.type",0],["AfterEvent",0],["AfterEvent.type",0],["BeforeEventListener",0],["BeforeEventListener.type",0],["AfterEventListener",0],["AfterEventListener.type",0],["BeforeJavascriptURL",0],["AfterJavascriptURL",0],["pluginInitialized",0]],is_unfolded:!1},{title:"Custom Events",spec:"http://www.w3.org/TR/2010/WD-DOM-Level-3-Events-20100907/#interface-CustomEvent",events:[],is_unfolded:!1,editable:!0}];this._set_indexes=function(a,b){var c=0,d=0,e=null,f=null,g=null;for(;e=this._events[c];c++)for(d=0,f=e.events;g=f[d];d++)g.push(d)};this._store_unfolded_flags=function(){window.settings["event-breakpoints"].set("expanded-sections",this._events.map(this._get_unfolded_flags))};this._get_unfolded_flags=function(a){return a.is_unfolded?1:0};this.get_events=function(){if(!this._is_synced){var a=window.settings["event-breakpoints"].get("expanded-sections");for(var b=0,c=null;c=this._events[b];b++)c.is_unfolded=a[b];var d=window.settings["event-breakpoints"].get("edited-events");for(b in d){c=this._events[b];c.events=d[b].map(function(a,b){return[a,0,b]})}this._is_synced=!0}return this._events};this.handle_breakpoint=function(a,b,c){var d=this._events[a]&&this._events[a].events[b];d&&this._handle_breakpoint_with_event(d,c)};this.handle_breakpoint_with_name=function(b,c){var d=0,e=0,f=null,g=null,h=null;for(;f=this._events[d];d++)for(e=0,g=f.events;h=g[e];e++)if(h[a]==b){this._handle_breakpoint_with_event(h,c);d=this._events.length;window.views["event-breakpoints"].update();break}};this._handle_breakpoint_with_event=function(c,d){if(d){c[b]=this._bps.add_event_breakpoint(c[a]);this._breakpoints[c[b]]=c}else{this._bps.remove_event_breakpoint(c[b],c[a]);this._breakpoints[c[b]]=0;c[b]=0}this.has_breakpoints()?window.toolbars["event-breakpoints"].enableButtons("ev-brp-remove-all-breakpoints"):window.toolbars["event-breakpoints"].disableButtons("ev-brp-remove-all-breakpoints")};this.remove_all_breakpoints=function(){var a=0,c=0,d=null,e=null,f=null;for(;d=this._events[a];a++)for(c=0,e=d.events;f=e[c];c++)f[b]&&this.handle_breakpoint(a,c,!1)};this.has_breakpoints=function(){var a=0,c=0,d=null,e=null,f=null;for(;d=this._events[a];a++)for(c=0,e=d.events;f=e[c];c++)if(f[b])return!0;return!1};this.expand_all_sections=function(){for(var a=0,b=null;b=this._events[a];a++)b.is_unfolded=!0};this.set_unfold=function(a,b){this._events[a].is_unfolded=b;this._store_unfolded_flags()};this.update_section=function(c,d){var e=this._events[c],f={},g=0,h=null,i="";for(;h=e.events[g];g++)f[h[a]]=h[b];e.events=d.map(function(a,b){var c=[a,f[a]||0,b];f[a]=0;return c});for(i in f)if(f[i]){this._bps.remove_event_breakpoint(f[i],i);this._breakpoints[f[i]]=0}var j=window.settings["event-breakpoints"].get("edited-events");j[c]=e.events.map(function(b){return b[a]});window.settings["event-breakpoints"].set("edited-events",j)};this._set_indexes()};cls.EventBreakpoints.get_instance=function(){return this.instance||new cls.EventBreakpoints};window.cls||(window.cls={});cls.EventBreakpointsView=function(a,b,c){this.window_top=40;this.window_left=40;this.window_width=300;this.window_height=300;this.window_statusbar=!1;this._container=null;this.required_services=["ecmascript-debugger"];this.createView=function(a){this._container=a;a.clearAndRender(window.templates.ev_brp_config(window.event_breakpoints.get_events()))};this.show_filtered_view=function(a){if(this._container&&this.isvisible()){a=a.toLowerCase();const b=0,c=1;var d=window.event_breakpoints.get_events(),e=null,f=function(c){return c[b].toLowerCase().indexOf(a)>-1};a&&(d=d.map(function(a,b){e=a.events.filter(f);return{title:a.title,spec:a.spec,events:e,is_unfolded:Boolean(e.length),is_search:!0}}));this._container.clearAndRender(window.templates.ev_brp_config(d))}};this.ondestroy=function(){this._container=null};this.init(a,b,c)};cls.EventBreakpointsView.create_ui_widgets=function(){new ToolbarConfig("event-breakpoints",[{handler:"ev-brp-expand-all-sections",title:ui_strings.S_BUTTON_EXPAND_ALL_SECTIONS},{handler:"ev-brp-remove-all-breakpoints",title:ui_strings.S_BUTTON_REMOVE_ALL_BREAKPOINTS,disabled:!0}],[{handler:"ev-brp-filter",title:ui_strings.S_BUTTON_SEARCH_EVENT,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]);new Settings("event-breakpoints",{"expanded-sections":[],"edited-events":{}});window.eventHandlers.click["ev-brp-expand-all-sections"]=function(a,b){window.event_breakpoints.expand_all_sections();window.views["event-breakpoints"].update()};window.eventHandlers.click["ev-brp-expand-section"]=function(a,b){var c=b.parentNode,d=parseInt(c.getAttribute("index")),e=c.getElementsByTagName("ul")[0],f=b.getElementsByTagName("input")[0];if(e){c.removeChild(e);f.removeClass("unfolded")}else{var g=window.event_breakpoints.get_events()[d];if(g){c.render(window.templates.ev_brp_event_list(g));f.addClass("unfolded")}}window.event_breakpoints.set_unfold(d,!e)};window.eventHandlers.click["event-breakpoint"]=function(a,b){var c=parseInt(b.getAttribute("index")),d=parseInt(b.parentNode.get_attr("parent-node-chain","index")),e=b.checked;window.event_breakpoints.handle_breakpoint(d,c,e)};window.eventHandlers.click["ev-brp-remove-all-breakpoints"]=function(a,b){window.event_breakpoints.remove_all_breakpoints();window.views["event-breakpoints"].update()};window.eventHandlers.input["ev-brp-filter"]=function(a,b){window.views["event-breakpoints"].show_filtered_view(b.value)};var a=function(a,b,c){var d=b.parentNode.has_attr("parent-node-chain","index");if(d){var e=window.event_breakpoints.get_events()[parseInt(d.getAttribute("index"))];d.removeChild(d.getElementsByTagName("ul")[0]);d.render(window.templates[c](e))}};window.eventHandlers.click["ev-brp-edit-custom-events"]=function(b,c){a(b,c,"ev_brp_edit_section")};window.eventHandlers.click["ev-brp-edit-custom-events-cancel"]=function(b,c){a(b,c,"ev_brp_event_list")};window.eventHandlers.click["ev-brp-edit-custom-events-save"]=function(b,c){var d=c.parentNode.has_attr("parent-node-chain","index");if(d){var e=parseInt(d.getAttribute("index")),f=d.getElementsByTagName("textarea")[0].value.split(/,?\s+/);window.event_breakpoints.update_section(e,f);a(b,c,"ev_brp_event_list")}}};(function(){const a=0,b=1,c=2;this.ev_brp_config=function(a){return["ul",a.map(this.ev_brp_section,this)]};this.ev_brp_section=function(a,b){return["li",["header",["input","type","button","class",a.is_unfolded?"unfolded":""],a.title,"handler","ev-brp-expand-section"],a.is_unfolded?this.ev_brp_event_list(a):[],"index",b.toString(),"class",a.is_search&&!a.is_unfolded?"search-no-match":""]};this.ev_brp_event_list=function(a){return["ul",a.events.map(this.ev_brp_event,this),a.editable?this.ev_brp_edit():[],"class","event-list"]};this.ev_brp_event=function(d){return["li",["label",["input","type","checkbox","index",d[c].toString(),"handler","event-breakpoint"].concat(d[b]?["checked","checked"]:[]),d[a],"data-spec","dom#"+d[a]]]};this.ev_brp_edit=function(){return["li",["span",ui_strings.S_BUTTON_EDIT_CUSTOM_EVENT,"handler","ev-brp-edit-custom-events","class","ui-button","tabindex","1"],"class","controls"]};this.ev_brp_edit_section=function(b){var c=b.events.map(function(b){return b[a]},this);return["ul",["li",["_auto_height_textarea",c.join("\r\n"),"data-placeholder","<list of custom events>","title","Comma, space or new line separated list of custom events"]],["li",["span",ui_strings.S_BUTTON_TEXT_APPLY,"handler","ev-brp-edit-custom-events-save","class","ui-button","tabindex","1"],["span",ui_strings.S_BUTTON_CANCEL,"handler","ev-brp-edit-custom-events-cancel","class","ui-button","tabindex","1"],"class","controls"],"class","event-list"]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});cls.BreakpointsView=function(a,b,c){this.show_and_edit_condition=function(a,b,c,d){};const d="js_source",e="default",f="edit";ActionHandlerInterface.apply(this);this.onclick=function(a){if(this.mode==f){if(this._editor.onclick(a)){this.mode=e;return!0}return!1}return!0};this._handlers["toggle-breakpoint"]=function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","data-breakpoint-id")),d=this._bps.get_breakpoint_with_id(c);d&&this._toggle_bp(d,a.target.checked)}.bind(this);this._handlers["show-breakpoint-in-script-source"]=function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","data-breakpoint-id")),e=this._bps.get_breakpoint_with_id(c);if(e){var f=window.views[d];f.isvisible()||this._ui.show_view(d);f.show_and_flash_line(e.script_id,e.line_nr)}}.bind(this);this._handlers["delete"]=function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","data-breakpoint-id")),d=this._bps.get_breakpoint_with_id(c);d&&this._delete_bp(d)}.bind(this);this._handlers["disable-all"]=function(a,b){this._bps.get_active_breakpoints().forEach(function(a){a.is_enabled&&this._toggle_bp(a,!1)},this)}.bind(this);this._handlers["delete-all"]=function(a,b){this._bps.get_active_breakpoints().forEach(this._delete_bp,this)}.bind(this);this._handlers["add-or-edit-condition"]=function(a,b){if(this.mode!=f){var c=a.target.has_attr("parent-node-chain","data-breakpoint-id");this.mode=f;var d=c.getElementsByClassName("condition")[0]||c.render(this._tmpls.breakpoint_condition());this._editor.edit(a,d.firstElementChild)}}.bind(this);this._handlers["delete-condition"]=function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","data-breakpoint-id"));this._bps.set_condition("",c)}.bind(this);this._handlers.submit=function(a,b){if(this.mode==f){this._editor.submit();this.mode=e;return!1}}.bind(this);this._handlers.cancel=function(a,b){if(this.mode==f){this._editor.cancel();this.mode=e;return!1}}.bind(this);this._toggle_bp=function(a,b){if(a.script_id)if(b){a.is_enabled=!0;this._bps.add_breakpoint(a.script_id,a.line_nr,a.id)}else{a.is_enabled=!1;this._bps.remove_breakpoint(a.script_id,a.line_nr)}else if(a.event_type){a.is_enabled=b;this._ev_bps.handle_breakpoint_with_name(a.event_type,b)}};this._delete_bp=function(a){a.is_enabled&&this._toggle_bp(a,!1);this._bps.delete_breakpoint(a.id)};this._menu_common_items=[{label:ui_strings.M_CONTEXTMENU_DELETE_BREAKPOINT,handler:this._handlers["delete"]},ContextMenu.separator,{label:ui_strings.M_CONTEXTMENU_DISABLE_ALL_BREAKPOINTS,handler:this._handlers["disable-all"]},{label:ui_strings.M_CONTEXTMENU_DELETE_ALL_BREAKPOINTS,handler:this._handlers["delete-all"]}];this._menu_add_condition=[{label:ui_strings.M_CONTEXTMENU_ADD_CONDITION,handler:this._handlers["add-or-edit-condition"]}].concat(this._menu_common_items);this._menu_edit_condition=[{label:ui_strings.M_CONTEXTMENU_EDIT_CONDITION,handler:this._handlers["add-or-edit-condition"]},{label:ui_strings.M_CONTEXTMENU_DELETE_CONDITION,handler:this._handlers["delete-condition"]}].concat(this._menu_common_items);this._menu=[{callback:function(a,b){var c=a.target.has_attr("parent-node-chain","data-breakpoint-id"),d=c&&c.getElementsByClassName("condition")[0];return c?d?this._menu_edit_condition:this._menu_add_condition:null}.bind(this)}];this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this.init(a,b,c,null,null,"breakpoints-edit");this._editor=new window.cls.ConditionEditor(this);this._bps=cls.Breakpoints.get_instance();this._ev_bps=cls.EventBreakpoints.get_instance();this._tmpls=window.templates;var d=window.eventHandlers;d.change["toggle-breakpoint"]=this._handlers["toggle-breakpoint"];d.click["show-breakpoint-in-script-source"]=this._handlers["show-breakpoint-in-script-source"];d.click["disable-all-breakpoints"]=this._handlers["disable-all"];d.click["delete-all-breakpoints"]=this._handlers["delete-all"];d.dblclick["edit-condition"]=this._handlers["add-or-edit-condition"];ActionBroker.get_instance().register_handler(this);ContextMenu.get_instance().register("breakpoints",this._menu);window.messages.addListener("breakpoint-updated",function(){this.update()}.bind(this))};this.createView=function(a){var b=this._bps.get_active_breakpoints();b.length?a.clearAndRender(b.map(this._tmpls.breakpoint,this._tmpls)):a.clearAndRender(this._tmpls.no_breakpoints())};this.ondestroy=function(){};this.add_condition=function(a,b){this._bps.set_condition(a,b);this.update()};this.show_and_edit_condition=function(a,b,c,d){var e=window.runtimes.getScript(a);if(e){var f=e.breakpoints[b],g=ActionBroker.get_instance();this.isvisible()||window.topCell.showView(this.id);var h=this.get_container(),i=h&&h.querySelector("[data-breakpoint-id='"+f+"']");if(i){var c={target:i.getElementsByTagName("div")[0]};this._handlers["add-or-edit-condition"](c,i)}}};this._init(a,b,c)};cls.BreakpointsView.create_ui_widgets=function(){new ToolbarConfig("breakpoints",[{handler:"disable-all-breakpoints",title:ui_strings.M_CONTEXTMENU_DISABLE_ALL_BREAKPOINTS},{handler:"delete-all-breakpoints",title:ui_strings.M_CONTEXTMENU_DELETE_ALL_BREAKPOINTS}])};window.cls||(window.cls={});cls.Breakpoint=function(a,b,c,d,e){this.id=a;this.script_id=b||"";this.line_nr=c||0;this.event_type=d||"";this.type=this.script_id?"source":"event";this.is_enabled=!0;this.condition="";this.update_is_active(e)};cls.Breakpoint.prototype=new function(){this._is_active=!0;this.__defineGetter__("is_active",function(){return this._is_active});this.__defineSetter__("is_active",function(){});this.update_is_active=function(a){if(this.script_id){var b=window.runtimes.getScriptsRuntimeId(this.script_id);this._is_active=a.indexOf(b)!=-1}}};cls.Breakpoints=function(){if(cls.Breakpoints.instance)return cls.Breakpoints.instance;cls.Breakpoints.instance=this;this.get_breakpoints=function(){};this.get_active_breakpoints=function(){};this.get_breakpoint_with_id=function(a){};this.script_has_breakpoint_on_line=function(a,b){};this.get_breakpoint_on_script_line=function(a,b){};this.add_breakpoint=function(a,b,c){};this.remove_breakpoint=function(a,b){};this.delete_breakpoint=function(a){};this.add_event_breakpoint=function(a){};this.remove_event_breakpoint=function(a){};this.copy_breakpoints=function(a,b){};this.set_condition=function(a,b){};this.get_condition=function(a){};const a=cls.NewScript.BP_NONE,b=cls.NewScript.BP_DISABLED,c=cls.NewScript.BP_ENABLED,d=c-b,e=cls.NewScript.BP_ENABLED_CONDITION-c;this._get_bp_id=function(){var a=1;return function(){return a++}}();this._add_bp=function(a,b,c,d){var e=this.get_breakpoint_with_id(a);e?e.is_enabled=!0:this._bps.push(new this._bp_class(a,b,c,d,this._active_rt_ids));window.messages.post("breakpoint-updated",{id:a,script_id:b})};this._remove_bp=function(a){var b=this.get_breakpoint_with_id(a);if(b){b.is_enabled=!1;window.messages.post("breakpoint-updated",{id:b.id,script_id:b.script_id})}};this._get_bp_id_with_script_id_and_line_nr=function(a,b){for(var c=0,d;d=this._bps[c];c++)if(d.script_id==a&&d.line_nr==b)return d.id;return 0};this._update_bp_state=function(a,b,c){var d=a&&window.runtimes.getScript(a.script_id);if(d)if(b)d.breakpoint_states[a.line_nr]+=b;else{var e=d.breakpoint_states[a.line_nr]||0,f=e%3;d.breakpoint_states[a.line_nr]=c;d.breakpoint_states[a.line_nr]+=f}window.messages.post("breakpoint-updated",{id:a.id,script_id:a.script_id,event_type:a.event_type})};this._get_bp_id_with_event_name=function(a){for(var b=0,c;c=this._bps[b];b++)if(c.event_type==a)return c.id;return 0};this._replace_script_id=function(a,b){for(var c=0,d;d=this._bps[c];c++)if(d.script_id==b){d.script_id=a;d.update_is_active(this._active_rt_ids)}};this._get_bp_index_with_bp_id=function(a){for(var b=0;b<this._bps.length&&this._bps[b].id!=a;b++);return b};this._on_active_tab=function(a){this._active_rt_ids=a.activeTab;this._bps.forEach(function(a){a.update_is_active(this._active_rt_ids)},this);window.views.breakpoints.update()};this._init=function(){this._bps=[];this._bp_class=window.cls.Breakpoint;this._esdb=window.services["ecmascript-debugger"];this._active_rt_ids=[];window.messages.addListener("active-tab",this._on_active_tab.bind(this))};this.get_breakpoints=function(){return this._bps};this.get_active_breakpoints=function(){return this._bps.filter(function(a){return a.is_active})};this.get_breakpoint_with_id=function(a){return this._bps[this._get_bp_index_with_bp_id(a)]};this.add_breakpoint=function(a,e,f){var g=window.runtimes.getScript(a);if(g){f=f||this._get_bp_id_with_script_id_and_line_nr(a,e)||this._get_bp_id();g.breakpoints[e]=f;var h=g.breakpoint_states[e]||0,i=h%3;h-=i;h||(h=b);h<c&&(h+=d);g.breakpoint_states[e]=h+i;this._esdb.requestAddBreakpoint(0,[f,a,e]);this._add_bp(f,a,e)}};this.remove_breakpoint=function(a,b){var e=window.runtimes.getScript(a);if(e){var f=e.breakpoints[b];this._esdb.requestRemoveBreakpoint(0,[f]);e.breakpoints[b]=0;var g=e.breakpoint_states[b]||0,h=g%3;g-=h;g>=c&&(e.breakpoint_states[b]=g-d);e.breakpoint_states[b]+=h;this._remove_bp(f);return f}};this.delete_breakpoint=function(b){var c=this.get_breakpoint_with_id(b);this._bps.splice(this._get_bp_index_with_bp_id(b),1);this._update_bp_state(c,0,a)};this.add_event_breakpoint=function(a){var b=this._get_bp_id_with_event_name(a)||this._get_bp_id();this._esdb.requestAddEventBreakpoint(0,[b,a]);this._add_bp(b,null,null,a);return b};this.remove_event_breakpoint=function(a){this._esdb.requestRemoveBreakpoint(0,[a]);this._remove_bp(a)};this.copy_breakpoints=function(a,b){a.breakpoint_states=b.breakpoint_states;this._replace_script_id(a.script_id,b.script_id);var c=b.breakpoints;for(line_nr in c)if(c[line_nr]){line_nr=parseInt(line_nr);this.remove_breakpoint(b.script_id,line_nr);this.add_breakpoint(a.script_id,line_nr,c[line_nr])}window.views.breakpoints.update()};this.script_has_breakpoint_on_line=function(a,b){var c=window.runtimes.getScript(a);return Boolean(c&&c.breakpoints[b])};this.get_breakpoint_on_script_line=function(a,b){var c=this._get_bp_id_with_script_id_and_line_nr(a,b);return c?this.get_breakpoint_with_id(c):null};this.set_condition=function(a,b){var c=this.get_breakpoint_with_id(b);if(c){var d=c.condition;c.condition=a;a&&!d?this._update_bp_state(c,e):!a&&d&&this._update_bp_state(c,-e)}};this.get_condition=function(a){var b=this.get_breakpoint_with_id(a);return b&&b.condition||""};this._init()};cls.Breakpoints.get_instance=function(){return this.instance||new cls.Breakpoints};(function(){const a=300;this.breakpoint_condition=function(a){return["div","condition: ",["span",a||""],"class","condition","edit-handler","edit-condition"]};this.breakpoint=function(b){var c=["div"],d=["input","type","checkbox","class","breakpoint-checkbox","handler","toggle-breakpoint"];b.is_enabled&&d.push("checked","checked");c.push(d);if(b.script_id){var e=runtimes.getScript(b.script_id),f=e.uri||runtimes.getRuntime(e.runtime_id).uri,g=b.line_nr;c.push(["div",helpers.basename(f)+":"+g,"title",f,"handler","show-breakpoint-in-script-source","class","file-line"]);e.line_arr||e.set_line_states();var h=e.script_data.slice(e.line_arr[g-1],e.line_arr[g]).trim();h.length>a&&(h=h.slice(0,a)+" …");var i=this.highlight_js_source(h,null,e.state_arr[g-1],["code"]);c.push(["div",i,"class","source-line","handler","show-breakpoint-in-script-source"]);b.condition&&c.push(this.breakpoint_condition(b.condition))}else if(b.event_type){c.push(["div","event: "+b.event_type,"class","event-type"]);b.condition&&c.push(this.breakpoint_condition(b.condition))}c.push("class","breakpoint","data-breakpoint-id",String(b.id));return c};this.no_breakpoints=function(){return["div",ui_strings.M_VIEW_LABEL_NO_BREAKPOINT,"class","not-content inspection"]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});window.cls.ConditionEditor=function(a){this._init=function(){SimpleBaseEditor.prototype._init.call(this);this._breakpoints=a};this.set_enter_context=function(a){return{uid:parseInt(a.get_attr("parent-node-chain","data-breakpoint-id")),value:a.textContent}};this.onsubmit=function(a){this._breakpoints.add_condition(a.value,a.uid)};this._init()};cls.ConditionEditor.prototype=new SimpleBaseEditor;window.cls||(window.cls={});cls.Watches=function(a){this.add_property=function(a,b){};this.remove_property=function(a){};this.update_watches=function(){};var b=0,c=0,d=1,e=0,f=1,g=2,h=3,i=0,j=5,k=6,l=7,m=0;this._update_prop=function(a,b,c){var d=window.stop_at.getSelectedFrame()||{runtime_id:window.runtimes.getSelectedRuntimeId(),thread_id:0,index:0};this._rt_id=d.runtime_id;var e=this._tagman.set_callback(this,this._handle_update_prop,[a,b,c]);this._esdb.requestEval(e,[d.runtime_id,d.thread_id,d.index,a,[["dummy",0]]])};this._handle_update_prop=function(a,e,i,j,l){l[j]=!0;var n=this._obj_map.watches[0][d];for(var o=0;o<n.length&&n[o][k]!=j;o++);if(n[o])if(a===m&&e[c]==="completed"){n[o][f]=e[f];n[o][g]=e[g];n[o][h]=e[h]}else{n[o][f]="error";n[o][g]=e[b].startswith("Syntax error")?"Syntax error":"Error"}else opera.postError("Missing property in watches.");var p=!0;for(var q in l)p=p&&l[q];p&&this._view.update()};this._get_uid=function(){var a=0;return function(){return++a}}();this._super_init=this._init;this._init=function(a){this._super_init(0,"watches");this._set_initial_values();this._esdb=window.services["ecmascript-debugger"];this._tagman=window.tag_manager;this._view=a};this._set_initial_values=function(){this._obj_map={0:[[["watches"]]],watches:[[[],[]]]};var a={object_id:0,protos:{0:{"":{object_id:"watches"}}}};this._expand_tree=new Dict(a)};this.add_property=function(a,b){var c=[],f=this._obj_map.watches[0][d];for(var g=0;g<f.length&&f[g][k]!=b;g++);c[e]=a;c[j]=!0;c[k]=f[g]&&f[g][k]||this._get_uid();f[g]=c;var h={};h[c[k]]=!1;this._update_prop(a,c[k],h)};this.remove_property=function(a){var b=this._obj_map.watches[0][d];for(var c=0;c<b.length&&b[c][k]!=a;c++);if(b[c]){var g=b[c];g[f]=="object"&&this.collapse([[g[e],g[h][i],0]]);b.splice(c,1)}this._view.update()};this.remove_all_properties=function(){this._set_initial_values();this._view.update()};this.update_watches=function(){var a={};this._obj_map.watches[0][d].forEach(function(b){b[f]=="object"&&this.collapse([[b[e],b[h][i],0]]);a[b[k]]=!1;this._update_prop(b[e],b[k],a)},this)};this._init(a)};cls.Watches.prototype=cls.EcmascriptDebugger["6.0"].InspectableJSObject.prototype;window.cls||(window.cls={});cls.WatchesView=function(a,b,c){this.add_watch=function(a,b){};const d="default",e="edit";this._tmpl_main=function(){return[["div"],["div",["span",["span",ui_strings.S_LABEL_ADD_WATCH],"handler","watches-add","class","ui-button","unselectable","on","tabindex","1"],"class","watches-controls padding"]]};this._tmpl_new_prop=function(){return["item",["key","class","no-expander","data-prop-uid","0"]]};this._check_no_content=function(){var a=this._watch_container&&this._watch_container.getElementsByClassName("prototype")[0];a&&!a.textContent&&a.clearAndRender(["div",ui_strings.M_VIEW_LABEL_NO_WATCHES,"class","not-content"])};ActionHandlerInterface.apply(this);this.onclick=function(a){if(this._add_watches_button==a.target)return!1;if(this.mode==e){if(this._editor.onclick(a)){this.mode=d;this._add_watches_button.disabled=!1}return!1}return!0};this.blur=function(){if(this.mode==e){this._editor.cancel();this.mode=d;return!1}};this._handlers.edit=function(a,b){var c=this._get_editable_item(a,b);if(c){this.mode=e;this._editor.edit(a,c);this._add_watches_button.disabled=!0}}.bind(this);this._handlers["delete"]=function(a,b){var c=this._get_editable_item(a,b);c&&this._data.remove_property(c.getAttribute("data-prop-uid"));this._check_no_content()}.bind(this);this._handlers["delete-all"]=function(a,b){this._data.remove_all_properties();this._check_no_content()}.bind(this);this._handlers.submit=function(a,b){if(this.mode==e){this._editor.submit();this._check_no_content();this._add_watches_button.disabled=!1;this.mode=d;return!1}}.bind(this);this._handlers.cancel=function(a,b){if(this.mode==e){var c=this._editor.cancel();if(!this._editor.context_enter.value){var f=c.parentNode;f.parentNode.removeChild(f)}this._check_no_content();this._add_watches_button.disabled=!1;this.mode=d;return!1}}.bind(this);this._handlers.add=function(a,b){if(this._watch_container){var c=this._watch_container.getElementsByClassName("prototype")[0];if(c){var d=c.getElementsByClassName("not-content")[0];d&&c.removeChild(d);var f=c.render(this._tmpl_new_prop()).firstElementChild;this.mode=e;this._editor.edit(a,f);this._add_watches_button.disabled=!0}}}.bind(this);this._onframeselected=function(a){(a.frame_index!=-1||this._last_selected_frame_index!=-1)&&this._data.update_watches();this._last_selected_frame_index=a.frame_index};this._get_editable_item=function(a,b){var c=a.target;while(c&&c.nodeName.toLowerCase()!="item"&&(c=c.parentNode)&&c!=b);c=c&&c.getElementsByTagName("key")[0
];if(c&&c.hasAttribute("data-prop-uid"))return c;return null};this._menu_common_items=[{label:ui_strings.S_LABEL_ADD_WATCH,handler:this._handlers.add}];this._menu_editable_items=[{label:ui_strings.S_LABEL_EDIT_WATCH,handler:this._handlers.edit},{label:ui_strings.S_LABEL_DELETE_WATCH,handler:this._handlers["delete"]},{label:ui_strings.S_LABEL_DELETE_ALL_WATCHES,handler:this._handlers["delete-all"]}].concat(ContextMenu.separator).concat(this._menu_common_items);this._menu=[{callback:function(a,b){return this._get_editable_item(a,b)?this._menu_editable_items:this._menu_common_items}.bind(this)}];this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this.init(a,b,c,null,null,"watches-edit-prop");this._last_selected_frame_index=0;this._watch_container=null;this._data=new cls.Watches(this);this._editor=new cls.JSPropertyEditor(this);eventHandlers.dblclick["watches-edit-prop"]=this._handlers.edit;eventHandlers.click["watches-add"]=this._handlers.add;ActionBroker.get_instance().register_handler(this);ContextMenu.get_instance().register("watches",this._menu);messages.addListener("frame-selected",this._onframeselected.bind(this))};this.createView=function(a){if(!this._watch_container){a.clearAndRender(this._tmpl_main());this._watch_container=a.firstElementChild;this._add_watches_button=a.querySelector(".ui-button")}var b=window.templates.inspected_js_object(this._data,!1,null);this._watch_container.clearAndRender(b);this._check_no_content()};this.ondestroy=function(){this._watch_container=null;this._add_watches_button=null};this.add_watch=function(a,b){a?this._data.add_property(a,b):this._data.remove_property(b)};this._init(a,b,c)};window.cls||(window.cls={});window.cls.JSPropertyEditor=function(a){this._init=function(){SimpleBaseEditor.prototype._init.call(this);this._watches=a};this.set_enter_context=function(a){return{uid:parseInt(a.getAttribute("data-prop-uid")),value:a.textContent}};this.onsubmit=function(a){this._watches.add_watch(a.value,a.uid)};this._init()};cls.JSPropertyEditor.prototype=new SimpleBaseEditor;window.cls||(window.cls={});cls.JSSourceTooltip=function(a){var b=150,c=Math.max,d=Math.min,e=Math.pow,f=2,g=cls.SimpleJSParser.WHITESPACE,h=cls.SimpleJSParser.LINETERMINATOR,i=cls.SimpleJSParser.IDENTIFIER,j=cls.SimpleJSParser.NUMBER,k=cls.SimpleJSParser.STRING,l=cls.SimpleJSParser.PUNCTUATOR,m=cls.SimpleJSParser.DIV_PUNCTUATOR,n=cls.SimpleJSParser.REG_EXP,o=cls.SimpleJSParser.COMMENT,p=1,q=-1,r=0,s=1,t=16,u=cls.JSInspectionTooltip.tooltip_name,v=2,w="js-tooltip-filter",x=["while","for","if","switch","return"],y=null,z=null,A=null,B=0,C=null,D=null,E=!1,F=[],G=null,H=null,I=0,J=0,K=0,L=10,M=0,N={},O=null,P=[],Q=0,R=null,S=null,T=!1,U=null,V="",W=!1,X=null,Y=null,Z=null,$=null,_=null,ba={handler:w,shortcuts:w,type:"filter",label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,"focus-handler":w,"blur-handler":w},bb=!1,bc=!1,bd=function(){if(!(!D||T||!U||bc||X&&bb||CstSelect.is_active)){if(!U.isCollapsed&&!W){bs();return}O&&(br(D)?Q=0:Q>1?bs():Q+=1);while(F.length>v)F.shift();F.push({x:D.clientX,y:D.clientY});var a=bp();if(a&&a.r<=f){var b=z.get_current_script();if(b){var c=a.y-H.top,d=z.get_line_number_with_offset(c),e=b.get_line(d),g=a.x+G.scrollLeft-M,h=bt(e,g);if(h>-1&&(N.script!=b||N.line_number!=d||N.char_offset!=h||N.shift_key!=W)){N.script=b;N.line_number=d;N.char_offset=h;N.center=a;N.shift_key=W;var i=Math.floor(c/J),j={top:H.top+i*J,bottom:H.top+(i+1)*J,mouse_x:Math.floor(a.x),mouse_y:Math.floor(a.y)};be(b,d,h,j,W)}}else bs()}}},be=function(a,b,c,d,e){var f=bh(a,b,c,e);if(f&&(f.bracket_balance==0||f.is_user_selection)){var g=a.line_arr[f.start_line-1]+f.start_offset,h=a.line_arr[f.end_line-1]+f.end_offset,i=a.script_data.slice(g,h+1);if(i!=V){var j=a.runtime_id,k=0,l=0;V=i;var m=window.runtimes.get_execution_context();if(m.rt_id==j){k=m.thread_id;l=m.frame_index}var n=[a,b,c,d,f,j,i],o=R.set_callback(null,bf,n),p=[j,k,l,i];S.requestEval(o,p)}}},bf=function(a,b,c,d,e,f,g,h,i){var j=0,k=1,l=2,m=3,n=0,o=4;if(!!G&&a===0&&b[j]=="completed"){O=g;Q=0;bq(c,O);if(g.start_line!=g.end_line){var p=g.start_line-z.getTopLine();p<0&&(p=0);f.top=H.top+p*J;var q=g.end_line;q>z.getBottomLine()&&(q=z.getBottomLine());p=g.end_line-z.getTopLine()+1;f.bottom=H.top+p*J;var r=bm();f.left=M;f.right=M+r-G.scrollLeft}if(b[k]=="object"){var s=b[m],t=new cls.InspectableJSObject(h,s[n],"",s[o]);$=t;t.expand(function(){var a=["div",["h2",templates.default_filter(ba),["span",s[o],"data-tooltip",u],"data-id",String(t.id),"obj-id",String(t.object_id),"class","js-tooltip-title"],["div",[window.templates.inspected_js_object(t,!1)],"class","js-tooltip-examine-container mono"],"class","js-tooltip js-tooltip-examine"],b=y.show(a,f);if(b){Y=b.querySelector("input");Z=b.querySelector(".js-tooltip-examine-container");X.set_form_input(Y);X.set_container(Z)}})}else{var v="";b[k]=="null"||b[k]=="undefined"?v=b[k]:b[k]=="string"?v='"'+b[l]+'"':v=b[l];var w=["div",["value",v,"class",b[k]],"class","js-tooltip"];y.show(w,f)}var x=O.start_line,A=O.start_offset,B=i.length;if(x<z.getTopLine()){if(O.end_line<z.getTopLine())return;x=z.getTopLine();A=0;var C=c.line_arr[x-1],D=c.line_arr[g.end_line-1]+g.end_offset;B=D+1-C}U.isCollapsed||U.collapseToStart();z.higlight_slice(x,A,B)}},bg=function(a,b){var c=[];if(a){var d=a.get_line(b),e=a.state_arr[b-1];d&&A.tokenize(d,function(a,b){c.push([a,b])},!1,e)}return c},bh=function(a,b,c,d){if(U.isCollapsed){var e=bg(a,b);for(var f=0,g=0;f<e.length;f++){g+=e[f][s].length;if(g>c)break}if(e[f][r]==i&&(!window.js_keywords.hasOwnProperty(e[f][s])||e[f][s]=="this")||e[f][r]==l&&(e[f][s]=="["||e[f][s]=="]"||d&&(e[f][s]=="("||e[f][s]==")"))){var h=bi(a,b,e,f,d),j=bj(a,b,e,f,d);return{start_line:h.start_line,start_offset:h.start_offset,end_line:j.end_line,end_offset:j.end_offset,bracket_balance:h.bracket_stack_count+j.bracket_stack_count}}}else{var k=U.getRangeAt(0);if(document.documentElement.contains(D.target)&&k.intersectsNode(D.target)){var h=bk(k.startContainer,k.startOffset),j=bk(k.endContainer,k.endOffset);if(h&&j)return{start_line:h.line_number,start_offset:h.offset,end_line:j.line_number,end_offset:j.offset-1,is_user_selection:!0}}}return null},bi=function(a,b,c,d,e){var f=b,m=0,n=c[d],p=[],q=[],t=d-1;n[s]=="]"&&p.push(n[s]);e&&n[s]==")"&&q.push(n[s]);for(;;){for(var u=d-1,v=null;v=c[u];u--){if(e&&q.length){if(v[r]==l){if(v[s]==")"){q.push(v[s]);n=v}if(v[s]=="("){q.pop();n=v}}t=u-1;continue}if(e&&p.length){if(v[r]==l){if(v[s]=="]"){p.push(v[s]);n=v}if(v[s]=="["){p.pop();n=v}}t=u-1;continue}switch(n[r]){case i:switch(v[r]){case g:case h:case o:continue;case l:if(v[s]=="."){n=v;t=u-1;continue}if(v[s]=="["&&p.length){p.pop();n=v;t=u-1;continue}}break;case l:if(e&&v[s]==")"){q.push(v[s]);n=v;t=u-1;continue}if(n[s]=="."||n[s]=="[")switch(v[r]){case g:case h:case o:continue;case i:n=v;t=u-1;continue;case l:if(v[s]=="]"){p.push(v[s]);n=v;t=u-1;continue}}else switch(v[r]){case g:case h:case o:continue;case i:if(n[s]=="("&&x.contains(v[s]))break;case k:case j:n=v;t=u-1;continue;case l:if(v[s]=="]"){p.push(v[s]);n=v;t=u-1;continue}}break;case k:case j:switch(v[r]){case g:case h:case o:continue;case l:if(v[s]=="["){p.pop();n=v;t=u-1;continue}}}break}if(u!=-1)break;var w=bg(a,f-1);if(!w.length)break;f--;d=w.length;t+=d;c=w.extend(c)}c[t+1][r]==l&&c[t+1][s]=="."&&t++;for(;;){var y=bn(c);if(!(y>-1&&y<=t))break;t-=c.splice(0,y+1).length;f++}return{start_line:f,start_offset:bo(c,t),bracket_stack_count:p.length}},bj=function(a,b,c,d,e){var f=b,m=0,n=c[d],p=[],q=[],t=d;n[s]=="["&&p.push(n[s]);e&&n[s]=="("&&q.push(n[s]);while(p.length||e&&q.length){for(var u=d+1,v=null;v=c[u];u++){if(e&&q.length){if(v[r]==l){if(v[s]=="("){q.push(v[s]);n=v}if(v[s]==")"){q.pop();n=v}}t=u;continue}if(e&&p.length){if(v[r]==l){if(v[s]=="["){p.push(v[s]);n=v}if(v[s]=="]"){p.pop();n=v}}t=u;continue}if(!p.length)break;switch(n[r]){case i:switch(v[r]){case g:case h:case o:continue;case l:if(v[s]=="."){n=v;t=u;continue}if(v[s]=="]"){p.pop();n=v;t=u;continue}if(v[s]=="["){p.push(v[s]);n=v;t=u;continue}}break;case l:if(n[s]=="]")switch(v[r]){case g:case h:case o:continue;case l:if(v[s]=="."){n=v;t=u-1;continue}if(v[s]=="]"&&p.length){p.pop();n=v;t=u;continue}}else if(n[s]=="[")switch(v[r]){case g:case h:case o:continue;case k:case j:case i:n=v;t=u;continue}else switch(v[r]){case g:case h:case o:continue;case i:n=v;t=u;continue}break;case k:case j:switch(v[r]){case g:case h:case o:continue;case l:if(v[s]=="]"){p.pop();n=v;t=u;continue}}}break}if(u!=c.length||!p.length)break;f++;var w=bg(a,f);if(!w.length)break;d=u;c.extend(w)}for(;;){var x=bn(c);if(x>-1&&x<=t)t-=c.splice(0,x+1).length;else break}return{end_line:f,end_offset:bo(c,t)-1,bracket_stack_count:p.length}},bk=function(a,b){var c=a.parentNode.has_attr("parent-node-chain","data-line-number");if(c){var d={target_node:a,sum:b,is_found:!1};return{line_number:parseInt(c.getAttribute("data-line-number")),offset:bl(d,c).sum}}return null},bl=function(a,b){while(!a.is_found&&b){b.nodeType==Node.ELEMENT_NODE&&bl(a,b.firstChild);b.nodeType==Node.TEXT_NODE&&(b==a.target_node?a.is_found=!0:a.sum+=b.nodeValue.length);b=b.nextSibling}return a},bm=function(){return Math.max.apply(null,P.map(function(a){return a.right}))},bn=function(a){for(var b=0,c;c=a[b];b++)if(c[r]==h)return b;return-1},bo=function(a,b){for(var c=0,d=0;c<=b;c++)d+=a[c][s].length;return d},bp=function(){var a=null;if(F.length>2){var b=d(F[0].x,F[1].x,F[2].x),f=c(F[0].x,F[1].x,F[2].x),g=d(F[0].y,F[1].y,F[2].y),h=c(F[0].y,F[1].y,F[2].y),i=f-b,j=h-g;a={x:b+i/2,y:g+j/2,r:e(e(i/2,2)+e(j/2,2),.5)}}return a},bq=function(a,b){var c=O.start_line,d=O.start_offset,e=0;P=[];for(;;){var f={},g=a.get_line(c);f.left=bu(g,d);c<O.end_line?f.right=bu(g,g.length+1):f.right=bu(g,O.end_offset+1);f.top=(c-1)*J;f.bottom=c*J;P.push(f);if(c==O.end_line||c>=a.line_arr.length)break;c+=1;d=0}},br=function(a){var b=M-G.scrollLeft,c=H.top-(z.getTopLine()-1)*J,d=a.clientX-b,e=a.clientY-c;for(var f=0,g;g=P[f];f++)if(d>=g.left&&d<=g.right&&e>=g.top&&e<=g.bottom)return!0;return!1},bs=function(){O=null;V="";N={};z.higlight_slice();y.hide();X.set_search_term("");X.cleanup();bb=!1;$=null;Z=null},bt=function(a,b){b/=I;for(var c=0,d=a.length,e=0;c<d;c++){e+=a[c]=="\t"?K-e%K:1;if(e>b)return c}return-1},bu=function(a,b){for(var c=0,d=0,e="";c<b;c++){e=a[c];if(e=="\n"||e=="\r")continue;d+=e=="\t"?K-d%K:1}return d*I},bv=function(){var a=document.styleSheets.getDeclaration(".js-source-content div");return a?parseInt(a.getPropertyValue("-o-tab-size")):0},bw=function(){G&&(H=G.getBoundingClientRect())},bx=function(a){D=a},by=function(a,c){if(!B){I||bC();var d=z.get_scroll_container();if(d&&c.parentNode){G=d;H=d.getBoundingClientRect();C=c.parentNode;C.addEventListener("mousemove",bx,!1);while(F.length)F.pop();M=H.left+L;U=window.getSelection();B=setInterval(bd,b)}}},bz=function(){if(B){clearInterval(B);bs();C.removeEventListener("mousemove",bx,!1);B=0;C=null;H=null;G=null;U=null}},bA=function(a){T=!0},bB=function(a){T=!1},bC=function(a){I=defaults["js-source-char-width"];J=defaults["js-source-line-height"];K=bv();L=defaults["js-default-text-offset"]},bD=function(a){a.keyCode==t&&(W=!0)},bE=function(a){a.keyCode==t&&(W=!1)},bF=function(a){if($&&Z){var b=window.templates.inspected_js_object($,!1,null,a.search_term);Z.clearAndRender(b)}},bG=function(a,b){bc=!0;bs()},bH=function(a){bc=!1},bI=function(a,b){bb=!0},bJ=function(a,b){bb=!1},bK=function(a,b){X.search_delayed(b.value)},bL=function(a){z=a;A=new cls.SimpleJSParser;y=Tooltips.register(cls.JSSourceTooltip.tooltip_name,{type:Tooltips.TYPE_SUPPORT_CONTEXT,dynamic_size:!0,max_height_target:".js-tooltip-examine-container"});y.ontooltip=by;y.onhide=bz;y.ontooltipenter=bA;y.ontooltipleave=bB;R=window.tagManager;S=window.services["ecmascript-debugger"];X=new TextSearch;_=cls.Helpers.shortcut_search_cb.bind(X);window.event_handlers.input[w]=bK;window.event_handlers.focus[w]=bI;window.event_handlers.blur[w]=bJ;window.event_handlers.mousedown["scroll-js-source-view"]=bG;X.add_listener("onbeforesearch",bF);ActionBroker.get_instance().get_global_handler().register_shortcut_listener(w,_);window.messages.addListener("monospace-font-changed",bC);window.addEventListener("resize",bw,!1);document.addEventListener("keydown",bD,!1);document.addEventListener("keyup",bE,!1);document.addEventListener("mouseup",bH,!1)};this.unregister=function(){Tooltips.unregister(cls.JSSourceTooltip.tooltip_name,y);window.messages.removeListener("monospace-font-changed",bC);window.removeEventListener("resize",bw,!1)};bL(a)};cls.JSSourceTooltip.tooltip_name="js-source";window.cls||(window.cls={});cls.EventType=function(a){this.type=a;this.rt_listeners=null;this.is_expanded=!1;this.rt_id=0;this.obj_id=0;this._init()};cls.EventTypePrototype=function(){var a=5;this.search_listeners=function(b,c,d,e){this.rt_id=this._data_runtime_id=b;this.obj_id=this._root_obj_id=c;this.search(d,a,0,0,e)};this.collapse=function(){this._data=[];this.rt_listeners=null;this.is_expanded=!1}};cls.EventTypePrototype.prototype=cls.EcmascriptDebugger["6.0"].InspectableDOMNode.prototype;cls.EventType.prototype=new cls.EventTypePrototype;cls.RTListUpdateCTX=function(a,b){this._init(a,b)};cls.RTListUpdateCTX.prototype=new function(){this._handle_expand_listener=function(a){var b=this.expanded_map[a.rt_id],c=b.indexOf(a.type);c>-1?b.splice(c,1):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"_handle_expand_listener failed in cls.EventListeners.");this.check_is_updated()};this._check_rt=function(a){return this.rt_map.hasOwnProperty(a)&&(!this.rt_map[a]||this.expanded_map[a]&&this.expanded_map[a].length===0)};this.check_is_updated=function(){this.rt_id_list.every(this._check_rt,this)&&this._cb(this)};this._init=function(a,b){this.rt_id_list=a;this.rt_map={};this.win_id_map={};this.expanded_map={};this.handle_expand_listener_bound=this._handle_expand_listener.bind(this);this._cb=b}};cls.EventListeners=function(a){this._init(a)};cls.EventListeners.prototype=new function(){this.update=function(){};this.get_data=function(){};this.expand_listeners=function(a,b,c,d){};this.collapse_listeners=function(a,b){};this.is_expanded=function(a,b){};var a=0,b=5,c=150,d=function(a){return a.rt_id};this._on_new_rts=function(){this._on_new_rts_timeout||(this._on_new_rts_timeout=setTimeout(this._handle_new_rts_bound,c))};this._handle_new_rts=function(){var a=window.runtimes.get_dom_runtime_ids(),b=this._rts.map(d),c=a.filter(function(a){return!b.contains(a)}),e=this._rts.filter(function(b){return a.contains(b.rt_id)});if(e.length!=this._rts.length){this._rts=e;this._view.update()}c&&this._update_rt_list(c);this._on_new_rts_timeout=0};this._update_rt_list=function(a){var b=new cls.RTListUpdateCTX(a,this.on_rt_list_update_bound);a.forEach(this._get_window_ids.bind(this,b))};this._on_rt_list_update=function(a){for(var b=0,c;c=a.rt_id_list[b];b++)this._rts[this._get_rt_index(c)]=a.rt_map[c];this._view.update()};this._get_window_ids=function(a,b){var c=window.runtimes.getSelectedRuntimeId(),d=window.stop_at.getThreadId(),e=window.stop_at.getSelectedFrameIndex();if(c!=b||e==-1){d=0;e=0}var f=this._tagman.set_callback(this,this._handle_window_ids,[a,b]),g=[b,d,e,"window"];this._esdb.requestEval(f,g)};this._handle_window_ids=function(b,c,d,e){var f=0,g=3,h=0;if(b===a&&c[f]==="completed"&&c[g]){this._win_id_map[e]=d.win_id_map[e]=c[g][h];d.rt_id_list.every(function(a){return d.win_id_map[a]})&&d.rt_id_list.map(this._get_event_types.bind(this,d))}};this._get_event_types=function(a,b){var c=this._tagman.set_callback(this,this._handle_get_event_types,[a]),d=[b];this._esdb.requestGetEventNames(c,d)};this._handle_get_event_types=function(b,c,d){if(b===a){var e=0,f=1,g=2,h=c[e],i=c[f],j=c[g],k={rt_id:h,obj_id:i,window_id:d.win_id_map[h]};d.expanded_map[h]=[];j&&j.length?k.event_types=j.map(function(a){var b=new cls.EventType(a);if(this.is_expanded(h,a)){d.expanded_map[h].push(a);var c=this._handle_dom_search.bind(this,b,d.handle_expand_listener_bound);b.search_listeners(h,i,a,c)}return b},this):k.event_types=[];d.rt_map[h]=k;d.check_is_updated()}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed to retrieve the event names in cls.EventListeners.")};this._handle_dom_search=function(a,b){var c=this._tagman.set_callback(this,this._handle_obj_search,[a,b]),d=[a.rt_id,[this._win_id_map[a.rt_id]]];this._esdb.requestGetEventListeners(c,d)};this._handle_obj_search=function(b,c,d,e){if(b===a){var f=1,g=0,h=1,i=c[f]&&c[f][0];d.window_listeners=i?{win_id:i[g],listeners:i[h]}:null;d.is_expanded=!0;this._expand_tree[d.rt_id]||(this._expand_tree[d.rt_id]={});this._expand_tree[d.rt_id][d.type]=!0;e?e(d):this._view.update()}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"requestGetEventListeners failed in cls.EventListeners.")};this._get_ev_type=function(a,b){var c=this._get_rt(a);if(c)for(var d=0,e;e=c.event_types[d];d++)if(e.type==b)return e;return null};this._get_rt=function(a){if(this._rts)for(var b=0,c;c=this._rts[b];b++)if(c.rt_id==a)return c;return null};this._get_rt_index=function(a){for(var b=0;b<this._rts.length&&this._rts[b].rt_id!==a;b++);return b};this.update=function(){this._rts=[];this._win_id_map={};var a=window.runtimes.get_dom_runtime_ids();a.length&&this._update_rt_list(a)};this.get_data=function(){if(this._rts)return this._rts;this.update();return null};this.expand_listeners=function(a,b,c,d){var e=this._get_ev_type(a,c);if(e){var f=this._handle_dom_search.bind(this,e,d);e.search_listeners(a,b,c,f)}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed to find event names object in cls.EventListeners.")};this.collapse_listeners=function(a,b){var c=this._get_ev_type(a,b);if(c){c.collapse();this._expand_tree[a]&&(this._expand_tree[a][b]=!1)}};this.is_expanded=function(a,b){return this._expand_tree[a]?Boolean(this._expand_tree[a][b]):!1};this._init=function(a){this._on_new_rts_timeout=0;this._handle_new_rts_bound=this._handle_new_rts.bind(this);this.on_rt_list_update_bound=this._on_rt_list_update.bind(this);this._rts=[];this._win_id_map={};this._expand_tree={};this._view=a;this._tagman=window.tag_manager;this._esdb=window.services["ecmascript-debugger"];window.messages.add_listener("active-tab",this._on_new_rts.bind(this))}};window.cls||(window.cls={});cls.EventListenersView=function(a,b,c){var d=Array.prototype.forEach.call.bind(Array.prototype.forEach);this.createView=function(a){this._text_search.setContainer(a);var b=this.getToolbarControl(a,cls.EventListenersView.TOKEN_FILTER);this._text_search.setFormInput(b);this._container=a;this._create_view()};this.ondestroy=function(){this._text_search.cleanup();this._container=null};this._create_view=function(a){if(this._container){var b=this._data.get_data();if(b){var c=window.templates.main_ev_listener_view(b,a);this._container.clearAndRender(c)}}};this._toggle_event_listeners=function(a,b){var c=Number(b.get_ancestor_attr("data-rt-id")),d=Number(b.get_ancestor_attr("data-obj-id")),e=b.get_ancestor_attr("data-ev-type"),f=b.get_ancestor("li");if(c&&d&&e&&f)if(this._data.is_expanded(c,e)){if(a.type!="contextmenu"){var g=f.querySelector(".ev-listener-list");g&&g.parentNode.removeChild(g);var h=f.querySelector("h3");h&&h.removeClass("unfolded");this._data.collapse_listeners(c,e)}}else{var i=this._show_ev_listeners.bind(this,f);this._data.expand_listeners(c,d,e,i)}};this._update_ev_listeners=function(a,b){var c=b.get_ancestor("container"),d=c&&c.querySelector(".ev-rt-list");d&&d.parentNode.removeChild(d);this._data.update()};this._show_ev_listeners=function(a,b){var c=window.templates.ev_all_listeners(b),d=a.querySelector("h3");d&&d.addClass("unfolded");var e=a.querySelector(".ev-listener-list");e&&e.parentNode.removeChild(e);a.render(c)};this._onbeforesearch=function(a){this._create_view(a.search_term)};this._oninput=function(a,b){this._text_search.searchDelayed(b.value)};this._onsettingchange=function(a){a.id=="dom"&&a.key=="dom-tree-style"&&this.update()};this._expand_all_types=function(a,b){var c=a.target.get_ancestor(".ev-type-list"),e=c&&c.querySelectorAll(".ev-type");e&&d(e,this._toggle_event_listeners.bind(this,a))};this._init=function(a,b,c){this.init(a,b,c);this._data=new cls.EventListeners(this);var d=this._update_ev_listeners.bind(this),e=window.event_handlers;e.click["toggle-ev-listeners"]=this._toggle_event_listeners.bind(this);e.click["update-ev-listeners"]=d;this._text_search=new TextSearch(1);this._text_search.set_query_selector(".ev-type");this._text_search.add_listener("onbeforesearch",this._onbeforesearch.bind(this));e.input[cls.EventListenersView.TOKEN_FILTER]=this._oninput.bind(this);var f=ActionBroker.get_instance().get_global_handler(),g=cls.Helpers.shortcut_search_cb.bind(this._text_search);f.register_shortcut_listener(cls.EventListenersView.TOKEN_FILTER,g);var h=[{label:ui_strings.S_LABEL_STORAGE_UPDATE,handler:d},{label:ui_strings.S_SWITCH_EXPAND_ALL,handler:this._expand_all_types.bind(this)}];ContextMenu.get_instance().register("ev-listeners-all",h);window.messages.add_listener("setting-changed",this._onsettingchange.bind(this))};this._init(a,b,c)};cls.EventListenersView.TOKEN_FILTER="ev-listeners-text-search";cls.EventListenersView.prototype=ViewBase;window.cls||(window.cls={});cls.EventListenerTooltip=function(){var a=null,b=null,c=function(){a.hide()},d=function(b){a.hide()},e=function(b,d){c();var e=window.dominspections[d.get_ancestor_attr("data-model-id")],f=e&&e.getDataRuntimeId(),g=d.get_ancestor_attr("ref-id")||d.get_ancestor_attr("obj-id"),h=d.get_ancestor_attr("data-window-id");if(f&&(g||h)){var i=g?e.get_ev_listeners(g):e.window_listeners.listeners,j=window.templates.ev_listeners_tooltip(e,f,g,i,"ev-listener-tooltip");a.show(j)}},f=function(a,b){var c=cls.JSInspectionTooltip.get_tooltip();c&&c.handle_function_source(a,b)},g=function(a,b){(new ConfirmDialog(ui_strings.D_RELOAD_SCRIPTS,[function(){window.runtimes.reloadWindow()}],ConfirmDialog.YES_NO)).show()},h=function(h){a=Tooltips.register(cls.EventListenerTooltip.tooltip_name,{type:Tooltips.TYPE_SUPPORT_CONTEXT,set_selected:!0});b=Tooltips.register("url-tooltip",{type:Tooltips.TYPE_SUPPORT_CONTEXT,set_selected:!0});a.ontooltip=e;a.onhide=c;a.ontooltipclick=d;window.event_handlers.click["ev-function-source"]=f;window.event_handlers.click["reload-script-dialog"]=g};h()};cls.EventListenerTooltip.tooltip_name="event-listener";cls.EventListenerTooltip.register=function(){this._tooltip=new cls.EventListenerTooltip};(function(){var a=0,b=1,c=1,d=2,e=2,f=0,g=1,h=3,i=4,j=5,k=function(a){return a.event_types.length};this.main_ev_listener_view=function(a,b){var c=a.filter(k);return["div",["ul",c.map(this._ev_rt_view.bind(this,b)),"class","ev-rt-list"],"class","main-ev-listener-view js-search-results-runtime padding"]};this._ev_rt_view=function(a,b,c,d){var e=window.runtimes.getRuntime(b.rt_id),f=["li"];d.length>1&&f.push(["h2",["span",e&&(e.title||e.host||e.short_url),"data-tooltip","url-tooltip","data-tooltip-text",e&&e.uri],"class","ev-rt-title"]);var g=a?b.event_types.filter(function(b){return b.type.contains(a)}):b.event_types;f.push(["ul",g.map(this._ev_type,this),"data-rt-id",String(b.rt_id),"data-obj-id",String(b.obj_id),"class","ev-type-list"]);return f};this._ev_type=function(a){return["li",["h3",["input","type","button","class","folder-key"],a.type,"handler","toggle-ev-listeners","data-ev-type",a.type,"class","ev-type"+(a.is_expanded?" unfolded":"")],a.is_expanded?this.ev_all_listeners(a):[]]};this.ev_all_listeners=function(a){var b=window.templates.ev_window_listeners(a),c=window.templates.dom_search(a);return["div",b,[c],"class","ev-listener-list mono"]};this.ev_window_listeners=function(b){var c=b&&b.window_listeners,d=function(c){return c[a]==b.type};return c&&c.listeners&&c.listeners.some(d)?["div","window",["span","class","ev-listener","data-tooltip","event-listener"],"data-model-id",String(b.id),"data-window-id",String(c.win_id),"data-rt-id",String(b.rt_id),"data-obj-id",String(c.win_id),"handler","inspect-object-link","class","search-match"]:[]};this.ev_listeners_tooltip=function(a,b,c,d,e){return["dl",d.map(this._ev_listener_tooltip.bind(this,a,b,c)),"class",e]};this._ev_listener_tooltip=function(d,k,l,m){var n=[],o=m[e];n.push(["dt",m[a],["span",m[h]?ui_strings.S_LISTENER_CAPTURING_PHASE:ui_strings.S_LISTENER_BUBBLING_PHASE,"class","ev-phase "+(m[h]?"capturing-phase":"bubbling-phase")],"class","ev-type"]);m[j]?n.push(["dd",["span",ui_strings.S_ATTRIBUTE_LISTENER,"data-tooltip","js-inspection","data-script-data",m[j],"data-class-name","Function","class","ev-origin"]]):n.push(["dd",["span",m[b]==c?ui_strings.S_EVENT_TARGET_LISTENER:ui_strings.S_ATTRIBUTE_LISTENER,"data-tooltip","js-inspection","data-rt-id",String(k),"data-obj-id",String(m[i]),"data-class-name","Function","handler","ev-function-source","class","ev-origin"]]);var p=o&&o[f],q=window.runtimes.getScript(p);if(q){var r=this.script_link_with_line_number(q,o[g],ui_strings.S_EVENT_LISTENER_ADDED_IN);if(r.length){r.push("handler","show-log-entry-source","data-scriptid",String(p),"data-scriptline",String(o[g]),"class","ev-added");n.push(["dd",r])}}else window.runtimes.is_runtime_of_reloaded_window(k)&&d.node_has_attr(l,"on"+m[a])?n.push(["dd",ui_strings.S_EVENT_LISTENER_SET_AS_MARKUP_ATTR,"class","ev-markup-attribute"]):n.push(["dd",ui_strings.S_INFO_MISSING_JS_SOURCE_FILE,"handler","reload-script-dialog","class","ev-missing-script"]);return n};this.script_link_with_line_number=function(a,b,c){c||(c="%s");var d=[],e=this._script_type_map[a.script_type]||a.script_type;if(a.uri){var f=a.script_type=="linked";d.push("span",c.replace("%s",a.short_url+":"+b),"data-tooltip",f&&"url-tooltip","data-tooltip-text",f&&a.uri)}else{var g=window.runtimes.getRuntime(a.runtime_id);g?d.push("span",c.replace("%s",g.short_url),"data-tooltip","url-tooltip","data-tooltip-text",g.uri):opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" missing runtime in _ev_listener template.")}return d}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});cls.SelectedNodeListenersView=function(a,b,c){var d=["div",ui_strings.S_NO_EVENT_LISTENER,"class","not-content padding"];this.createView=function(a){var b=this._selected_ele,c=d;if(b&&b.model){var e=b.model.get_ev_listeners(b.obj_id);e&&e.length&&(c=window.templates.ev_listeners_tooltip(b.model,b.rt_id,b.obj_id,e,"list-selected-node"))}a.clearAndRender(c)};this._on_element_selected=function(a){this._selected_ele=a;this.update()};this._init=function(a,b,c){this.init(a,b,c);this._selected_ele=null;window.messages.add_listener("element-selected",this._on_element_selected.bind(this))};this._init(a,b,c)};cls.SelectedNodeListenersView.prototype=ViewBase;window.cls||(window.cls={});cls.EventListenerSidePanelView=function(a,b,c,d){this.required_services=["ecmascript-debugger"];this.init(a,b,c,d)};cls.EventListenerSidePanelView.prototype=SidePanelView.prototype;cls.EventListenerSidePanelView.create_ui_widgets=function(){var a={view:"ev-listeners-all",groups:[{type:UI.TYPE_BUTTONS,items:[{handler:"update-ev-listeners",title:ui_strings.S_BUTTON_LABEL_REFETCH_EVENT_LISTENERS}]},{type:UI.TYPE_INPUT,items:[{handler:cls.EventListenersView.TOKEN_FILTER,shortcuts:cls.EventListenersView.TOKEN_FILTER,title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]}]};new ToolbarConfig(a)};window.cls||(window.cls={});cls.JSSearchView=function(a,b,c){this.search_type;this.ignore_case;this.search_all_files;const d="js_source",e=1,f=0,g=0,h=1,i=2,j="show-script";this.createView=function(a){this._container=a;a.clearAndRender(window.templates.search_panel(this,"js",j));this._adjust_search_controls(a);var b='[handler="'+this.controls[g].handler+'"]';this._input=a.querySelector(b);var c=this._container.getElementsByClassName("panel-search-container")[0],d=this._container.getElementsByClassName("search-info-badge")[0];this._search.set_container(c);this._search.set_info_element(d);this._search.set_form_input(this._input);this._search.show_last_search()};this._adjust_search_controls=PanelSearch.adjust_search_controls;this.onresize=function(a){this._adjust_search_controls(a)};ActionHandlerInterface.apply(this);this.focus=function(a,b){setTimeout(this._focus_input,50)};this._focus_input=function(){if(this._input){this._input.selectionStart=0;this._input.selectionEnd=this._input.value.length;this._input.focus()}}.bind(this);this._handlers["highlight-next-match"]=function(a,b,c){this._search.highlight_next();return!1}.bind(this);this._handlers["highlight-previous-match"]=function(a,b,c){this._search.highlight_previous();return!1}.bind(this);this._handlers["show-script"]=function(a,b,c){this._search.show_script_of_search_match(b,c);return!1}.bind(this);this._onsearchtypechange=function(a){switch(a.target.name){case"js-search-type":this._search.search_type=a.target.checked?TextSearch.REGEXP:TextSearch.PLAIN_TEXT;this._setting.set("js-search-type",this._search.search_type);break;case"js-search-ignore-case":this._search.ignore_case=Number(a.target.checked);this._setting.set("js-search-ignore-case",this._search.ignore_case);break;case"js-search-all-files":this._search.search_all_files=Number(a.target.checked);this._setting.set("js-search-all-files",this._search.search_all_files);var b=a.target.get_ancestor("form");b&&(b["js-search-injected-scripts"].disabled=!this._search.search_all_files);break;case"js-search-injected-scripts":this._search.search_injected_scripts=Number(a.target.checked);this._setting.set("js-search-injected-scripts",this._search.search_injected_scripts)}this._search.update_search()}.bind(this);this._onscriptselected=function(a){this._selected_script=a.script_id;this._search&&this._search.set_script(this._rts.getScript(this._selected_script))};this._on_active_tab=function(a){this._rt_ids=a.activeTab.slice(0);this._search_term=""};this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this.init(a,b,c);this.shared_shortcuts="search";this._setting=window.settings.js_source;this._rts=window.runtimes;this._ui=UI.get_instance();this._search=new JSMultifileSearch;this._search.ignore_case=this._setting.get("js-search-ignore-case");this._search.search_all_files=this._setting.get("js-search-all-files");this._search.search_type=this._setting.get("js-search-type");this._search.search_injected_scripts=this._setting.get("js-search-injected-scripts");this.controls=[{handler:this.id+"-simple-text-search","class":"panel-search-input-container",shortcuts:this.id+"-simple-text-search",title:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH},{handler:this.id+"-move-highlight-up",type:"search_control","class":"search-move-highlight-up",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_UP},{handler:this.id+"-move-highlight-down",type:"search_control","class":"search-move-highlight-down",title:ui_strings.S_LABEL_MOVE_HIGHLIGHT_DOWN}];["search_type","ignore_case","search_all_files","search_injected_scripts"].forEach(function(a){this.__defineGetter__(a,function(){return this._search[a]});this.__defineSetter__(a,function(){})},this);this._onscriptselected_bound=this._onscriptselected.bind(this);window.eventHandlers.click[this.controls[i].handler]=this._handlers["highlight-next-match"];window.eventHandlers.click[this.controls[h].handler]=this._handlers["highlight-previous-match"];window.eventHandlers.change["js-search-type-changed"]=this._onsearchtypechange;var d=ActionBroker.get_instance();d.register_handler(this);d.get_global_handler().register_shortcut_listener(this.controls[g].shortcuts,this.handle.bind(this));d.get_global_handler().register_search_panel(this.id);messages.addListener("script-selected",this._onscriptselected.bind(this))};this.focus_search_field=this._focus_input;this._init(a,b,c)};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.7"]||(cls.EcmascriptDebugger["6.7"]={});cls.EcmascriptDebugger["6.7"].CssStyleDeclarations=function(a){this.computedStyleList=a[0]||[];this.nodeStyleList=(a[1]||[]).map(function(a){return new cls.EcmascriptDebugger["6.7"].NodeStyle(a)})};cls.EcmascriptDebugger["6.7"].NodeStyle=function(a){this.objectID=a[0];this.elementName=a[1];this.styleList=(a[2]||[]).map(function(a){return new cls.EcmascriptDebugger["6.7"].StyleDeclaration(a)})};cls.EcmascriptDebugger["6.7"].StyleDeclaration=function(a){this.origin=a[0];this.indexList=a[1]||[];this.valueList=a[2]||[];this.priorityList=a[3]||[];this.statusList=a[4]||[];this.selector=a[5];this.specificity=a[6];this.stylesheetID=a[7];this.ruleID=a[8];this.ruleType=a[9];this.lineNumber=a[10]};window.cls||(window.cls={});cls.Stylesheets=function(){this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this._templates=new StylesheetTemplates;this._sheets={};this._css_index_map=null;this._sorted_index_map=[];this._is_getting_index_map=!1
;this._on_index_map_listeners=[];this._new_runtimes=null;var a=0,b=2,c=3,d=cls.Stylesheets.origins.ORIGIN_USER_AGENT,e=cls.Stylesheets.origins.ORIGIN_LOCAL,f=cls.Stylesheets.origins.ORIGIN_AUTHOR,g=cls.Stylesheets.origins.ORIGIN_ELEMENT,h=cls.Stylesheets.origins.ORIGIN_SVG;this.get_stylesheets=function(a,b){if(this._sheets[a])return this._sheets[a];if(b){if(!this._css_index_map){this.get_css_index_map(this.get_stylesheets.bind(this,a,b));return}if(runtime_onload_handler.is_loaded(a)){var c=this._tag_manager.set_callback(this,this._handle_get_all_stylesheets,[a,b]);this._es_debugger.requestCssGetAllStylesheets(c,[a])}else runtime_onload_handler.register_onload_handler(a,this.get_stylesheets.bind(this,a,b))}};this.has_stylesheets_runtime=function(a){return Boolean(this._sheets[a])};this.get_sheet_with_obj_id=function(d,e){if(this._sheets[d]){for(var f=0,g;g=this._sheets[d][f];f++)if(g[a]==e)return{index:f,href:g[b]||window.runtimes.getURI(d),name:g[b]&&/\/([^/]*$)/.exec(g[b])[1]||g[c]||"stylesheet "+f};return null}};this.get_css_index_map=function(a){if(this._css_index_map)a(this._css_index_map);else if(this._is_getting_index_map)this._on_index_map_listeners.push(a);else{this._is_getting_index_map=!0;this._on_index_map_listeners.push(a);var b=this._tag_manager.set_callback(this,this._handle_get_css_index_map);this._es_debugger.requestCssGetIndexMap(b)}};this.get_sorted_properties=function(){var a=[],b=[];for(var c=0;c<this._css_index_map.length;c++){var d=this._css_index_map[this._sorted_index_map[c]];d[0]=="-"?b.push(d):a.push(d)}return a.concat(b)};this.pretty_print_computed_style=function(a){var b=[],c=window.element_style.get_set_props(),d=window.element_style.get_search_term(),e=window.settings["css-comp-style"].get("show-initial-values"),f=window.settings["css-inspector"].get("show-longhand-properties");for(var g=0;g<this._css_index_map.length;g++){var h=this._sorted_index_map[g],i=this._css_index_map[h],j=a.style_list[h],k=!e&&j!=""&&j!=cls.Stylesheets.get_initial_value(i,a.style_list,this._css_index_map)||!1,l=(e||c.indexOf(i)!=-1||k)&&this._show_prop_in_computed_style(i,e,f)&&(i.indexOf(d)!=-1||j.indexOf(d)!=-1);l&&b.push(this._templates.declaration_computed_style(i,j))}return b};this._show_prop_in_computed_style=function(a,b,c){if(b)return!0;if(a=="border")return!1;if(c)return["border-color","border-style","border-width"].indexOf(a)!=-1?!1:!CssShorthandResolver.shorthands[a];return["border-top","border-right","border-bottom","border-left"].indexOf(a)!=-1?!0:!CssShorthandResolver.property_to_shorthand[a]};this.pretty_print_cascaded_style=function(a){var b=[],c=window.element_style.get_search_term(),d=a.style_list;for(var e=0,f;f=d[e];e++){var g=f.elementName,h=f.styleList,i=!1;for(var j=0,k;k=h[j];j++){k.declarations=k.declarations.filter(function(a){return a.property.indexOf(c)!=-1||a.value.indexOf(c)!=-1});if(!k.declarations.length)continue;if(e>0&&!i){i=!0;b.push(this._templates.inherited_header(g,f.objectID))}b.push(this._pretty_print_rule(k,a.rt_id,f.objectID,g))}}return b};this._pretty_print_rule=function(a,b,c,i){var j=this._pretty_print_declaration_list(a);switch(a.origin){case d:return this._templates.rule_origin_user_agent(j,c,i);case e:return this._templates.rule_origin_local(j,c,a.selector);case f:var k=this.get_sheet_with_obj_id(b,a.stylesheetID);k||opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"stylesheet is missing in stylesheets, _pretty_print_rule[ORIGIN_AUTHOR]");return this._templates.rule_origin_author(j,c,b,a,k);case g:return this._templates.rule_origin_element(j,c,b);case h:return this._templates.rule_origin_svg(j,c,b)}};this._pretty_print_declaration_list=function(a){a.declarations.sort(function(a,b){return a.property>b.property?1:-1});var b=a.origin!=d&&a.origin!=e;return a.declarations.map(function(a){return this._templates.declaration(a,b)},this)};this._handle_get_css_index_map=function(a,b,c){var d=0,e=b[d];if(!!e){if(!this._css_index_map){this._css_index_map=e;var f=[];for(var g=0,h;h=e[g];g++)f[g]={index:g,prop:h};f.sort(function(a,b){return a.prop>b.prop?1:-1});for(var g=0;h=f[g];g++)this._sorted_index_map[g]=h.index}while(this._on_index_map_listeners.length)this._on_index_map_listeners.shift()()}};this._handle_get_all_stylesheets=function(a,b,c,d){var e=0;if(a==0){this._sheets[c]=b[e]||[];this._sheets[c].runtime_id=c;d&&d()}};this._on_reset_state=function(){this._sheets={};this._new_runtimes=null;this._is_getting_index_map=!1;this._css_index_map=null};this._on_profile_disabled=function(a){if(a.profile==window.app.profiles.DEFAULT){this._sheets={};this._new_runtimes=null}};this._on_active_tab=function(a){if(!a.runtimes_with_dom.length)this._on_reset_state();else{this._new_runtimes=a.runtimes_with_dom.slice(0);this._check_new_runtimes()}};this._check_new_runtimes=function(){for(var a=0,b;b=this._new_runtimes[a];a++)this._sheets[b]||this.get_stylesheets(b,function(){})};this._init=function(){if(window.messages){window.messages.addListener("active-tab",this._on_active_tab.bind(this));window.messages.addListener("reset-state",this._on_reset_state.bind(this));window.messages.addListener("profile-disabled",this._on_profile_disabled.bind(this))}};this._init()};cls.Stylesheets.get_initial_value=function(a,b,c){switch(a){case"-apple-dashboard-region":return"";case"animation":case"-o-animation":return"none 0s 0s cubic-bezier(0.25, 0.1, 0.25, 1) normal none 1";case"animation-delay":case"-o-animation-delay":return"0s";case"animation-direction":case"-o-animation-direction":return"normal";case"animation-duration":case"-o-animation-duration":return"0s";case"animation-fill-mode":case"-o-animation-fill-mode":return"none";case"animation-iteration-count":case"-o-animation-iteration-count":return"1";case"animation-name":case"-o-animation-name":return"none";case"animation-play-state":case"-o-animation-play-state":return"running";case"animation-timing-function":case"-o-animation-timing-function":return"cubic-bezier(0.25, 0.1, 0.25, 1)";case"-o-border-image":return"";case"-o-focus-opacity":return"";case"-o-link":return"";case"-o-link-source":return"";case"-o-mini-fold":return"";case"-o-object-fit":return"auto";case"-o-object-position":return"50% 50%";case"-o-tab-size":return"";case"-o-table-baseline":return"";case"-o-text-overflow":return"";case"transform":case"-o-transform":case"-webkit-transform":return"none";case"transform-origin":case"-o-transform-origin":case"-webkit-transform-origin":var d=parseInt(b[c.indexOf("width")])||0,e=parseInt(b[c.indexOf("height")])||0;if(b[c.indexOf("box-sizing")]==="content-box"){d+=parseInt(b[c.indexOf("padding-left")])+parseInt(b[c.indexOf("padding-right")]);e+=parseInt(b[c.indexOf("padding-top")])+parseInt(b[c.indexOf("padding-bottom")])}return d/2+"px "+e/2+"px";case"transition":case"-o-transition":case"-webkit-transition":return"all 0s 0s cubic-bezier(0.25, 0.1, 0.25, 1)";case"transition-delay":case"-o-transition-delay":case"-webkit-transition-delay":return"0s";case"transition-duration":case"-o-transition-duration":case"-webkit-transition-duration":return"0s";case"transition-property":case"-o-transition-property":case"-webkit-transition-property":return"all";case"transition-timing-function":case"-o-transition-timing-function":case"-webkit-transition-timing-function":return"cubic-bezier(0.25, 0.1, 0.25, 1)";case"-wap-accesskey":return"";case"-wap-input-format":return"";case"-wap-input-required":return"";case"-wap-marquee-dir":return"";case"-wap-marquee-loop":return"";case"-wap-marquee-speed":return"";case"-wap-marquee-style":return"";case"-xv-interpret-as":return"";case"-xv-phonemes":return"";case"-xv-voice-balance":return"";case"-xv-voice-duration":return"";case"-xv-voice-pitch":return"";case"-xv-voice-pitch-range":return"";case"-xv-voice-rate":return"";case"-xv-voice-stress":return"";case"-xv-voice-volume":return"";case"alignment-baseline":return"auto";case"audio-level":return"1";case"background":return"transparent 0% 0%";case"background-attachment":return"scroll";case"background-clip":return"border-box";case"background-color":return"transparent";case"background-image":return"none";case"background-origin":return"padding-box";case"background-position":return"0% 0%";case"background-repeat":return"repeat";case"background-size":case"-webkit-background-size":return"auto";case"baseline-shift":return"baseline";case"border":return"0px "+b[c.indexOf("color")];case"border-bottom":return"0px "+b[c.indexOf("color")];case"border-bottom-color":return b[c.indexOf("color")];case"border-bottom-style":return"none";case"border-bottom-width":return"0px";case"border-collapse":return"separate";case"border-color":return b[c.indexOf("color")];case"border-left":return"0px "+b[c.indexOf("color")];case"border-left-color":return b[c.indexOf("color")];case"border-left-style":return"none";case"border-left-width":return"0px";case"border-right":return"0px "+b[c.indexOf("color")];case"border-right-color":return b[c.indexOf("color")];case"border-right-style":return"none";case"border-right-width":return"0px";case"border-spacing":return"0px";case"border-style":return"none";case"border-top":return"0px "+b[c.indexOf("color")];case"border-top-color":return b[c.indexOf("color")];case"border-top-style":return"none";case"border-top-width":return"0px";case"border-width":return"0px";case"border-radius":case"-webkit-border-radius":return"0px";case"border-bottom-left-radius":case"-webkit-border-bottom-left-radius":return"0px";case"border-bottom-right-radius":case"-webkit-border-bottom-right-radius":return"0px";case"border-bottom-width":return"0px";case"border-top-left-radius":case"-webkit-border-top-left-radius":return"0px";case"border-top-right-radius":case"-webkit-border-top-right-radius":return"0px";case"bottom":return"auto";case"box-decoration-break":return"slice";case"box-sizing":return"content-box";case"box-shadow":case"-webkit-box-shadow":return"none";case"break-after":return"auto";case"break-before":return"auto";case"break-inside":return"auto";case"buffered-rendering":return"auto";case"caption-side":return"top";case"clear":return"none";case"clip":return"rect(0px, 0px, 0px, 0px)";case"clip-path":return"none";case"clip-rule":return"nonzero";case"color":return"rgb(0, 0, 0)";case"color-interpolation":return"sRGB";case"color-interpolation-filters":return"linearRGB";case"color-profile":return"auto";case"color-rendering":return"auto";case"column-count":return"auto";case"column-fill":return"balance";case"column-gap":return b[c.indexOf("font-size")];case"column-rule":return"0px "+b[c.indexOf("color")];case"column-rule-color":return b[c.indexOf("color")];case"column-rule-style":return"none";case"column-rule-width":return"0px";case"column-span":return"none";case"column-width":return"auto";case"columns":return"auto";case"content":return"none";case"counter-increment":return"none";case"counter-reset":return"none";case"cue":return"";case"cue-after":return"none";case"cue-before":return"none";case"cursor":return"auto";case"direction":return"ltr";case"display":return"inline";case"display-align":return"auto";case"dominant-baseline":return"auto";case"empty-cells":return"show";case"enable-background":return"accumulate";case"fill":return"rgb(0, 0, 0)";case"fill-opacity":return"1";case"fill-rule":return"nonzero";case"filter":return"none";case"float":return"none";case"flood-color":return"rgb(0, 0, 0)";case"flood-opacity":return"1";case"font":return"";case"font-family":return"";case"font-size":return"16px";case"font-size-adjust":return"none";case"font-stretch":return"normal";case"font-style":return"normal";case"font-variant":return"normal";case"font-weight":return"400";case"glyph-orientation-horizontal":return"0";case"glyph-orientation-vertical":return"auto";case"height":return"0px";case"image-rendering":return"auto";case"input-format":return"";case"kerning":return"auto";case"left":return"auto";case"letter-spacing":return"0px";case"lighting-color":return"rgb(255, 255, 255)";case"line-height":return"normal";case"line-increment":return"auto";case"list-style":return"disc outside none";case"list-style-image":return"none";case"list-style-position":return"outside";case"list-style-type":return"disc";case"margin":return"0px";case"margin-bottom":return"0px";case"margin-left":return"0px";case"margin-right":return"0px";case"margin-top":return"0px";case"mark":return"";case"mark-after":return"";case"mark-before":return"";case"marker":return"none";case"marker-end":return"none";case"marker-mid":return"none";case"marker-offset":return"";case"marker-start":return"none";case"marks":return"none";case"mask":return"none";case"max-height":return"none";case"max-width":return"none";case"max-zoom":return"auto";case"min-height":return"0px";case"min-width":return"0px";case"min-zoom":return"auto";case"nav-down":return"auto";case"nav-index":return"auto";case"nav-left":return"auto";case"nav-right":return"auto";case"nav-up":return"auto";case"opacity":return"1";case"orientation":return"";case"orphans":return"2";case"outline":return"3px";case"outline-color":return"invert";case"outline-offset":return"0";case"outline-style":return"none";case"outline-width":return"3px";case"overflow":return"visible";case"overflow-x":return"visible";case"overflow-y":return"visible";case"padding":return"0px";case"padding-bottom":return"0px";case"padding-left":return"0px";case"padding-right":return"0px";case"padding-top":return"0px";case"page":return"auto";case"page-break-after":return"auto";case"page-break-before":return"auto";case"page-break-inside":return"auto";case"pause":return"";case"pause-after":return"";case"pause-before":return"";case"pointer-events":return"visiblePainted";case"position":return"static";case"quotes":return"none";case"resolution":return"";case"rest":return"";case"rest-after":return"";case"rest-before":return"";case"right":return"auto";case"row-span":return"";case"scrollbar-3dlight-color":return"";case"scrollbar-arrow-color":return"";case"scrollbar-base-color":return"";case"scrollbar-darkshadow-color":return"";case"scrollbar-face-color":return"";case"scrollbar-highlight-color":return"";case"scrollbar-shadow-color":return"";case"scrollbar-track-color":return"";case"shape-rendering":return"auto";case"size":return"portrait";case"src":return"";case"solid-color":return"rgb(0, 0, 0)";case"solid-opacity":return"1";case"speak":return"";case"stop-color":return"rgb(0, 0, 0)";case"stop-opacity":return"1";case"stroke":return"none";case"stroke-dasharray":return"none";case"stroke-dashoffset":return"0";case"stroke-linecap":return"butt";case"stroke-linejoin":return"miter";case"stroke-miterlimit":return"4";case"stroke-opacity":return"1";case"stroke-width":return"1";case"table-layout":return"auto";case"text-align":return"left";case"text-anchor":return"start";case"text-decoration":return"none";case"text-indent":return"0px";case"text-overflow":return"clip";case"text-rendering":return"auto";case"text-shadow":return"none";case"text-transform":return"none";case"top":return"auto";case"unicode-bidi":return"normal";case"user-zoom":return"zoom";case"vector-effect":return"none";case"vertical-align":return"baseline";case"viewport-fill":return"none";case"viewport-fill-opacity":return"1";case"visibility":return"visible";case"voice-family":return"";case"white-space":return"normal";case"widows":return"2";case"width":return"0px";case"word-spacing":return"0px";case"word-wrap":return"normal";case"writing-mode":return"lr-tb";case"zoom":return"auto";case"z-index":return"auto";default:opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Initial value missing for "+a+" in cls.Stylesheets.get_initial_value")}};cls.Stylesheets.inheritable_properties={"-xv-voice-balance":!0,"-xv-voice-pitch":!0,"-xv-voice-pitch-range":!0,"-xv-voice-rate":!0,"-xv-voice-stress":!0,"-xv-voice-volume":!0,"alignment-baseline":!0,"border-collapse":!0,"border-spacing":!0,"box-sizing":!0,"caption-side":!0,"cell-spacing":!0,color:!0,"color-interpolation":!0,"color-interpolation-filters":!0,"color-rendering":!0,cursor:!0,direction:!0,"display-align":!0,"empty-cells":!0,font:!0,"font-family":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"image-rendering":!0,"letter-spacing":!0,"line-height":!0,"line-increment":!0,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,orphans:!0,overflow:!0,page:!0,"page-break-inside":!0,"pointer-events":!0,quotes:!0,"scrollbar-3dlight-color":!0,"scrollbar-arrow-color":!0,"scrollbar-base-color":!0,"scrollbar-darkshadow-color":!0,"scrollbar-face-color":!0,"scrollbar-highlight-color":!0,"scrollbar-shadow-color":!0,"scrollbar-track-color":!0,"shape-rendering":!0,size:!0,speak:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"text-align":!0,"text-anchor":!0,"text-indent":!0,"text-rendering":!0,"text-shadow":!0,"text-transform":!0,"unicode-bidi":!0,visibility:!0,"voice-family":!0,"white-space":!0,widows:!0,"word-spacing":!0,"writing-mode":!0};cls.Stylesheets.origins={ORIGIN_USER_AGENT:1,ORIGIN_LOCAL:2,ORIGIN_AUTHOR:3,ORIGIN_ELEMENT:4,ORIGIN_SVG:5};window.cls||(window.cls={});cls.ElementStyle=function(){this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this._css_shorthand_resolver=CssShorthandResolver.get_instance();this._style_declarations=[];this._rt_id=null;this._obj_id=null;this._has_data=!1;this._selected_element=null;this._search_term="";this._set_props=[];this._css_index_map=null;this._views=["css-comp-style","css-inspector"];this.disabled_style_dec_list={};var a=cls.Stylesheets.origins.ORIGIN_USER_AGENT,b=cls.Stylesheets.origins.ORIGIN_LOCAL,c=cls.Stylesheets.origins.ORIGIN_AUTHOR,d=cls.Stylesheets.origins.ORIGIN_ELEMENT,e=cls.Stylesheets.origins.ORIGIN_SVG,f=0,g=1,h=2,i=3,j=4,k=5,l=6,m=7,n=8,o=9,p=10;this._pseudo_item_list=[f];this._pseudo_element=null;this._pseudo_item_map={link:j,visited:k,hover:g,active:h,focus:i,"first-line":l,"first-letter":m,before:n,after:o,selection:p};this.get_style=function(){if(this._has_data)return{rt_id:this._style_declarations.rt_id,style_list:window.helpers.copy_object(this._style_declarations.nodeStyleList)};this._selected_element&&this._get_data(this._selected_element.rt_id,this._selected_element.obj_id);return null};this.get_computed_style=function(){if(this._has_data)return{rt_id:this._style_declarations.rt_id,style_list:window.helpers.copy_object(this._style_declarations.computedStyleList)};this._selected_element&&this._get_data(this._selected_element.rt_id,this._selected_element.obj_id);return null};this.get_set_props=function(){return this._set_props.slice(0)};this.add_pseudo_item=function(a){var b=this._pseudo_item_list.indexOf(this._pseudo_item_map[a]);b==-1&&this._pseudo_item_list.push(this._pseudo_item_map[a])};this.remove_pseudo_item=function(a){var b=this._pseudo_item_list.indexOf(this._pseudo_item_map[a]);b!=-1&&this._pseudo_item_list.splice(b,1)};this.update=function(){this._rt_id&&this._obj_id&&this._get_data(this._rt_id,this._obj_id)}.bind(this);this.sync_declarations=function(a,b,c){var d=b.declarations;for(var e=0,f;f=d[e];e++)if(this.get_property_index(a.declarations,f.property)!=-1)this.remove_property(b.declarations,f.property);else if(!c||!!cls.Stylesheets.inheritable_properties.hasOwnProperty(f.property)){var g=this.copy_property(b.declarations,a.declarations,f.property);a.declarations[g].is_disabled=!0}return a};this.get_rule_by_id=function(a){for(var b=0,c;c=this._style_declarations.nodeStyleList[b];b++)for(var d=0,e;e=c.styleList[d];d++)if(e.ruleID==a)return e;return null};this.get_inline_style_dec_by_id=function(a){for(var b=0,c;c=this._style_declarations.nodeStyleList[b];b++)for(var f=0,g;g=c.styleList[f];f++)if((g.origin==d||g.origin==e)&&c.objectID==a)return g;return null};this.get_declaration=function(a,b){for(var c=0,d;d=a.declarations[c];c++)if(d.property==b)return d;return null};this.get_property_index=function(a,b){for(var c=0,d;d=a[c];c++)if(d.property==b)return c;return-1};this.get_new_style_dec=function(){return new CssRule({origin:c})};this.copy_property=function(a,b,c){var d=this.get_new_style_dec();for(var e=0,f;f=a[e];e++)if(f.property==c){var g=new CssDeclaration(f.property,f.value,f.priority,f.is_applied,f.is_disabled);g.shorthand_tokens=f.shorthand_tokens;b.push(g);break}return b.length-1};this.remove_property=function(a,b){var c=this.get_new_style_dec();for(var d=0,e;e=a[d];d++)if(e.property==b){this.copy_property(a,c.declarations,b);a.splice(d,1);return c}return null};this.get_inline_obj_id=function(a){return"inline-obj-id-"+a};this.is_some_declaration_enabled=function(a){return a.declarations.some(function(a){return!a.is_disabled})};this.get_search_term=function(){return this._search_term};this._on_reset_state=function(){this._selected_element=null;this._set_props=[];this._search_term="";this._has_data=!1};this._on_profile_disabled=function(a){a.profile==window.app.profiles.DEFAULT&&this._on_reset_state()};this._search=function(a){if(this._search_term!=a){this._search_term=a;window.views["css-inspector"].update();window.views["css-comp-style"].update()}};this._on_element_selected=function(a){if(a.rt_id&&a.obj_id){this._selected_element={rt_id:a.rt_id,obj_id:a.obj_id};var b=this._views.some(function(a){return window.views[a].isvisible()});if(b){this._pseudo_element=a.pseudo_element||null;this._get_data(a.rt_id,a.obj_id)}else this._has_data=!1}else{this._on_reset_state();this._has_data=!1;window.views["css-inspector"].update()}};this._get_data=function(a,b){this._rt_id=a;this._obj_id=b;var c=this._pseudo_element&&this._pseudo_item_map[this._pseudo_element];if(window.stylesheets.has_stylesheets_runtime(a)){var d=this._tag_manager.set_callback(this,this._handle_get_data,[a,b]),e=[a,b,this._pseudo_item_list.concat(c||[])];c&&this._has_pseudo_element_version&&e.push(c);this._es_debugger.requestCssGetStyleDeclarations(d,e)}else window.stylesheets.get_stylesheets(a,this._get_data.bind(this,a,b))};this._handle_get_data=function(b,c,f,g,h){if(b===0){if(!this._css_index_map){if(!h){window.stylesheets.get_css_index_map(this._handle_get_data.bind(this,b,c,f,g));return}this._css_index_map=h}this._style_declarations=new cls.CssStyleDeclarations(c);this._style_declarations.rt_id=f;this._has_data=!0;var i=this.disabled_style_dec_list;this._set_props=[];for(var j=0,k;k=this._style_declarations.nodeStyleList[j];j++)for(var l=0,m;m=k.styleList[l];l++){var n=new CssRule(m,this._css_index_map);window.settings["css-inspector"].get("show-longhand-properties")||this._css_shorthand_resolver.resolve(n.declarations);if(n.origin!=a){if(i){var o=n.origin!=d&&n.origin!=e?i[n.ruleID]:i[this.get_inline_obj_id(k.objectID)];o&&(n=this.sync_declarations(n,o,j>0))}n.declarations.forEach(function(a){a.is_applied&&!a.is_disabled&&this._set_props.push(a.property)},this)}k.styleList[l]=n}for(var j=0,p;p=this._views[j];j++)window.views[p].update()}};this._init=function(){this._has_pseudo_element_version=this._es_debugger.satisfies_version(6,9);if(window.messages){window.messages.addListener("element-selected",this._on_element_selected.bind(this));window.messages.addListener("reset-state",this._on_reset_state.bind(this));window.messages.addListener("profile-disabled",this._on_profile_disabled.bind(this))}window.eventHandlers&&(window.eventHandlers.input["css-inspector-text-search"]=function(a,b){this._search(b.value)}.bind(this))};this._init()};window.cls||(window.cls={});cls.ElementLayout=function(){this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this._stylesheets=window.stylesheets;this._css_index_map=null;this._selected_element=null;this._comp_style=null;this._offset_values="";this._views=["css-layout"];var a=1,b=2,c=3,d=4,e=5,f=6,g=7,h=8,i=9,j=10,k=11,l=12,m=cls.ElementLayout.OFFSETS,n="\n    (function(ele)\n    {\n      var \n      parent = ele,\n      log = ele.nodeName + '|0;',\n      offsetParent = ele.offsetParent,\n      offsets =\n      [\n        '"+m[a]+"',\n        '"+m[b]+"',\n        '"+m[c]+"',\n        '"+m[d]+"',\n        '"+m[e]+"',\n        '"+m[f]+"',\n        '"+m[g]+"',\n        '"+m[h]+"',\n        '"+m[i]+"',\n        '"+m[j]+"',\n        '"+m[k]+"',\n        '"+m[l]+"'\n      ],\n      offset = '',\n      i = 0;\n      while ((parent = parent.parentNode) && parent.nodeType == 1)\n      {\n        if (parent == offsetParent)\n        {\n          log = parent.nodeName + '|1,' + log;\n          offsetParent = parent.offsetParent;\n        }\n        else\n        {\n          log = parent.nodeName + '|0,' + log;\n        }\n      };\n      for ( ; offset = offsets[i]; i++)\n      {\n        log += ele[offset] + ';';\n      }\n      return log;\n    })(ele)\n    ";this._on_element_selected=function(a){this._comp_style=null;this._offset_values="";this._selected_element=a.rt_id&&a.obj_id?{rt_id:a.rt_id,obj_id:a.obj_id,model:a.model}:null;for(var b=0,c;c=this._views[b];b++)window.views[c].update()};this.has_selected_element=function(){return Boolean(this._selected_element)};this.get_layout_values=function(a){if(!this._selected_element)a(null);else{if(this._comp_style){a(this._comp_style);return}var b=this._selected_element.rt_id,c=this._selected_element.obj_id;if(this._stylesheets.has_stylesheets_runtime(b)){var d=this._tag_manager.set_callback(this,this._handle_get_metrics_data,[b,c,a]);this._es_debugger.requestCssGetStyleDeclarations(d,[b,c])}else this._stylesheets.get_stylesheets(this._selected_element.rt_id,this.get_layout_values.bind(this,a))}};this._handle_get_metrics_data=function(a,b,c,d,e,f){var g=0,h=1;this._comp_style=b[g];if(!this._css_index_map){if(!f){window.stylesheets.get_css_index_map(this._handle_get_metrics_data.bind(this,a,b,c,d,e));return}this._css_index_map=f}e&&e(this._comp_style)};this.get_offset_values=function(a){if(!this._selected_element)a(null);else if(this._offset_values)a(window.helpers.copy_object(this._offset_values));else{var b=this._selected_element.rt_id,c=this._selected_element.obj_id,d=this._tag_manager.set_callback(null,this._handle_get_offset_data_bound,[b,c,a]);this._es_debugger.requestEval(d,[b,0,0,n,[["ele",c]]])}};this._handle_get_offset_data=function(a,b,c,d,e){var f=0,g=2;if(b[f]=="completed"){this._offset_values=this._parse_offset_values(b[g]);e&&e(window.helpers.copy_object(this._offset_values))}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"_handle_get_offset_data failed")};this._handle_get_offset_data_bound=this._handle_get_offset_data.bind(this);this._parse_offset_values=function(a){var b=a.slice(0,-1).split(";");b[0]=b[0].split(",").map(function(a){return a.split("|")});return b};this.get_metrics_template=function(a){var b=this._css_index_map,c=a[b.indexOf("position")]!="static",d=this._get_dimension("width",a),e=this._get_dimension("height",a);return["div",["ul",["li",["ul",["li",["p"," ",["span",c?"position":" "]]],["li",c?this._convert_to_unitless(a[b.indexOf("top")],!0):" "],["li"]],["ul",["li",c?this._convert_to_unitless(a[b.indexOf("left")],!0):" "],["li",["ul",["li",["p"," ",["span","margin"]]],["li",this._convert_to_unitless(a[b.indexOf("margin-top")])],["li"]],["ul",["li",this._convert_to_unitless(a[b.indexOf("margin-left")])],["li",["ul",["li",["p"," ",["span","border"]]],["li",this._convert_to_unitless(a[b.indexOf("border-top-width")])],["li"]],["ul",["li",this._convert_to_unitless(a[b.indexOf("border-left-width")])],["li",["ul",["li",["p"," ",["span","padding"]]],["li",this._convert_to_unitless(a[b.indexOf("padding-top")])],["li"]],["ul",["li",this._convert_to_unitless(a[b.indexOf("padding-left")])],["li",["ul",["li"," "]],["ul",["li",d+" × "+e]],["ul",["li"," "]],"class","dimension"],["li",this._convert_to_unitless(a[b.indexOf("padding-right")])]],["ul",["li"],["li",this._convert_to_unitless(a[b.indexOf("padding-bottom")])],["li"]],"class","padding"],["li",this._convert_to_unitless(a[b.indexOf("border-right-width")])]],["ul",["li"],["li",this._convert_to_unitless(a[b.indexOf("border-bottom-width")])],["li"]],"class","border"],["li",this._convert_to_unitless(a[b.indexOf("margin-right")])]],["ul",["li"],["li",this._convert_to_unitless(a[b.indexOf("margin-bottom")])],["li"]],"class","margin"],["li",c?this._convert_to_unitless(a[b.indexOf("right")],!0):" "]],["ul",["li"],["li",c?this._convert_to_unitless(a[b.indexOf("bottom")],!0):" "],["li"]],"class",c?"position":""],"class",a[b.indexOf("box-sizing")]],["table",["tr",["th","position:"],["td",a[b.indexOf("position")]||"–"],"data-spec","css#position"],["tr",["th","z-index:"],["td",a[b.indexOf("z-index")]||"–"],"data-spec","css#z-index"],["tr",["th","box-sizing:"],["td",a[b.indexOf("box-sizing")]||"–"],"data-spec","css#box-sizing"],"id","layout-info"]]};this._get_dimension=function(a,b){var c=this._css_index_map,d=b[c.indexOf(a)];if(d==="auto"||d.endswith("%"))return d;var e=parseInt(d),f=b[c.indexOf("box-sizing")]=="border-box",g={width:["border-left","border-right","padding-left","padding-right"],height:["border-top","border-bottom","padding-top","padding-bottom"]};f&&(e-=g[a].reduce(function(a,d){return a+parseInt(b[c.indexOf(d)])},0));return e};this._convert_to_unitless=function(a,b){switch(a){case"auto":case"":return"–";case"0px":return b?"0":"–";default:return String(parseInt(a))}};window.messages.addListener("element-selected",this._on_element_selected.bind(this))};cls.ElementLayout.OFFSETS=["","offsetTop","offsetLeft","offsetWidth","offsetHeight","scrollTop","scrollLeft","scrollWidth","scrollHeight","clientTop","clientLeft","clientWidth","clientHeight"];var Editor=function(a){var b=1,c=2,d=3,e=-1,f=1,g=0,h=1,i=2;this.MODE_CSS=1;this.MODE_SVG=2;this.char_width=0;this.line_height=0;this.textarea_container=null;this.textarea=null;this.host_element_border_padding_left=0;this.host_element_border_padding_top=0;this.context_cur_prop="";this.context_cur_value="";this.context_cur_priority="";this.context_cur_text_content="";this.context_last_prop=null;this.context_edit_mode=this.MODE_CSS;this.colors=new Color;this._stylesheets=window.stylesheets;this._element_style=window.element_style;this._templates=new StylesheetTemplates;this._event=document.createEvent("Event");this._actions=a;this._tab_context_value="";this._tab_context_tokens=null;this.base_style={"font-family":"","line-height":0,"font-size":0};this.get_base_style=function(a){var b=window.getComputedStyle(a,null),c=["font-family","line-height","font-size"],d=document.createElement("test-element"),e="display:block;position:absolute;left:-100px;top:0;white-space:pre;";for(var f=0,g;g=c[f];f++){this.base_style[g]=b.getPropertyValue(g);e+=g+":"+this.base_style[g]+";"}d.textContent="1234567890";document.documentElement.appendChild(d);d.style.cssText=e;this.char_width=d.offsetWidth/10;this.base_style["line-height"]=(this.line_height=d.offsetHeight)+"px";document.documentElement.removeChild(d);this.host_element_border_padding_left=parseInt(b.getPropertyValue("padding-left"))+parseInt(b.getPropertyValue("border-left-width"));this.host_element_border_padding_top=parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("border-top-width"));e="";for(var g in this.base_style)e+=g+":"+this.base_style[g]+";";this.textarea_container=document.createElement("textarea-container");this.textarea=this.textarea_container.render(["_auto_height_textarea"]);this.textarea.style.cssText=e;this.textarea.oninput=this._input_handler};this._get_all_tokens=function(){var a=1,b=2,c=3,d=4,e=5,f=6,g=/(?:"(?:[^"]|\\")*")|(?:'(?:[^']|\\')*')/g,h=/([^,] +)|(, *)|(\( *)|(\))|($)|(;)/g,i=this.textarea.value,j=0,k=i.length-2,l=null,m=[];g.lastIndex=0;var n=g.exec(i);if((j=i.indexOf(":"))>-1){m.splice(0,0,i.slice(0,j),0,j);j++;while(i.charAt(j)==" ")j++;h.lastIndex=j;while(l=h.exec(i)){if(n&&n.index<=h.lastIndex+1){m.splice(m.length,0,n.index,g.lastIndex);h.lastIndex=g.lastIndex;n=g.exec(i)}else l[c]?j=h.lastIndex:l.index>j&&m.splice(m.length,0,j,l.index+(l[a]?1:0));if(l.index>k)break;j=h.lastIndex}}else m.splice(0,0,i,0,i.length);return m};this._get_next_token=function(a){var b=/(?:"(?:[^"]|\\")*")|(?:'(?:[^']|\\')*')/g,c=/([^,] +)|(, *)|(\( *)|(\))|($)|(;)/g,d=this.textarea.value,e=0,f=null;b.lastIndex=0;var g=b.exec(d);a>=d.length-1&&(a=d.length-2);if((e=d.indexOf(":"))>-1){if(e>=a)return{start:0,end:e};e++;while(d.charAt(e)==" ")e++;c.lastIndex=e;while(f=c.exec(d)){if(g&&g.index<=c.lastIndex+1){if(b.lastIndex>=a)return{start:g.index,end:b.lastIndex};c.lastIndex=b.lastIndex;g=b.exec(d);continue}if(f.index>a){if(f[3]){e=c.lastIndex;continue}return{start:e,end:f.index+(f[1]?1:0)}}e=c.lastIndex}}return null};this.get_properties=function(){var a=/(?:"(?:[^"]|\\")*")|(?:'(?:[^']|\\')*')/g,b=/(;)|($)/g,c=/\s*!\s*important/,d=this.textarea.value,e=0,f=0,g=null,h=null,i=[];while((f=d.indexOf(":",e))>-1){var j=d.slice(e,f);f++;while(d.charAt(f)==" "||d.charAt(f)=="\n")f++;a.lastIndex=b.lastIndex=f;var k=a.exec(d);while(
g=b.exec(d)){if(k&&g.index<a.lastIndex){b.lastIndex=a.lastIndex;k=a.exec(d);continue}break}if(g){var l=d.slice(f,b.lastIndex-(g[1]?1:0)),m=0;if(h=c.exec(l)){l=l.slice(0,h.index);m=1}i.splice(i.length,0,j,l,m);e=b.lastIndex;if(e+1>=d.length)break}}e<d.length&&(l=d.slice(e))&&i.push(l);return i};this._get_char_position=function(a){var b=this.textarea.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top,e=0,f=this.line_height,g=0,h=/[ -/\n,]/g,i=null,j=0,k=this.textarea.value,l=this.textarea.offsetWidth/this.char_width>>0;h.lastIndex=0;if(isNaN(c))e=this.context_cur_prop.length+1;else{while(d>f&&(i=h.exec(k))){if(i.index-g>l){g=j+1;f+=this.line_height}j=i.index}d<f&&(e=g+(c-c%this.char_width)/this.char_width)}var m=this._get_next_token(e);if(m){this.textarea.selectionStart=m.start;this.textarea.selectionEnd=m.end}};this.insert_declaration_edit=function(a,b){var c=a.target.has_attr("parent-node-chain","rule-id"),d=c.querySelector(".closing-brace"),e=document.createElement("div");e.className="css-declaration";e.textContent=" ";c.insertBefore(e,d);this.edit(a,e,!0);this.textarea.value=""};this.edit=function(a,b,c){var d=b||a.target,e=c?null:new Element.ScrollPosition(d);this.base_style["font-size"]||this.get_base_style(b||d);this.textarea_container.parentElement&&this.submit();this.context_edit_mode=d.get_attr("parent-node-chain","rule-id")=="element-svg"?this.MODE_SVG:this.MODE_CSS;this.context_rt_id=parseInt(d.get_attr("parent-node-chain","rt-id"));this.context_rule_id=parseInt(d.get_attr("parent-node-chain","rule-id"));if(this.context_rule_id)this.saved_style_dec=this._element_style.get_rule_by_id(this.context_rule_id);else{this.context_rule_id=parseInt(d.get_attr("parent-node-chain","obj-id"));this.saved_style_dec=this._element_style.get_inline_style_dec_by_id(this.context_rule_id)}this.context_cur_text_content=this.textarea.value=d.textContent;var f=this.get_properties();this.context_cur_prop=f[g]||"";this.context_cur_value=f[h]||"";this.context_cur_priority=f[i]||0;d.textContent="";d.appendChild(this.textarea_container);this._resize_textarea();if(a){this._get_char_position(a);this.textarea.focus();e&&e.reset()}};this.nav_next=function(a,b){var c=this.textarea.selectionEnd;if(this.textarea.value!=this._tab_context_value){this._tab_context_tokens=this._get_all_tokens();this._tab_context_value=this.textarea.value}if(this._tab_context_tokens)for(var d=1;d<this._tab_context_tokens.length;d+=2)if(this._tab_context_tokens[d+1]>c){this.textarea.selectionStart=this._tab_context_tokens[d];this.textarea.selectionEnd=this._tab_context_tokens[d+1];return!0}return!1};this.nav_previous=function(a,b){var c=this.textarea.selectionStart;if(this.textarea.value!=this._tab_context_value){this._tab_context_tokens=this._get_all_tokens();this._tab_context_value=this.textarea.value}if(this._tab_context_tokens)for(var d=this._tab_context_tokens.length-1;d>1;d-=2)if(this._tab_context_tokens[d]<c){this.textarea.selectionStart=this._tab_context_tokens[d-1];this.textarea.selectionEnd=this._tab_context_tokens[d];return!0}return!1};this.focus_first_token=function(){this._tab_context_tokens=this._get_all_tokens();this._tab_context_value=this.textarea.value;if(this._tab_context_tokens&&this._tab_context_tokens[2]){this.textarea.selectionStart=this._tab_context_tokens[1];this.textarea.selectionEnd=this._tab_context_tokens[2]}else{this.textarea.selectionStart=0;this.textarea.selectionEnd=0}this.textarea.focus()};this.focus_last_token=function(){this._tab_context_tokens=this._get_all_tokens();this._tab_context_value=this.textarea.value;if(this._tab_context_tokens&&this._tab_context_tokens[2]){this.textarea.selectionStart=this._tab_context_tokens[this._tab_context_tokens.length-2];this.textarea.selectionEnd=this._tab_context_tokens[this._tab_context_tokens.length-1]}else{this.textarea.selectionStart=this._tab_context_value.length;this.textarea.selectionEnd=this._tab_context_value.length}this.textarea.focus()};this.autocomplete=function(a,e){var f=0,g=this.textarea.selectionStart,h=this.textarea.selectionEnd,i=this.textarea.value,j="";if(this.textarea.value!=this._tab_context_value){this._tab_context_tokens=this._get_all_tokens();this._tab_context_value=this.textarea.value}if(this._tab_context_tokens)for(var k=1;k<this._tab_context_tokens.length;k+=2)if(g>=this._tab_context_tokens[k]&&g<=this._tab_context_tokens[k+1]){j=i.slice(this._tab_context_tokens[k],this._tab_context_tokens[k+1]);break}var l=this._get_suggestion(this._tab_context_tokens&&this._tab_context_tokens[0]||"",this._tab_context_tokens&&h<=this._tab_context_tokens[2],j.toLowerCase(),g,h,e);if(l){switch(l.replace_type){case b:case c:f=this._tab_context_tokens[k];this.textarea.value=i.slice(0,f)+l.value+i.slice(this._tab_context_tokens[k+1]);this.textarea.selectionStart=l.replace_type==b?g:f;this.textarea.selectionEnd=f+l.value.length;break;case d:f=this._tab_context_tokens[2]+2;this.textarea.value=this._tab_context_tokens[0]+": "+l.value+(this.context_cur_priority?" !important":"")+";";this.textarea.selectionStart=f;this.textarea.selectionEnd=f+l.value.length}this.commit()}this._resize_textarea();return!1};this._get_suggestion=function(a,b,c,d,e,f){var g=/^(-?)([\d.]+)(.*)$/,h=null,i=b&&"suggest_property"||(h=g.exec(c))&&"suggest_number"||"suggest_value",j=this[i];j.cursor=this._set_cursor(j.cursor,j.matches=this[i](c,d,e,f,h),f);var k=j.matches&&j.matches[j.cursor];return k?{value:k,replace_type:j.replace_type}:null};this._get_matches_from_list=function(a,b){var c=[],d=a?a.length:0;if(d==1)return a;if(d&&b)for(var e=0;e<d;e++)a[e].indexOf(b)==0&&c.push(a[e]);else c=a.slice(0);return c};this._set_cursor=function(a,b,c){if(b){a+=c;a>b.length-1?a=0:a<0&&(a=b.length-1)}else a=0;return a};this.onclick=function(a){if(this.textarea_container.contains(a.target))return!1;this.submit(!0);return!0};this.suggest_property=function(a,b,c,d,e){this.property_list||(this.property_list=this._stylesheets.get_sorted_properties());return this._tab_context_tokens?this._get_matches_from_list(this.property_list,this._tab_context_tokens[0].toLowerCase().slice(this._tab_context_tokens[1],b)):[]};this.suggest_property.replace_type=b;this.suggest_property.cursor=0;this.suggest_property.matches=null;this.suggest_number=function(a,b,c,d,e){var g=/\.(\d+)/.exec(e[2]);if(g)return[(parseFloat(e[1]+e[2])+(d==f?.1:-0.1)).toFixed(g[1].length)+e[3]];return[(parseInt(e[1]+e[2])+d).toString()+e[3]]};this.suggest_number.replace_type=c;this.suggest_number.cursor=0;this.suggest_number.matches=null;this.suggest_value=function(a,b,c,d,e){if(!this._tab_context_tokens)return null;var f=this._tab_context_tokens[0],g=this._tab_context_tokens[3]?this.textarea.value.toLowerCase().slice(this._tab_context_tokens[3],b):"",h=/^#([0-9a-f]{6})$/i,e=null;if(g==this.suggest_value.last_set&&f==this.suggest_value.last_prop)return this.suggest_value.matches;this.suggest_value.last_set=g;this.suggest_value.last_prop=f;if(/color/.test(f)&&a&&(e=h.exec(a))){this.colors.setHex(e[1]);var i=this.colors.getHSL(),j=this.colors.getRGB();return[e[0],"hsl("+i[0]+","+parseInt(i[1])+"%,"+parseInt(i[2])+"%)","rgb("+j[0]+","+j[1]+","+j[2]+")"].concat(window.suggest_values.color)}if(window.suggest_values[f]&&window.suggest_values[f].length)return this._get_matches_from_list(window.suggest_values[f],g);return null};this.suggest_value.replace_type=d;this.suggest_value.cursor=0;this.suggest_value.matches=null;this.suggest_value.last_set="";this.suggest_value.last_prop="";this.submit=function(){this.context_last_prop=null;var a=this.get_properties(),b=this.textarea.get_ancestor(".css-declaration"),c=new CssDeclaration(a[g],a[h],a[i],!0,b.hasClass("disabled"));if(c.value){(this.context_cur_prop!=c.property||this.context_cur_value!=c.value||this.context_cur_priority!=c.priority)&&this._actions.set_property(this.context_rt_id,this.context_rule_id,c,this.context_cur_prop);b.clearAndRender(this._templates.prop_value(c,!0))}else c.value===""?b.clearAndRender(this._templates.prop_value(c,!0)):b.innerHTML=""};this.commit=function(){var a=this.get_properties(),b=!1;while(a.length>3){b=!0;var c=this.textarea_container.parentElement.parentElement.insertBefore(document.createElement("div"),this.textarea_container.parentElement),d=new CssDeclaration(a[g],a[h],a[i],!0,this.textarea_container.parentNode.hasClass("disabled"));c.clearAndRender(this._templates.declaration(d,!0));a.splice(0,3)}if(b){this.textarea.value=a[g]+(a[h]?": "+a[h]+(a[i]?" !important":"")+";":"");this.context_cur_text_content=this.context_cur_prop=this.context_cur_value="";this.context_cur_priority=0}if(a[h]){var d=new CssDeclaration(a[g],a[h],a[i]),e=this.context_last_prop||this.context_cur_prop;this._actions.set_property(this.context_rt_id,this.context_rule_id,d,e);this.context_last_prop=a[g]}else(!a[g]||a[g]!=this.context_cur_prop)&&this.context_cur_prop&&this._actions.remove_property(this.context_rt_id,this.context_rule_id,this.context_cur_prop)};this.enter=function(){this.context_last_prop=null;var a=this.get_properties(),b=!1,c=this.textarea_container.parentNode.hasClass("disabled");if(a&&a.length==3){if(a[h]===""){var d=new CssDeclaration(a[g],this.context_cur_value,this.context_cur_priority,!0,c);this.textarea_container.parentElement.clearAndRender(this._templates.prop_value(d,!0));return!1}if(this.textarea.selectionEnd==this.textarea.value.length||this.textarea.selectionEnd>=this.textarea.value.indexOf(";")){this.saved_style_dec.declarations.push(new CssDeclaration(a[g],a[h],a[i]));var e=document.createElement("div");e.className="css-declaration";this.textarea_container.parentNode.hasClass("overwritten")&&e.addClass("overwritten");c&&e.addClass("disabled");this.textarea_container.parentNode.removeClass("overwritten");this.textarea_container.parentNode.removeClass("disabled");var e=this.textarea_container.get_ancestor(".css-rule").insertBefore(e,this.textarea_container.parentElement),d=new CssDeclaration(a[g],a[h],a[i],!0,c);this.textarea.value="";e.clearAndRender(this._templates.prop_value(d,!0,!0));this._resize_textarea();this.context_cur_text_content="";this.context_cur_prop="";this.context_cur_value="";this.context_cur_priority=0;b=!0}else{var d=new CssDeclaration(a[g],a[h],a[i],!0,c);this.textarea_container.parentElement.clearAndRender(this._templates.prop_value(d,!0))}}else this.textarea_container.parentElement.innerHTML="";return b};this.escape=function(){this.context_last_prop=null;this._actions.restore_property();if(this.context_cur_prop){this.textarea.value=this.context_cur_text_content;var a=new CssDeclaration(this.context_cur_prop,this.context_cur_value,this.context_cur_priority,!0,this.textarea_container.parentNode.hasClass("disabled"));this.textarea_container.parentElement.clearAndRender(this._templates.prop_value(a,!0));return!0}this.textarea.value="";this.textarea_container.parentElement.innerHTML="";return!1};this._resize_textarea=function(){this._event.initEvent("heightadjust",!0,!0);this.textarea.dispatchEvent(this._event)};this._input_handler=function(a){this.commit()}.bind(this)},CssRule=function(a,b){this.declarations=[];this.origin=a.origin;this.selector=a.selector;this.specificity=a.specificity;this.stylesheetID=a.stylesheetID;this.ruleID=a.ruleID;this.ruleType=a.ruleType;this.lineNumber=a.lineNumber;var c=a.indexList?a.indexList.length:0;for(var d=0;d<c;d++)this.declarations.push(new CssDeclaration(b[a.indexList[d]],a.valueList[d],a.priorityList[d],Boolean(a.statusList[d]),!1))},CssDeclaration=function(a,b,c,d,e){this.property=a;this.value=b;this.priority=c||!1;this.is_applied=d!==!1;this.is_disabled=e||!1};window.suggest_values=function(){var a=["transparent","currentColor","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","ActiveBorder","ActiveCaption","AppWorkspace","Background","ButtonFace","ButtonHighlight","ButtonShadow","ButtonText","CaptionText","GrayText","Highlight","HighlightText","InactiveBorder","InactiveCaption","InactiveCaptionText","InfoBackground","InfoText","Menu","MenuText","Scrollbar","ThreeDDarkShadow","ThreeDFace","ThreeDHighlight","ThreeDLightShadow","ThreeDShadow","Window","WindowFrame","WindowText"],b={};b["-apple-dashboard-region"]=b["-o-link"]=b["-o-link-source"]=b["-o-tab-size"]=b["-o-table-baseline"]=b["-o-border-image"]=[];b.animation=b["-o-animation"]=[];b["animation-delay"]=b["-o-animation-delay"]=["0"];b["animation-direction"]=b["-o-animation-direction"]=["normal","alternate"];b["animation-duration"]=b["-o-animation-duration"]=["0"];b["animation-fill-mode"]=b["-o-animation-fill-mode"]=["none","forwards","backwards","both"];b["animation-iteration-count"]=b["-o-animation-iteration-count"]=["infinite"];b["animation-name"]=b["-o-animation-name"]=["none"];b["animation-play-state"]=b["-o-animation-play-state"]=["running","paused"];b["animation-timing-function"]=b["-o-animation-timing-function"]=["ease","linear","ease-in","ease-out","ease-in-out","cubic-bezier()"];b["-o-object-fit"]=["fill","contain","cover","inherit"];b["-o-object-position"]=["top","right","bottom","left","center","inherit"];b["-o-text-overflow"]=["ellipsis"];b.transform=b["-o-transform"]=["none"];b["transform-origin"]=b["-o-transform-origin"]=["left","center","right","top","bottom"];b.transition=b["-o-transition"]=[];b["transition-delay"]=b["-o-transition-delay"]=[];b["transition-duration"]=b["-o-transition-duration"]=[];b["transition-property"]=b["-o-transition-property"]=["none","all"];b["transition-timing-function"]=b["-o-transition-timing-function"]=["ease","linear","ease-in","ease-out","ease-in-out","cubic-bezier()"];b["-wap-accesskey"]=b["-wap-input-format"]=b["-wap-input-required"]=b["-wap-marquee-dir"]=b["-wap-marquee-loop"]=b["-wap-marquee-speed"]=b["-wap-marquee-style"]=b["-xv-interpret-as"]=b["-xv-phonemes"]=b["-xv-voice-balance"]=b["-xv-voice-duration"]=b["-xv-voice-pitch"]=b["-xv-voice-pitch-range"]=b["-xv-voice-rate"]=b["-xv-voice-stress"]=b["-xv-voice-volume"]=[];b.azimuth=["left-side","far-left","left","center-left","center","center-right","right","far-right","right-side","behind","leftwards","rightwards","inherit"];b["background-attachment"]=["scroll","fixed","local","inherit"];b["background-color"]=a.concat("inherit");b["background-clip"]=["border-box","padding-box","content-box","inherit"];b["background-image"]=["none","-o-linear-gradient()","-o-repeating-linear-gradient()","-o-radial-gradient()","-o-repeating-radial-gradient()","inherit"];b["background-origin"]=["border-box","padding-box","content-box"];b["background-position"]=["left","center","right","top","center","bottom"];b["background-size"]=["auto","cover","contain"];b["background-repeat"]=["repeat-x","repeat-y","repeat","space","round","no-repeat","inherit"];b.background=b["background-attachment"].concat(b["background-color"]).concat(b["background-image"]).concat(b["background-origin"]).concat(b["background-position"]).concat(b["background-size"]).concat(b["background-repeat"]);b["border-collapse"]=["collapse","separate"];b["border-spacing"]=["inherit"];b["border-style"]=b["border-top-style"]=b["border-right-style"]=b["border-bottom-style"]=b["border-left-style"]=["none","hidden","dotted ","dashed","solid","double","groove","ridge","inset","outset","inherit"];b["border-color"]=b["border-top-color"]=b["border-right-color"]=b["border-bottom-color"]=b["border-left-color"]=a.concat("inherit");b["border-radius"],b["border-top-right-radius"],b["border-bottom-right-radius"],b["border-bottom-left-radius"],b["border-top-left-radius"]=[];b["border-width"]=b["border-top-width"]=b["border-right-width"]=b["border-bottom-width"]=b["border-left-width"]=["thin","medium","thick"];b.border=b["border-top"]=b["border-right"]=b["border-bottom"]=b["border-left"]=[];b.bottom=["auto","inherit"];b["box-decoration-break"]=["slice","clone","inherit"];b["box-sizing"]=["content-box","border-box","inherit"];b["box-shadow"]=["inset"];b["break-after"]=["auto","always","avoid","left","right","page","column","avoid-page","avoid-column"];b["break-before"]=["auto","always","avoid","left","right","page","column","avoid-page","avoid-column"];b["break-inside"]=["auto","avoid","avoid-page","avoid-column"];b["caption-side"]=["top","bottom","inherit"];b["caption-side"]=["top","bottom","inherit"];b.clear=["none","left","right","both","inherit"];b.clip=["auto","inherit"];b.color=a.concat("inherit");b["column-count"]=["auto"];b["column-fill"]=[];b["column-gap"]=["normal"];b["column-rule"]=[];b["column-rule-color"]=a.concat("inherit");b["column-rule-style"]=["none","hidden","dotted ","dashed","solid","double","groove","ridge","inset","outset","inherit"];b["column-rule-width"]=["thin","medium","thick"];b["column-span"]=["a","all"];b["column-width"]=["auto"];b.columns=["auto"];b.content=["normal","none","attr()","open-quote","close-quote","no-open-quote","no-close-quote","inherit"];b["counter-increment"]=["none","inherit"];b["counter-reset"]=["none","inherit"];b["cue-after"]=["none","inherit"];b["cue-before"]=["none","inherit"];b.cue=["inherit"];b.cursor=["auto","crosshair","default","pointer","move","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","text","wait","help","progress","inherit","-zoom-in","-zoom-out"];b.direction=["ltr","rtl","inherit"];b.display=["inline","block","list-item","run-in","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","none","inherit"];b.elevation=["below","level","above","higher","lower","inherit"];b["empty-cells"]=["show","hide","inherit"];b["float"]=["left","right","none","inherit"];b["font-family"]=["inherit","serif","sans-serif","cursive","fantasy","monospace"];b["font-size"]=["inherit"];b["font-style"]=["normal","italic","oblique","inherit"];b["font-variant"]=["normal","small-caps","inherit"];b["font-weight"]=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900","inherit"];b.font=["caption","icon","menu","message-box","small-caption","status-bar","inherit"];b.height=["auto","inherit"];b.left=["auto","inherit"];b["letter-spacing"]=["normal","inherit"];b["line-height"]=["normal","inherit"];b["list-style-image"]=["none","-o-linear-gradient()","-o-repeating-linear-gradient()","-o-radial-gradient()","-o-repeating-radial-gradient()","inherit"];b["list-style-position"]=["inside","outside","inherit"];b["list-style-type"]=["disc","circle","square","decimal","decimal-leading-zero","lower-roman","upper-roman","lower-greek","lower-latin","upper-latin","armenian","georgian","lower-alpha","upper-alpha","none","inherit"];b["list-style"]=["inherit"];b.margin=b["margin-top"]=b["margin-bottom"]=b["margin-right"]=b["margin-left"]=["inherit"];b["max-height"]=["none","inherit"];b["max-width"]=["none","inherit"];b["max-zoom"]=["auto"];b["min-height"]=["inherit"];b["min-width"]=["inherit"];b["min-zoom"]=["auto"];b.orphans=["inherit"];b["outline-color"]=["invert"];b["outline-style"]=["inherit"];b["outline-width"]=["inherit"];b.outline=["inherit"];b.overflow=b["overflow-x"]=b["overflow-y"]=["visible","hidden","scroll","auto","no-display","no-content","inherit"];b.padding=b["padding-top"]=b["padding-right"]=b["padding-bottom"]=b["padding-left"]=["inherit"];b["page-break-after"]=["auto","always","avoid","left","right","inherit"];b["page-break-before"]=["auto","always","avoid","left","right","inherit"];b["page-break-inside"]=["avoid","auto","inherit"];b["pause-after"]=["inherit"];b["pause-before"]=["inherit"];b.pause=["inherit"];b["pitch-range"]=["inherit"];b.pitch=["x-low","low","medium","high","x-high","inherit"];b["play-during"]=["mix","repeat","auto","none","inherit"];b.position=["static","relative","absolute","fixed","inherit"];b.quotes=["none","inherit"];b.richness=["inherit"];b.right=["auto","inherit"];b["speak-header"]=["once","always","inherit"];b["speak-numeral"]=["digits","continuous","inherit"];b["speak-punctuation"]=["code","none","inherit"];b.speak=["normal","none","spell-out","inherit"];b["speech-rate"]=["x-slow","slow","medium","fast","x-fast","faster","slower","inherit"];b.stress=["inherit"];b["table-layout"]=["auto","fixed","inherit"];b["text-align"]=["left","right","center","justify","inherit"];b["text-decoration"]=["none","underline","overline","line-through","blink","inherit"];b["text-indent"]=["inherit"];b["text-overflow"]=["clip","ellipsis","inherit"];b["text-transform"]=["capitalize","uppercase","lowercase","none","inherit"];b.top=["auto","inherit"];b["unicode-bidi"]=["normal","embed","bidi-override","inherit"];b["user-zoom"]=["zoom","fixed"];b["vertical-align"]=["baseline","sub","super","top","text-top","middle","bottom","text-bottom","inherit"];b.visibility=["visible","hidden","collapse","inherit"];b["voice-family"]=["inherit"];b.volume=["silent","x-soft","soft","medium","loud","x-loud","inherit"];b["white-space"]=["normal","pre","nowrap","pre-wrap","pre-line","inherit"];b.widows=["inherit"];b.width=["auto","inherit"];b["word-spacing"]=["normal","inherit"];b["word-wrap"]=["normal","break-word","inherit"];b.zoom=["auto"];b["z-index"]=["auto","inherit"];b["clip-path"]=["none","inherit"];b["clip-rule"]=["nonzero","evenodd","inherit"];b["nav-up"]=b["nav-right"]=b["nav-down"]=b["nav-left"]=["auto","current","root","inherit"];b.mask=["none","inherit"];b["enable-background"]=["accumulate","inherit"];b.filter=["none","inherit"];b["flood-color"]=a.concat("inherit");b["flood-opacity"]=["inherit"];b["lighting-color"]=a.concat("inherit");b["stop-color"]=a.concat("inherit");b["stop-opacity"]=["inherit"];b["pointer-events"]=["visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit"];b["color-interpolation"]=["auto","sRGB","linearRGB","inherit"];b["color-interpolation-filters"]=["auto","sRGB","linearRGB","inherit"];b["color-profile"]=["auto","sRGB","inherit"];b["color-rendering"]=["auto","optimizeSpeed","optimizeQuality","inherit"];b.fill=a.concat("none","inherit");b["fill-rule"]=["nonzero","evenodd","inherit"];b["fill-opacity"]=["inherit"];b["image-rendering"]=["auto","optimizeSpeed","optimizeQuality","inherit"];b.marker=[];b["marker-end"]=["none","inherit"];b["marker-mid"]=["none","inherit"];b["marker-start"]=["none","inherit"];b["shape-rendering"]=["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit"];b.stroke=a.concat("none","inherit");b["stroke-dasharray"]=["none","inherit"];b["stroke-dashoffset"]=["inherit"];b["stroke-width"]=["inherit"];b["stroke-linecap"]=["butt","round","square","inherit"];b["stroke-linejoin"]=["miter","round","bevel","inherit"];b["stroke-miterlimit"]=["inherit"];b["stroke-opacity"]=["inherit"];b["text-rendering"]=["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit"];b["alignment-baseline"]=["auto","baseline","before-edge","text-before-edge","middle","central","after-edge","text-after-edge","ideographic","alphabetic","hanging","mathematical","inherit"];b["baseline-shift"]=["baseline","sub","super","inherit"];b["dominant-baseline"]=["auto","use-script","no-change","reset-size","ideographic","alphabetic","hanging","mathematical","central","middle","text-after-edge","text-before-edge","inherit"];b["glyph-orientation-horizontal"]=["inherit"];b["glyph-orientation-vertical"]=["auto","inherit"];b.kerning=["auto","inherit"];b["text-anchor"]=["start","middle","end","inherit"];b["writing-mode"]=["lr-tb","rl-tb","tb-rl","lr","rl","tb","inherit"];b["audio-level"]=["inherit"];b["buffered-rendering"]=["auto","dynamic","static","inherit"];b["display-align"]=["auto","before","center","after","inherit"];b["line-increment"]=["auto","inherit"];b["solid-color"]=a.concat("inherit");b["solid-opacity"]=["inherit"];b["vector-effect"]=["non-scaling-stroke","none","inherit"];b["viewport-fill"]=a.concat("inherit");b["viewport-fill-opacity"]=["inherit"];return b}();var CssValueTokenizer=function(a){this._throw_on_error=Boolean(a)};CssValueTokenizer.prototype=new function(){var a=/[ \t\r\n\f]/,b=/["']/,c=/[\d\.]/,d=/[0-9a-f]/i,e=/[a-z-]/i,f=/[a-z0-9-]/i,g=/[-+]/,h=/[a-z%]/i;this._states={DEFAULT:1,INSIDE_FUNCTION:2};this.tokenize=function(a,b){this._state=this._states.DEFAULT;this._buffer=a;this._ontoken=b;this._position=0;this._token_val="";this._function_stack=0;while(this._position<this._buffer.length)this._parse(this._buffer[this._position])};this._emit_token=function(a){this._ontoken(a,this._token_val);this._token_val=""};this._throw_error=function(a){if(!!this._throw_on_error){var b=Array(this._position+1).join("-");throw a+":\n"+this._buffer+"\n"+b+"^"}};this._parse=function(d){a.test(d)?this._parse_whitespace(d):c.test(d)||g.test(d)?this._parse_number(d):e.test(d)?this._parse_identifier(d):b.test(d)?this._parse_string(d):d=="#"?this._parse_hexcolor(d):d=="/"||d==","?this._parse_operator(d):this._parse_unkown(d)};this._parse_whitespace=function(b){while(b&&a.test(b)){this._token_val+=b;b=this._buffer[++this._position]}this._emit_token(CssValueTokenizer.types.WHITESPACE)};this._parse_string=function(a){var b=!1,c=a;this._token_val=a;a=this._buffer[++this._position];while(a){this._token_val+=a;this._position++;if(a==c&&!b)break;b=!b&&a=="\\";a=this._buffer[this._position]}(this._token_val.length<2||this._token_val.slice(-1)!=c)&&this._throw_error("Unterminated string");this._emit_token(CssValueTokenizer.types.STRING)};this._parse_hexcolor=function(a){this._token_val=a;a=this._buffer[++this._position];while(a&&d.test(a)){this._token_val+=a;a=this._buffer[++this._position];if(this._token_val.length>7)break}(this._token_val.length!=4||this._token_val.length!=7)&&this._throw_error("Invalid hex color");this._emit_token(CssValueTokenizer.types.HEX_COLOR)};this._parse_number=function(a){while(a){if(c.test(a)||g.test(a))a=="."&&this._token_val.indexOf(".")!=-1&&this._throw_error("Invalid number");else{if(/\d/.test(this._token_val)&&h.test(a)){this._parse_dimension(a);return}if(f.test(a)){this._parse_identifier(a);return}break}this._token_val+=a;a=this._buffer[++this._position]}this._emit_token(CssValueTokenizer.types.NUMBER)};this._parse_dimension=function(a){while(a){this._token_val+=a;a=this._buffer[++this._position];if(!h.test(a))break}this._emit_token(CssValueTokenizer.types.DIMENSION)};this._parse_function=function(a){this._state=this._states.INSIDE_FUNCTION;this._function_stack++;this._token_val+=a;this._emit_token(CssValueTokenizer.types.FUNCTION_START);a=this._buffer[++this._position];while(a){if(a==")"){this._token_val+=a;this._position++;break}this._parse(a);a=this._buffer[this._position]}this._token_val[0]!=")"&&this._throw_error("Malformed function syntax");this._emit_token(CssValueTokenizer.types.FUNCTION_END);--this._function_stack==0&&(this._state=this._states.DEFAULT)};this._parse_identifier=function(a){while(a){if(!f.test(a)){if(a=="("){this._parse_function(a);return}break}this._token_val+=a;a=this._buffer[++this._position]}this._emit_token(CssValueTokenizer.types.IDENT)};this._parse_operator=function(a){this._token_val=a;if(this._buffer[this._position+1]=="*")this._parse_comment(a);else{this._position++;var b=this._state==this._states.DEFAULT?CssValueTokenizer.types.OPERATOR:CssValueTokenizer.types.OPERATOR_IN_FUNCTION;this._emit_token(b)}};this._parse_comment=function(a){this._token_val="";while(a){this._token_val+=a;a=this._buffer[++this._position];if(this._token_val.length>=4&&this._token_val.slice(-2)=="*/")break}(this._token_val.length<4||this._token_val.slice(-2)!="*/")&&this._throw_error("Unterminated comment");this._emit_token(CssValueTokenizer.types.COMMENT)};this._parse_unkown=function(a){this._token_val=a;this._position++;this._emit_token(CssValueTokenizer.types.UNKNOWN)}};CssValueTokenizer.types={UNKNOWN:0,OPERATOR:1,OPERATOR_IN_FUNCTION:2,WHITESPACE:3,STRING:4,IDENT:5,NUMBER:6,DIMENSION:7,HEX_COLOR:8,FUNCTION_START:9,FUNCTION_END:10,COMMENT:11};var CssShorthandResolver=function(){if(CssShorthandResolver._instance)return CssShorthandResolver._instance;CssShorthandResolver._instance=this;this.resolve=function(a){var b=CssShorthandResolver.property_to_shorthand,c=CssShorthandResolver.shorthands,d={};a.forEach(function(a){d[a.property]={value:a.value,is_applied:a.is_applied}});for(;;){var e=[];a.forEach(function(f){var g=b[f.property];if(g&&e.indexOf(g)==-1){var h=this.get_shorthand_val_for_property(g,a,d);if(h){var i=h.reduce(function(a,b){return a+(typeof b=="string"?b:b.value)},""),j=c[g].properties.some(function(b){var c=window.element_style.get_property_index(a,b);return a[c].is_applied},this);a.push({property:g,value:i,priority:f.priority,is_applied:j,is_disabled:!1,shorthand_tokens:h});e.push(g)}}},this);e.forEach(function(b){var d=c[b].properties;d.forEach(function(b){window.element_style.remove_property(a,b)},this)},this);if(e.length==0)break}};this.get_shorthand_val_for_property=function(a,b,c){var d=CssShorthandResolver.shorthands;if(d.hasOwnProperty(a)){var e=null,f=null,g=!0,h=!1,i=!0,j=d[a].properties.every(function(a){var d=window.element_style.get_property_index(b,a);if(d!=-1){var j=b[d];j.value=="inherit"?h||(h=!0):i=!1;g&&f!==null&&f!=j.is_applied&&(g=!1);f=j.is_applied;if(e!==null&&e!=j.priority)return!1;e=j.priority;c[j.property]={value:j.value,is_applied:j.is_applied};return!0}return!1},this);if(j){if(i)return g?[{value:"inherit",is_applied:f}]:null;if(!h)return d[a].format(c)}}return null}};CssShorthandResolver.get_instance=function(){return CssShorthandResolver._instance||new CssShorthandResolver};CssShorthandResolver.shorthands=function(){var a=new CssValueTokenizer,b=function(b){var c={};for(var d in b){c[d]=[];var e=[""];a.tokenize(b[d].value,function(a,b){a==CssValueTokenizer.types.OPERATOR&&b==","?e.push(""):e[e.length-1]+=b});e.forEach(function(a){c[d].push({value:a.trim(),is_applied:b[d].is_applied})})}return c},c=function(a,b){for(var c in a){var d=a[c].length;d>b&&a[c].splice(b);while(a[c].length<b){var e=a[c].length%d;a[c].push({value:a[c][e].value,is_applied:a[c][e].is_applied})}}},d=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);return b.every(function(b){return a.value==b.value&&a.is_applied==b.is_applied})},e=function(a){return{value:a.value,is_applied:a.is_applied}},f=function(a){var b={};for(var c in a){var d=a[c].value.split(" ");b[c]={horizontal:{value:d[0],is_applied:a[c].is_applied},vertical:{value:d[1]||d[0],is_applied:a[c].is_applied}}}return b},g=cls.Stylesheets.get_initial_value;return{animation:{properties:["animation-name","animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode"],format:function(a){var d=b(a),e=[],f=d["animation-name"].length;c(d,f);for(var h=0;h<f;h++){var i=[],j=h==f-1,k=d["animation-delay"][h].value==g("animation-delay");d["animation-name"][h].value!=g("animation-name")&&i.push(" ",d["animation-name"][h]);(!k||d["animation-duration"][h].value!=g("animation-duration"))&&i.push(" ",d["animation-duration"][h]);d["animation-timing-function"][h].value!=g("animation-timing-function")&&i.push(" ",d["animation-timing-function"][h]);k||i.push(" ",d["animation-delay"][h]);d["animation-iteration-count"][h].value!=g("animation-iteration-count"
)&&i.push(" ",d["animation-iteration-count"][h]);d["animation-direction"][h].value!=g("animation-direction")&&i.push(" ",d["animation-direction"][h]);d["animation-fill-mode"][h].value!=g("animation-fill-mode")&&i.push(" ",d["animation-fill-mode"][h]);i.shift();i.length||e.push("none");j||i.push(", ");e.push.apply(e,i)}return e}},"-o-animation":{properties:["-o-animation-name","-o-animation-duration","-o-animation-timing-function","-o-animation-delay","-o-animation-iteration-count","-o-animation-direction","-o-animation-fill-mode"],format:function(a){var d=a["-o-animation-duration"];d.value.indexOf(" ")!==-1&&d.value.indexOf(",")===-1&&(d.value=d.value.replace(/\s+/g,", "));var e=b(a),f=[],h=e["-o-animation-name"].length;c(e,h);for(var i=0;i<h;i++){var j=[],k=i==h-1,l=e["-o-animation-delay"][i].value==g("-o-animation-delay");e["-o-animation-name"][i].value!=g("-o-animation-name")&&j.push(" ",e["-o-animation-name"][i]);(!l||e["-o-animation-duration"][i].value!=g("-o-animation-duration"))&&j.push(" ",e["-o-animation-duration"][i]);e["-o-animation-timing-function"][i].value!=g("-o-animation-timing-function")&&j.push(" ",e["-o-animation-timing-function"][i]);l||j.push(" ",e["-o-animation-delay"][i]);e["-o-animation-iteration-count"][i].value!=g("-o-animation-iteration-count")&&j.push(" ",e["-o-animation-iteration-count"][i]);e["-o-animation-direction"][i].value!=g("-o-animation-direction")&&j.push(" ",e["-o-animation-direction"][i]);e["-o-animation-fill-mode"][i].value!=g("-o-animation-fill-mode")&&j.push(" ",e["-o-animation-fill-mode"][i]);j.shift();j.length||f.push("none");k||j.push(", ");f.push.apply(f,j)}return f}},background:{properties:["background-image","background-position","background-size","background-repeat","background-attachment","background-origin","background-clip","background-color"],format:function(a){var d=b(a),f=[],h=d["background-image"].length;c(d,h);for(var i=0;i<h;i++){var j=f.length,k=i==h-1,l=d["background-size"][i].value==g("background-size");(!k||d["background-image"][i].value!=g("background-image"))&&f.push(" ",d["background-image"][i]);(!l||d["background-position"][i].value!=g("background-position"))&&f.push(" ",d["background-position"][i]);l||f.push("/",d["background-size"][i]);d["background-repeat"][i].value!=g("background-repeat")&&f.push(" ",d["background-repeat"][i]);d["background-attachment"][i].value!=g("background-attachment")&&f.push(" ",d["background-attachment"][i]);d["background-origin"][i].value!=g("background-origin")&&f.push(" ",d["background-origin"][i]);d["background-clip"][i].value!=g("background-clip")&&f.push(" ",d["background-clip"][i]);k?f.push(" ",e(a["background-color"])):f.push(", ");f.splice(j,1)}return f}},border:{properties:["border-top","border-right","border-bottom","border-left"],format:function(a){if(d(a["border-top"],a["border-right"],a["border-bottom"],a["border-left"]))return[e(a["border-top-width"])," ",e(a["border-top-style"])," ",e(a["border-top-color"])]}},"border-top":{properties:["border-top-width","border-top-style","border-top-color"],format:function(a){return[e(a["border-top-width"])," ",e(a["border-top-style"])," ",e(a["border-top-color"])]}},"border-right":{properties:["border-right-width","border-right-style","border-right-color"],format:function(a){return[e(a["border-right-width"])," ",e(a["border-right-style"])," ",e(a["border-right-color"])]}},"border-bottom":{properties:["border-bottom-width","border-bottom-style","border-bottom-color"],format:function(a){return[e(a["border-bottom-width"])," ",e(a["border-bottom-style"])," ",e(a["border-bottom-color"])]}},"border-left":{properties:["border-left-width","border-left-style","border-left-color"],format:function(a){return[e(a["border-left-width"])," ",e(a["border-left-style"])," ",e(a["border-left-color"])]}},"border-radius":{properties:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],format:function(a){var b=[],c=f(a);d(c["border-top-left-radius"].horizontal,c["border-top-right-radius"].horizontal,c["border-bottom-right-radius"].horizontal,c["border-bottom-left-radius"].horizontal)?b.push(c["border-top-left-radius"].horizontal):d(c["border-top-right-radius"].horizontal,c["border-bottom-left-radius"].horizontal)?d(c["border-top-left-radius"].horizontal,c["border-bottom-right-radius"].horizontal)?b.push(c["border-top-left-radius"].horizontal," ",c["border-top-right-radius"].horizontal):b.push(c["border-top-left-radius"].horizontal," ",c["border-top-right-radius"].horizontal," ",c["border-bottom-right-radius"].horizontal):b.push(c["border-top-left-radius"].horizontal," ",c["border-top-right-radius"].horizontal," ",c["border-bottom-right-radius"].horizontal," ",c["border-bottom-left-radius"].horizontal);if(d(c["border-top-left-radius"].horizontal,c["border-top-left-radius"].vertical)&&d(c["border-top-right-radius"].horizontal,c["border-top-right-radius"].vertical)&&d(c["border-bottom-right-radius"].horizontal,c["border-bottom-right-radius"].vertical)&&d(c["border-bottom-left-radius"].horizontal,c["border-bottom-left-radius"].vertical)&&d(a["border-top-left-radius"].is_applied,a["border-top-right-radius"].is_applied,a["border-bottom-right-radius"].is_applied,a["border-bottom-left-radius"].is_applied))return b;b.push("/");d(c["border-top-left-radius"].vertical,c["border-top-right-radius"].vertical,c["border-bottom-right-radius"].vertical,c["border-bottom-left-radius"].vertical)?b.push(c["border-top-left-radius"].vertical):d(c["border-top-right-radius"].vertical,c["border-bottom-left-radius"].vertical)?d(c["border-top-left-radius"].vertical,c["border-bottom-right-radius"].vertical)?b.push(c["border-top-left-radius"].vertical," ",c["border-top-right-radius"].vertical):b.push(c["border-top-left-radius"].vertical," ",c["border-top-right-radius"].vertical," ",c["border-bottom-right-radius"].vertical):b.push(c["border-top-left-radius"].vertical," ",c["border-top-right-radius"].vertical," ",c["border-bottom-right-radius"].vertical," ",c["border-bottom-left-radius"].vertical);return b}},columns:{properties:["column-width","column-count"],format:function(a){return[e(a["column-width"])," ",e(a["column-count"])]}},"column-rule":{properties:["column-rule-width","column-rule-style","column-rule-color"],format:function(a){return[e(a["column-rule-width"])," ",e(a["column-rule-style"])," ",e(a["column-rule-color"])]}},font:{properties:["font-style","font-variant","font-weight","font-size","line-height","font-family"],format:function(a){var b=[];a["font-style"].value!=g("font-style")&&b.push(" ",a["font-style"]);a["font-variant"].value!=g("font-variant")&&b.push(" ",a["font-variant"]);a["font-weight"].value!=g("font-weight")&&b.push(" ",a["font-weight"]);b.push(" ",a["font-size"]);a["line-height"].value!=g("line-height")&&b.push("/",a["line-height"]);b.push(" ",a["font-family"]);b.shift();return b}},"list-style":{properties:["list-style-type","list-style-position","list-style-image"],format:function(a){return[e(a["list-style-type"])," ",e(a["list-style-position"])," ",e(a["list-style-image"])]}},margin:{properties:["margin-top","margin-right","margin-bottom","margin-left"],format:function(a){if(d(a["margin-top"],a["margin-right"],a["margin-bottom"],a["margin-left"]))return[e(a["margin-bottom"])];if(d(a["margin-right"],a["margin-left"])){if(d(a["margin-top"],a["margin-bottom"]))return[e(a["margin-top"])," ",e(a["margin-right"])];return[e(a["margin-top"])," ",e(a["margin-right"])," ",e(a["margin-bottom"])]}return[e(a["margin-top"])," ",e(a["margin-right"])," ",e(a["margin-bottom"])," ",e(a["margin-left"])]}},outline:{properties:["outline-color","outline-style","outline-width"],format:function(a){return[e(a["outline-width"])," ",e(a["outline-style"])," ",e(a["outline-color"])]}},overflow:{properties:["overflow-x","overflow-y"],format:function(a){if(d(a["overflow-x"],a["overflow-y"]))return[e(a["overflow-x"])]}},padding:{properties:["padding-top","padding-right","padding-bottom","padding-left"],format:function(a){if(d(a["padding-top"],a["padding-right"],a["padding-bottom"],a["padding-left"]))return[e(a["padding-bottom"])];if(d(a["padding-right"],a["padding-left"])){if(d(a["padding-top"],a["padding-bottom"]))return[e(a["padding-top"])," ",e(a["padding-right"])];return[e(a["padding-top"])," ",e(a["padding-right"])," ",e(a["padding-bottom"])]}return[e(a["padding-top"])," ",e(a["padding-right"])," ",e(a["padding-bottom"])," ",e(a["padding-left"])]}},transition:{properties:["transition-property","transition-duration","transition-timing-function","transition-delay"],format:function(a){var d=b(a),f=[],g=d["transition-property"].length;c(d,g);for(var h=0;h<g;h++)f.push(e(d["transition-property"][h])," ",e(d["transition-duration"][h])," ",e(d["transition-timing-function"][h])," ",e(d["transition-delay"][h]),", ");f.pop();return f}},"-o-transition":{properties:["-o-transition-property","-o-transition-duration","-o-transition-timing-function","-o-transition-delay"],format:function(a){var d=b(a),f=[],g=d["-o-transition-property"].length;c(d,g);for(var h=0;h<g;h++)f.push(e(d["-o-transition-property"][h])," ",e(d["-o-transition-duration"][h])," ",e(d["-o-transition-timing-function"][h])," ",e(d["-o-transition-delay"][h]),", ");f.pop();return f}}}}();CssShorthandResolver.property_to_shorthand={"animation-delay":"animation","animation-direction":"animation","animation-duration":"animation","animation-fill-mode":"animation","animation-iteration-count":"animation","animation-name":"animation","animation-timing-function":"animation","-o-animation-delay":"-o-animation","-o-animation-direction":"-o-animation","-o-animation-duration":"-o-animation","-o-animation-fill-mode":"-o-animation","-o-animation-iteration-count":"-o-animation","-o-animation-name":"-o-animation","-o-animation-timing-function":"-o-animation","background-color":"background","background-image":"background","background-repeat":"background","background-attachment":"background","background-position":"background","border-color":"border","border-style":"border","border-width":"border","border-top":"border","border-right":"border","border-bottom":"border","border-left":"border","border-top-color":"border-top","border-right-color":"border-right","border-bottom-color":"border-bottom","border-left-color":"border-left","border-top-style":"border-top","border-right-style":"border-right","border-bottom-style":"border-bottom","border-left-style":"border-left","border-top-width":"border-top","border-right-width":"border-right","border-bottom-width":"border-bottom","border-left-width":"border-left","border-top-left-radius":"border-radius","border-top-right-radius":"border-radius","border-bottom-left-radius":"border-radius","border-bottom-right-radius":"border-radius","column-width":"columns","column-count":"columns","column-rule-width":"column-rule","column-rule-style":"column-rule","column-rule-color":"column-rule","font-style":"font","font-variant":"font","font-weight":"font","font-size":"font","line-height":"font","font-family":"font","list-style-type":"list-style","list-style-position":"list-style","list-style-image":"list-style","margin-top":"margin","margin-right":"margin","margin-bottom":"margin","margin-left":"margin","outline-color":"outline","outline-style":"outline","outline-width":"outline","overflow-x":"overflow","overflow-y":"overflow","padding-top":"padding","padding-right":"padding","padding-bottom":"padding","padding-left":"padding","transition-property":"transition","transition-duration":"transition","transition-timing-function":"transition","transition-delay":"transition","-o-transition-property":"-o-transition","-o-transition-duration":"-o-transition","-o-transition-timing-function":"-o-transition","-o-transition-delay":"-o-transition"};var StylesheetTemplates=function(){var a=30,b=cls.Stylesheets.origins.ORIGIN_USER_AGENT,c=cls.Stylesheets.origins.ORIGIN_LOCAL,d=CssValueTokenizer.types.HEX_COLOR,e=CssValueTokenizer.types.FUNCTION_START,f=CssValueTokenizer.types.FUNCTION_END;this._css_value_tokenizer=new CssValueTokenizer;this._color_properties={"background-color":!0,"border-color":!0,"border-top-color":!0,"border-right-color":!0,"border-bottom-color":!0,"border-left-color":!0,color:!0,fill:!0,"flood-color":!0,"lighting-color":!0,"outline-color":!0,"solid-color":!0,"stop-color":!0,stroke:!0};this.rule_origin_user_agent=function(a,b,c){return["div",["span",ui_strings.S_STYLE_ORIGIN_USER_AGENT,"class","rule-description"],["span",c,"class","css-selector"]," {\n",a,"\n}","class","css-rule non-editable","obj-id",String(b)]};this.rule_origin_local=function(a,b,c){return["div",["span",ui_strings.S_STYLE_ORIGIN_LOCAL,"class","rule-description"],["span",c,"class","css-selector"]," {\n",a,"\n}","class","css-rule non-editable","obj-id",String(b)]};this.rule_origin_author=function(a,b,c,d,e){return["div",e?["span",window.helpers.basename(e.href)+(d.lineNumber?":"+d.lineNumber:""),"class","rule-description internal-link","rt-id",String(c),"index",String(e.index),"handler","open-resource-tab","data-resource-url",e.href,"data-resource-line-number",String(d.lineNumber||0)]:[],["span",d.selector,"class","css-selector"]," {\n",a,["div","}","handler","insert-declaration-edit","class","closing-brace"],"class","css-rule","data-menu","style-inspector-rule","rule-id",d.ruleID&&String(d.ruleID),"obj-id",b&&String(b)]};this.rule_origin_element=function(a,b,c){return["div",["span","element.style"]," {\n",a,["div","}","handler","insert-declaration-edit","class","closing-brace"],"class","css-rule","rule-id","element-style","rt-id",String(c),"obj-id",String(b)]};this.rule_origin_svg=function(a,b,c){return["div",["span",ui_strings.S_STYLE_ORIGIN_SVG,"style","font-style: italic;"]," {\n",a,["div","}","handler","insert-declaration-edit","class","closing-brace"],"class","css-rule","data-menu","style-inspector-rule","rule-id","element-svg","rt-id",String(c),"obj-id",String(b)]};this.declaration_computed_style=function(a,b){return["div",["span",a,"class","css-property"],": ",["span",this._parse_value(a,b,!1),"class","css-property-value"],";","class","css-declaration","data-spec","css#"+a]};this.declaration=function(a,b){return["div",this.prop_value(a,b),"class","css-declaration"+(a.is_applied?"":" overwritten")+(a.is_disabled?" disabled":""),"data-spec","css#"+a.property]};this.prop_value=function(a,b,c){var d=c?this.value(a):this.parsed_value(a,b,c);return[b?["input","type","checkbox","title",a.is_disabled?ui_strings.S_ENABLE_DECLARATION:ui_strings.S_DISABLE_DECLARATION,"class","enable-disable","checked",!a.is_disabled,"handler","enable-disable","data-property",a.property]:[],["span",a.property,"class","css-property"],": ",["span",d,a.priority?["span"," !important","class","css-priority"]:[],"class","css-property-value"],";"]};this.value=function(a){return["span",a.value]};this.parsed_value=function(a,b){if(a.shorthand_tokens)return a.shorthand_tokens.map(function(c){var d=typeof c=="string"?c:c.value;return["span",this._parse_value(a.property,d,b),"class",c.is_applied===!1&&"overwritten"]},this);return["span",this._parse_value(a.property,a.value,b)]};this._parse_value=function(a,b,c){var g=window.settings["dom-side-panel"].get("color-notation"),h=[],i=[],j=!1;this._css_value_tokenizer.tokenize(b,function(b,k){var l=[];if(h.length&&b===f){h.push(k);k=h.join("");var m=(new Color).parseCSSColor(k);if(m){k=window.helpers.get_color_in_notation(m,g);l=this.color_swatch(k,c)}h=[]}else{if(b===e&&this._is_color(k)||h.length){h.push(k);return}if(b===d){k=window.helpers.get_color_in_notation((new Color).parseCSSColor(k),g);l=this.color_swatch(k,c)}else if(this._color_properties.hasOwnProperty(a)&&k!=="invert"||k==="currentColor"||k==="transparent")l=this.color_swatch(k,c);else if(b===e&&k==="url(")j=!0;else if(j){b!==f&&(k=this.linkify_value(k));j=!1}}i.push(["span",k,l])}.bind(this));return i};this.color_swatch=function(a,b){var c=a==="currentColor"||a==="inherit";return["span",["span","class","color-swatch-fg-color","style",c?"":"background-color:"+a],"class","color-swatch"+(b?"":" non-interactive")+(c?" special":""),"handler",b&&"show-color-picker"]};this.linkify_value=function(b){if(b.startswith('"')||b.startswith("'"))b=b.slice(1,-1);var c=b,d=[];if(b.startswith("data:")&&b.length>a+1){d=["span",b.slice(a),"class","shortened-url"];b=b.slice(0,a)}return["span",'"',["span",b,d,"handler","open-resource-tab","data-resource-url",c,"class","internal-link"],'"']};this.inherited_header=function(a,b){return["h2",ui_strings.S_INHERITED_FROM+" ",["code",a,"obj-id",String(b),"class","element-name inspect-node-link","handler","inspect-node-link"]]};this.color_notation_setting=function(a){var b=[["Hex","hhex"],["RGB","rgb"],["HSL","hsl"]].map(function(b){return["option",b[0],"value",b[1],"selected",b[1]==a.map["color-notation"]]});return["label",a.label_map["color-notation"]+": ",["select",b,"handler","color-notation"]]};this._is_color=function(a){return/^(rgb|hsl)a?\(/.test(a)||/^#([0-9a-f]{3}){1,2}$/i.test(a)}};window.cls||(window.cls={});cls.CSSInspectorView=function(a,b,c){this.required_services=["ecmascript-debugger"];this.createView=function(a){var b=window.element_style,c=a.clearAndRender(["category",["styles"],"edit-handler","edit-css"]).firstElementChild,d=b.get_style();if(d){c.clearAndRender(window.stylesheets.pretty_print_cascaded_style(d));c.setAttribute("rt-id",d.rt_id)}window.views["color-selector"].ondestroy()};this.ondestroy=function(){window.views["color-selector"].ondestroy()};this.init(a,b,c)};cls.CSSInspectorView.create_ui_widgets=function(){function b(a,b){b?element_style.add_pseudo_item(a):element_style.remove_pseudo_item(a);element_style.update()}var a=ActionBroker.get_instance();new Settings("css-inspector",{link:!1,visited:!1,hover:!1,active:!1,focus:!1,selection:!1},{link:":link",visited:":visited",hover:":hover",active:":active",focus:":focus",selection:"::selection"},{checkboxes:["link","visited","hover","active","focus","selection"]},null,null,{link:function(a){b("link",a)},visited:function(a){b("visited",a)},hover:function(a){b("hover",a)},active:function(a){b("active",a)},focus:function(a){b("focus",a)},selection:function(a){b("selection",a)}});window.eventHandlers.click["insert-declaration-edit"]=function(b,c){a.dispatch_action("css-inspector","insert-declaration-edit",b,c)}};window.cls||(window.cls={});cls.CSSInspectorCompStyleView=function(a,b,c){this.required_services=["ecmascript-debugger"];this.createView=function(a){var b=window.element_style,c=a.clearAndRender(["category",["styles"]]).firstElementChild,d=b.get_computed_style();if(d){c.clearAndRender(window.stylesheets.pretty_print_computed_style(d));c.setAttribute("rt-id",d.rt_id)}};this.init(a,b,c)};window.cls||(window.cls={});cls.CSSLayoutView=function(a,b,c){this.createView=function(a){this._container=a;if(window.element_layout.has_selected_element()){a.querySelector("layout-container")||a.clearAndRender(["div",["layout-container","handler","spotlight-box"],["offsets-container"],"class","padding"]);window.element_layout.get_layout_values(this._update_layout_bound);window.element_layout.get_offset_values(this._update_offsets_bound)}else a.innerHTML=""};this.update_layout=function(a){var b=this._container.querySelector("layout-container");b&&(a?b.clearAndRender(window.element_layout.get_metrics_template(a)):b.innerHTML="")};this.update_offsets=function(a){var b=this._container.querySelector("offsets-container");b&&(a?b.clearAndRender(window.templates.offset_values(a)):b.innerHTML="")};this._on_setting_change=function(a){a.id=="dom"&&a.key=="show-id_and_classes-in-breadcrumb"&&window.element_layout.get_offset_values(this.update_offsets.bind(this))};this._init=function(){this.required_services=["ecmascript-debugger"];this.init(a,b,c);this._container=null;this._update_layout_bound=this.update_layout.bind(this);this._update_offsets_bound=this.update_offsets.bind(this);window.messages.addListener("setting-changed",this._on_setting_change.bind(this))};this._init()};window.cls||(window.cls={});window.cls.ColorPickerView=function(a,b,c){this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this.createView=function(a){};this.show_color_picker=function(a,b){};var d=window.cls.ColorPickerView.CSS_CLASS_TARGET,e="color-picker",f=5;this.__defineGetter__("is_opened",function(){return this._edit_context});this.__defineSetter__("is_opened",function(){});this._color_cb=function(a,b){var c=this._edit_context;c.current_color=a;if(c.callback)c.callback(a);else{this._color_notation||(this._color_notation=this._get_color_notation());var d=a.type==="keyword"?a.cssvalue:window.helpers.get_color_in_notation(a,this._color_notation);c.ele_value.firstChild.textContent=d;c.ele_color_swatch.removeClass("special");c.ele_color_swatch.querySelector(".color-swatch-fg-color").style.backgroundColor=a.rgba;var e=c.ele_value.get_ancestor(".css-property-value");if(e){var f=window.helpers.escape_input(e.textContent),g="";c.is_svg?g='rule.setAttribute("'+c.prop_name+'", '+'"'+f+'")':g='rule.style.removeProperty("'+c.prop_name+'");'+'rule.style.setProperty("'+c.prop_name+'", '+'"'+f+'", '+'"'+(c.is_important?"important":"")+'")';var h=[c.rt_id,0,0,g,[["rule",c.rule_id]]],i=b?this._tag_manager.set_callback(null,b):this._tag_manager.IGNORE_RESPONSE;this._es_debugger.requestEval(i,h)}}};this._color_cb_bound=this._color_cb.bind(this);this.createView=function(a){this._color_picker=new ColorPicker(this._color_cb_bound,this._edit_context.initial_color);a.style.visibility="hidden";a.render(this._color_picker.render(this._edit_context.alpha_disabled,this._edit_context.palette_disabled));this._panel_ele=this._edit_context.ele_value.get_ancestor("container");this._panel_ele&&this._panel_ele.addEventListener("mousewheel",this._prevent_scroll,!0);this._position_color_picker();this._edit_context.z_index&&(a.style.zIndex=this._edit_context.z_index);a.style.visibility="visible";window.addEventListener("click",this._hide_on_outside_click,!0)};this.ondestroy=function(){this._tooltip.hide();this._ele&&this._ele.parentNode.removeChild(this._ele);this._edit_context&&this._edit_context.ele_value.removeClass("color-picker-active-item");this._panel_ele&&this._panel_ele.removeEventListener("mousewheel",this._prevent_scroll,!0);window.removeEventListener("click",this._hide_on_outside_click,!0);this._edit_context=null;this._ele=null};this._prevent_scroll=function(a){a.preventDefault()}.bind(this);this.show_color_picker=function(a,b){this.is_opened&&this.ondestroy();var c=a.parentNode,d=a.get_ancestor(".css-declaration"),e=d&&d.querySelector(".css-property"),f=d&&d.querySelector(".css-property-value"),g=e&&e.textContent,h=f&&f.textContent,i=c.textContent,j=(new Color).parseCSSColor(i);this._edit_context=b||{initial_color:j,current_color:j,ele_value:c,ele_color_swatch:a,prop_name:g,vertical_anchor_selector:".color-swatch",horizontal_anchor_selector:"container",is_important:Boolean(f.querySelector(".css-priority")),rt_id:Number(c.get_attr("parent-node-chain","rt-id")),rule_id:Number(c.get_attr("parent-node-chain","rule-id"))||Number(c.get_attr("parent-node-chain","obj-id")),is_svg:c.get_attr("parent-node-chain","rule-id")=="element-svg"};if(this._edit_context.initial_color)this._finalize_show_color_picker();else{var k=({inherit:g,currentColor:"color"})[i],l=Number(c.get_attr("parent-node-chain","obj-id")),m='window.getComputedStyle(ele, null).getPropertyValue("'+k+'");',n=this._tag_manager.set_callback(this,this._handle_get_color,[i]),o=[this._edit_context.rt_id,0,0,m,[["ele",l]]];this._es_debugger.requestEval(n,o)}};this.cancel_edit_color=function(){if(this.is_opened){this._color_cb_bound(this._edit_context.initial_color,window.element_style.update);this.ondestroy();return!0}return!1};this._hide_on_outside_click=function(a){if(!ContextMenu.get_instance().is_visible&&!(a.target.get_ancestor("."+e)||a.target.get_ancestor(".color-picker-palette")||a.target.get_ancestor(".tooltip-container"))){this.ondestroy();if(!a.target.get_ancestor(".color-swatch")){a.stopPropagation();a.preventDefault();window.element_style.update()}}}.bind(this);this._handle_get_color=function(a,b,c){var d=1,e=2;if(!a&&b[d]=="string"&&this._edit_context){var f=this._edit_context;if(f.initial_color=(new Color).parseCSSColor(b[e])){f.current_color=f.initial_color;f.initial_color.cssvalue=c;f.initial_color.type=f.initial_color.KEYWORD;this._finalize_show_color_picker()}}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"_handle_get_color failed in ColorPickerView")};this._finalize_show_color_picker=function(){this._ele=document.createElement("div");this._ele.className=e;document.documentElement.appendChild(this._ele);this._edit_context.ele_value.addClass("color-picker-active-item");this.createView(this._ele)};this._on_setting_change=function(a){a.key==="color-notation"&&(this._color_notation=this._get_color_notation())};this._get_color_notation=function(){return window.settings["dom-side-panel"].get("color-notation")};this._position_color_picker=function(){var a=2,b=this._edit_context,c=this._ele.getBoundingClientRect(),d=b.ele_value.querySelector(b.vertical_anchor_selector),e=b.ele_value.get_ancestor(b.horizontal_anchor_selector),g=(d||b.ele_value).getBoundingClientRect(),h=(e||b.ele_value).getBoundingClientRect(),i=this._ele.querySelector(".color-picker-arrow"),j=i.getBoundingClientRect(),k=Math.max(f,Math.min(g.top-Math.round(c.height/2-g.height/2),window.innerHeight-c.height-f)),l=Math.max(f,Math.min(g.top+Math.round(g.height/2-j.height/2)-k,c.height-j.height-f));i.style.top=l+"px";this._ele.style.top=k+"px";if(h.left>c.width)this._ele.style.left=h.left-c.width+a+"px";else if(window.innerWidth-h.right>c.width){this._ele.addClass("right-aligned");this._ele.style.left=h.right-a+"px"}else{this._ele.addClass("right-aligned");this._ele.style.left=g.right+j.width+a+"px"}};this._update_palette_dropdown=function(){var a=this._ele.querySelector(".color-picker-palette-dropdown");a&&a.re_render(window.templates.color_picker_palette_dropdown())};this._init=function(a,b,c){this.init(a,b,c);this._color_picker=null;this._edit_context=null;this._color_notation=null;this._ele=null;this._panel_ele=null;this._tooltip=Tooltips.register("color-palette",{type:Tooltips.TYPE_SUPPORT_CONTEXT,set_selected:!0,preferred_position:"top"});this._tooltip.ontooltip=function(a,b){var c=b.getBoundingClientRect();c.mouse_x=c.left-5;this.show(window.templates.color_picker_palette(),c)};window.messages.addListener("setting-changed",this._on_setting_change.bind(this));window.eventHandlers.click["show-color-picker"]=function(a,b){this.show_color_picker(a.target.get_ancestor(".color-swatch"))}.bind(this);window.eventHandlers.click["color-picker-cancel"]=function(a,b){this.cancel_edit_color()}.bind(this);window.eventHandlers.click["color-picker-ok"]=function(a,b){this.ondestroy();window.element_style.update()}.bind(this);window.eventHandlers.click["set-color-picker-color"]=function(a,b){!this.is_opened||this._color_picker.update(b.getAttribute("data-color"))}.bind(this);window.eventHandlers.click["add-color-picker-color"]=function(a,b){if(!!this.is_opened){cls.ColorPalette.get_instance().store_color(this._edit_context.current_color.hex);b.get_ancestor(".color-picker-palette").re_render(window.templates.color_picker_palette());this._update_palette_dropdown()}}.bind(this);var d=[{callback:function(a,b){if(b.get_ancestor("[data-color-id]"))return{label:ui_strings.M_CONTEXTMENU_DELETE_COLOR,handler:function(a,b){var c=a.target.has_attr("parent-node-chain","data-color-id"),d=c&&Number(c.getAttribute("data-color-id"));d&&cls.ColorPalette.get_instance().delete_color(d)&&c.parentNode.removeChild(c);this._update_palette_dropdown()}.bind(this)}}.bind(this)}];ContextMenu.get_instance().register("color-picker-palette",d)};this._init(a,b,c)};window.cls.ColorPickerView.CSS_CLASS_TARGET="color-picker-target-element";window.cls.ColorPickerView.prototype=ViewBase;window.cls||(window.cls={});cls.CSSInspectorActions=function(a){this.editor=new Editor(this);this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this._element_style=window.element_style;this._active_container=null;this._target=null;var b=window.cls.ColorPickerView.CSS_CLASS_TARGET,c=0;this.getFirstTarget=function(){return this._active_container&&this._active_container.querySelector(".css-declaration")};this._clear_selected=function(){this._target&&this._target.removeClass("selected")};this.setSelected=function(a){if(a){this._target&&this._target.removeClass("selected");if(!this._active_container.contains(a)){var b=a.querySelector("input");if(b=b&&b.getAttribute("data-rule-id")){var c=this._active_container.getElementsByTagName("input");for(var d=0,e;e=c[d];d++){var f=e.getAttribute("data-rule-id");if(f&&f==b)break}}e&&(a=e.parentNode)}(this._target=a).addClass("selected")}};this.resetTarget=function(a){if(this._active_container&&this._target&&!this._active_container.parentNode){var b=this._active_container.getElementsByTagName(this._target.nodeName),c=null,d=0;for(;(c=b[d])&&c!=this._target;d++);if(c&&(c=a.getElementsByTagName(this._target.nodeName)[d])){this._active_container=a;this.setSelected(c)}}};this._nav_filters={_default:function(a){return a.hasClass("css-declaration")&&a.parentElement.hasAttribute("rule-id")||a.nodeName.toLowerCase()=="header"||a.getAttribute("handler")=="open-resource-tab"},header:function(a){return a.nodeName.toLowerCase()=="header"},property_editable:function(a){return a.hasClass("css-declaration")&&a.parentElement.hasAttribute("rule-id")}};this.setContainer=function(a,b){this.resetTarget(b);this._active_container=b;if(!this._target||!this._target.parentElement)this._target=this.getFirstTarget();this._target&&!this._target.hasClass("selected")&&this.setSelected(this._target)};this.edit_onclick=function(a){if(this.editor){if(!this.editor.onclick(a))return!1;this.mode=d;this._element_style.update()}return!0}.bind(this);this.blur_edit_mode=function(){this.editor.escape();this.mode=d;this._clear_selected()};this.set_property=function(a,b,c,d,e){this.editor.context_edit_mode==this.editor.MODE_SVG?this.set_property_svg(a,b,c,d,e):this.set_property_css(a,b,c,d,e)};this.set_property_css=function(a,b,c,d,e){var f=this.normalize_property(c.property),g="";d&&(g='object.style.removeProperty("'+this.normalize_property(d)+'");');g+='object.style.setProperty("'+f+'", "'+window.helpers.escape_input(c.value)+'", '+(c.priority?'"important"':null)+");";var h=typeof e=="function"?this._tag_manager.set_callback(null,e):cls.TagManager.IGNORE_RESPONSE;this._es_debugger.requestEval(h,[a,0,0,g,[["object",b]]])};this.set_property_svg=function(a,b,c,d,e){var f=this.normalize_property(c.property),g="";d&&(g='object.removeAttribute("'+this.normalize_property(d)+'");');g+='object.setAttribute("'+f+'", "'+window.helpers.escape_input(c.value)+'"'+");";var h=typeof e=="function"?this._tag_manager.set_callback(null,e):cls.TagManager.IGNORE_RESPONSE;this._es_debugger.requestEval(h,[a,0,0,g,[["object",b]]])};this.remove_property=function(a,b,c,d){this.editor.context_edit_mode==this.editor.MODE_SVG?this.remove_property_svg(a,b,c,d):this.remove_property_css(a,b,c,d)};this.remove_property_css=function(a,b,c,d){c=this.normalize_property(c);var e=this._element_style.disabled_style_dec_list[b];e&&this._element_style.remove_property(e.declarations,c);var f='object.style.removeProperty("'+c+'");';c=="border-radius"?f='object.style.removeProperty("border-top-left-radius");object.style.removeProperty("border-top-right-radius");object.style.removeProperty("border-bottom-left-radius");object.style.removeProperty("border-bottom-right-radius");':c=="-o-transition"&&(f='object.style.removeProperty("-o-transition-delay");object.style.removeProperty("-o-transition-duration");object.style.removeProperty("-o-transition-property");object.style.removeProperty("-o-transition-timing-function");');var g=typeof d=="function"?this._tag_manager.set_callback(null,d):cls.TagManager.IGNORE_RESPONSE;this._es_debugger.requestEval(g,[a,0,0,f,[["object",b]]])};this.remove_property_svg=function(a,b,c,d){c=this.normalize_property(c);var e=this._element_style.disabled_style_dec_list[b];e&&this._element_style.remove_property(e.declarations,c);var f='object.removeAttribute("'+c+'");',g=typeof d=="function"?this._tag_manager.set_callback(null,d):cls.TagManager.IGNORE_RESPONSE;this._es_debugger.requestEval(g,[a,0,0,f,[["object",b]]])};this.restore_property=function(){this.editor.context_edit_mode==this.editor.MODE_SVG?this.restore_property_svg():this.restore_property_css()};this.restore_property_css=function(){var a=this.editor.context_rule_id,b=this.editor.get_properties()[c],d='object.style.removeProperty("'+b+'");',e=this.
editor.context_cur_prop,f=this._element_style.disabled_style_dec_list[a],g=f&&this._element_style.get_declaration(f,e);e&&!g&&(d+='object.style.setProperty("'+e+'", "'+window.helpers.escape_input(this.editor.context_cur_value)+'", '+(this.editor.context_cur_priority?'"important"':null)+");");var h=this._element_style.get_rule_by_id(a),i=h&&this._element_style.get_declaration(h,b);i&&!i.is_disabled&&(d+='object.style.setProperty("'+b+'", "'+window.helpers.escape_input(i.value)+'", '+(i.priority?'"important"':null)+");");if(d){var j=this._tag_manager.set_callback(null,this._element_style.update);this._es_debugger.requestEval(j,[this.editor.context_rt_id,0,0,d,[["object",a]]])}};this.restore_property_svg=function(){var a=this.editor.context_rule_id,b=this._element_style.disabled_style_dec_list[a],d=this.editor.get_properties()[c],e='object.removeAttribute("'+d+'");',f=this.editor.context_cur_prop,g=this._element_style.disabled_style_dec_list[a],h=g&&this._element_style.get_declaration(g,f);f&&!h&&(e+='object.setAttribute("'+f+'", "'+this.editor.context_cur_value.replace(/"/g,"'")+'"'+");");var i=this._element_style.get_rule_by_id(a),j=i&&this._element_style.get_declaration(i,d);j&&!j.is_disabled&&(e+='object.setAttribute("'+d+'", "'+window.helpers.escape_input(j.value)+'"'+");");if(e){var k=this._tag_manager.set_callback(null,this._element_style.update);this._es_debugger.requestEval(k,[this.editor.context_rt_id,0,0,e,[["object",a]]])}};this.enable_property=function(a,b,c,d){var e=b||this._element_style.get_inline_obj_id(c),f=this._element_style.disabled_style_dec_list[e],g=this._element_style.remove_property(f.declarations,d),h=g.declarations;h&&this.set_property(a,b||c,h[0],null,this._element_style.update)};this.disable_property=function(a,b,c,d){var e=b||this._element_style.get_inline_obj_id(c),f=b?this._element_style.get_rule_by_id(b):this._element_style.get_inline_style_dec_by_id(c),g=this._element_style.disabled_style_dec_list;g[e]||(g[e]=this._element_style.get_new_style_dec());this.remove_property(a,b||c,d,this._element_style.update);this._element_style.copy_property(f.declarations,g[e].declarations,d);this._element_style.remove_property(f.declarations,d)};this.disable_all_properties=function(a,b,c){var d=b||this._element_style.get_inline_obj_id(c),e=b?this._element_style.get_rule_by_id(b):this._element_style.get_inline_style_dec_by_id(c),f=this._element_style.disabled_style_dec_list;f[d]||(f[d]=this._element_style.get_new_style_dec());if(this._element_style.is_some_declaration_enabled(e)){while(e.declarations.length){var g=e.declarations[0].property;this._element_style.copy_property(e.declarations,f[d].declarations,g);this._element_style.remove_property(e.declarations,g)}var h=this._tag_manager.set_callback(null,this._element_style.update),i=[a,0,0,"object.style.cssText='';",[["object",b]]];this._es_debugger.requestEval(h,i)}};this.normalize_property=function(a){return(a||"").trim().toLowerCase()};var d="default",e="edit",f="edit-mode",g=-1,h=1;this.id=a;this._broker=ActionBroker.get_instance();this._broker.register_handler(this);this._handlers={};this._mode=d;this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT,edit:ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT};this.__defineSetter__("mode",function(a){if(!!this._active_container){a===e?this._active_container.addClass(f):this._active_container.removeClass(f);this._mode=a}});this.__defineGetter__("mode",function(){return this._mode});this.get_action_list=function(){var a=[];for(var b in this._handlers)a.push(b);return a};this._handlers["nav-up"]=function(a,b){if(this._target){var c=this._target.nodeName.toLowerCase()=="header"&&this._target.parentElement.getAttribute("handler")?this._nav_filters.header:this._nav_filters._default,d=this._target.getPreviousWithFilter(this._active_container,c);this.setSelected(d);return!1}opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"keyboard_handler: no target to move")}.bind(this);this._handlers["nav-down"]=function(a,b){if(this._target){var c=this._target.nodeName.toLowerCase()=="header"&&!this._target.parentElement.getAttribute("handler")?this._nav_filters.header:this._nav_filters._default,d=this._target.getNextWithFilter(this._active_container,c);this.setSelected(d);return!1}opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"keyboard_handler: no target to move")}.bind(this);this._handlers["dispatch-dbl-click"]=function(a,b){this._target&&this._target.dispatchMouseEvent("dblclick");return!1}.bind(this);this._handlers["edit-css"]=function(a,c){window.views["color-selector"].ondestroy();var d=a.target.get_ancestor(".css-property")||a.target.get_ancestor(".css-property-value");if(d){if(d.parentElement.parentElement.hasAttribute("rule-id")&&!d.parentNode.hasClass(b)){this.mode=e;this.setSelected(d.parentNode);this.editor.edit(a,d.parentNode)}}else if(a.target.hasClass("css-declaration")&&a.target.parentElement.hasAttribute("rule-id")&&!a.target.hasClass(b)){this.mode=e;this.setSelected(a.target);this.editor.edit(a)}}.bind(this);this._handlers["enable-disable-property"]=function(a,b){var c=b.checked,d=parseInt(b.get_attr("parent-node-chain","rt-id")),e=parseInt(b.get_attr("parent-node-chain","rule-id"))||null,f=parseInt(b.get_attr("parent-node-chain","obj-id"))||null;this.editor.context_edit_mode=a.target.get_attr("parent-node-chain","rule-id")=="element-svg"?this.editor.MODE_SVG:this.editor.MODE_CSS;c?this.enable_property(d,e,f,b.getAttribute("data-property")):this.disable_property(d,e,f,b.getAttribute("data-property"))}.bind(this);this.target_enter=function(a,b){this._target&&this._target.releaseEvent("click")};this._handlers["edit-previous"]=function(a,b){if(!this.editor.nav_previous(a,g)){var c=this._target.getPreviousWithFilter(this._active_container,this._nav_filters.property_editable);if(c){this.setSelected(c);this.editor.edit(null,this._target);this.editor.focus_last_token()}}return!1}.bind(this);this._handlers["edit-next"]=function(a,b){if(!this.editor.nav_next(a,h)){var c=this._target.getNextWithFilter(this._active_container,this._nav_filters.property_editable);if(c){this.setSelected(c);this.editor.edit(null,this._target);this.editor.focus_first_token()}}return!1}.bind(this);this._handlers["autocomplete-previous"]=function(a,b){this.editor.autocomplete(a,g);return!1}.bind(this);this._handlers["autocomplete-next"]=function(a,b){this.editor.autocomplete(a,h);return!1}.bind(this);this._handlers["exit-edit"]=function(a,b){if(!this.editor.escape()){var c=this._target;this._handlers["nav-up"]();c.parentElement.removeChild(c)}this.mode=d;return!1}.bind(this);this._handlers["submit-edit-and-new-edit"]=function(a,b){if(!this.editor.enter(a)){this.mode=d;this._element_style.update();if(!this._target.textContent){var c=this._target;this._handlers["nav-up"](a,b);c.parentElement.removeChild(c)}}return!1}.bind(this);this._handlers["insert-declaration-edit"]=function(a,b){this.mode=e;this.editor.insert_declaration_edit(a,b)}.bind(this);this._handlers["remove-property"]=function(a,b){var c=parseInt(b.get_attr("parent-node-chain","rule-id")),d=parseInt(b.get_attr("parent-node-chain","rt-id")),e=parseInt(b.get_attr("parent-node-chain","obj-id")),f=a.target.get_ancestor(".css-declaration"),g=f&&f.querySelector(".css-property"),h=g&&g.textContent;h&&this.remove_property(d,c,h,this._element_style.update)}.bind(this);this._handlers["disable-all-properties"]=function(a,b){var c=parseInt(a.target.get_attr("parent-node-chain","rt-id")),d=parseInt(a.target.get_attr("parent-node-chain","rule-id")),e=parseInt(a.target.get_attr("parent-node-chain","obj-id"));this.disable_all_properties(c,d,e)}.bind(this);this.focus=function(a,b){this.mode==d&&this.setContainer(a,b)};this.blur=function(a){this.mode==d?this._clear_selected():this.blur_edit_mode()};this.onclick=function(a){if(this.mode==e){this.edit_onclick(a)&&a.stopPropagation();return!1}};this.handle=function(a,b,c){if(a in this._handlers)return this._handlers[a](b,c)}};eventHandlers.dblclick["edit-css"]=function(a,b){this.broker.dispatch_action("css-inspector","edit-css",a,b)};eventHandlers.click["enable-disable"]=function(a,b){this.broker.dispatch_action("css-inspector","enable-disable-property",a,b)};window.cls||(window.cls={});cls.DOMSidePanelView=function(a,b,c,d){this._super_createView=this.createView;this.required_services=["ecmascript-debugger"];this.createView=function(a){this._super_createView(a);var b=this.getToolbarControl(a,"css-inspector-text-search"),c=window.element_style.get_search_term();b&&c&&(b.value=c)};this.init(a,b,c,d)};cls.DOMSidePanelView.prototype=SidePanelView.prototype;cls.DOMSidePanelView.create_ui_widgets=function(){var a=window.element_style;new ToolbarConfig("dom-side-panel",null,[{handler:"css-inspector-text-search",title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]);new Settings("css-comp-style",{"show-initial-values":!1},{"show-initial-values":ui_strings.S_SWITCH_SHOW_INITIAL_VALUES},{checkboxes:["show-initial-values"]},null,"document");new Settings("dom-side-panel",{"show-longhand-properties":!1,"color-notation":"hhex"},{"show-longhand-properties":ui_strings.S_EXPAND_SHORTHANDS,"color-notation":ui_strings.S_COLOR_NOTATION},{contextmenu:["show-longhand-properties"],customSettings:["color-notation"]},{"color-notation":function(a){return(new StylesheetTemplates).color_notation_setting(a)}},"document",{"show-longhand-properties":function(b){window.settings["css-inspector"].set("show-longhand-properties",b);a.update()}});new ToolbarConfig("css-comp-style");new Switches("css-comp-style",["show-initial-values"]);["link","visited","hover","active","focus","selection"].forEach(function(b){window.settings["css-inspector"].get(b)&&a.add_pseudo_item(b)});new ToolbarConfig("css-inspector");new CstSelectToolbarSettings("css-inspector",["link","visited","hover","active","focus","selection"],"pseudo-items");var b=ActionBroker.get_instance(),c=ContextMenu.get_instance();c.register("style-inspector-rule",[{callback:function(a,c){var d=[{label:ui_strings.M_CONTEXTMENU_DISABLE_DECLARATIONS,handler:function(a,c){b.dispatch_action("css-inspector","disable-all-properties",a,c)}},{label:ui_strings.M_CONTEXTMENU_ADD_DECLARATION,handler:function(a,c){b.dispatch_action("css-inspector","insert-declaration-edit",a,c)}}];while(c&&!c.hasClass("css-declaration"))c=c.parentElement;c&&d.push({label:ui_strings.M_CONTEXTMENU_EDIT_DECLARATION,handler:function(a,c){b.dispatch_action("css-inspector","edit-css",a,c)}},{label:ui_strings.M_CONTEXTMENU_REMOVE_DECLARATION,handler:function(a,c){b.dispatch_action("css-inspector","remove-property",a,c)}});var e=c&&c.querySelector(".color-swatch");e&&d.push(ContextMenu.separator,{label:ui_strings.M_CONTEXTMENU_OPEN_COLOR_PICKER,handler:function(a,b){window.views["color-selector"].show_color_picker(e)}});return d}}]);window.eventHandlers.change["color-notation"]=function(a,b){window.settings["dom-side-panel"].set("color-notation",b.value);window.element_style.update()}};window.cls||(window.cls={});cls.NewStyle=function(a,b,c){this._es_debugger=window.services["ecmascript-debugger"];this._tag_manager=cls.TagManager.get_instance();this._template=function(a){return["div",["_auto_height_textarea",a||"","handler","css-update-new-style","class","css-new-style-sheet"],["span",ui_strings.S_BUTTON_TEXT_APPLY,"class","ui-button","handler","apply-new-style","tabindex","1"],"class","padding"]};this.createView=function(a){var b=this._rt_style_map[this._rt_id]?this._rt_style_map[this._rt_id].css_text:"",c=a.clearAndRender(this._template(b));this._textarea=c.querySelector("textarea");this._textarea.value=b};this._update_style=function(){var a=this._rt_style_map[this._rt_id];if(a&&a.stylesheet_id){a.css_text=this._textarea.value;var b='try{style.textContent = "'+window.helpers.escape_input(a.css_text.replace(/\r\n/g,"\n"))+'";}catch(e){};',c=this._tag_manager.set_callback(this,window.element_style.update);this._es_debugger.requestEval(c,[this._rt_id,0,0,b,[["style",a.stylesheet_id]]])}else this._create_new_stylesheet()};this._create_new_stylesheet=function(a,b){var c=this._tag_manager.set_callback(this,this._handle_new_style),d="(function() {  return (document.head || document.body || document.documentElement).    appendChild(document.createElement('style'));})();";this._es_debugger.requestEval(c,[this._rt_id,0,0,d])};this._handle_new_style=function(a,b){var c=0,d=3,e=0;if(a||b[c]!="completed"||!b[d])opera.postError("Not possible to add a new style elment.");else{this._rt_style_map[this._rt_id].stylesheet_id=b[d][e];this._update_style()}};this._on_element_selected=function(a){if(a.rt_id!=this._rt_id){this._rt_id=a.rt_id;this._rt_style_map[a.rt_id]||(this._rt_style_map[a.rt_id]={stylesheet_id:0,css_text:""});this._textarea&&(this._textarea.value=this._rt_style_map[this._rt_id].css_text)}};this._init=function(a,b,c){this.required_services=["ecmascript-debugger"];this._rt_id=0;this._rt_style_map={};this._textarea=null;View.prototype.init.call(this,a,b,c)};window.messages.addListener("element-selected",this._on_element_selected.bind(this));window.eventHandlers.click["apply-new-style"]=this._update_style.bind(this);this._init(a,b,c)};window.cls||(window.cls={});window.cls.Client=function(){if(arguments.callee.instance)return arguments.callee.instance;arguments.callee.instance=this;var a=this,b=[],c=!0,d=0,e=[];this.current_client=null;var f=function(a,b){Overlay.get_instance().hide();a.connected=!0;if(d){clearTimeout(d);d=0}b=b.split(",");if(b.indexOf("stp-1")!=-1){messages.post("host-state",{state:global_state.ui_framework.spin_state="ready"});services.scope.requestHostInfo()}else{var c=b.indexOf("window-manager")!=-1,e=0,f="",g=!c&&"protocol-3"||"";if(!g){for(;(f=b[e])&&f.slice(0,5)!="core-";e++);f?f=="core-2-5"?g="core-2-4":g=f:c&&(g="protocol-4")}k.call(new XMLHttpRequest,g)}},g=function(b){var c=b.port;a.current_client=null;if(b.connected){window.window_manager_data.clear_debug_context();messages.post("host-state",{state:global_state.ui_framework.spin_state="inactive"});window.client.setup()}else if(a.connection_is_remote(b)){var d=document.getElementById("remote-debug-settings");if(d){var e=window.templates.remote_debug_settings(c+1);d.clearAndRender(e)}var f=UI.get_instance().get_button("toggle-remote-debug-overlay");f&&f.addClass("alert");Overlay.get_instance().set_info_content(["p",ui_strings.S_INFO_ERROR_LISTENING.replace(/%s/,c)]);settings.debug_remote_setting.set("debug-remote",!1);window.helpers.setCookie("debug-remote","false")}else j(ui_strings.S_INFO_ERROR_LISTENING.replace(/%s/,c),c)},h=function(b){return function(){a.current_client&&a.current_client.id==b.id&&g(b)}},i=function(){var a=settings.debug_remote_setting.get("debug-remote")||JSON.parse(window.helpers.getCookie("debug-remote"))||!1;return a&&(settings.debug_remote_setting.get("port")||JSON.parse(window.helpers.getCookie("port")))||0};this.connection_is_remote=function(a){return a.port!=0};this.setup=function(){window.services.scope.reset();var a=i(),c={id:b.length+1,connected:!1,port:a};this.current_client=c;b.push(c);window.ini||(window.ini={debug:!1});window.messages.post("reset-state");if(!opera.scopeAddClient){cls.ScopeHTTPInterface.call(opera);cls.ScopeHTTPInterface.is_enabled=!0}opera.stpVersion||cls.STP_0_Wrapper.call(opera);var d=e.push(h(c))-1;opera.scopeAddClient(f.bind(this,c),cls.ServiceBase.get_generic_message_handler(),e[d],a);window.ini.debug&&!opera.scopeHTTPInterface&&cls.debug.wrap_transmit();this._create_ui(c)};this._create_ui=function(a){var b=this.connection_is_remote(a),e=a.port;if(!b&&window.topCell){this.create_top_level_views(window.services);window.topCell&&window.topCell.cleanUp()}if(c){c=!1;d=setTimeout(function(){j(ui_strings.S_INFO_WAITING_FORHOST_CONNECTION.replace(/%s/,e),e)},250)}else if(b){var f=UI.get_instance().get_button("toggle-remote-debug-overlay");f&&f.removeClass("alert");Overlay.get_instance().set_info_content(window.templates.remote_debug_waiting_help(e));var g=document.getElementById("remote-debug-settings");if(g){var h=window.templates.remote_debug_waiting(e);g.clearAndRender(h)}}else j(ui_strings.S_INFO_WAITING_FORHOST_CONNECTION.replace(/%s/,e),e)};var j=function(a,b){viewport.innerHTML="<div class='padding' id='waiting-for-connection'><div class='info-box'>"+a+(b?"<p><span class='ui-button' handler='cancel-remote-debug' tabindex='1'>"+ui_strings.S_BUTTON_CANCEL_REMOTE_DEBUG+"</span></p>":"")+"</div>"+"</div>";var c=document.querySelector("window-controls");c&&c.parentNode.removeChild(c);document.documentElement.render(templates.window_controls_close())},k=function(a){var b=location.href,c=location.protocol+"//",d=location.hostname,e=location.port?":"+location.port:"",f=location.pathname,g=f.slice(f.lastIndexOf("/")+1),h="/app/fall-back-urls.json",i=b.indexOf("cutting-edge")>-1&&"cutting-edge"||"default",j=location.search;g=g.indexOf(".")>-1&&g||"";this.onload=function(){if(this.status!=200)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"could not load fallback urls. (during local development this is OK!)");else{var b=JSON.parse(this.responseText);b&&b[i]&&a in b[i]?confirm(ui_strings.S_CONFIRM_LOAD_COMPATIBLE_VERSION)&&(location=c+d+e+b[i][a]+g+j):alert(ui_strings.S_INFO_NO_COMPATIBLE_VERSION)}};this.open("GET",c+d+e+h);this.send(null)};this.handle_fallback=function(a){k.call(new XMLHttpRequest,a)};this.create_top_level_views=function(a){var b=ui_framework.layouts,c=UI.get_instance(),d=c.register_modebar("dom",HorizontalNavigation);new CompositeView("dom_mode",ui_strings.M_VIEW_LABEL_COMPOSITE_DOM,b.dom_rough_layout,"dom",a);new CompositeView("js_mode",ui_strings.M_VIEW_LABEL_COMPOSITE_SCRIPTS,b.js_rough_layout,"scripts",a);new CompositeView("network_mode",ui_strings.M_VIEW_LABEL_NETWORK,b.network_rough_layout,null,a);new CompositeView("storage",ui_strings.M_VIEW_LABEL_STORAGE,b.storage_rough_layout,null,a);new CompositeView("console_mode",ui_strings.M_VIEW_LABEL_COMPOSITE_ERROR_CONSOLE,b.error_console_rough_layout,null,a);new CompositeView("utils",ui_strings.M_VIEW_LABEL_UTILITIES,b.utils_rough_layout,null,a);new CompositeView("resource_panel",ui_strings.M_VIEW_LABEL_RESOURCES,b.resource_rough_layout);new CompositeView("console_panel",ui_strings.M_VIEW_LABEL_COMMAND_LINE,b.console_rough_layout);new CompositeView("profiler_mode",ui_strings.M_VIEW_LABEL_PROFILER,b.profiler_rough_layout,null,a)};this.create_window_controls=function(){var a=document.querySelector("window-controls");a&&a.parentNode.removeChild(a);var b=window.opera.attached,c=[new Button("toggle-console","",ui_strings.S_BUTTON_TOGGLE_CONSOLE),new ToolbarSeparator,new Button("toggle-settings-overlay","",ui_strings.S_BUTTON_TOGGLE_SETTINGS,"toggle-overlay",{"data-overlay-id":"settings-overlay"}),new Button("toggle-remote-debug-overlay","",ui_strings.S_BUTTON_TOGGLE_REMOTE_DEBUG,"toggle-overlay",{"data-overlay-id":"remote-debug-overlay"}),new ToolbarSeparator,window["cst-selects"]["debugger-menu"],new Button("top-window-toggle-attach",b?"attached":"",b?ui_strings.S_SWITCH_DETACH_WINDOW:ui_strings.S_SWITCH_ATTACH_WINDOW)];b&&c.push(new Button("top-window-close","",ui_strings.S_BUTTON_LABEL_CLOSE_WINDOW));var d=document.documentElement.render(templates.window_controls(c));window.messages.post("window-controls-created",{window_controls:d});var e=UI.get_instance().get_button("toggle-remote-debug-overlay");e&&(this.current_client&&this.connection_is_remote(this.current_client)?e.addClass("remote-active"):e.removeClass("remote-active"))};this.on_services_created=function(){this.create_top_level_views(window.services);this.setup_top_cell(window.services);this.create_window_controls();if(!arguments.callee._called_once){window.opera.attached&&topCell.tab.changeStyleProperty("padding-right",80);if(window.ini.debug&&window.settings.debug.get("show-as-tab")){ui_framework.layouts.main_layout.tabs.push("debug_new");window.topCell.tab.addTab(new Tab("debug_new",window.views.debug_new.name));window.topCell.onresize()}var a=ui_framework.layouts.error_console_rough_layout.children[0].tabs,b="",c=1;for(c=1;b=a[c];c++){views[b].is_hidden=!0;topCell.disableTab(b,!0)}arguments.callee._called_once=!0}};this.setup_top_cell=function(a){var b=UI.get_instance().retrieve_last_selected_view(),c=UIWindowBase.close_all_windows(),d=viewport.getElementsByTagName("tab"),e=0,f=null;for(;f=d[e];e++)f.hasClass("active")&&messages.post("hide-view",{id:f.getAttribute("ref-id")});for(var g in window.views)window.views[g].reset_containers();viewport.innerHTML="";new TopCell(ui_framework.layouts.main_layout,null,null,TopToolbar,a);windowsDropDown.update();var h=global_state&&global_state.ui_framework.last_selected_tab;h&&views[h]&&!views[h].isvisible()&&window.topCell.showView(h);global_state.ui_framework.spin_state&&messages.post("host-state",{state:global_state.ui_framework.spin_state});setTimeout(function(){c.forEach(function(a){UIWindowBase.showWindow(a)})},250);if(b){var i=window.services["ecmascript-debugger"];this._on_profile_enabled_cb=this._profile_enabled.bind(this,b);window.messages.addListener("profile-enabled",this._on_profile_enabled_cb)}};this._profile_enabled=function(a,b){if(b.profile==window.app.profiles.DEFAULT){var c=window.tag_manager.set_callback(this,function(b,c){const d=0;c[d]||this._show_last_selected_view(a)}),d=window.services["ecmascript-debugger"];d.requestGetSelectedObject(c)}else this._show_last_selected_view(a);window.messages.removeListener("profile-enabled",this._on_profile_enabled_cb)};this._show_last_selected_view=function(a){window.views[a]&&window.views[a].is_hidden&&window.views[a].fallback_view_id&&(a=window.views[a].fallback_view_id);UI.get_instance().show_view(a)};window.app.addListener("services-created",this.on_services_created.bind(this))};ui_framework.layouts.error_console_rough_layout={dir:"v",width:700,height:700,children:[{height:200,tabs:["console-all","console-script","console-css","console-html","console-svg","console-storage","console-other"]}]};ui_framework.layouts.profiler_rough_layout={dir:"v",width:1e3,height:1e3,children:[{height:1e3,tabbar:{tabs:["profiler_all"],is_hidden:!0}}]};ui_framework.layouts.environment_rough_layout={dir:"v",width:700,height:700,children:[{height:200,tabs:["environment"]}]};ui_framework.layouts.dom_rough_layout={dir:"h",width:700,height:700,children:[{tabbar:{tabs:["dom"],is_hidden:!0}},{name:"dom_panel",width:350,get_tabs:function(a){if(a["ecmascript-debugger"].satisfies_version(6,11))return["dom-side-panel","dom_attrs","css-layout","ev-listeners-side-panel","dom-search"];return["dom-side-panel","dom_attrs","css-layout","dom-search"]}}]};ui_framework.layouts.js_rough_layout={dir:"h",width:700,height:700,children:[{children:[{height:350,tabbar:{tabs:["js_source"],is_hidden:!0}}]},{name:"js_panel",width:350,children:[{get_tabs:function(a){return a["ecmascript-debugger"].major_version>5?["scripts-side-panel","breakpoints-side-panel","js-search"]:["scripts-side-panel","js-search"]}}]}]};ui_framework.layouts.network_rough_layout={dir:"v",width:1e3,height:1e3,children:[{height:1e3,tabs:["network_logger","request_crafter","network_options"]}]};ui_framework.layouts.resource_rough_layout={dir:"h",width:1e3,height:700,children:[{name:"resource_tree_panel",min_width:150,width:300,tabbar:{id:"resources_tree",tabs:["resource_tree_view"],is_hidden:!0}},{name:"resource_detail_panel",width:600,tabbar:{id:"resource_detail",tabs:["resource_detail_view"],is_hidden:!0}}]};ui_framework.layouts.utils_rough_layout={dir:"h",width:700,height:700,children:[{children:[{tabbar:{tabs:["screenshot"],is_hidden:!0}}]},{name:"utils_panel",width:350,children:[{tabs:["screenshot-controls","color-palette"]}]}]};ui_framework.layouts.storage_rough_layout={dir:"v",width:1e3,height:1e3,children:[{height:1e3,get_tabs:function(a){var b="cookies";a["cookie-manager"]&&a["cookie-manager"].is_implemented&&(b="cookie_manager");return[b,"local_storage","session_storage","widget_preferences"]}}]};ui_framework.layouts.console_rough_layout={dir:"v",width:1e3,height:1e3,children:[{height:1e3,tabbar:{tabs:["command_line"],is_hidden:!0}}]};ui_framework.layouts.main_layout={id:"main-view",get_tabs:function(a){return["dom_mode",{view:"js_mode",tab_class:JavaScriptTab},"network_mode","resource_panel","storage","profiler_mode",{view:"console_mode",tab_class:ErrorConsoleTab},"utils","console_panel"]}};(function(){this.remote_debug_settings=function(a,b){const c=1024,d=65535;return[["label",ui_strings.S_LABEL_PORT+": ",["input","type","number","min",c,"max",d,"value",Math.min(d,Math.max(a,c))],["span",ui_strings.S_BUTTON_TEXT_APPLY,"handler","apply-remote-debugging","class","ui-button","tabindex","1"]],["p",b||"","id","remote-debug-info"],"id","remote-debug-settings"]};this.remote_debug_waiting_help=function(a){return[["p",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_HEADER],["ol",["li",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_1],["li",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_2],["li",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_3.replace("%s",a)],["li",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_4],["li",ui_strings.S_REMOTE_DEBUG_GUIDE_WAITING_STEP_5]]]};this.remote_debug_waiting=function(a){return[["p",ui_strings.S_INFO_WAITING_FORHOST_CONNECTION.replace(/%s/,a)],["p",["span",ui_strings.S_BUTTON_CANCEL_REMOTE_DEBUG,"handler","cancel-remote-debug","class","ui-button","tabindex","1"]]]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});cls.WindowManager||(cls.WindowManager={});cls.WindowManager["2.0"]||(cls.WindowManager["2.0"]={});cls.WindowManager["2.0"].WindowManagerData=function(a){this.get_active_window_id=function(){};this.get_window_list=function(){};this.get_debug_context=function(){};this.get_window=function(a){};this.set_debug_context=function(a){};this.clear_debug_context=function(){};this.get_debug_context_title=function(){};this.bind=function(){};var b=a.show_dragonfly_window?["normal","gadget","devtools"]:["normal","gadget"],c=this,d=a.services["window-manager"];this._active_window=0;this._window_list=null;this._debug_context=0;this._check_counter=0;this._session_ctx=a;this._tag_man=a.tag_manager;this._get_context=function(){d.requestListWindows()};this._parse_window=function(a){return{window_id:a[0],title:a[1],window_type:a[2],opener_id:a[3]}};this._set_active_window_as_debug_context=function(){if(this._active_window&&this._active_window!=this._debug_context){this.set_debug_context(this._active_window);window.windowsDropDown.update()}};this._set_active_window=function(a){if(this._has_window_id_in_list(a))this._active_window=a;else{opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"active window id does not exist, trying to select the first window instead");this._window_list&&this._window_list.length&&(this._active_window=this._window_list[0].window_id)}this._active_window&&!this._debug_context&&this.set_debug_context(this._active_window);window.windowsDropDown.update()};this._has_window_id_in_list=function(a){var b=null,c=0;if(this._window_list)for(;(b=this._window_list[c])&&b.window_id!=a;c++);return b&&!0||!1};this._set_window_list=function(a){this._window_list=!settings.general.get("show-only-normal-and-gadget-type-windows")&&a||a.filter(this._window_filter);this._active_window||d.requestGetActiveWindow();if(this._active_window&&!this._has_window_id_in_list(this._active_window)){this._active_window=0;this.set_debug_context(this._window_list[0].window_id);opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"active window id does not exist")}window.windowsDropDown.update()};this._window_filter=function(a){return b.contains(a.window_type)};this._update_list=function(a){var b=a.window_id,c=null,d=0;if(!settings.general.get("show-only-normal-and-gadget-type-windows")||this._window_filter(a)){if(this._window_list)for(;(c=this._window_list[d])&&b!=c.window_id;d++);else this._window_list=[];this._window_list[d]=c=a;window.windowsDropDown.update()}else this._remove_window(b);c&&window.messages.post("window-updated",{window_id:c.window_id,title:c.title,window_type:c.window_type,opener_id:c.opener_id})};this._remove_window=function(a){var b=null,c=0;if(this._window_list)for(;b=this._window_list[c];c++)if(a==b.window_id){this._window_list.splice(c,1);a==this._debug_context&&this._window_list.length&&this.set_debug_context(this._window_list[0].window_id);break}window.windowsDropDown.update()};this._reset_state_handler=function(a){this._active_window=0;this._window_list=null;this._debug_context=0;this._check_counter=0};this._handle_modify_filter=function(a,b,c){if(a==0)for(var d in services)if(services[d].is_implemented){services[d].post("window-filter-change",{filter:c});services[d].on_window_filter_change(c)}};this._onprofile_enabled=function(a){if(!this._debug_context)if(this._session_ctx.show_dragonfly_window){var b=function(a,b){d.requestListWindows()},c=this._tag_man.set_callback(this,b),a=["replace",["normal_hidden"]];d.requestModifyTypeFilter(c,a)}else d.requestListWindows()};this.get_active_window_id=function(){return this._active_window};this.get_window_list=function(){return this._window_list&&this._window_list.slice(0)||null};this.get_window=function(a){var b=null,c=0;if(this._window_list)for(;(b=this._window_list[c])&&b.window_id!=a;c++);return b};this.get_debug_context=function(){return this._debug_context};this.get_debug_context_title=function(){var a=null,b=0;if(this._window_list)for(;(a=this._window_list[b])&&a.window_id!=this._debug_context;b++);return a&&a.title||""};this.set_debug_context=function(a){var b=[1,[a]],c=window.tagManager.set_callback(this,this._handle_modify_filter,[b]);d.requestModifyFilter(c,b);this._debug_context=a;window.messages.post("debug-context-selected",{window_id:a})};this.clear_debug_context=function(){this._active_window=0;this._window_list=null;this._debug_context=0;this._check_counter=0;window.host_tabs.setActiveTab(0);window.windowsDropDown.update()};this.bind=function(a){var b=this;a.handleGetActiveWindow=a.onWindowActivated=function(a,c){b._set_active_window(c[0])};a.handleListWindows=function(a,c){b._set_window_list(c[0].map(b._parse_window))};a.onWindowUpdated=function(a,c){b._update_list(b._parse_window(c))};a.onWindowClosed=function(a,c){b._remove_window(c[0])};window.messages.addListener("profile-enabled",this._onprofile_enabled.bind(this));a.onWindowLoaded=function(a,b){}};a.messages.addListener("reset-state",function(a){c._reset_state_handler(a)})};eventHandlers.click["get-active-window"]=function(a,b){services["window-manager"].requestGetActiveWindow()};eventHandlers.click["list-windows"]=function(a,b){services["window-manager"].requestListWindows()};eventHandlers.click["set-filter-active-window"]=function(a,b){alert("not implemented eventHandlers.click['set-filter-active-window'] in window-manager.js")};eventHandlers.click["set-debug-context"]=function(a,b){if(/input/i.test(a.target.nodeName)){var c=a.target.parentElement.parentElement,d=parseInt(c.getAttribute("window-id"));d&&window_manager_data.set_debug_context(d)}};cls.WindowManager["2.0"].WindowsDropDown=function(){this.update=function(){var a=topCell.toolbar&&topCell.toolbar.getElement();if(a){var b=a.getElementsByTagName("select")[0],c=window_manager_data.get_window_list()||[],d=window_manager_data.get_active_window_id(),e=window_manager_data.get_debug_context(),f=null,g=0,h="",i=[];if(b){for(g=c.length-1;f=c[g];g--)f.window_type=="gadget"&&i.push(c.splice(g,1)[0]);h+=c.map(this._option).join("");i.length&&(h+="<optgroup label='Opera Extensions' class='window-select-gadgets' ></optgroup>"+i.map(this._option).join(""));b.innerHTML=h}}};this._option=function(a){return'<option value="'+a.window_id+'"'+(a.window_id==window_manager_data.get_debug_context()?' selected="selected"':"")+">"+helpers.escapeTextHtml(a.title||"")+"</option>"};this.init=function(){window.messages.addListener("debug-context-selected",this.update.bind(this))};this.init()};eventHandlers.change["select-window"]=function(a,b){b.value&&window_manager_data.set_debug_context(parseInt(b.value))};cls.WindowManager["2.0"].DebuggerMenu=function(a,b){var c="";this._action_entries=[{handler:"reload-window",text:ui_strings.S_MENU_RELOAD_DEBUG_CONTEXT}];this.getSelectedOptionValue=function(){};this.templateOptionList=function(a){var b=window_manager_data.get_window_list()||[],c=window_manager_data.get_active_window_id(),d=window_manager_data.get_debug_context(),e=null,f=[],g=null,h=0,i=[];for(h=b.length-1;e=b[h];h--)e.window_type=="gadget"&&i.push(b.splice(h,1)[0]);c&&c!=d&&(f[f.length]=["cst-option",ui_strings.S_MENU_SELECT_ACTIVE_WINDOW,"opt-index",h,"value",c.toString(),"unselectable","on"]);f=f.concat(a._action_entries.map(this._action_entry));f[f.length]=["hr"];f.push.apply(f,b.map(this._option_template));if(i.length){f.push(["cst-title"
,"Opera Extensions"]);f.push.apply(f,i.map(this._option_template))}return f};this._option_template=function(a,b){return["cst-option",a.title||" ","opt-index",b,"value",a.window_id.toString(),"class",a.window_id==window_manager_data.get_debug_context()?"selected":"","unselectable","on"]};this.checkChange=function(a){var b=parseInt(a.getAttribute("value"));if(!isNaN(b)&&b!=window_manager_data.get_debug_context()){window_manager_data.set_debug_context(b);return!0}return!1};this.getTemplate=function(){var a=this;return function(){return["cst-select",[["cst-icon","class",a.getId()],["cst-drop-down"]],"cst-id",a.getId(),"handler",a.getId(),"unselectable","on","class","ui-control "+a.class_name,"title",ui_strings.S_MENU_DEBUG_CONTEXT]}};this.init(a,b);this.get_template=this.getTemplate()};window.cls||(window.cls={});cls.ConsoleLogger||(cls.ConsoleLogger={});cls.ConsoleLogger["2.0"]||(cls.ConsoleLogger["2.0"]={});cls.ConsoleLogger["2.1"]||(cls.ConsoleLogger["2.1"]={});cls.ConsoleLogger.ErrorConsoleDataBase=function(){this._msgs=[];this._toggled=[];this._views=[];this._url_self=location.host+location.pathname;this._lastid=0;this._update_views=function(a){for(var b="",c=0;b=this._views[c];c++){var d=window.views[b];a&&(d.needs_instant_update=!0);d.update()}var e=this._view_used_for_error_count||this._views[0];e&&window.views[e]&&!window.views[e].isvisible()&&window.views[e].update_error_count()};this.set_view_to_use_for_error_count=function(a){this._view_used_for_error_count=a};this.add_view=function(a){this._views.push(a)};this.add_entry=function(a){(!a.uri||a.uri.indexOf(this._url_self)==-1)&&this._msgs.push(a);var b=this._views.filter(function(b){var c=views[b].source_filter(a),d=this._filter_bound(a);return c&&d},this);for(var c=0,d;d=b[c];c++)if(views[d]&&views[d].is_hidden){views[d].is_hidden=!1;topCell.enableTab(d)}this._update_views()};this.clear=function(a,b){var c=this.get_messages(a).filter(b),d=c.map(function(a){return a.id});this._msgs=this._msgs.filter(function(a){return!d.contains(a.id)});this._update_views(!0)};this.clear_all=function(){this._msgs=[];for(var a=1,b;b=this._views[a];a++){window.views[b].is_hidden=!0;topCell.disableTab(b,!0)}this._update_views(!0)};this._on_profile_disabled=function(a){a.profile==window.app.profiles.DEFAULT&&this.clear_all()};this.toggle_entry=function(a){this._toggled.indexOf(a)==-1?this._toggled.push(a):this._toggled.splice(this._toggled.indexOf(a),1)};this.get_messages=function(a){var b=this._msgs;if(a){var c=this._get_string_filter(a);b=b.filter(c)}return b.filter(this._filter_bound)};this.make_source_filter=function(a,b){var c=function(a){return!0};a&&(c=function(c){var d=a.indexOf(c.source),e=d>-1;b&&(e=!e);return e});return c};this.get_toggled=function(){return this._toggled};this._on_setting_change=function(a){if(a.id=="console")switch(a.key){case"expand-all-entries":this._toggled=[];this._update_views(!0);break;case"css-filter":case"use-css-filter":this._set_css_filter();this._update_views(!0)}};this._on_console_message=function(a){var b=new cls.ConsoleLogger["2.0"].ConsoleMessage(a);b.id=""+ ++this._lastid;b.context.startswith("console.")||this.add_entry(b)};this._filter=function(a){(!this._filters||!this._filters.hasOwnProperty("css"))&&this._set_css_filter();if(a.source=="css"&&this._filters.css)for(var b=0,c;c=this._filters.css[b];b++)if(a.description.indexOf(c)!=-1)return!1;return!0};this._set_css_filter=function(){this._filters||(this._filters={});this._setting||(this._setting=window.settings.console);this._filters.css=null;this._setting.get("use-css-filter")&&(this._filters.css=(this._setting.get("css-filter")||"").split(/,\s*/).map(function(a){return a.trim()}).filter(Boolean))};this._string_filter_config=[{id:"title"},{id:"description"},{id:"details",requires_expansion:!0},{id:"context"},{id:"line"},{id:"uri"},{id:"source"},{id:"severity"},{id:"location_string"}];this._get_string_filter=function(a,b){b||(b=this._string_filter_config);return function(c){var d=!0;c.requires_expansion=!1;if(a){for(var e=0,f;f=b[e];e++)if(f.id&&c[f.id]&&c[f.id].toLowerCase().indexOf(a.toLowerCase())!==-1){d=!1;f.requires_expansion&&(c.requires_expansion=!0)}return!d}return!0}};this.init=function(){this._filters={};this._filter_bound=this._filter.bind(this);window.messages.addListener("setting-changed",this._on_setting_change.bind(this));window.messages.addListener("debug-context-selected",this.clear_all.bind(this));window.messages.addListener("profile-disabled",this._on_profile_disabled.bind(this));var a=window.services["console-logger"];a.add_listener("consolemessage",this._on_console_message.bind(this))}};cls.ConsoleLogger["2.0"].ErrorConsoleData=function(){this.init()};cls.ConsoleLogger["2.0"].ErrorConsoleData.prototype=new cls.ConsoleLogger.ErrorConsoleDataBase;cls.ConsoleLogger["2.1"].ErrorConsoleData=function(){this._on_window_filter_change=function(a){var b=tagManager.set_callback(this,this._on_list_messages,[]);services["console-logger"].requestListMessages(b)};this._on_profile_enabled=function(a){a.profile==window.app.profiles.DEFAULT&&this._on_window_filter_change()};this._on_list_messages=function(a,b){const c=0;if(a===0&&b[c]){var d=b[c];for(var e=0,f;f=d[e];e++)this._on_console_message(f)}};this.clear_all_on_host_side=function(){var a=tagManager.set_callback(this,this.clear_all,[]);services["console-logger"].requestClear(a)};this._init=function(){services["ecmascript-debugger"].addListener("window-filter-change",this._on_window_filter_change.bind(this));window.messages.addListener("profile-enabled",this._on_profile_enabled.bind(this));this.init()};this._init()};cls.ConsoleLogger["2.1"].ErrorConsoleData.prototype=new cls.ConsoleLogger.ErrorConsoleDataBase;var ErrorConsoleView=function(a,b,c,d,e){this._init(a,b,c,d,e)},ErrorConsoleViewPrototype=function(){var a=1e3,b=200;this._render_timeout=0;this._rendertime=0;this.needs_instant_update=!1;this.required_services=["console-logger"];this.createView=function(a){if(!this.needs_instant_update){if(this._render_timeout)return;var c=Date.now()-this._rendertime;if(c<b){this._render_timeout=window.setTimeout(this._create_delayed_bound,b-c);return}}this.needs_instant_update=!1;if(a){this._container=a;this._container.setAttribute("data-error-log-id",this.id);this._container.setAttribute("data-menu","error-console")}this.query?this._text_search.update_search():this._create()};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._create_delayed=function(){this._render_timeout=0;this.createView()};this._hash_array=function(a,b,c,d){return a+","+b.id};this._create=function(){if(this._container){window.error_console_data.set_view_to_use_for_error_count(this.id);var b=window.error_console_data.get_messages(this.query).filter(this.source_filter),c=!1,d=b.length;if(d>a){b.splice(0,d-a);c=!0}this.update_error_count(b);var e=settings.console.get("expand-all-entries"),f=b.slice(0,b.length-1).reduce(this._hash_array,"");if(this._table_ele&&this.last_entry_hash&&b.length&&f===this.last_entry_hash){var g=window.templates.errors.log_row(b.last,e,window.error_console_data.get_toggled(),this.id);this._table_ele.render(g)}else{var g=window.templates.errors.log_table(b,e,window.error_console_data.get_toggled(),this.id),h=this._container.clearAndRender(g);this._table_ele=h.parentNode.querySelector(".errors-table")}c&&this._container.render(window.templates.errors.exceeds_max(a,d));this.last_entry_hash=b.reduce(this._hash_array,"");this._scrollTop&&(this._container.scrollTop=this._scrollTop);this._rendertime=Date.now()}};this.update_error_count=function(b){if(!b){b=window.error_console_data.get_messages(this.query).filter(this.source_filter);b.length>a&&b.splice(0,b.length-a)}window.messages.post("error-count-update",{current_error_count:b.length})};this.ondestroy=function(){this._table_ele=null;this._container=null;this._rendertime=0;this._render_timeout=0};this._on_before_search=function(a){this.query=a.search_term;this._create()};this._init=function(a,b,c,d,e){c||(c="scroll error-console");this.init(a,b,c,null,"error-view");a!==ErrorConsoleView.roughViews[0].id&&(this.fallback_view_id=ErrorConsoleView.roughViews[0].id);this._expand_all_state=null;this._table_ele=null;this._on_before_search_bound=this._on_before_search.bind(this);this._create_delayed_bound=this._create_delayed.bind(this);this.source_filter=window.error_console_data.make_source_filter(d,e)}};ErrorConsoleViewPrototype.prototype=ViewBase;ErrorConsoleView.prototype=new ErrorConsoleViewPrototype;ErrorConsoleView.roughViews=[{id:"console-all",name:ui_strings.M_VIEW_LABEL_ERROR_ALL},{id:"console-script",name:ui_strings.M_VIEW_LABEL_ERROR_SCRIPT,source_list:["ecmascript"]},{id:"console-css",name:ui_strings.M_VIEW_LABEL_ERROR_CSS,source_list:["css"]},{id:"console-html",name:ui_strings.M_VIEW_LABEL_ERROR_HTML,source_list:["html"]},{id:"console-svg",name:ui_strings.M_VIEW_LABEL_ERROR_SVG,source_list:["svg"]},{id:"console-storage",name:ui_strings.M_VIEW_LABEL_ERROR_STORAGE,source_list:["persistent_storage"]},{id:"console-other",name:ui_strings.M_VIEW_LABEL_ERROR_OTHER,source_list:["ecmascript","css","html","svg","persistent_storage"],is_blacklist:!0}];ErrorConsoleView.roughViews.bindClearSource=function(a){return function(b,c){var d=window.views[a],e=d&&d.query,f=d&&d.source_filter;window.error_console_data.clear(e,f)}};ErrorConsoleView.roughViews.createViews=function(){var a=null,b=0,c="";for(;a=this[b];b++){var d=new ErrorConsoleView(a.id,a.name,a.container_class,a.source_list,a.is_blacklist);window.error_console_data.add_view(a.id);c="clear-error"+(a.id?"-"+a.id:"");new ToolbarConfig(a.id,[{handler:c,title:ui_strings.S_BUTTON_LABEL_CLEAR_LOG,class_name:"clear-log"}],[{handler:"console-text-search-"+a.id,shortcuts:"console-text-search-"+a.id,title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_FILTER,type:"filter"}]);new Switches(a.id,["console.expand-all-entries"]);eventHandlers.click[c]=this.bindClearSource(a.id);(function(){var b=a.id,c=window.views[b]._text_search=new TextSearch,d=function(a){if(a.id==b){var d=UI.get_instance().get_container(b);c.setContainer(d);c.setFormInput(views.console.getToolbarControl(d,"console-text-search-"+b))}},e=function(a){a.id==b&&c.cleanup()};messages.addListener("show-view",d);messages.addListener("view-destroyed",e);c.add_listener("onbeforesearch",window.views[b]._on_before_search_bound);eventHandlers.input["console-text-search-"+b]=function(a,b){c.searchDelayed(b.value)};ActionBroker.get_instance().get_global_handler().register_shortcut_listener("console-text-search-"+b,cls.Helpers.shortcut_search_cb.bind(c))})()}};eventHandlers.click["error-log-list-expand-collapse"]=function(a,b){var c=b.getAttribute("data-logid");window.error_console_data.toggle_entry(c);if(b.hasClass("expanded"))b.swapClass("expanded","collapsed");else{b.swapClass("collapsed","expanded");b.scrollSoftIntoContainerView()}};cls.ConsoleLogger.ConsoleView=function(a,b,c){this.is_hidden=!0;this.createView=function(a){};this.init(a,b,c)};cls.ConsoleLogger.ConsoleView.prototype=ViewBase;cls.ConsoleLogger.ConsoleView.create_ui_widgets=function(a){new Settings("console",{"expand-all-entries":!1,"use-css-filter":!1,"css-filter":["-webkit-, -khtml-, -moz-, -ms-, -o-","_height, _width, _position, _display, _zoom","_word-wrap, _z-index, _background, _padding","_line-height, _vertical-align","*width, *border, *margin, *font, *display","*top, *z-index, *line-height, *left","zoom:, filter:, behavior:, DXImageTransform.Microsoft"].join(",\n")},{"expand-all-entries":ui_strings.S_SWITCH_EXPAND_ALL},{customSettings:["css_error_filters"]},{css_error_filters:window.templates.errors.log_settings_css_filter},"console");if(window.services["console-logger"].major_minor_version>=2.1){var b=ContextMenu.get_instance();b.register("error-console",[{label:ui_strings.M_LABEL_CLEAR_ALL_ERRORS,handler:function(a,b){window.error_console_data.clear_all_on_host_side()}}])}};eventHandlers.input["error-console-css-filter"]=function(a,b){window.settings.console.set("css-filter",a.target.value)};eventHandlers.scroll["error-view"]=function(a,b){var c=b;while(c.nodeName.toLowerCase()!="container"&&c.parentNode)c=c.parentNode;if(c){var d=c.getAttribute("data-error-log-id");window.views[d]._scrollTop=c.scrollTop}};window.templates=window.templates||{};window.templates.errors=window.templates.errors||{};window.templates.errors._source_map={svg:{icon:"markup",title:"SVG"},html:{icon:"markup",title:"HTML"},xml:{icon:"markup",title:"XML"},css:{icon:"css",title:"CSS"},ecmascript:{icon:"script",title:"Ecmascript"},persistent_storage:{icon:"storage",title:"Persistent Storage"}};window.templates.errors.log_table=function(a,b,c,d){var e=function(a){return window.templates.errors.log_row(a,b,c,d)};return["table",a.map(e),"class","sortable-table errors-table"]};window.templates.errors.log_row=function(a,b,c,d){var e;if(b){e=!0;c.indexOf(a.id)!=-1&&(e=!1)}else e=c.indexOf(a.id)!=-1;a.requires_expansion&&(e=!0);var f=a.context;a.line&&a.uri&&(f=ui_strings.M_VIEW_LABEL_ERROR_LOCATION_TITLE.replace("%(LINE)s",a.line).replace("%(URI)s",a.uri));var g=!0;a.title===a.description&&(g=!1);var h=["span","","data-logid",a.id,"data-viewid",d,"unselectable","on","class","expander","tabindex","1"],i=a.severity||"information",j=["span","class","severity "+i,"title",i];if(d=="console-all"){var k=templates.errors._source_map[a.source];j=["span","class","resource-icon resource-type-"+(k&&k.icon),"title",k&&k.title||a.source]}return["tr",[["td",j,"class","icon_cell"],["td",g?h:"","class","expand_cell"],["td",[["pre",a.title.trim(),"class","mono title"],["pre",a.details,"class","mono details"]],"class","main"],["td",a.context,"class","context"],["td",a.location_string,"title",f,"class","location "+(a.uri?"internal-link":""),"handler","open-resource-tab","data-resource-url",a.uri,"data-resource-line-number",a.line?a.line:""]],"class",(g?"expandable":"")+(e?" expanded":" collapsed"),"handler",g?"error-log-list-expand-collapse":"","data-logid",a.id,"data-viewid",d]};window.templates.errors.exceeds_max=function(a,b){return["div",ui_strings.S_ERRORS_MAXIMUM_REACHED.replace("%(COUNT)s",b).replace("%(MAX)s",a),"class","max_exceeded_warning"]};window.templates.errors.log_settings_css_filter=function(a){return[["setting-composite",window.templates.settingCheckbox("console","use-css-filter",a.get("use-css-filter"),ui_strings.S_ERROR_LOG_CSS_FILTER),["label",["_auto_height_textarea",a.get("css-filter"),"handler","error-console-css-filter","id","error-console-css-filter"]]]]};window.cls||(window.cls={});cls.ConsoleLogger||(cls.ConsoleLogger={});cls.ConsoleLogger["2.0"]||(cls.ConsoleLogger["2.0"]={});cls.ConsoleLogger["2.0"].ConsoleMessage=function(a){this.windowID=a[0];this.time=a[1];this.description=a[2];this.uri=a[3];this.context=a[4];this.source=a[5];this.severity=a[6]};cls.ConsoleLogger["2.0"].ConsoleMessage.prototype=new function(){this.__defineGetter__("title",function(){if(this._cached_title)return this._cached_title;var a=/^.*[\r\n]*/,b=a.exec(this.description);return this._cached_title=b?b[0]:" "});this.__defineGetter__("location_string",function(){if(this._cached_location_string)return this._cached_location_string;var a=this.uri?helpers.basename(this.uri):this.context;this.line&&(a+=":"+this.line);return this._cached_location_string=a});this.__defineGetter__("line",function(){if(this._cached_line)return this._cached_line;var a=/[lL]ine (\d+)[:,]/,b=a.exec(this.description);return this._cached_line=b?b[1]:null});this.__defineGetter__("line_str",function(){if(this._cached_line_str)return this._cached_line_str;var a=/[lL]ine \d+[:,][\r\n]/,b=a.exec(this.description);return this._cached_line_str=b?b[0]:null});this.__defineGetter__("details",function(){if(this._cached_details)return this._cached_details;var a=this.description.replace(this.title,"").replace(this.line_str,"");return this._cached_details=a})};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].ConsoleLogInfo=function(a){this.runtimeID=a[0];this.type=a[1];this.valueList=(a[2]||[]).map(function(a){return new cls.EcmascriptDebugger["6.0"].Value(a)});this.position=a[3]?new cls.EcmascriptDebugger["6.0"].Position(a[3]):null};cls.EcmascriptDebugger["6.0"].Value=function(a){this.value=a[0];this.objectValue=a[1]?new cls.EcmascriptDebugger["6.0"].ObjectValue(a[1]):null};cls.EcmascriptDebugger["6.0"].ObjectValue=function(a){this.objectID=a[0];this.isCallable=a[1];this.type=a[2];this.prototypeID=a[3];this.className=a[4];this.functionName=a[5]};cls.EcmascriptDebugger["6.0"].Position=function(a){this.scriptID=a[0];this.lineNumber=a[1]};window.cls||(window.cls={});cls.StorageDataBase=new function(){this.get_storages=function(){};this.get_item=function(a,b){};this.set_item=function(a,b,c){};this.remove_item=function(a,b){};this.clear=function(a){};this.set_item_edit=function(a,b,c){};this.get_storages=function(){if(this.is_setup)return this._rts;for(var a in this._rts)this._rts[a]&&this._setup_local_storage(this._rts[a].rt_id);return null};this.get_storages_plain=function(){var a=[],b=this.get_storages();if(b){for(var c in b){var d=b[c];if(d){for(var e,f=0;e=d.storage[f];f++){e._rt_id=d.rt_id;e._object_id=e.key+"/"+d.rt_id;a.push(e)}a.push({_is_runtime_placeholder:!0,_rt_id:d.rt_id,_object_id:"runtime_placeholder_"+d.rt_id})}}return a}};this.update=function(){for(var a in this._rts)this._rts[a]&&this._get_key_value_pairs(this._rts[a].rt_id)};this.get_item=function(a,b){var c=this._rts[a]&&this._rts[a].storage,d=null,e=0;for(;(d=c[e])&&d.key!=b;e++);return d};this.set_item=function(a,b,c,d){var e=this.get_item(a,b);e?e.value=c:this._rts[a]&&this._rts[a].storage.push(e={key:b,value:c,type:"string"});var f='local_storage.set_item("'+window.helpers.escape_input(e.key)+'","'+window.helpers.escape_input(c)+'","'+e.type+'")',g=tagManager.set_callback(this,this._handle_default,[d,"failed set_item in LocalStorageData"]);services["ecmascript-debugger"].requestEval(g,[this._rts[a].rt_id,0,0,f,[["local_storage",this._host_objects[a]]]]);return e};this.remove_item=function(a,b,c){var d=this.get_item(a,b);if(d){var e='local_storage.remove_item("'+window.helpers.escape_input(d.key)+'")',f=tagManager.set_callback(this,this._handle_remove,[c,"failed remove_item in LocalStorageData",a,d.key]);services["ecmascript-debugger"].requestEval(f,[this._rts[a].rt_id,0,0,e,[["local_storage",this._host_objects[a]]]])}};this.clear=function(a){var b=this._rts[a];if(b){var c="local_storage.clear()",d=tagManager.set_callback(this,this._handle_clear,[this._rts[a].rt_id]);services["ecmascript-debugger"].requestEval(d,[this._rts[a].rt_id,0,0,c,[["local_storage",this._host_objects[a]]]])}};this.set_item_edit=function(a,b,c){var d=this.get_item(a,b);d&&(d.is_edit=c)};this._handle_clear=function(a,b,c){this._get_key_value_pairs(c)};this._handle_remove=function(a,b,c,d,e,f){this._rts[e].storage=this._rts[e].storage.filter(function(a){return a.key!=f});this._handle_default(a,b,c,d)};this._handle_default=function(a,b,c,d){const e=0;c(b[e]=="completed");b[e]!="completed"&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+d)};this._on_active_tab=function(a){var b=0,c=0,d=a.runtimes_with_dom;for(;b<d.length;b++)if(!this._rts[d[b]]){this._rts[d[b]]={storage:[],rt_id:d[b]};this.is_setup&&this._setup_local_storage(d[b])}for(b in this._rts)d.indexOf(parseInt(b))==-1&&(this._rts[b]=null);this.post("storage-update",{storage_id:this.id})};this._setup_local_storage=function(a){var b=this["return new _StorageHost()"],c=tagManager.set_callback(this,this._register_local_storage,[a]);services["ecmascript-debugger"].requestEval(c,[a,0,0,b])};this._register_local_storage=function(a,b,c){const d=0,e=1,f=2,g=3,h=0;if(b[d]=="completed"){this.is_setup=!0;if(b[e]=="object"){this.exists=!0;this._host_objects[c]=b[g][h];this._get_key_value_pairs(c)}else{this.exists=!1;this.post("storage-update",{storage_id:this.id})}}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed _register_local_storage in LocalStorageData")};this._get_key_value_pairs=function(a){var b="local_storage.get_key_value_pairs()",c=tagManager.set_callback(this,this._handle_get_key_value_pairs,[a]);services["ecmascript-debugger"].requestEval(c,[a,0,0,b,[["local_storage",this._host_objects[a]]]])};this._handle_get_key_value_pairs=function(a,b,c){const d=0,e=2,f=3,g=0;if(b[d]=="completed"){var h=b[f][g],i=tagManager.set_callback(this,this._finalize_get_key_value_pairs,[c]);services["ecmascript-debugger"].requestExamineObjects(i,[c,[h]])}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed handle_get_key_value_pairs in LocalStorageData")};this._is_digit=function(){var a=/^\d+$/;return function(b){return a.test(b[0])}}();this._sort_keys=function(a,b){return a.key>b.key&&1||a.key<b.key&&-1||0};this._get_storage_items=function(a){const b=0,c=1,d=0,e=2;var f=null,g=0,h=[];if(a[b]&&a[b][0]&&(f=a[b][0][c])){f=f.filter(this._is_digit);for(;g<f.length;g+=3)h.push({key:f[g][e],value:f[g+1][e],type:f[g+2][e]})}return h};this._finalize_get_key_value_pairs=function(a,b,c){if(a===0){var d=this._get_storage_items(b);this._rts[c].storage=d.sort(this._sort_keys);this.post("storage-update",{storage_id:this.id})}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"failed finalize_get_key_value_pairs in LocalStorageData")};this._on_reset_state=function(){this._rts={};this._host_objects={};this.is_setup=!1;this.post("storage-update",{storage_id:this.id})};this._on_profile_disabled=function(a){a.profile==window.app.profiles.DEFAULT&&this._on_reset_state()};this._make_sorter=function(a){return function(b,c){if(b._is_runtime_placeholder)return Infinity;if(c._is_runtime_placeholder)return-Infinity;if(b[a]<c[a])return 1;if(b[a]>c[a])return-1;return 0}};this.init=function(a,b,c,d){this.id=a;this.storage_object=d;this.update_event_name=b;this.title=c;this._rts={};this._host_objects={};this.is_setup=!1;this["return new _StorageHost()"]="return new "+this._StorageHost.toString()+'("'+d+'").check_storage_object()';window.cls.MessageMixin.apply(this);window.messages.addListener("active-tab",this._on_active_tab.bind(this));window.messages.addListener("profile-disabled",this._on_profile_disabled.bind(this));messages.addListener("reset-state",this._on_reset_state.bind(this));this.tabledef={groups:{runtime:{label:ui_strings.S_LABEL_COOKIE_MANAGER_GROUPER_RUNTIME,grouper:function(a){return a._rt_id},renderer:function(a,b){return templates.storage.runtime_group_render(runtimes.getRuntime(b[0]._rt_id).uri)},idgetter:function(a){return""+a[0]._rt_id}}},column_order:["key","value"],idgetter:function(a){return a._object_id},columns:{key:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_STORAGE_KEY),classname:"col_key",renderer:function(a){if(!a._is_runtime_placeholder)return templates.storage.edit_mode_switch_container(templates.storage.wrap_ellipsis(a.key),[templates.storage.input_text_container("key",a.key),templates.storage.input_hidden("original_key",a.key),templates.storage.input_hidden("rt_id",a._rt_id)])},summer:function(a,b,d){return window.templates.storage.add_item_button(c)},sorter:this._make_sorter("key")},value:{label:templates.storage.wrap_ellipsis(ui_strings.S_LABEL_COOKIE_MANAGER_COOKIE_VALUE),classname:"col_value",renderer:function(a){if(!a._is_runtime_placeholder)return templates.storage.edit_mode_switch_container(["div",a.value],templates.storage.input_textarea_container("value",a.value))},sorter:this._make_sorter("value")}},options:{no_group_changing:!0}}}};cls.LocalStorageData=function(a,b,c,d){this._StorageHost=function(a){this.get_key_value_pairs=function(){var a=this._storage_object.length,b=[],c="",d=null,e="",f=0;for(;f<a;f++){c=this._storage_object.key(f);d=this._storage_object.getItem(c);e=typeof d;d&&e!=="string"&&(d=JSON.stringify(d));b.push(c);b.push(d);b.push(e)}return b};this.set_item=function(a,b,c){c=="object"&&(b=JSON.parse(b));this._storage_object.setItem(a,b)};this.remove_item=function(a){this._storage_object.removeItem(a)};this.clear=function(){this._storage_object.clear()};this.check_storage_object=function(){var b=a.split("."),c="",d=0;this._storage_object=window;for(;(c=b[d])&&(this._storage_object=this._storage_object[c]);d++);return this._storage_object&&this||null}};this.init(a,b,c,d)};cls.LocalStorageData.prototype=cls.StorageDataBase;cls.CookiesData=function(a,b,c){this._StorageHost=function(){this.get_key_value_pairs=function(){var a=document.cookie.split(";"),b=null,c=a.length,d=[],e="",f=!1,g="",h=0,i="",j=0;for(;j<c;j++){b=a[j];h=b.indexOf("=",0);f=h!==-1;e=f?b.slice(0,h):b;g=f?decodeURIComponent(b.slice(h+1)):null;i="string";if(e.length){d.push(e);d.push(g);d.push(i)}}return d};this.set_item=function(a,b,c){document.cookie=a+"="+encodeURIComponent(b)+"; expires="+(new Date((new Date).getTime()+31104e6)).toGMTString()+"; path=/"};this.remove_item=function(a){document.cookie=a+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"};this.clear=function(){var a=this.get_key_value_pairs(),b=0;for(;b<a.length;b+=3)this.remove_item(a[b])};this.check_storage_object=function(){return this}};this.init(a,b,c)};cls.CookiesData.prototype=cls.StorageDataBase;cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].StorageDataBase=function(){this._get_storage_items=function(a){const b=0,c=0,d=1,e=2;var f=null,g=0,h=[];if(a[b]&&a[b][0]&&a[b][0][c]&&a[b][0][c][0]&&(f=a[b][0][c][0][d])){f=f.filter(this._is_digit);for(;g<f.length;g+=3)h.push({key:f[g][e],value:f[g+1][e],type:f[g+2][e]})}return h}};cls.EcmascriptDebugger["6.0"].StorageDataBase.prototype=cls.StorageDataBase;var cls=window.cls||(window.cls={});cls.StorageViewActions=function(a){const b="default",c="edit";this.id=a;this.shared_shortcuts="storage";ActionHandlerInterface.apply(this);this.mode_labels={"default":ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_DEFAULT,edit:ui_strings.S_LABEL_KEYBOARDCONFIG_MODE_EDIT};this._handlers={};this._update_bound=function(a,b){window.storages[a].update()}.bind(this,a);this._handlers.edit=function(a,b){this.mode=c;var d=b;while(d&&!d.getAttribute("data-storage-id"))d=d.parentElement;if(d){var e=b.getAttribute("data-object-id"),f=d.querySelector("tr[data-object-id='"+e+"']");f.addClass("edit_mode");this._handlers["select-row"](a,f);var g=f.querySelector("textarea");g&&this._handlers["textarea-autosize"](null,g)}}.bind(this);this._handlers.submit=function(a,c){this.mode=b;var d=c||document.querySelector(".storage_view");while(d&&!d.getAttribute("data-storage-id"))d=d.parentElement;if(d){var e=d.getAttribute("data-storage-id"),f=d.querySelectorAll("tr.edit_mode");for(var g=0,h;h=f[g];g++){var i=Number(h.querySelector("[name=rt_id]").value),j=h.querySelector("[name=original_key]")&&h.querySelector("[name=original_key]").value,k=h.querySelector("[name=key]").value,l=h.querySelector("[name=value]").value,m=window.storages[e],n=m.set_item.bind(m,i,k,l,this._update_bound),o=m.remove_item.bind(m,i,j,n);k&&j?o():k?n():this._update_bound()}return!1}}.bind(this);this._handlers["remove-item"]=function(a,b,c){var d=b;while(d&&!d.getAttribute("data-storage-id"))d=d.parentElement;if(d){var e=d.getAttribute("data-storage-id"),f=d.querySelectorAll("tr.selected");for(var g=0,h;h=f[g];g++){var i=Number(h.querySelector("[name=rt_id]").value),j=h.querySelector("[name=key]").value,k=function(){};g===f.length-1&&(k=function(a,b){window.storages[a].update()}.bind(this,e));window.storages[e].remove_item(i,j,k)}return!1}};this._handlers["delete-all"]=function(a,b){var c=b;while(c&&!c.getAttribute("data-storage-id"))c=c.parentElement;if(c){var d=c.getAttribute("data-storage-id"),e=Number(b.querySelector("[name=rt_id]").value);window.storages[d].clear(e);window.storages[d].update()}}.bind(this);this._handlers.cancel=function(a,c){this.mode=b;this._handlers.update(a,c);return!1}.bind(this);this._handlers.update=function(a,b){var c=b;while(c&&!c.getAttribute("data-storage-id"))c=c.parentElement;if(c){window.storages[c.getAttribute("data-storage-id")].update();return!1}}.bind(this);this._handlers["add-key"]=function(a,b){this.mode=c;var d=b;while(d&&d.nodeName!="tr")d=d.parentElement;var e=d&&d.getAttribute("data-object-id"),f=d;while(f&&!f.hasClass("header"))f=f.previousElementSibling;var g=f&&f.getAttribute("data-object-id"),h=b;while(h&&!h.getAttribute("data-storage-id"))h=h.parentElement;if(h&&g){var i;if(e){i=h.querySelector("[data-object-id='"+e+"']");i&&i.nextElementSibling&&(i=i.nextElementSibling)}else{i=h.querySelector("[data-object-id='"+g+"']");while(i&&!i.hasClass("sortable-table-summation-row"))i=i.nextElementSibling}if(i){var j=document.documentElement.render(window.templates.storage.add_storage_row(g)),k=i.parentElement.insertBefore(j,i);this._handlers["select-row"](a,k);var l=k.querySelector("textarea");l&&this._handlers["textarea-autosize"](null,l);var m=k.querySelector("[name=key]");m&&m.focus()}}}.bind(this);this._handlers["select-row"]=function(a,b){var c=b;while(c&&!c.getAttribute("data-storage-id"))c=c.parentElement;var d=c.querySelectorAll(".sortable-table .selected");if(!(a.ctrlKey||d.length>1&&a.button===2&&b.hasClass("selected")))for(var e=0,f;f=d[e];e++)f.hasClass("add_storage_row")||f.removeClass("selected");a.ctrlKey&&b.hasClass("selected")?b.removeClass("selected"):b.addClass("selected")};this._handlers["textarea-autosize"]=function(a,b){if(b){var c=parseInt(window.getComputedStyle(b,null).maxHeight,10);b.style.height=null;b.style.height=b.scrollHeight+"px";b.scrollHeight>c?b.style.overflow||(b.style.overflow="visible"):b.style.overflow&&(b.style.overflow=null)}};this.onclick=function(a){var b=this.mode==c,d=a.target.hasClass("add_storage_button"),e=a.target.get_ancestor(".edit_mode");!d&&!e&&this._handlers.submit();if(b)return!1};var d=ActionBroker.get_instance();d.register_handler(this);var e=ContextMenu.get_instance();e.register("storage-view",[{label:ui_strings.S_LABEL_STORAGE_UPDATE,handler:function(b,c){d.dispatch_action(a,"update",b,c)}}]);this._create_context_menu=function(a,b){while(b&&b.nodeName!=="tr")b=b.parentNode;if(b){this._handlers["select-row"](a,b);var c=b;while(c&&!c.getAttribute("data-storage-id"))c=c.parentElement;var d=c.querySelectorAll("tr.selected"),e=ui_strings.M_CONTEXTMENU_STORAGE_DELETE;d.length>1&&(e=ui_strings.M_CONTEXTMENU_STORAGE_DELETE_PLURAL);var f=[{label:ui_strings.M_CONTEXTMENU_STORAGE_ADD,handler:this._handlers["add-key"]}];!b.hasClass("header")&&!b.hasClass("sortable-table-summation-row")&&f.extend([{label:ui_strings.M_CONTEXTMENU_STORAGE_EDIT,handler:this._handlers.edit},{label:e,handler:this._handlers["remove-item"]}]);var g=b.querySelector("[name=rt_id]")&&Number(b.querySelector("[name=rt_id]").value);g&&f.push({label:ui_strings.M_CONTEXTMENU_STORAGE_DELETE_ALL_FROM.replace(/%s/,runtimes.getRuntime(g).uri),handler:this._handlers["delete-all"]});return f}};var f=this.id.replace(/_/g,"-")+"-item";e.register(f,[{callback:this._create_context_menu.bind(this)}])};window.eventHandlers.dblclick["storage-row"]=function(a,b){var c=b.get_attr("parent-node-chain","data-storage-id");this.broker.dispatch_action(c,"edit",a,b)};window.eventHandlers.click["storage-row"]=function(a,b){var c=b.get_attr("parent-node-chain","data-storage-id");this.broker.dispatch_action(c,"select-row",a,b)};window.eventHandlers.click["storage-add-key"]=function(a,b){var c=b.get_attr("parent-node-chain","data-storage-id");this.broker.dispatch_action(c,"add-key",a,b)};window.eventHandlers.input["storage-input-field"]=function(a,b){if(b.nodeName==="textarea"){var c=b.get_attr("parent-node-chain","data-storage-id");this.broker.dispatch_action(c,"textarea-autosize",a,b)}};window.templates||(window.templates={});window.templates.storage={runtime_group_render:function(a){return this.wrap_ellipsis(a)},wrap_ellipsis:function(a){var b=["div",["div",a,"class","ellipsis"],"class","ellipsis_cont"];typeof a=="string"&&b.push("title",a);return b},edit_mode_switch_container:function(a,b){return[["div",a,"class","value_container"],["div",b,"class","edit_container"]]},input_text_container:function(a,b){return["input","value",b||"","type","text","class","text","name",a,"handler","storage-input-field"]},input_textarea_container:function(a,b){var c=["textarea",b||"","type","text","name",a,"handler","storage-input-field","focus-handler","textarea-focus","blur-handler","textarea-blur"];return c},input_hidden:function(a,b){return["input","value",b||"","type","hidden","name",a]},add_storage_row:function(a){return["tr",["td",["div",[this.input_text_container("key"),this.input_hidden("rt_id",a)],"class","edit_container"]],["td",["div",this.input_textarea_container("value"
),"class","edit_container"]],"class","edit_mode add_storage_row"]},add_item_button:function(a){return["span",ui_strings.S_LABEL_STORAGE_ADD_STORAGE_TYPE.replace("%s",a),"class","add_storage_button ui-button","handler","storage-add-key","unselectable","on","tabindex","1"]},not_existing:function(a){return["div",["div",ui_strings.S_INFO_STORAGE_TYPE_DOES_NOT_EXIST.replace("%s","window."+a),"class","info-box"],"class","padding"]}};window.cls||(window.cls={});cls.StorageView=function(a,b,c,d){this.createView=function(b){var c=window.storages[a];this._sortable_table=this._sortable_table||new SortableTable(c.tabledef,null,null,null,"runtime",!0,d);b.setAttribute("data-storage-id",d);b.setAttribute("data-menu","storage-view");this._sortable_table.add_listener("before-render",this._before_table_render.bind(this));this._sortable_table.add_listener("after-render",this._after_table_render.bind(this));if(c.is_setup)if(c.exists){var e=c.get_storages_plain();this._sortable_table.set_data(e);this._before_table_render({table:b.querySelector(".sortable-table")});table=b.clearAndRender(this._sortable_table.render());this._after_table_render({table:table})}else b.clearAndRender(window.templates.storage.not_existing(c.storage_object));else{b.innerHTML="";c.get_storages()}};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._before_table_render=function(a){var b=a.table;if(b){var c=b.querySelectorAll(".selected");this._restore_selection=this._restore_selection||[];for(var d=0,e;e=c[d];d++)this._restore_selection.push(e.getAttribute("data-object-id"))}};this._after_table_render=function(a){var b=a.table;if(b){var c=b.get_attr("parent-node-chain","data-storage-id"),d=c.replace(/_/g,"-")+"-item";if(this._restore_selection){for(var e=0,f;f=this._restore_selection[e];e++){var g=b.querySelector("[data-object-id='"+f+"']");g&&g.addClass("selected")}this._restore_selection=null}for(var e=0,h;h=b.childNodes[e];e++){h.setAttribute("data-menu",d);if(!h.hasClass("sortable-table-summation-row")&&!h.hasClass("header")){h.setAttribute("handler","storage-row");h.setAttribute("edit-handler","storage-row")}h.getAttribute("data-object-id")&&h.getAttribute("data-object-id").startswith("runtime_placeholder_")&&h.addClass("runtime_placeholder")}var i=b.querySelectorAll("textarea"),j=ActionBroker.get_instance();for(var e=0,k;k=i[e];e++)j.dispatch_action(c,"textarea-autosize",null,k)}};this.on_storage_update=function(a){a.storage_id==this.id&&this.update()};this.required_services=["ecmascript-debugger"];window.storages[a].addListener("storage-update",this.on_storage_update.bind(this));this.init(a,b,c,null,"storage-view")};cls.StorageView.prototype=ViewBase;window.cls=window.cls||{};cls.HostCommandTransformer=function(){this.parser=null;this._clientcommands={};this._dfcommands={};this._hostcommands={};this.parser=window.simple_js_parser||new window.cls.SimpleJSParser;const a=window.cls.SimpleJSParser.WHITESPACE,b=window.cls.SimpleJSParser.LINETERMINATOR,c=window.cls.SimpleJSParser.IDENTIFIER,d=window.cls.SimpleJSParser.NUMBER,e=window.cls.SimpleJSParser.STRING,f=window.cls.SimpleJSParser.PUNCTUATOR,g=window.cls.SimpleJSParser.DIV_PUNCTUATOR,h=window.cls.SimpleJSParser.REG_EXP,i=window.cls.SimpleJSParser.COMMENT,j=0,k=1;this.has_tokens=function(a,b){var c=[];this.parser.tokenize(a,function(a,d){for(var e=0,f;f=b[e];e++)a==f[j]&&d==f[k]&&c.push([a,d])});return c};this.transform=function(a){var b=[];this.parser.tokenize(a,function(a,c){b.push([a,c])});for(var d=0,e;e=b[d];d++)if(e[j]==c&&this._hostcommands.hasOwnProperty(e[k])){var f=this._hostcommands[e[k]];f.call(this,e,b,d)&&(d=-1)}return b.map(function(a){return a[k]}).join("")};this.get_command=function(a){var b=[];this.parser.tokenize(a,function(a,c){b.push([a,c])});if(!b.length)return null;if(this.is_global_call(b,0)&&this._clientcommands.hasOwnProperty(b[0][k]))return this._clientcommands[b[0][k]];if(b[0][j]==i){var c=b[0][k].match(/\s*\/\/\s*(\w+)\s*\(\s*\)\s*/);if(c){var d=c[1];if(this._dfcommands.hasOwnProperty(d))return this._dfcommands[d]}}return null};this.is_global_call=function(b,d){if(!b[d]||b[d][j]!=c)return!1;for(var e=d-1,g;g=b[e];e--)switch(g[j]){case f:if(!["=",":","?","||","&&","(",")"].contains(g[k]))return!1;e=-1;case a:break;default:return!1}for(e=d+1;g=b[e];e++)switch(g[j]){case a:break;case f:if(g[k]=="(")return!0;default:return!1}return!1};this.is_property_of=function(b,d,e){if(!d[e]||d[e][j]!=c)return!1;var g=e-1;for(var h;h=d[g];g--){if(h[j]==a)continue;if(h[j]==f&&h[k]==".")break;return!1}g--;for(var h;h=d[g];g--)switch(h[j]){case a:break;case c:if(h[k]==b)return!0;default:return!1}return!1};this._hostcommands.dir=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof dir == 'function' && dir || \n                       function(e) { return console.dir(e) })")};this._hostcommands.dirxml=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof dirxml == 'function' && dirxml || \n                       function(e) { return console.dirxml(e) })")};this._hostcommands.$=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof $ == 'function' && $ || \n                       function(e) { return document.querySelector(e); })")};this._hostcommands.$$=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof $$ == 'function' && $$ || \n                       function(e) { return document.querySelectorAll(e); })")};this._hostcommands.$x=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof $x == 'function' && $x || \n                       function(xpath, context)\n                       {\n                         context = context || document;\n                         var res = document.evaluate(xpath, context, null,\n                                                     XPathResult.ANY_TYPE, null);\n                         switch (res.resultType)\n                         {\n                         case XPathResult.NUMBER_TYPE:\n                           return res.numberValue;\n                         case XPathResult.STRING_TYPE:\n                           return res.stringValue;\n                         case XPathResult.BOOLEAN_TYPE:\n                           return res.booleanValue;\n                         default:\n                           var ret = [], ele = null;\n                           while (ele = res.iterateNext())\n                             ret.push(ele);\n                           return ret;\n                         }\n                       })")};this._hostcommands.keys=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof keys == 'function' && keys || \n                       function(o)\n                       {\n                         var arr = [], key;\n                         for (key in o) {arr.push(key)};\n                         return arr;\n                       })")};this._hostcommands.values=function(a,b,c){this.is_global_call(b,c)&&(a[k]="(typeof values == 'function' && values || \n                       function(o)\n                       {\n                         var arr = [], key;\n                         for (key in o) {arr.push(o[key])}\n                         return arr;\n                       })")};this._clientcommands.clear=function(a,b,c){a._handle_action_clear()};this.register_dflcommands=function(a){for(var b in a)if(["command","description"].every(function(c){return a[b].hasOwnProperty(c)})){this._dfcommands[b]=a[b].command;this._dfcommands[b].description=a[b].description;a[b].hasOwnProperty("alias")&&(this._dfcommands[a[b].alias]=this._dfcommands[b])}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"not a valid DFL command "+b)}};window.cls=window.cls||{};window.cls.PropertyFinder=function(a){if(window.cls.PropertyFinder.instance)return window.cls.PropertyFinder.instance;window.cls.PropertyFinder.instance=this;window.services&&(this._service=window.services["ecmascript-debugger"]);this._cache={};this._parser=window.simple_js_parser||new window.cls.SimpleJSParser;const b=cls.SimpleJSParser.PUNCTUATOR,c=cls.SimpleJSParser.IDENTIFIER,d=0,e=1;this._get_last_token=function(a,b,c){if(a)for(var f=a.length-1,g;g=a[f];f--)if(g[d]==b&&g[e]==c){for(var h=0,i=0;h<=f;h++)i+=a[h][e].length;return i}return-1};this._find_input_parts=function(a){var d=[];this._parser.tokenize(a,function(a,b){d.push([a,b])});var e=this._get_last_token(d,b,"["),f=this._get_last_token(d,b,"(");f=this._get_last_token(d,b,")")<=f?f:-1;e=this._get_last_token(d,b,"]")<=e?e:-1;var g=Math.max(f,e,this._get_last_token(d,b,"="),this._get_last_token(d,c,"in"));g>-1&&(a=a.slice(g));a=a.replace(/^\s+/,"");var h=a.lastIndexOf("."),i="",j="",k="";if(h>-1){i=a.slice(0,h);j=a.slice(h+1).replace(/^\s+/,"")}else j=a;return{scope:i,identifier:j,input:a}};this.find_props=function(a,b,c,d){var e=runtimes.getSelectedRuntimeId(),f=runtimes.getRuntime(e);if(f){c=c||{runtime_id:e,thread_id:0,scope_id:f.object_id,index:0,scope_list:[]};c.stopped=Boolean(c.thread_id);var g=this._find_input_parts(b),h=this._cache_get(g.scope,c);if(h){h.input=b;h.identifier=g.identifier;a(h)}else if(g.scope)this._get_subject_id(a,g.scope,c,g,d);else{var i=[c.scope_id].extend(c.scope_list||[]);this._get_object_props(a,c,i,g)}}};this.clear_cache=function(a){this._cache={}};this._cache_key=function(a,b){return""+a+"."+b.runtime_id+"."+b.thread_id+"."+b.index};this._cache_put=function(a){var b=this._cache_key(a.scope,a.frameinfo);this._cache[b]=a};this._cache_get=function(a,b){var c=this._cache_key(a,b);return this._cache[c]};this._get_subject_id=function(a,b,c,d,e){var f=""+b,g=[];if(e)for(var h in e)g.push([h,e[h]]);var i=tagManager.set_callback(this,this._got_subject_id,[a,c,d]);this._service.requestEval(i,[c.runtime_id,c.thread_id,c.index,f,g])};this._got_subject_id=function(a,b,c,d,e){const f=0;OBJVALUE=3,OBJID=0;var g=null;if(b&&b[f]=="completed"&&b[OBJVALUE]){g=b[OBJVALUE][OBJID];this._get_object_props(c,d,[g],e)}else{var h={props:[],scope:e.scope,input:e.input,identifier:e.identifier};c(h)}};this._get_object_props=function(a,b,c,d){var e=tagManager.set_callback(this,this._got_object_props,[a,d]);this._service.requestExamineObjects(e,[b.runtime_id,c,1,0])};this._got_object_props=function(a,b,c,d){if(a)opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"ExamineObjects failed in _got_object_props in PropertyFinder");else{var e={props:this._parse_prop_list(b)||[],scope:d.scope,input:d.input,identifier:d.identifier};e.props.contains("this")||e.props.push("this");c(e)}};this._parse_prop_list=function(a){var b=[];const c=0,d=0,e=1,f=0;(a[c]||[]).forEach(function(a){var c=a[d]||[];c.forEach(function(a){b.extend((a[e]||[]).map(function(a){return a[f]}))})});return b.unique()};this.toString=function(){return"[PropertyFinder singleton instance]"}};cls.PropertyFinder.prop_sorter=function(a,b){a=a.toLowerCase();b=b.toLowerCase();if(a.isdigit()&&b.isdigit())return parseInt(a,10)-parseInt(b,10);if(a>b)return 1;if(a<b)return-1;return 0};window.cls=window.cls||(window.cls={});cls.BufferManager=function(a){this._textarea=a;this._kill_buffer="";this.move_to_beginning_of_line=function(){this.put_cursor(0)};this.move_to_end_of_line=function(){this.put_cursor(this._textarea.value.length)};this.kill_to_end_of_line=function(){var a=this.get_cursor();this._kill_buffer=this._textarea.value.slice(a);this.set_value(this._textarea.value.slice(0,a))};this.kill_to_beginning_of_line=function(){var a=this.get_cursor();this._kill_buffer=this._textarea.value.slice(0,a);this.set_value(this._textarea.value.slice(a),0)};this.kill_word_backwards=function(){var a=this._textarea,b=a.value.slice(0,a.selectionStart),c=b.slice(-1),d="",e="";/\s/.test(c)?e=/\w*\s+$/:/\w$/.test(c)?e=/\s*\w+$/:/\W$/.test(c)&&(e=/\W+$/);d=b.replace(e,"");this._kill_buffer=a.value.slice(d.length,this.get_cursor());this.set_value(d+this.get_value(this.get_cursor()),d.length)};this.yank=function(){var a=this.get_cursor(),b=this.get_value(0,a),c=this.get_value(a);this.set_value(b+this._kill_buffer+c,b.length+this._kill_buffer.length)};this.put_cursor=function(a){this._textarea.selectionStart=a;this._textarea.selectionEnd=a};this.get_cursor=function(){return this._textarea.selectionStart};this.set_value=function(a,b){this._textarea.value=a;b!==undefined&&this.put_cursor(b)};this.insert_at_point=function(a){var b=this.get_cursor(),c=this._textarea.value;c=c.slice(0,b)+a+c.slice(b);this._textarea.value=c;this.put_cursor(b+a.length)};this.get_value=function(a,b){return a===undefined?this._textarea.value:b===undefined?this._textarea.value.slice(a):this._textarea.value.slice(a,b)};this.clear=function(){this.set_value("")}};window.cls=window.cls||{};cls.ReplService=function(a,b){this._count_map={};const c=["console.log","console.debug","console.info","console.warn","console.error","console.assert","console.dir","console.dirxml","console.group","console.groupCollapsed","console.groupEnded","console.count"],d=cls.ReplService.DF_INTERN_TYPE,e=cls.ReplService.FRIENDLY_PRINTED,f=cls.ReplService.INLINE_MODEL,g=cls.ReplService.INLINE_MODEL_TMPL,h=cls.InlineExpander.RE_DOM_OBJECT,i="expand-objects-inline",j=4;var k=[[window.cls.SimpleJSParser.IDENTIFIER,"$0"],[window.cls.SimpleJSParser.IDENTIFIER,"$1"]],l=function(a){var b=1;return a[b]};this._on_consolemessage_bound=function(a){var b=new cls.ConsoleLogger["2.0"].ConsoleMessage(a);b.source=="ecmascript"&&!c.contains(b.context)&&this._data.add_output_errorlog(b.description)}.bind(this);this._process_on_consolelog=function(a){const b=0,c=1;var d=a[b],e=a[c],f={};const g=1,h=2,i=3,j=4,k=5,l=6,m=7,n=8,o=9,p=10,q=11,r=12;switch(e){case g:case h:case i:case j:case k:case l:this._handle_log(a,d);break;case m:f={is_unpacked:!0,is_friendly_printed:!0,expand:!0,is_dir:!0};this._handle_log(a,d,f);break;case n:f={is_unpacked:!0,is_friendly_printed:!0,traversal:"subtree"};this._handle_log(a,d,f);break;case o:this._handle_group(a);break;case p:this._handle_group(a,"collapsed");break;case q:this._handle_groupend(a);break;case r:this._handle_count(a)}};this._on_consoletime_bound=function(a){const b=1;this._data.add_output_str("Started: "+a[b])}.bind(this);this._on_consoletimeend_bound=function(a){const b=1,c=2;var d=a[c],e=Math.round(d/1e3);this._data.add_output_str(a[b]+": "+e+"ms ("+d+"µsec)")}.bind(this);this._on_consoleprofile_bound=function(a){this._data.add_output_str("console.profile called. Profiling is not yet supported.")}.bind(this);this._on_consoleprofileend_bound=function(a){this._data.add_output_str("console.profileEnd called. Profiling is not yet supported.")}.bind(this);this._on_consoletrace_bound=function(a){var b=new cls.EcmascriptDebugger["6.0"].ConsoleTraceInfo(a);for(var c=0,d;d=b.frameList[c];c++){var e=window.runtimes.getScript(d.scriptID);if(!e)continue;d.script_type=e.script_type;d.uri=e.uri}this._data.add_output_trace(b)}.bind(this);this._handle_log=function(a,b,c){const d=2,e=3,f=0,g=1,h=1;var i=null;a[e]&&(i={scriptid:a[e][f],scriptline:a[e][g]});c||(c={});c.callback=this._handle_explored_list.bind(this,b,i,a[h]);c.value_list=a[d];c.rt_id=b;this._explore_value_list(c)};this._explore_value_list=function(a){var b=settings.command_line.get("unpack-list-alikes")&&!a.is_unpacked&&a.value_list,c=!b&&settings.command_line.get("do-friendly-print")&&!a.is_friendly_printed&&this._friendly_printer.list_has_object(a.value_list),d=!b&&!c&&settings.command_line.get("expand-objects-inline")&&!a.is_inline_expanded;if(b){this._msg_queue.stop_processing();this._list_unpacker.unpack_list_alikes(a)}else if(c){this._msg_queue.stop_processing();this._friendly_printer.get_friendly_print(a)}else if(d){this._msg_queue.stop_processing();this._inline_expander.expand(a)}else{a.callback(a.value_list);this._msg_queue.continue_processing()}};this._handle_explored_list=function(a,b,c,d){var e=this._parse_value_list(d,a);this._data.add_output_valuelist(a,e,b,c)};this._handle_count=function(a){const b=2,c=3,d=0,e=1;var f=String(a[c][d])+"_"+a[c][e];f in this._count_map||(this._count_map[f]=0);var g=null;a[b].length&&(g=a[b][0][0]);this._count_map[f]+=1;this._data.add_output_count(this._count_map[f],g)};this._handle_group=function(a,b){const c=0,d=2;var e=a[d]&&a[d][0]&&a[d][0][c]||"";this._data.add_output_groupstart({name:e,collapsed:Boolean(b)})};this._handle_groupend=function(a){this._data.add_output_groupend()};this._parse_value_list=function(a,b){return a.map(function(a){return new cls.JSValue(a,b)})};this._process_on_eval_done=function(a,b,c,d,e){const f=0,g=1,h=3,i=3,j=4,k=2;a==i||a==j?settings.command_line.get("show-js-errors-in-repl")||this._handle_raw(b[0]):b[f]=="unhandled-exception"?this._handle_exception(b,c):b[g]=="object"?this._handle_object(b,c,d,e):this._handle_native(b)};this._on_element_selected_bound=function(a){if(a.obj_id==0){this._prev_selected=null;this._cur_selected=null}else{this._prev_selected=this._cur_selected;this._cur_selected=a}}.bind(this);this._handle_exception=function(a,b){const c=2,d=3,e=4;if(a[d])this._handle_object(a,b);else{this._data.add_output_str("Unhandled exception:");this._handle_native(a,b)}};this._handle_object=function(a,b,c,d){const e=3;var f={callback:this._handle_explored_list.bind(this,b,null,null),value_list:[[null,a[e]]],rt_id:b,thread_id:c,frame_id:d};this._explore_value_list(f)};this._handle_native=function(a){const b=2,c=1;var d=a[c],e=a[b];switch(d){case"null":case"undefined":e=d;break;case"string":e='"'+e+'"'}this._data.add_output_str(e)};this._handle_raw=function(a){this._data.add_output_str(a)};this.handle_input=function(a){this._data.add_input(a);this.evaluate_input(a)}.bind(this);this.evaluate_input=function(a){var b=this._transformer.has_tokens(a,k).map(l),c=this._transformer.transform(a),d=this._transformer.get_command(c);d?this._handle_clientcommand(d):this._handle_hostcommand(c,b)};this.get_selected_objects=function(){var a=[];this._cur_selected&&a.push(this._cur_selected.obj_id);this._prev_selected&&a.push(this._prev_selected.obj_id);return a};this._handle_clientcommand=function(a){a.call(this._transformer,this._view,this._data,this)};this._handle_hostcommand=function(a,b){if(a.trim()!=""){var c=[];if(b.contains("$0")&&this._cur_selected){c.push(["$0",this._cur_selected.obj_id]);this._cur_selected.rt_id!=d&&this._runtime_select.set_id(this._cur_selected.rt_id)}if(b.contains("$1")&&this._prev_selected){c.push(["$1",this._prev_selected.obj_id]);this._prev_selected.rt_id!=d&&this._runtime_select.set_id(this._prev_selected.rt_id)}var d=this._runtime_select.get_id(),e=0,f=0,g=window.runtimes.get_execution_context();if(g.rt_id==d){e=g.thread_id;f=g.frame_index}var h=[d,e,f,a,c];this._eval(h,this._on_eval_done_bound,[d,e,f])}};this._eval=function(a,b,c){var d=this._tagman.set_callback(null,b,c);const e=1,f=5,g=3;a[f]=a[e]?0:1;this._edservice.requestEval(d,a);a[f]&&window.messages.post("console-script-submitted",{script:a[g]})};this._get_host_info=function(){var a=this._tagman.set_callback(this,this._on_host_info_bound);services.scope.requestHostInfo(a)};this._on_host_info_bound=function(a,b){this.hostinfo=new cls.Scope["1.0"].HostInfo(b)}.bind(this);this._onsettingchange=function(a){a.id=="command_line"&&a.key==i&&(this._is_inline_expand=settings.command_line.get(i))};this.init=function(a,b){this._view=a;this._data=b;this._cur_selected=null;this._prev_selected=null;this._transformer=new cls.HostCommandTransformer;this._transformer.register_dflcommands(DFLCommands.commands);this._msg_queue=new Queue(this);var c=this._explore_value_list.bind(this);this._list_unpacker=new cls.ListUnpacker(c);this._friendly_printer=new cls.FriendlyPrinter(c);this._inline_expander=new cls.InlineExpander(c);this._on_consolelog_bound=this._msg_queue.queue(this._process_on_consolelog);this._on_eval_done_bound=this._msg_queue.queue(this._process_on_eval_done);this._tagman=window.tagManager;this._edservice=window.services["ecmascript-debugger"];this._runtime_select=window["cst-selects"]["cmd-runtime-select"];this._edservice.addListener("consolelog",this._on_consolelog_bound);this._edservice.addListener("consoletime",this._on_consoletime_bound);this._edservice.addListener("consoletimeend",this._on_consoletimeend_bound);this._edservice.addListener("consoleprofile",this._on_consoleprofile_bound);this._edservice.addListener("consoleprofileend",this._on_consoleprofileend_bound);this._edservice.addListener("consoletrace",this._on_consoletrace_bound);this._clservice=window.services["console-logger"];this._clservice.addListener("consolemessage",this._on_consolemessage_bound);window.messages.addListener("element-selected",this._on_element_selected_bound);this._is_inline_expand=settings.command_line.get(i);messages.addListener("setting-changed",this._onsettingchange.bind(this));this._get_host_info()};this.init(a,b)};cls.ReplService.DF_INTERN_TYPE=3;cls.ReplService.FRIENDLY_PRINTED=6;cls.ReplService.IS_EXPANDABLE=1;cls.ReplService.INLINE_MODEL=7;cls.ReplService.INLINE_MODEL_TMPL=8;cls.ReplService.INLINE_MODEL_TMPL_JS="inspected_js_object",cls.ReplService.INLINE_MODEL_TMPL_DOM="inspected_dom_node";window.cls=window.cls||{};cls.ReplView=function(a,b,c,d,e){this._resolver=new cls.PropertyFinder;this._data=new cls.ReplData(this);this._service=new cls.ReplService(this,this._data);this._linelist=null;this._textarea=null;this._lastupdate=null;this._current_input="";this._current_scroll=null;this._container=null;this._backlog_index=-1;this._input_row_height=null;this._toolbar_visibility=null;this._recent_autocompletion=null;this._autocompletion_index=null;this._autocompletion_elem=null;this._autocompletion_scope=null;this._use_autocomplete_highlight=!0;this._textarea_handler=null;this._prev_frame_index=null;this._closed_group_nesting_level=0;this._actionbroker=ActionBroker.get_instance();this.mode="single-line-edit";this.window_header=!1;this.window_statusbar=!1;this.window_type=UIWindow.HUD;this._delay_update=!0;this._last_scroll=0;const f=20;this.ondestroy=function(){this._update_timeout&&clearTimeout(this._update_timeout);if(this._container){this._last_scroll=this._container.scrollTop;this._linelist=null;this._lastupdate=0;this._backlog_index=-1;this._current_input=this._textarea.value;this._container.removeEventListener("scroll",this._save_scroll_bound,!1);this._delay_update=!0}};this._create_structure=function(a){a.clearAndRender(templates.repl_main());this._linelist=a.querySelector("ol");this._textarea=a.querySelector("textarea");this._textarea_handler=new cls.BufferManager(this._textarea);this._textarea.value=this._current_input;this._container=a;this._input_row_height=this._textarea.scrollHeight;this._closed_group_nesting_level=0;this._textarea.addEventListener("input",this._handle_input_bound,!1)};this._init_scroll_handling=function(){this._container.addEventListener("scroll",this._save_scroll_bound,!1);this._current_scroll===null?this._container.scrollTop=999999:this._container.scrollTop=this._current_scroll};this.createView=function(a){var b=!this._linelist;b&&this._create_structure(a);this._update_runtime_selector_bound();this._update_timeout&&clearTimeout(this._update_timeout);if(this._delay_update)this._update_timeout=setTimeout(this._update_bound,f);else{this._update();this._delay_update=!0}b&&this._init_scroll_handling()};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this.clear=function(){this._cancel_completion();this.ondestroy()};this.show_help=function(){opera.postError("fixme: implement help function and split into help/commands")};this.do_not_queue_next_update=function(){this._delay_update=!1};this._update_input_height_bound=function(){this._textarea.rows=Math.max(1,Math.floor(this._textarea.scrollHeight/this._input_row_height));this._textarea.selectionStart==this._textarea.value.length&&this._update_scroll_bound()}.bind(this);this._save_scroll_bound=function(){var a=this._container.scrollTop+this._container.offsetHeight>=this._container.scrollHeight;this._current_scroll=a?null:this._container.scrollTop}.bind(this);this._update_scroll_bound=function(){if(this._last_scroll){this._container.scrollTop=this._last_scroll;this._last_scroll=0}else this._current_scroll===null&&(this._container.scrollTop=9999999)};this._update=function(){var a=this._data.get_log(this._lastupdate);a.length&&(this._lastupdate=a[a.length-1].time);for(var b=0,c;c=a[b];b++)switch(c.type){case"input":this._render_input(c.data);break;case"string":this._render_string(c.data);break;case"exception":this._render_error(c.data);break;case"pobj":this._render_pointer_to_object(c.data);break;case"valuelist":this._render_value_list(c);break;case"trace":this._render_trace(c.data);break;case"groupstart":this._render_groupstart(c.data);break;case"groupend":this._render_groupend();break;case"count":this._render_count(c.data);break;case"completion":this._render_completion(c.data);break;case"errorlog":this._render_errorlog(c.data);break;default:this._render_string("unknown")}this._update_scroll_bound()};this._update_bound=this._update.bind(this);this._render_count=function(a){this._render_string((a.label?a.label+": ":"")+a.count)};this._render_groupstart=function(a){if(this._closed_group_nesting_level)this._closed_group_nesting_level++;else{a.collapsed&&this._closed_group_nesting_level++;this._add_line(templates.repl_group_line(a));var b=document.createElement("ol");b.className="repl-lines";this._add_line(b);a.collapsed&&(b.parentNode.style.display="none");this._linelist=b}};this._render_groupend=function(){this._closed_group_nesting_level--;this._closed_group_nesting_level=Math.max(0,this._closed_group_nesting_level);this._closed_group_nesting_level||this._linelist.parentNode.parentNode.nodeName.toLowerCase()=="ol"&&(this._linelist=this._linelist.parentNode.parentNode)};this._render_pointer_to_object=function(a){this._add_line(templates.repl_output_pobj(a))};this._render_error=function(a){this._render_string(a.message,a.stacktrace)};this._render_trace=function(a){this._add_line(ui_strings.S_CONSOLE_TRACE_LABEL);this._add_line(templates.repl_output_trace(a))};this._render_value_list=function(a){var b=a.data;const c=1,d=2;var e=0,f=b.reduce(function(a,b){switch(b.df_intern_type){case"unpack-header":a.push(templates.repl_output_pobj(b),["span","["]);e=d;break;case"unpack-footer":e==c&&a.pop();a.push(["span","]"],["span",", "]);e=c;break;default:a.push(templates.repl_output_native_or_pobj(b),["span",", "]);e=c}return a},[]);f.pop();a.pos&&(f=[templates.repl_output_location_link(a.pos.scriptid,a.pos.scriptline),f]);var g=a.severity!=null?"severity-"+["log","debug","info","warn","error"][a.severity-1]:"";this._add_line(f,g)};this._render_completion=function(a,b){this._add_line(["span",a,"class","repl-completion"],null,b)};this._render_errorlog=function(a){settings.command_line.get("show-js-errors-in-repl")&&this._render_string(a)};this._render_string=function(a){return this._add_line(templates.repl_output_native(a))};this._render_strings=function(){for(var a=0;a<arguments.length;a++)this._render_string(arguments[a])};this._render_input=function(a){window.simple_js_parser.format_source(a).forEach(function(a,b){this._add_line('<span class="repl-line-marker">'+(b?"... ":"&gt;&gt;&gt; ")+"</span>"+a)},this)};this.set_current_input=function(a){this._textarea.textContent=a};this._add_line=function(a,b){var c=document.createElement("li");b&&(c.className=b);a.nodeType===undefined?c.render(a):c.appendChild(a);this._linelist&&this._linelist.appendChild(c);return c};this._handle_input_bound=function(a){this.mode=="autocomplete"&&this._cancel_completion();this._check_for_multiline()&&this._be_multiline();this._update_input_height_bound()}.bind(this);this._check_for_multiline=function(){return this._textarea_handler.get_value().contains("\n")};this._handle_backlog=function(a){var b=this._backlog_index+a;a==1&&b==0&&(this._current_input=this._textarea.value);this._set_input_from_backlog(b)};this._set_input_from_backlog=function(a){if(a<=-1){this._backlog_index=-1;this._textarea.value=this._current_input}else{var b=this._data.get_typed_history();this._backlog_index=Math.min(a,b.length-1);var c=b[this._backlog_index];c!=undefined&&(this._textarea.value=c)}};this._commit_selection=function(){this._update_textarea_value(this._recent_autocompletion[this._autocompletion_index][0]);this._be_singleline();this._recent_autocompletion=null};this._update_textarea_value=function(a,b){var c=this._textarea.value.slice(0,this._textarea.selectionStart).lastIndexOf(this._autocompletion_localpart);if(c!=-1){var d=this._textarea.value.slice(0,c),e=this._textarea.value.slice(this._textarea.selectionStart),f=this._construct_line(d,a,e,b);this._textarea.value=f;this._textarea_handler.put_cursor(f.length-e.length)}};this._construct_line=function(a,b,c,d){var e=/^0$|^[1-9][0-9]*$/;if(!d&&!JSSyntax.is_valid_identifier(b)&&this._autocompletion_scope){e.test(b)||(b='"'+b+'"');a=a.slice(0,-1)+"[";c="]"+c}return a+b+c};this._highlight_completion=function(a){var b=window.getSelection();b.collapseToStart();if(a!==null&&a!==undefined){var c=this._recent_autocompletion[this._autocompletion_index],d=document.createRange(),e=this._autocompletion_elem.firstChild;d.setStart(e,c[1]);d.setEnd(e,c[2]);b.addRange(d)}};this._on_invoke_completer=function(){this._recent_autocompletion?this.mode="autocomplete":this._handle_completer()};this._update_highlight=function(a){a=a===undefined?1:a;if(!!this._use_autocomplete_highlight){this._autocompletion_index+=a;this._autocompletion_index>=this._recent_autocompletion.length?this._autocompletion_index=0:this._autocompletion_index<0&&(this._autocompletion_index=this._recent_autocompletion.length-1);this._highlight_completion(this._autocompletion_index)}};this._handle_completer=function(a){if(!!this._linelist&&!!this._textarea)if(a){var b=a.identifier;this._autocompletion_localpart=b;this._autocompletion_scope=a.scope;var c=/[A-Z]/.test(b),d=a.props.filter(function(a){c||(a=a.toLowerCase());return a.startswith(b)});if(!d.length)return;var e=this._longest_common_prefix(d.slice(0));if(e.length>b.length||d.length==1){var f=e.length>b.length&&d.length!==1;this._update_textarea_value(e,f)}else{this._data.add_input(this._textarea.value,!0);this._data.add_output_completion(d.sort(cls.PropertyFinder.prop_sorter).join(", "),!0);this.mode="autocomplete";var g=this._linelist.querySelectorAll(".repl-completion");this._autocompletion_elem=g[g.length-1];this._autocompletion_elem=this._autocompletion_elem.parentNode;var h=0;this._recent_autocompletion=d.sort(cls.PropertyFinder.prop_sorter).map(function(a){var b=[a,h,h+a.length];h+=a.length+2;return b});this._autocompletion_elem=this._autocompletion_elem.firstChild;this._autocompletion_index=-1;this._update_highlight();this._textarea.focus()}}else{var i=this._service.get_selected_objects(),j={};for(var k=0;k<i.length;k++)j["$"+k]=i[k];this._resolver.find_props(this._on_completer.bind(this),this._textarea.value.slice(0,this._textarea.selectionStart),window.stop_at.getSelectedFrame(),j)}};this._on_completer=function(a){this._handle_completer(a)};this._longest_common_prefix=function(a){if(a.length==0)return"";if(a.length==1)return a[0];var b=a.slice(0).sort(),c=b.shift(),d=b.pop();for(var e=d.length;e;e--)if(c.startswith(d.slice(0,e)))return d.slice(0,e);return""};this._be_multiline=function(){this.mode="multi-line-edit";this._textarea.addClass("multiline");this._textarea.focus()};this._be_singleline=function(){if(this.mode=="autocomplete"){this._resolver.clear_cache();this._highlight_completion();this._recent_autocompletion=null}this.mode="single-line-edit";if(this._textarea){this._textarea.removeClass("multiline");this._textarea.rows="1";this._textarea.focus()}};this._cancel_completion=function(){this.mode=="autocomplete"&&this._be_singleline()};this._handle_repl_frame_select_bound=function(a,b){if(a.target.getAttribute("data-script-id")!=null){var c=window.views.js_source;c.highlight(parseInt(a.target.getAttribute("data-script-id")),parseInt(a.target.getAttribute("data-line-number")));messages.post("trace-frame-selected",{rt_id:parseInt(b.getAttribute("runtime-id")),obj_id:parseInt(a.target.getAttribute("data-scope-variable-object-id")),this_id:parseInt(a.target.getAttribute("data-this-object-id")),arg_id:parseInt(a.target.getAttribute("data-arguments-object-id"))})}}.bind(this);this._handle_repl_toggle_group_bound=function(a,b){var c=this._data.get_group(b.getAttribute("group-id"));c.collapsed=c.collapsed?!1:!0;this.clear();this.update()}.bind(this);this._update_runtime_selector_bound=function(a){var b=host_tabs.isMultiRuntime();if(this._toolbar_visibility!==b){this._toolbar_visibility=b;topCell.setTooolbarVisibility("command_line",b)}}.bind(this);this._new_repl_context_bound=function(a){if(a.type=="frame-selected"){if(a.frame_index==this._prev_frame_index)return;this._prev_frame_index=a.frame_index}this._cancel_completion()}.bind(this);this._on_profile_disabled_bound=
function(a){if(a.profile==window.app.profiles.DEFAULT){this.ondestroy();this._toolbar_visibility=!1;topCell.setTooolbarVisibility("command_line",!1)}}.bind(this);this._handle_action_clear=function(a,b){this.clear();var c=this._textarea_handler.get_cursor();this._data.clear();this._textarea.focus();this._textarea_handler.put_cursor(c);return!1};this["_handle_action_kill-to-end-of-line"]=function(a,b){this._cancel_completion();this._textarea_handler.kill_to_end_of_line();return!1};this["_handle_action_kill-to-beginning-of-line"]=function(a,b){this._cancel_completion();this._textarea_handler.kill_to_beginning_of_line();return!1};this["_handle_action_kill-word-backwards"]=function(a,b){this._cancel_completion();this._textarea_handler.kill_word_backwards();return!1};this["_handle_action_move-to-beginning-of-line"]=function(a,b){this._cancel_completion();this._textarea_handler.move_to_beginning_of_line();return!1};this["_handle_action_move-to-end-of-line"]=function(a,b){this._cancel_completion();this._textarea_handler.move_to_end_of_line();return!1};this._handle_action_yank=function(a,b){this._cancel_completion();this._textarea_handler.yank();return!1};this["_handle_action_enter-multiline-mode"]=function(a,b){this._cancel_completion();this._be_multiline();return!1};this["_handle_action_exit-multiline-mode"]=function(a,b){if(!this._check_for_multiline()){this._multiediting=!1;this._be_singleline()}return!1};this._handle_action_autocomplete=function(a,b){this._on_invoke_completer(1);return!1};this["_handle_action_next-completion"]=function(a,b){this._update_highlight(1);return!1};this["_handle_action_prev-completion"]=function(a,b){this._update_highlight(-1);return!1};this["_handle_action_insert-tab-at-point"]=function(a,b){this._textarea_handler.insert_at_point("    ");return!1};this._handle_action_eval=function(a,b){var c=this._textarea.value;c=c.trim();this._textarea.value="";this._current_input="";this._backlog_index=-1;this._resolver.clear_cache();this._service.handle_input(c);this._cancel_completion();this._be_singleline();this._current_scroll=null;return!1};this._handle_action_commit=function(a,b){if(this._use_autocomplete_highlight&&this._recent_autocompletion){this._highlight_completion();this._commit_selection();return!1}};this["_handle_action_commit-and-insert"]=function(a,b){if(this._use_autocomplete_highlight&&this._recent_autocompletion){this._highlight_completion();this._commit_selection()}};this["_handle_action_cancel-completion"]=function(a,b){this._cancel_completion();return!1};this["_handle_action_backlog-next"]=function(a,b){this._handle_backlog(-1);this._update_input_height_bound();return!1};this["_handle_action_backlog-prev"]=function(a,b){this._handle_backlog(1);this._update_input_height_bound();return!1};this["_handle_action_cancel-input"]=function(a,b){return!1};this._handle_action_help=function(a,b){this.show_help()};this.handle=function(a,b,c){var d=this["_handle_action_"+a];if(d)return d.call(this,b,c)};this.focus=function(){this._textarea&&this._textarea.focus()};this.blur=function(){this._textarea&&this._textarea.blur()};this.onclick=function(a){if(!!this._container)if(this._textarea&&!/^(?:input|textarea|button)$/i.test(a.target.nodeName)&&!a.target.hasTextNodeChild()){this._textarea.focus();this._current_scroll=null}else this._current_scroll=this._container.scrollTop};this.get_action_list=function(){var a=[];for(var b in this)b.startswith("_handle_action_")&&a.push(b.slice(15));return a};this._handle_repl_show_log_entry_source_bound=function(a,b){window.Tooltips&&window.Tooltips.hide_tooltip();var c=Number(b.getAttribute("data-scriptid")),d=Number(b.getAttribute("data-scriptline")),e=Number(b.getAttribute("data-script-endline"));window.views.js_source&&window.views.js_source.show_script(c,d,e)}.bind(this);this.required_services=["ecmascript-debugger","console-logger"];this.mode_labels={"single-line-edit":ui_strings.S_LABEL_REPL_MODE_DEFAULT,"single-line-edit":ui_strings.S_LABEL_REPL_MODE_SINGLELINE,"multi-line-edit":ui_strings.S_LABEL_REPL_MODE_MULTILINE,autocomplete:ui_strings.S_LABEL_REPL_MODE_AUTOCOMPLETE};var g=window.eventHandlers;g.click["repl-toggle-group"]=this._handle_repl_toggle_group_bound;g.click["select-trace-frame"]=this._handle_repl_frame_select_bound;g.click["show-log-entry-source"]=this._handle_repl_show_log_entry_source_bound;messages.addListener("active-tab",this._update_runtime_selector_bound);messages.addListener("new-top-runtime",this._new_repl_context_bound);messages.addListener("debug-context-selected",this._new_repl_context_bound);messages.addListener("frame-selected",this._new_repl_context_bound);messages.addListener("profile-disabled",this._on_profile_disabled_bound);this.init(a,b,c,d,e);var h=window.services.scope.get_hello_message();this._data.add_message(h.userAgent+" (Core "+h.coreVersion+")");var i=ui_strings.S_REPL_WELCOME_TEXT.replace("%(CLEAR_COMMAND)s",'"clear()"').replace("%(HELP_COMMAND)s",'"// help()"');i.split("\n").forEach(function(a){this._data.add_message(a)},this);this._actionbroker.register_handler(this)};cls.ReplView.prototype=ViewBase;cls.ReplView.create_ui_widgets=function(){new Settings("command_line",{"typed-history":[],"unpack-list-alikes":!0,"do-friendly-print":!0,"is-element-type-sensitive":!0,"show-js-errors-in-repl":!0,"expand-objects-inline":!0},{"unpack-list-alikes":ui_strings.S_SWITCH_UNPACK_LIST_ALIKES,"do-friendly-print":ui_strings.S_SWITCH_FRIENDLY_PRINT,"is-element-type-sensitive":ui_strings.S_SWITCH_IS_ELEMENT_SENSITIVE,"show-js-errors-in-repl":ui_strings.S_SWITCH_SHOW_ECMA_ERRORS_IN_COMMAND_LINE,"expand-objects-inline":ui_strings.S_SWITCH_EXPAND_OBJECTS_INLINE},{checkboxes:["unpack-list-alikes","do-friendly-print","is-element-type-sensitive","show-js-errors-in-repl","expand-objects-inline"]},null,"general");new ToolbarConfig("command_line",null,null,null,[{handler:"select-window",title:ui_strings.S_BUTTON_LABEL_SELECT_WINDOW,type:"dropdown","class":"window-select-dropdown",template:window["cst-selects"]["cmd-runtime-select"].getTemplate()}]);var a=ActionBroker.get_instance(),b=ContextMenu.get_instance(),c=[{label:ui_strings.S_CLEAR_COMMAND_LINE_LOG,handler:function(){a.dispatch_action("command_line","clear")}}],d=c.slice(0);d.push({label:ui_strings.S_CLOSE_COMMAND_LINE,handler:function(b,c){a.dispatch_action("global","toggle-commandline",b,c)}});b.register("command_line",[{callback:function(a,b){if(UI.get_instance().get_mode()=="console_panel")return c;return d}}])};window.cls=window.cls||(window.cls={});cls.ReplData=function(a){var b=100;this._repllog=[];this._typed_history=settings.command_line.get("typed-history")||[];this._max_typed=settings.command_line.get("max-typed-history-length")||0;this._view=a;this.clear=function(){this._repllog=[];this._view.update()};this._entry_count=0;this._add_entry=function(a,b,c,d,e){var f={time:++this._entry_count,type:a,data:b,pos:c,severity:d};this._repllog.push(f);e&&this._view.isvisible()&&this._view.do_not_queue_next_update();this._view.update()};this.add_input=function(a,b){this._add_typed_history(a);this._add_entry("input",a,null,null,b)};this.add_output_str=function(a){this._add_entry("string",a)};this.add_message=this.add_output_str;this.add_output_completion=function(a,b){this._add_entry("completion",a,null,null,b)};this.add_output_errorlog=function(a){this._add_entry("errorlog",a)};this.add_output_pobj=function(a,b,c,d,e,f){this._add_entry("pobj",{rt_id:a,obj_id:b,name:c,friendly_printed:d,model:e,model_template:f})};this.add_output_valuelist=function(a,b,c,d){this._add_entry("valuelist",b,c,d)};this.add_output_trace=function(a){this._add_entry("trace",a)};this.add_output_groupstart=function(a){a.id=String((new Date).getTime());this._add_entry("groupstart",a)};this.add_output_groupend=function(a){this._add_entry("groupend",a)};this.add_output_count=function(a,b){this._add_entry("count",{count:a,label:b})};this.get_log=function(a){a=a||0;var b=function(b){return b.time>a};return this._repllog.filter(b)};this.get_group=function(a){var b=this._repllog.filter(function(b){return b.data&&b.data.id==a});return b.length?b[0].data:null};this.get_typed_history=function(){return this._typed_history};this._add_typed_history=function(a){if(this._typed_history[0]!=a&&a.trim()!==""){this._typed_history.unshift(a);this._typed_history=this._typed_history.slice(0,b);settings.command_line.set("typed-history",this._typed_history)}};this._on_profile_disabled_bound=function(a){a.profile==window.app.profiles.DEFAULT&&(this._repllog=[])}.bind(this);messages.addListener("profile-disabled",this._on_profile_disabled_bound)};window.templates||(window.templates={});templates.repl_main=function(){return["div",[[["div",["ol","class","repl-lines js-source"],"class","repl-output"],["div",[[["span",">>> ","class","repl-prefix"],["div",["textarea","focus-handler","repl-textarea","blur-handler","blur-textarea","rows","1"]]]],"class","repl-input"]]],"class","padding"]};templates.repl_output_native=function(a,b){return["span",a||" ","class","repl-native"]};templates.repl_output_native_or_pobj=function(a,b){return a.type=="native"?templates.repl_output_native(a.value,b):templates.repl_output_pobj(a)};templates.repl_output_pobj=function(a){var b=settings.command_line.get("is-element-type-sensitive")&&/(?:Element)$/.test(a.name);if(a.model){var c=null;a.model_template==cls.ReplService.INLINE_MODEL_TMPL_DOM?c=window.templates[a.model_template](a.model,null,!1,!0):c=window.templates[a.model_template](a.model,a.model.show_root);var d=["span",[c],"class","repl-inline-expandable"];a.model instanceof cls.InspectableJSObject&&d.push("handler","inspect-object-inline-link");return d}return["code",a.friendly_printed?this.friendly_print(a.friendly_printed):a.name,"handler",b?"inspect-node-link":"inspect-object-link","rt-id",a.rt_id.toString(),"obj-id",a.obj_id.toString(),"class","repl-pobj "+(b?"inspect-node-link":"inspect-object-link")]};templates.repl_output_traceentry=function(a){var b=a.length<=ini.max_frames,c=[];for(var d=0,e;e=a[d];d++){var f=b&&d==a.length-1?ui_strings.S_GLOBAL_SCOPE_NAME:e.objectValue.functionName||ui_strings.S_ANONYMOUS_FUNCTION_NAME,g=helpers.get_script_name(e.scriptID),h=["div",["span",f]];typeof e.scriptID=="number"&&!isNaN(e.scriptID)&&typeof e.lineNumber=="number"&&!isNaN(e.lineNumber)&&h.push(["span",(helpers.basename(g)||"–")+":"+(e.lineNumber||"–"),"data-ref-id",""+d,"data-script-id",String(e.scriptID),"data-line-number",String(e.lineNumber),"data-scope-variable-object-id",String(e.variableObject),"data-this-object-id",String(e.thisObject),"data-arguments-object-id",String(e.argumentObject),"class","repl-output-go-to-source"]);c.push(h)}return c};templates.repl_output_trace=function(a){var b=templates.repl_output_traceentry(a.frameList),c=["div",b,"class","console-trace","handler","select-trace-frame","runtime-id",a.runtimeID.toString()];return c};templates.repl_group_line=function(a){return[["button","class","folder-key"+(a.collapsed?"":" open"),"handler","repl-toggle-group","group-id",a.id],a.name]};templates.repl_output_location_link=function(a,b){var c=helpers.get_script_name(a);if(!c)return[];return["span",helpers.basename(c)+":"+b,"class","repl-output-go-to-source","handler","show-log-entry-source","data-scriptid",String(a),"data-scriptline",String(b)]};window.cls||(window.cls={});cls.EcmascriptDebugger||(cls.EcmascriptDebugger={});cls.EcmascriptDebugger["6.0"]||(cls.EcmascriptDebugger["6.0"]={});cls.EcmascriptDebugger["6.0"].ConsoleTraceInfo=function(a){this.runtimeID=a[0];this.frameList=(a[1]||[]).map(function(a){return new cls.EcmascriptDebugger["6.0"].BacktraceFrame(a)})};cls.EcmascriptDebugger["6.0"].BacktraceFrame=function(a){this.functionID=a[0];this.argumentObject=a[1];this.variableObject=a[2];this.thisObject=a[3];this.objectValue=a[4]?new cls.EcmascriptDebugger["6.0"].ObjectValue(a[4]):null;this.scriptID=a[5];this.lineNumber=a[6]};cls.EcmascriptDebugger["6.0"].ObjectValue=function(a){this.objectID=a[0];this.isCallable=a[1];this.type=a[2];this.prototypeID=a[3];this.className=a[4];this.functionName=a[5]};window.cls||(window.cls={});cls.Scope||(cls.Scope={});cls.Scope["1.0"]||(cls.Scope["1.0"]={});cls.Scope["1.0"].HostInfo=function(a){this.stpVersion=a[0];this.coreVersion=a[1];this.platform=a[2];this.operatingSystem=a[3];this.userAgent=a[4];this.serviceList=(a[5]||[]).map(function(a){return new cls.Scope["1.0"].Service(a)});this.toString=function(){return"[message HostInfo]"}};cls.Scope["1.0"].Service=function(a){this.name=a[0];this.version=a[1];this.toString=function(){return"[message Service]"}};window.cls||(window.cls={});cls.JSValue=function(a,b){const c=0,d=1,e=0,f=2,g=4,h=5;this.df_intern_type=a[cls.ReplService.DF_INTERN_TYPE]||"";this.type=a[c]===null?"object":"native";this.rt_id=b;var i=a[d];if(i){this.obj_id=i[e];this.type=i[f];this.name=i[g]||i[h];this.friendly_printed=i[cls.ReplService.FRIENDLY_PRINTED];this.model=i[cls.ReplService.INLINE_MODEL];this.model_template=i[cls.ReplService.INLINE_MODEL_TMPL]}else this.value=a[c]};window.cls||(window.cls={});cls.InlineExpander=function(a){const b=2,c=1,d=0,e=4,f=5,g=60,h=cls.InlineExpander.RE_DOM_OBJECT,i=cls.ReplService.INLINE_MODEL,j=cls.ReplService.INLINE_MODEL_TMPL,k=cls.ReplService.INLINE_MODEL_TMPL_JS,l=cls.ReplService.INLINE_MODEL_TMPL_DOM,m=cls.ReplService.FRIENDLY_PRINTED,n=cls.ReplService.IS_EXPANDABLE,o="Object is not a DOM node";this.expand=function(a){a.is_inline_expanded=!0;var b=a.value_list,f=[],g=this._onexpand_object.bind(this,f,a);a.inline_expand_callback=g;for(var k=0,o,p;o=b[k];k++)if((p=o[c])&&(!p[m]||p[m][n]))if(!a.is_dir&&(h.test(o[c][e])||a.traversal)){p[i]=new cls.InspectableDOMNode(a.rt_id,p[d],!0);p[j]=l;f.push(p[i]);p[i].expand(g,p[d],a.traversal||"node")}else this._init_inspectable_JS_object(a,f,p);f.length||this._callback(a)};this._init_inspectable_JS_object=function(a,b,c){var g=c[e]||c[f];c[m]&&(g=this._friendly_printer.friendly_string(c[m]));c[i]=new cls.InspectableJSObject(a.rt_id,c[d],g);c[j]=k;c[i].show_root=!0;if(a.expand){b.push(c[i]);c[i].show_root=!1;c[i].expand(a.inline_expand_callback)}};this._onexpand_object=function(a,b){for(var c=0,d;d=a[c];c++)d.error&&(this._error_handlers[d.error]?this._error_handlers[d.error](b,a,d):this._default_error_handler(b,a,d));if(a.every(this._model_has_data)||a.length==0){b.inline_expand_callback=null;this._callback(b)}};this._model_has_data=function(a){return a.has_data()};this._error_handlers={};this._error_handlers[o]=function(a,b,c){var d=this._default_error_handler(a,b,c);d&&this._init_inspectable_JS_object(a,b,d)}.bind(this);this._default_error_handler=function(a,b,d){for(var e=0,f,g;f=a.value_list[e];e++)if((g=f[c])&&g[i]==d){b.splice(e,1);g[i]=null;g[j]=null;return g}};this.init=function(a){this._callback=a;this._tagman=window.tagManager;this._service=window.services["ecmascript-debugger"];this._friendly_printer=new cls.FriendlyPrinter};this.init(a)};cls.InlineExpander.RE_DOM_OBJECT=/Element$/;window.cls||(window.cls={});window.cls.FriendlyPrinter=function(a){this.init(a)};window.cls.FriendlyPrinter.prototype=new function(){const a=2,b=1,c=0,d=4,e=60,f=cls.InlineExpander.RE_DOM_OBJECT,g="expand-objects-inline",h=cls.ReplService.FRIENDLY_PRINTED;this.get_friendly_print=function(a){a.is_friendly_printed=!0;var b=a.value_list.reduce(this.value2objlist,[]),c=b.map(this._obj2obj_id_list),d=[],f=0;while(c.length>e*f)d.push(c.slice(f++*e,f*e));var g={obj_list:b,queue:[],queue_length:f};d.forEach(function(b,c){var d=b.map(this._obj_id2str).join(","),e=b.reduce(this._create_arg_list,[]),f=this._tagman.set_callback(this,this._handle_chunk_list,[a,g,c]),h=this._friendly_print_host_str.replace("%s",d),i=[a.rt_id,a.thread_id||0,a.frame_id||0,h,e];this._service.requestEval(f,i)},this)};this._handle_chunk_list=function(a,b,c,d,e){const f=0,g=3;if(a||!b[g]||d.failed){opera.postError("Pretty printing failed: "+JSON.stringify(b));d.failed=!0;this._finalize(c,d)}else{var h=this._tagman.set_callback(this,this._handle_examined_chunk_list,[c,d,e]),i=[c.rt_id,[b[g][f]]];this._service.requestExamineObjects(h,i)}};this._handle_examined_chunk_list=function(a,b,c,d,e){if(a||d.failed){opera.postError("Pretty printing failed: "+JSON.stringify(b));d.failed=!0;this._finalize(c,d)}else{const f=0,g=0,h=1,i=0,j=3,k=0;var l=b&&(b=b[f])&&(b=b[0])&&(b=b[g])&&(b=b[0])&&(b=b[h])||[];d.queue[e]={is_examined:!1,prop_list:l.reduce(function(a,b){b[k].isdigit()&&(a[b[k]]=b[j]&&b[j][i]||null);return a},[])};var m=d.queue[e].prop_list.filter(Boolean);if(m.length){var n=this._tagman.set_callback(this,this._handle_queue,[c,d,e]);this._service.requestExamineObjects(n,[c.rt_id,m])}else this._handle_queue(0,null,c,d,e)}};this._handle_queue=function(a,b,c,d,e){if(a||d.failed){opera.postError("Pretty printing failed: "+JSON.stringify(b));d.failed=!0;this._finalize(c,d)}else{const f=0,g=0,h=0,i=0,j=1,k=0,l=1,m=2;var n=d.queue[e].prop_list,o=b&&b[f];o&&o.forEach(function(a){var b=a[g][0],c=b[h][i],d=n.indexOf(c);n[d]=b[j].reduce(function(a,b){b[k].isdigit()&&(a[b[k]]=b[l]=="number"?parseInt(b[m]):b[m]);return a},[])});d.queue[e].is_examined=!0}for(var p=0;p<d.queue.length&&d.queue[p].is_examined;p++);p==d.queue_length&&this._finalize(c,d,d.queue)};this._finalize=function(a,b,c){var d=c&&c.reduce(function(a,b){return a.extend(b.prop_list)},[]);d&&b.obj_list.forEach(function(a,b){a[h]=d[b]});this._callback(a)};this._friendly_print_host=function(a){const b=1,c=2,d=3,e=4,f=5;var g=a.map(function(a){var g=a===null?"":Object.prototype.toString.call(a);if(/Element\]$/.test(g))return[b,0,a.nodeName.toLowerCase(),a.id,a.className,a.getAttribute("href"),a.getAttribute("src")];if(g=="[object Date]")return[c,1,a.toString()];if(g=="[object Function]")return[d,0,a.toString()];if(/(Error|Exception)\]$/.test(g))return[e,1,"Unhandled "+g.slice(8,-1)+": "+a.message];if(g=="[object RegExp]")return[f,1,a.toString()];return null});return g};this.templates=function(){const a=0,b=1,c=2,d=3,e=4,f=5,g=2,h=3,i=4,j=5,k=6;var l={};l[g]="element-name";l[h]="element-id";l[i]="element-class";l[j]="element-href";l[k]="element-src";this._print_values=function(a,b){switch(a){case g:return b;case h:return"#"+b;case i:return"."+b.trim().replace(/\s+/g,".");case j:return" "+b;case k:return" "+b;default:return" "}};this.friendly_print=function(b){return this._friendly_print[b[a]](b)};this._friendly_print={};this._friendly_print[b]=function(a){return a.reduce(function(a,b,c){c in l&&b&&a.push(["span",this._print_values(c,b),"class",l[c]]);return a}.bind(this),[])}.bind(this);this._friendly_print[c]=function(a){const b=2;return["span",a[b],"class","datetime"]};this._friendly_print[d]=function(a){const b=2;return window.templates.highlight_js_source(a[b]).concat("class","function-expression")};this._friendly_print[e]=function(a){const b=2;return["span",a[b],"class","severity-error"]};this._friendly_print[f]=function(a){const b=2;return["span",a[b],"class","reg_exp"]}};this.friendly_string=function(a){const b=0,c=1,d=2,e=3,f=2,g=4,h=5;switch(a[b]){case d:case h:return a[f];case g:return a[f]}return""};this._obj2obj_id_list=function(a,b){return a[c]};this._obj_id2str=function(a){return a&&"$_"+a||null};this._create_arg_list=function(a,b){b&&a.push(["$_"+b,b]);return a};this._onsettingchange=function(a){a.id=="command_line"&&a.key==g&&(this._is_inline_expand=settings.command_line.get(g))};this.list_has_object=function(a){return a&&a.some(function(a){return a[b]&&(!this._is_inline_expand||!f.test(a[b][d]))},this)};this.value2objlist=function(a,b){const c=1;b[c]&&(!this._is_inline_expand||!f.test(b[c][d]))&&a.push(b[c]);return a};this.init=function(a){this._callback=a;this._tagman=window.tagManager;this._service=window.services["ecmascript-debugger"];this.templates.apply(window.templates||(window.templates={}));this._friendly_print_host_str="("+this._friendly_print_host.toString()+")([%s])";messages.addListener("setting-changed",this._onsettingchange.bind(this));this._is_inline_expand=settings.command_line.get(g);this.value2objlist=this.value2objlist.bind(this)}};window.cls||(window.cls={});window.cls.ListUnpacker=function(a){const b=cls.ReplService.DF_INTERN_TYPE;this.unpack_list_alikes=function(a){a.is_unpacked=!0;const b=1,c=0;var d=[],e=[],f=[];for(var g=0,h,i,j;j=a.value_list[g];g++){h=j[b]&&j[b][c]||0;i=h&&"$_"+h||"null";d.push(h);e.push(i);h&&f.push([i,h])}if(f.length){var k=this._tagman.set_callback(this,this._handle_list_alikes_list,[a,d]),l=this._is_list_alike_to_string.replace("%s",e.join(",")),m=[a.rt_id,0,0,l,f];this._edservice.requestEval(k,m)}else this._callback(a)};this._is_list_alike=function(a){return a.map(function(a){var b=a===null?"":Object.prototype.toString.call(a);if(b=="[object XPathResult]")return 3;if(/(?:Array|Collection|List|Map)\]$/.test(b))return 2;if(b=="[object Object]"&&typeof a.length=="number")return 1;return 0}).join(",")};this._xpathresult2array=function(a){for(var b=0,c=[];b<a.snapshotLength;b++)c.push(a.snapshotItem(b));return c};this._handle_list_alikes_list=function(a,b,c,d){const e=0,f=2,g=3;if(a||b[e]!="completed")this._callback(c);else{var h=b[f].split(",").map(Number);if(h.filter(Boolean).length){var i={},j=!1;for(var k=0,l,b;k<h.length;k++)if(h[k]==g){j=!0;i[k]=!1;l=this._tagman.set_callback(this,this._handle_xpathresult,[c,d,h,k,i]);b=[c.rt_id,0,0,this._xpathresult2array_to_string,[["xpathresult",d[k]]]];this._edservice.requestEval(l,b)}j||this._examine_list_alikes(c,d,h)}else this._callback(c)}};this._handle_xpathresult=function(a,b,c,d,e,f,g){const h=0,i=3,j=0;if(a||b[h]!="completed"||!b[i])this._callback(c);else{d[f]=b[i][j];g[f]=!0;var k=!0;for(f in g)k=k&&g[f];k&&this._examine_list_alikes(c,d,e)}};this._examine_list_alikes=function(a,b,c){var d=c.reduce(function(a,c,d){c&&a.push(b[d]);return a},[]),e=this._tagman.set_callback(this,this._handle_unpacked_list,[a,c]);this._edservice.requestExamineObjects(e,[a.rt_id,d])};this._handle_unpacked_list=function(a,c,d,e){const f=0,g=2;if(a||!c[f]){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" ExamineObjects failed in _handle_unpacked_list in ListUnpacker");this._callback(d)}else{var h=c[f].map(this._examine_objects_to_value_list,this),i=d.value_list;d.value_list=e.reduce(function(a,c,d){if(c&&(!h[0]||h[0].length!=0||c!=1)){var e=i[d];e[b]="unpack-header";a.push(e);a.push.apply(a,h.shift());a.push(["",null,0,"unpack-footer"])}else a.push(i[d]);return a},[]);this._callback(d)}};this._examine_objects_to_value_list=function(a){const b=0,c=0,d=1,e=4,f=0,g=1,h=2,i=3;var j=[],k=a[b]&&a[b][0];if(k&&k[d]){j=k[d].reduce(function(a,b){if(b[f].isdigit())if(b[g]=="object")a.push([null,b[i],parseInt(b[f])]);else{b[g]=="string"&&(b[h]='"'+b[h]+'"');a.push([b[h]||b[g],null,parseInt(b[f])])}return a},[]);j.sort(function(a,b){return a[2]<b[2]?-1:a[2]>b[2]?1:0})}return j};this.init=function(a){this._callback=a;this._tagman=window.tagManager;this._edservice=window.services["ecmascript-debugger"];this._is_list_alike_to_string="("+this._is_list_alike.toString()+")([%s])";this._xpathresult2array_to_string="("+this._xpathresult2array.toString()+")(xpathresult)"};this.init(a)};var DFLCommands=function(){};DFLCommands.commands={};DFLCommands.commands.help={alias:"man",command:function(a,b,c){b.add_message("Available commands:");var d=[];for(var e in this._dfcommands)this._dfcommands.hasOwnProperty(e)&&d.push(e);d.sort();for(var f=0,g;g=d[f];f++){var h=this._dfcommands[g];b.add_message(g+(h.description?": "+h.description:""))}b.add_message("\n");b.add_message(ui_strings.S_SETTINGS_HEADER_KEYBOARD_SHORTCUTS+":");b.add_message("\n");const i="command_line";var j=ActionBroker.get_instance(),k=j.get_shortcuts();k=k&&k[i];var l={},m=[];for(var n in k){mode_label=j.get_label_with_handler_id_and_mode(i,n);if(mode_label){var o=k[n],p=[];for(var q in o)p.push(q);p.sort();m.extend(p);l[n]={label:mode_label,keys:p}}}var r=Math.max.apply(Math,m.map(function(a){return a.length}));for(n in l){b.add_message(l[n].label);l[n].keys.forEach(function(a){b.add_message("    "+a.ljust(r+4)+k[n][a])});b.add_message("\n")}},description:ui_strings.S_REPL_HELP_COMMAND_DESC};DFLCommands.commands.jquery={command:function(a,b,c){var d="http://code.jquery.com/jquery.min.js",e=["(function(){","  var script = document.createElement('script');","  script.setAttribute('src', '"+d+"');","  var cb = function() {","    script.parentNode.removeChild(script);","    console.log('jquery loaded');","  };","  script.addEventListener('load', cb, false);","  document.body.appendChild(script);","  return 'Loading jquery'","})();"].join("\n");c.evaluate_input(e)},description:ui_strings.S_REPL_JQUERY_COMMAND_DESC};cls.CommandLineRuntimeSelect=function(a,b){this.getSelectedOptionText=function(){var a=window.runtimes.getRuntime(this._selected_runtime_id);return a?a.title||a.short_distinguisher:""};this.getSelectedOptionValue=function(){};this.templateOptionList=function(a){return templates.runtime_dropdown(runtimes.get_dom_runtimes())};this.checkChange=function(a){var b=parseInt(a.getAttribute("rt-id"));b&&b!=this._selected_runtime_id&&this.set_id(b);return!0};this._onruntimeselected=function(a){this.set_id(a.id)};this.set_id=function(a){this._selected_runtime_id=a;this.updateElement()};this.get_id=function(a){return this._selected_runtime_id};this.init=function(a,b){this._selected_runtime=null;CstSelect.prototype.init.call(this,a,b);window.messages.add_listener("runtime-selected",this._onruntimeselected.bind(this))};this.init(a,b)};cls.CommandLineRuntimeSelect.prototype=new CstSelect;var OverlayService=function(a){var b=[255,0,0,128];this._init=function(a){this._overlay=window.services.overlay;this._tag_manager=window.tag_manager;this._window_id=0;this._default_config=a||{color:b}};this._init(a)},OverlayServicePrototype=function(){this.create_overlay=function(a,b){b=b||{};(b.x==null||b.y==null||b.w==null||b.h==null)&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Too few arguments to OverlayService#create_overlay.");var c=b.window_id||this._window_id,d=b.overlay_type||OverlayService.OverlayType.AREA,e=[b.insertion_method||OverlayService.InsertionMethod.FRONT,b.overlay_id||null],f=[[b.x,b.y,b.w,b.h],b.color||this._default_config.color||null,b.border_color||this._default_config.border_color||null,b.grid_color||this._default_config.grid_color||null],g=this._tag_manager.set_callback(this,this._callback_handler,[a]),h=[c,d,e,f];this._overlay.requestCreateOverlay(g,h)};this.remove_overlay=function(a,b){b=b||{};var c=b.window_id||this._window_id,d=typeof b.overlay_id=="number"?b.overlay_id:null,e=this._tag_manager.set_callback(this,this._callback_handler,[a]),f=[c,d];this._overlay.requestRemoveOverlay(e,f)};this.set_window_id=function(a){this._window_id=a};this._callback_handler=function(a,b,c){c&&c(a,b)}};OverlayService.prototype=new OverlayServicePrototype;OverlayService.OverlayType={AREA:1};OverlayService.InsertionMethod={FRONT:1,BACK:2,ABOVE_TARGET:3,BELOW_TARGET:4};window.cls||(window.cls={});cls.Profiler||(cls.Profiler={});cls.Profiler["1.0"]||(cls.Profiler["1.0"]={});cls.Profiler["1.0"].EventList=function(a,b){this.parent=b||null;this.interval=a[0]?new cls.Profiler["1.0"].Interval(a[0],this):null;var c=this;this.eventList=(a[1]||[]).map(function(a){return new cls.Profiler["1.0"].Event(a,c)});this.toString=function(){return"[message EventList]"}};cls.Profiler["1.0"].Interval=function(a,b){this.parent=b||null;this.start=a[0];this.end=a[1];this.toString=function(){return"[message Interval]"}};cls.Profiler["1.0"].Event=function(a,b){this.parent=b||null;this.type=a[0];this.time=a[1];this.overhead=a[2];this.hits=a[3];this.interval=a[4]?new cls.Profiler["1.0"].Interval(a[4],this):null;this.eventID=a[5];this.parentEventID=a[6];this.childCount=a[7];this.aggregatedTime=a[8];this.aggregatedOverhead=a[9];this.cssSelectorMatching=a[10]?new cls.Profiler["1.0"].CssSelectorMatchingEvent(a[10],this):null;this.threadEvaluation=a[11]?new cls.Profiler["1.0"].ThreadEvaluationEvent(a[11],this):null;this.documentParsing=a[12]?new cls.Profiler["1.0"].DocumentParsingEvent(a[12],this):null;this.cssParsing=a[13]?new cls.Profiler["1.0"].CssParsingEvent(a[13],this):null;this.scriptCompilation=a[14]?new cls.Profiler["1.0"].ScriptCompilationEvent(a[14],this):null;this.paint=a[15]?new cls.Profiler["1.0"].PaintEvent(a[15],this):null;this.toString=function(){return"[message Event]"}};cls.Profiler["1.0"].CssSelectorMatchingEvent=function(a,b){this.parent=b||null;this.selector=a[0];this.toString=function(){return"[message CssSelectorMatchingEvent]"}};cls.Profiler["1.0"].ThreadEvaluationEvent=function(a,b){this.parent=b||null;this.threadType=a[0];this.eventName=a[1];this.toString=function(){return"[message ThreadEvaluationEvent]"}};cls.Profiler["1.0"].DocumentParsingEvent=function(a,b){this.parent=b||null;this.url=a[0];this.toString=function(){return"[message DocumentParsingEvent]"}};cls.Profiler["1.0"].CssParsingEvent=function(a,b){this.parent=b||null;this.url=a[0];this.toString=function(){return"[message CssParsingEvent]"}};cls.Profiler["1.0"].ScriptCompilationEvent=function(a,b){this.parent=b||null;this.scriptType=a[0];this.url=a[1];this.toString=function(){return"[message ScriptCompilationEvent]"}};cls.Profiler["1.0"].PaintEvent=function(a,b){this.parent=b||null;this.area=a[0]?new cls.Profiler["1.0"].Area(a[0],this):null;this.toString=function(){return"[message PaintEvent]"}};cls.Profiler["1.0"].Area=function(a,b){this.parent=b||null;this.x=a[0];this.y=a[1];this.w=a[2];this.h=a[3];this.toString=function(){return"[message Area]"}};window.cls||(window.cls={});cls.Profiler||(cls.Profiler={});cls.Profiler["1.0"]||(cls.Profiler["1.0"]={});cls.Profiler["1.0"].Session=function(a,b){this.parent=b||null;this.sessionID=a[0];this.windowID=a[1];var c=this;this.timelineList=(a[2]||[]).map(function(a){return new cls.Profiler["1.0"].Timeline(a,c)});this.toString=function(){return"[message Session]"}};cls.Profiler["1.0"].Timeline=function(a,b){this.parent=b||null;this.timelineID=a[0];this.frameID=a[1];this.toString=function(){return"[message Timeline]"}};var ProfilerService=function(){this.__defineGetter__("is_active",function(){return this._is_active});this.__defineSetter__("is_active",function(){});this.start_profiler=function(a,b){b=b||{};var c=b.start_mode||ProfilerService.StartMode.IMMEDIATE,d=b.window_id||this._window_id,e=this._tag_manager.set_callback(this,this._callback_handler,[a,!0]),f=[c,d];this._profiler.requestStartProfiler(e,f)};this.stop_profiler=function(a,b){b=b||{};var c=this._tag_manager.set_callback(this,this._callback_handler,[a,!1]),d=[b.session_id];this._profiler.requestStopProfiler(c,d)};this.get_events=function(a,b){b=b||{};var c=this._tag_manager.set_callback(this,this._callback_handler,[a]),d=[b.session_id,b.timeline_id,typeof b.mode=="number"?b.mode:null,typeof b.event_id=="number"?b.event_id:null,typeof b.max_depth=="number"?congif.max_depth:null,b.event_type_list||null,b.interval||null];this._profiler.requestGetEvents(c,d)};this.release_session=function(a,b){b=b||{};var c=this._tag_manager.set_callback(this,this._callback_handler,[a]),d=[typeof b.session_id=="number"?b.session_id:null];this._profiler.requestReleaseSession(c,d)};this.get_window_id=function(){return this._window_id};this._on_debug_context_selected=function(a){this._window_id=a.window_id};this._callback_handler=function(a,b,c,d){d!=null&&(this._is_active=d);c&&c(a,b)};this._init=function(){this._profiler=window.services.profiler;this._tag_manager=window.tag_manager;this._is_active=!1;this._window_id=0;window.messages.addListener("debug-context-selected",this._on_debug_context_selected.bind(this))};this._init()};ProfilerService.StartMode={IMMEDIATE:1,URL:2};ProfilerService.EventType={GENERIC:1,PROCESS:2,DOCUMENT_PARSING:3,CSS_PARSING:4,SCRIPT_COMPILATION:5,THREAD_EVALUATION:6,REFLOW:7,STYLE_RECALCULATION:8,CSS_SELECTOR_MATCHING:9,LAYOUT:10,PAINT:11};ProfilerService.Mode={ALL:1,REDUCE_UNIQUE_TYPES:2,REDUCE_UNIQUE_EVENTS:3,REDUCE_ALL:4};ProfilerService.ScriptThreadType={UNKNOWN:0,COMMON:1,TIMEOUT:2,EVENT:3,INLINE_SCRIPT:4,JAVASCRIPT_URL:5,HISTORY_NAVIGATION:6,JAVA_EVAL:7,DEBUGGER_EVAL:8};ProfilerService.ScriptType={UNKNOWN:0,LINKED:1,INLINE:2,GENERATED:3,EVAL:4,TIMEOUT:5,URI:6,EVENT_HANDLER:7,USERJS:8,BROWSERJS:9,EXTENSIONJS:10,DEBUGGER:11};var ProfilerView=function(a,b,c,d,e){var f=0,g=ProfilerService.EventType,h=g.GENERIC,i=g.PROCESS,j=g.DOCUMENT_PARSING,k=g.CSS_PARSING,l=g.SCRIPT_COMPILATION,m=g.THREAD_EVALUATION,n=g.REFLOW,o=g.STYLE_RECALCULATION,p=g.CSS_SELECTOR_MATCHING,q=g.LAYOUT,r=g.PAINT,s=ProfilerService.Mode,t=s.ALL,u=s.REDUCE_UNIQUE_TYPES,v=s.REDUCE_UNIQUE_EVENTS,w=s.REDUCE_ALL,x=0,y=2,z=0,A=document.styleSheets.getDeclaration(".profiler-timeline"),B=A?parseInt(A.left):0;this._children={};this._children[o]=p;this._tabledefs={};this._tabledefs[p]={idgetter:function(a){return a.cssSelectorMatching
.selector},column_order:["selector","time","hits"],columns:{selector:{label:ui_strings.S_PROFILER_TYPE_SELECTOR},time:{label:ui_strings.S_TABLE_HEADER_TIME,align:"right",renderer:function(a){return this._templates.format_time(a.time)}.bind(this),classname:"profiler-details-time"},hits:{label:ui_strings.S_TABLE_HEADER_HITS,align:"right",renderer:function(a){return String(a.hits)},classname:"profiler-details-hits"}}};this._default_types=[j,k,l,m,n,o,q,r];this._timeline_modes=[{id:"_timeline_list",mode:t},{id:"_aggregated_list",mode:u},{id:"_reduced_list",mode:w}];this._reset=function(){this._current_session_id=null;this._current_timeline_id=null;this._event_id=null;this._event_type=null;this._timeline_list=null;this._aggregated_list=null;this._reduced_list=null;this._table=null;this._details_time=0};this._reset_details=function(){this._table=null;this._details_time=0};this._start_profiler=function(){this._reset();this._container.clearAndRender(this._templates.empty(ui_strings.S_PROFILER_PROFILING));this._profiler.start_profiler(this._handle_start_profiler_bound);this._overlay.set_window_id(this._profiler.get_window_id())};this._handle_start_profiler=function(a,b){if(a===f){this._old_session_id=this._current_session_id;this._current_session_id=b[x]}else this._show_error_message(b);this._update_record_button_title()};this._stop_profiler=function(){this._container.clearAndRender(this._templates.empty(ui_strings.S_PROFILER_CALCULATING));var a={session_id:this._current_session_id};this._profiler.stop_profiler(this._handle_stop_profiler_bound,a)};this._handle_stop_profiler=function(a,b){if(a===f){this._current_timeline_id=b[y][0][z];this._timeline_modes.forEach(function(a){var b={session_id:this._current_session_id,timeline_id:this._current_timeline_id,mode:a.mode,event_type_list:this._default_types};this._profiler.get_events(this._handle_timeline_list_bound.bind(null,a.id),b)},this)}else this._show_error_message(b);this._update_record_button_title()};this._handle_timeline_list=function(a,b,c){if(b===f){this[a]=new cls.Profiler["1.0"].EventList(c);var d=this._timeline_modes.every(function(a){return this[a.id]},this);d&&this._update_view()}else this._show_error_message(c)};this._show_error_message=function(a){this._container.clearAndRender(this._templates.empty(ui_strings.S_PROFILER_PROFILING_FAILED));opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+": \n"+a)};this._update_view=function(){if(!!this._container){var a=[];this._profiler.is_active?a.extend(this._templates.empty(ui_strings.S_PROFILER_PROFILING)):this._timeline_list&&this._timeline_list.eventList?a.extend(this._timeline_list.eventList[0]?this._templates.main(this._timeline_list,this._aggregated_list,this._table,this._details_time,this._event_id,this._container.clientWidth-B,this._get_zero_point()):this._templates.empty(ui_strings.S_PROFILER_NO_DATA)):a.extend(this._templates.empty(ui_strings.S_PROFILER_START_MESSAGE));this._container.clearAndRender(a);this._details_list=this._container.querySelector(".profiler-details-list");this._status=this._container.querySelector(".profiler-status")}};this.createView=function(a){this._container=a;this._update_view()};this.create_disabled_view=function(a){a.clearAndRender(this._templates.disabled_view())};this.ondestroy=function(){this._container=null};this.focus=function(){};this.blur=function(){};this.onclick=function(){};this.onresize=function(){this._container&&this._update_view()};this._start_stop_profiler=function(){this._profiler.is_active?this._stop_profiler():this._start_profiler()};this._get_event_details=function(a,b){this._event_id=Number(b.getAttribute("data-event-id"))||null;this._event_type=Number(b.getAttribute("data-event-type"));this._show_details_list()};this._show_details_list=function(){var a=this._children[this._event_type];if(a){this._details_list.clearAndRender(this._templates.empty(ui_strings.S_PROFILER_CALCULATING));var b={session_id:this._current_session_id,timeline_id:this._current_timeline_id,mode:v,event_id:this._event_id,event_type_list:[a]};this._profiler.get_events(this._handle_details_list_bound.bind(null,a),b)}else{this._reset_details();this._details_list.clearAndRender(this._templates.no_events());this._details_list.addClass("profiler-no-status");this._status.addClass("profiler-no-status")}};this._handle_details_list=function(a,b,c){var d=this._tabledefs[a];this._table=new SortableTable(d,null,d.column_order,"time",null,!0,"profiler");var e=new cls.Profiler["1.0"].EventList(c),f=e&&e.eventList;if(f.length){this._table.set_data(f);this._details_time=f.reduce(function(a,b){return a+b.time},0);this._details_list.clearAndRender(this._templates.details(this._table));this._status.clearAndRender(this._templates.status(this._details_time));this._details_list.removeClass("profiler-no-status");this._status.removeClass("profiler-no-status")}else this._details_list.clearAndRender(this._templates.no_events())};this._reload_window=function(a,b){this._current_session_id&&this._profiler.release_session(null,{session_id:this._old_session_id});this._reset();window.services.scope.enable_profile(window.app.profiles.PROFILER)};this._update_record_button_title=function(){window.toolbars[this.id].set_button_title("profiler-start-stop",this._profiler.is_active?ui_strings.S_BUTTON_STOP_PROFILER:ui_strings.S_BUTTON_START_PROFILER)};this._get_zero_point=function(){return this._has_zero_at_first_event?this._timeline_list&&this._timeline_list.eventList&&this._timeline_list.eventList[0]&&this._timeline_list.eventList[0].interval.start:0};this._on_profile_enabled=function(a){if(a.profile===window.app.profiles.PROFILER){this._has_overlay_service=window.services.overlay&&window.services.overlay.is_enabled;window.runtimes.reloadWindow()}else{this._current_session_id&&this._profiler.release_session(null,{session_id:this._old_session_id});this._reset()}};this._on_settings_changed=function(a){a.id===this.id&&a.key==="zero-at-first-event"&&(this._has_zero_at_first_event=a.value)};this._on_settings_initialized=function(a){a.view_id===this.id&&(this._has_zero_at_first_event=a.setting.get("zero-at-first-event"))};this._ontooltip=function(a,b){var c=Number(b.get_attr("parent-node-chain","data-event-id")),d=this._timeline_list.get_event_by_id(c);d&&this._tooltip.show(this._templates.get_title_all(d))};this._show_event_details=function(a,b){if(!!this._has_overlay_service){var c=Number(b.get_attr("parent-node-chain","data-event-id")),d=this._timeline_list.get_event_by_id(c);if(d&&d.type===r){var e=d.paint.area,f={x:e.x,y:e.y,w:e.w,h:e.h};this._overlay.create_overlay(null,f)}}};this._hide_event_details=function(a,b){if(!!this._has_overlay_service){var c=Number(b.get_attr("parent-node-chain","data-event-id")),d=this._timeline_list.get_event_by_id(c);d&&d.type===r&&this._overlay.remove_overlay()}};this._init=function(a,b,c,d,e){View.prototype.init.call(this,a,b,c,d,e);this.required_services=["profiler"];this._profiler=new ProfilerService;this._overlay=new OverlayService;this._templates=new ProfilerTemplates;this._has_overlay_service=!1;this._has_zero_at_first_event=!1;this._old_session_id=null;this._reset();Tooltips.register("profiler-tooltip-url",{type:Tooltips.TYPE_SUPPORT_CONTEXT});this._tooltip=Tooltips.register("profiler-event",{type:Tooltips.TYPE_SUPPORT_CONTEXT});this._tooltip.ontooltip=this._ontooltip.bind(this);this._handle_start_profiler_bound=this._handle_start_profiler.bind(this);this._handle_stop_profiler_bound=this._handle_stop_profiler.bind(this);this._handle_timeline_list_bound=this._handle_timeline_list.bind(this);this._handle_details_list_bound=this._handle_details_list.bind(this);window.messages.addListener("profile-enabled",this._on_profile_enabled.bind(this));window.messages.addListener("setting-changed",this._on_settings_changed.bind(this));window.messages.addListener("settings-initialized",this._on_settings_initialized.bind(this));window.event_handlers.click["profiler-start-stop"]=this._start_stop_profiler.bind(this);window.event_handlers.click["profiler-reload-window"]=this._reload_window.bind(this);window.event_handlers.mousedown["profiler-event"]=this._get_event_details.bind(this);window.event_handlers.mouseover["profiler-event"]=this._show_event_details.bind(this);window.event_handlers.mouseout["profiler-event"]=this._hide_event_details.bind(this)};this._init(a,b,c,d,e)};ProfilerView.prototype=ViewBase;ProfilerView.create_ui_widgets=function(){new ToolbarConfig({view:"profiler_all",groups:[{type:UI.TYPE_BUTTONS,items:[{handler:"profiler-start-stop",title:ui_strings.S_BUTTON_START_PROFILER}]},{type:UI.TYPE_SWITCH,items:[{key:"profiler_all.zero-at-first-event"}]}]});new Settings("profiler_all",{"zero-at-first-event":!0},{"zero-at-first-event":ui_strings.S_SWITCH_CHANGE_START_TO_FIRST_EVENT})};cls.Profiler["1.0"].EventList.prototype.get_event_by_id=function(a){var b=this.eventList;if(b)for(var c=0,d;d=b[c];c++)if(d.eventID===a)return d;return null};cls.Profiler["1.0"].Event.prototype={set selector(){},get selector(){return this.cssSelectorMatching?this.cssSelectorMatching.selector:null}};var ProfilerTemplates=function(){var a=ProfilerService.EventType,b=a.GENERIC,c=a.PROCESS,d=a.DOCUMENT_PARSING,e=a.CSS_PARSING,f=a.SCRIPT_COMPILATION,g=a.THREAD_EVALUATION,h=a.REFLOW,i=a.STYLE_RECALCULATION,j=a.CSS_SELECTOR_MATCHING,k=a.LAYOUT,l=a.PAINT,m=ProfilerService.ScriptThreadType,n=m.UNKNOWN,o=m.COMMON,p=m.TIMEOUT,q=m.EVENT,r=m.INLINE_SCRIPT,s=m.JAVASCRIPT_URL,t=m.HISTORY_NAVIGATION,u=m.JAVA_EVAL,v=m.DEBUGGER_EVAL,w=ProfilerService.ScriptType,x=w.UNKNOWNM,y=w.LINKED,z=w.INLINE,A=w.GENERATED,B=w.EVAL,C=w.TIMEOUT,D=w.URI,E=w.EVENT_HANDLER,F=w.USERJS,G=w.BROWSERJS,H=w.EXTENSIONJS,I=w.DEBUGGER,J={};J[b]=ui_strings.S_EVENT_TYPE_GENERIC;J[c]=ui_strings.S_EVENT_TYPE_PROCESS;J[d]=ui_strings.S_EVENT_TYPE_DOCUMENT_PARSING;J[e]=ui_strings.S_EVENT_TYPE_CSS_PARSING;J[f]=ui_strings.S_EVENT_TYPE_SCRIPT_COMPILATION;J[g]=ui_strings.S_EVENT_TYPE_THREAD_EVALUATION;J[h]=ui_strings.S_EVENT_TYPE_REFLOW;J[i]=ui_strings.S_EVENT_TYPE_STYLE_RECALCULATION;J[j]=ui_strings.S_EVENT_TYPE_CSS_SELECTOR_MATCHING;J[k]=ui_strings.S_EVENT_TYPE_LAYOUT;J[l]=ui_strings.S_EVENT_TYPE_PAINT;var K={};K[n]=ui_strings.S_THREAD_TYPE_UNKNOWN;K[o]=ui_strings.S_THREAD_TYPE_COMMON;K[p]=ui_strings.S_THREAD_TYPE_TIMEOUT;K[q]=ui_strings.S_THREAD_TYPE_EVENT;K[r]=ui_strings.S_THREAD_TYPE_INLINE_SCRIPT;K[s]=ui_strings.S_THREAD_TYPE_JAVASCRIPT_URL;K[t]=ui_strings.S_THREAD_TYPE_HISTORY_NAVIGATION;K[u]=ui_strings.S_THREAD_TYPE_JAVA_EVAL;K[v]=ui_strings.S_THREAD_TYPE_DEBUGGER_EVAL;var L={};L[x]=ui_strings.S_SCRIPT_TYPE_UNKNOWNM;L[y]=ui_strings.S_SCRIPT_TYPE_LINKED;L[z]=ui_strings.S_SCRIPT_TYPE_INLINE;L[A]=ui_strings.S_SCRIPT_TYPE_GENERATED;L[B]=ui_strings.S_SCRIPT_TYPE_EVAL;L[C]=ui_strings.S_SCRIPT_TYPE_TIMEOUT;L[D]=ui_strings.S_SCRIPT_TYPE_URI;L[E]=ui_strings.S_SCRIPT_TYPE_EVENT_HANDLER;L[F]=ui_strings.S_SCRIPT_TYPE_USERJS;L[G]=ui_strings.S_SCRIPT_TYPE_BROWSERJS;L[H]=ui_strings.S_SCRIPT_TYPE_EXTENSIONJS;L[I]=ui_strings.S_SCRIPT_TYPE_DEBUGGER;var M=document.styleSheets,N=M.getDeclaration(".profiler-event"),O=M.getDeclaration(".profiler-timeline-row"),P=M.getDeclaration(".profiler-event-tooltip"),Q=N?parseInt(N.minWidth):0,R=O?parseInt(O.height)+parseInt(O.paddingTop)+parseInt(O.paddingBottom):0,S=P?parseInt(P.width):0;this._order=[d,e,f,g,h,i,k,l];this._expandables=[i];this._event_colors={};this.main=function(a,b,c,d,e,f,g){var h=c&&c.get_data(),i=h&&h.length;return[["div",this.legend(b),"class","profiler-legend"],["div",this.event_list_all(a,e,f,g),"class","profiler-timeline","handler","profiler-zoom-timeline"],["div",this.details(c),"class","profiler-details-list"+(i?"":" profiler-no-status")],["div",this.status(d),"class","profiler-status"+(i?"":" profiler-no-status")]]};this.legend=function(a){var b=a&&a.eventList;if(b&&b.length){var c=[],d=b.reduce(function(a,b){return a+b.time},0);b.forEach(function(a){var b=this._order.indexOf(a.type);if(b!==-1){var e=a.time/d*100;c[b]=["div",["span",J[a.type],"class","profiler-legend-label"],["span",this.format_time(a.time,0),"class","profiler-legend-amount"],["div","class","profiler-legend-amount-bar","style","width:"+e+"%"],"class","profiler-legend-row profiler-timeline-row"+(b%2?" odd":""),"data-event-type",String(a.type),"handler","profiler-event"]}},this);return c}};this.timeline_markers=function(a,b,c,d){var e=120,f=2,g=Math.max(f,Math.round(a/e)),h=c/g,i=h<10?1:0,j=[];for(var k=0;k<g;k++){var l=Math.round(h*k*d),m=h*k+b;m===0&&(i=0);j.push(["div","class","profiler-timeline-marker","style","left:"+l+"px"],["div",this.format_time(m,i),"class","profiler-timeline-marker-time"+(k===0?" first":""),"style","left:"+l+"px"])}j.push(["div",this.format_time(b+c),"class","profiler-timeline-marker-time last"]);return j};this._background_bar=function(a,b){return["div","class","profiler-timeline-row"+(b%2?" odd":"")]};this.event_list_all=function(a,b,c,d,e){var f=[],g=a&&a.eventList;if(g&&g.length){var h=d||0,i=a.interval.end,j=i-h,k=(c-Q)/j;f.extend(this._order.map(this._background_bar));f.push(this.timeline_markers(c,h,j,k));f.extend(g.map(this._timeline_event.bind(this,h,k,b)))}return f};this._timeline_event=function(a,b,c,d){var e=Math.round((d.interval.end-d.interval.start)*b),f=e?Math.max(Q,Math.round(d.time*b)):0,g=Math.round((d.interval.start-a)*b),h=this._order.indexOf(d.type),i=this._expandables.indexOf(d.type)!=-1&&d.childCount>1,j=this._event_colors[d.type]||(this._event_colors[d.type]=this._get_color_for_type(d.type));return["div","style","width: "+e+"px;"+"left: "+g+"px;"+"top:"+(h*R+1)+"px;"+"background-image: -o-linear-gradient(90deg, transparent 0, rgba(255, 255, 255, .25) 100%), "+"-o-linear-gradient(0deg, "+j+" 0, "+j+" "+f+"px, "+"transparent "+f+"px); "+"background-image: linear-gradient(0deg, transparent 0, rgba(255, 255, 255, .25) 100%), "+"linear-gradient(90deg, "+j+" 0, "+j+" "+f+"px, "+"transparent "+f+"px);","class","profiler-event profiler-event-interval event-type-"+d.type+(d.eventID==c?" selected":"")+(i?" expandable":" non-expandable"),"data-event-id",String(d.eventID),"data-event-type",String(d.type),"handler","profiler-event","data-tooltip","profiler-event"]};this.empty=function(a){return["div",a,"class","profiler-empty"]};this.details=function(a){return a&&a.get_data().length&&a.render()||this.no_events()};this.status=function(a){return["div",ui_strings.S_PROFILER_TOTAL_SELF_TIME+": "+this.format_time(a)]};this.no_events=function(){return["div",ui_strings.S_PROFILER_NO_DETAILS,"class","profiler-empty"]};this.format_time=function(a,b){b=b!=null?b:a<1?1:0;return a.toFixed(b)+" ms"};this.get_title_all=function(a){var b=this.get_details_title(a);return["div",["h2",J[a.type]],["div",this.get_title_interval_bar(a),["ul",["li",["span",ui_strings.S_PROFILER_START_TIME+": ","class","profiler-event-tooltip-label"],this.format_time(a.interval.start)],["li",["span",ui_strings.S_PROFILER_DURATION+": ","class","profiler-event-tooltip-label"],this.format_time(a.interval.end-a.interval.start)],["li",["span",ui_strings.S_PROFILER_SELF_TIME+": ","class","profiler-event-tooltip-label"],this.format_time(a.time)],b?b:[]],"class","profiler-event-tooltip-info"],"class","profiler-event-tooltip"]};this.get_details_title=function(a){switch(a.type){case j:return["li",["span",ui_strings.S_PROFILER_TYPE_SELECTOR+": ","class","profiler-event-tooltip-label"],a.cssSelectorMatching.selector];case g:var b=[],c=a.threadEvaluation.threadType,h=a.threadEvaluation.eventName;c&&b.push(["li",["span",ui_strings.S_PROFILER_TYPE_THREAD+": ","class","profiler-event-tooltip-label"],K[c]]);h&&b.push(["li",["span",ui_strings.S_PROFILER_TYPE_EVENT+": ","class","profiler-event-tooltip-label"],h]);return b;case d:var i=a.documentParsing.url;return i?["li",["span","URL: ","class","profiler-event-tooltip-label"],i,"data-tooltip","profiler-tooltip-url","data-tooltip-text",i]:[];case e:var i=a.cssParsing.url;return i?["li",["span","URL: ","class","profiler-event-tooltip-label"],i,"data-tooltip","profiler-tooltip-url","data-tooltip-text",i]:[];case f:var b=[],i=a.scriptCompilation.url,k=a.scriptCompilation.scriptType;k&&b.push(["li",["span",ui_strings.S_PROFILER_TYPE_SCRIPT+": ","class","profiler-event-tooltip-label"],L[k]]);i&&b.push(["li",["span","URL: ","class","profiler-event-tooltip-label"],i,"data-tooltip","profiler-tooltip-url","data-tooltip-text",i]);return b;case l:var m=a.paint.area;return[["li",["span",ui_strings.S_PROFILER_AREA_LOCATION+": ","class","profiler-event-tooltip-label"],m.x+", "+m.y],["li",["span",ui_strings.S_PROFILER_AREA_DIMENSION+": ","class","profiler-event-tooltip-label"],m.w+"×"+m.h]]}return[]};this.get_title_interval_bar=function(a){var b=a.interval.end-a.interval.start,c=b?S/b:0,d=Math.round(a.time*c),e=this._event_colors[a.type]||(this._event_colors[a.type]=this._get_color_for_type(a.type));return["div","style","width: "+S+"px; "+"background-image: -o-linear-gradient(90deg, transparent 0, rgba(255, 255, 255, .25) 100%), "+"-o-linear-gradient(0deg, "+e+" 0, "+e+" "+d+"px, "+"transparent "+d+"px);"+"background-image: linear-gradient(0deg, transparent 0, rgba(255, 255, 255, .25) 100%), "+"linear-gradient(90deg, "+e+" 0, "+e+" "+d+"px, "+"transparent "+d+"px);","class","profiler-event profiler-event-interval event-type-"+a.type]};this.disabled_view=function(){return["div",["span","class","ui-button reload-window","handler","profiler-reload-window","tabindex","1"],["p",ui_strings.S_PROFILER_RELOAD],"class","info-box"]};this._get_color_for_type=function(a){var b=document.styleSheets.getDeclaration(".event-type-"+a+"-selftime");return b?b.backgroundColor:"#000"}};window.cls||(window.cls={});cls.ResourceManagerService=function(a){if(cls.ResourceManagerService.instance)return cls.ResourceManagerService.instance;cls.ResourceManagerService.instance=this;this._view=a;this._context=null;this._enable_content_tracking=function(){this._res_service.requestSetResponseMode(null,[[3,1]])};this._on_abouttoloaddocument_bound=function(a){var b=new cls.DocumentManager["1.0"].AboutToLoadDocument(a);if(!b.parentFrameID){this._context&&delete this._context;this._context=new cls.ResourceContext(b)}this._context&&this._context.update("abouttoloaddocument",b)}.bind(this);this._on_urlload_bound=function(a){if(!!this._context){var b=new cls.ResourceManager["1.2"].UrlLoad(a);this._context.update("urlload",b);this._view.update()}}.bind(this);this._on_urlredirect_bound=function(a){if(!!this._context){var b=new cls.ResourceManager["1.0"].UrlRedirect(a);b.resourceID=b.fromResourceID;this._context.update("urlredirect",b)}}.bind(this);this._on_urlfinished_bound=function(a){if(!!this._context){var b=new cls.ResourceManager["1.0"].UrlFinished(a),c=this._context.update("urlfinished",b);c&&!c.data&&c.fetch_data()}}.bind(this);this._on_response_bound=function(a){if(!!this._context){var b=new cls.ResourceManager["1.0"].Response(a);this._context.update("response",b)}}.bind(this);this._on_debug_context_selected_bound=function(){this._context&&delete this._context;this._view.update()}.bind(this);this._handle_expand_collapse_bound=function(a,b){if(!!this._context){var c=b.querySelector(".button-expand-collapse"),b=b.parentNode,d=b.getAttribute("data-frame-id"),e=this._context.frames[d];if(!e)return;var f=b.getAttribute("data-resource-group");f&&(e=e.groups[f]);if(!e)return;e.closed=!e.closed;e.closed?b.addClass("collapsed"):b.removeClass("collapsed")}}.bind(this);this._handle_resource_detail_bound=function(a,b){var c;if(!!this._context){var d=b.get_ancestor("[data-resource-id]");if(!d)return;if(this._selectedResourceId){c=this.get_resource(this._selectedResourceId);c&&(c.selected=!1)}var e=Number(d.getAttribute("data-resource-id"));c=this.get_resource(e);if(!c)return;this._selectedResourceId=e;c.selected=!0;this._view.update();cls.ResourceDetailView.instance.show_resource(c)}}.bind(this);this._handle_resource_group_bound=function(a,b){var c=b.get_ancestor("[data-frame-id]");if(!!c){var d=c.getAttribute("data-frame-id"),e=c.getAttribute("data-resource-group"),f=this._context.frames[d].groups[e];cls.ResourceDetailView.instance.show_resource_group(f)}}.bind(this);this._init=function(){var a=window.eventHandlers;a.click["resources-expand-collapse"]=this._handle_expand_collapse_bound;a.click["resource-detail"]=this._handle_resource_detail_bound;a.click["resource-group"]=this._handle_resource_group_bound;a.click["open-resource-tab"]=function(a,b){var c=cls.ResourceDisplayBroker.get_instance();c.show_resource_for_ele(b)};this._res_service=window.services["resource-manager"];this._res_service.addListener("urlload",this._on_urlload_bound);this._res_service.addListener("response",this._on_response_bound);this._res_service.addListener("urlredirect",this._on_urlredirect_bound);this._res_service.addListener("urlfinished",this._on_urlfinished_bound);this._doc_service=window.services["document-manager"];this._doc_service.addListener("abouttoloaddocument",this._on_abouttoloaddocument_bound);messages.addListener("debug-context-selected",this._on_debug_context_selected_bound)};this.get_resource_context=function(){return this._context};this.get_resource=function(a){if(!this._context)return null;return this._context.resourcesDict[a]};this.get_resource_for_url=function(a){if(!this._context)return null;var b=this._context.resourcesUrlDict[a];if(b===undefined)return null;return this.get_resource(b)};this._fetch_resource_data=function(a,b,c){var d=this.get_resource(b),e=({datauri:3,string:1})[c]||1,f=window.tagManager.set_callback(null,a);const g=1e7;this._res_service.requestGetResource(f,[b,[e,1,g]])};this._on_resource_data_bound=function(a,b){var c=b[0],d=this.get_resource(c);if(d){d.data=new cls.ResourceManager["1.0"].ResourceData(b);if(d.type=="image"){var e=new Image;e.src=d.data.content.stringData;d.data.meta=e.naturalWidth+"x"+e.naturalHeight}}this._view.update()}.bind(this);this.request_resource_for_url=function(a,b){cls.ResourceRequest(a,b,data)};this._init()};cls.ResourceRequest=function(a,b,c){const d=1,e=3,f=4,g=1,h=1e7;this._init=function(a,b,c){this._url=a;this._callback=b;this._data=c;this._initialized=!1;if(!this._resource_manager){this._resource_manager=window.services["resource-manager"];this._tag_manager=window.tagManager;this._ResourceData=cls.ResourceManager["1.0"].ResourceData;this._initialized=!0}};this._fallback=function(){window.open(this._url)};this._request_resource=function(a,b){if(this._resource_manager.requestGetResourceID){var c=window.tagManager.set_callback(this,this._on_request_resource_id);this._resource_manager.requestGetResourceID(c,[this._url])}else this._fallback()};this._on_request_resource_id=function(a,b){if(a&&this._resource_manager.requestCreateRequest){var c=window.window_manager_data.get_debug_context(),d=this._tag_manager.set_callback(this,this._on_request_create_request);this._resource_manager.requestCreateRequest(d,[c,this._url,"GET"])}else if(!a&&this._resource_manager.requestGetResource){const e=0;this._resource_id=b[e];var d=this._tag_manager.set_callback(this,this._on_request_get_resource);this._resource_manager.requestGetResource(d,[this._resource_id,[f]])}else this._fallback()};this._on_request_create_request=function(a,b){if(!a&&this._resource_manager.requestGetResource){const c=0;this._resource_id=b[c];var d=this._tag_manager.set_callback(this,this._on_request_get_resource);this._resource_manager.requestGetResource(d,[this._resource_id,[f]])}};this._on_request_get_resource=function(a,b){if(!a){this._resource=new cls.Resource(this._resource_id);this._resource.update("urlfinished",new this._ResourceData(b));this._resource.fetch_data(this._on_fetch_data_bound)}};this._on_fetch_data_bound=function(){this._callback(this._resource,this._data)}.bind(this);this._init(a,b,c);this._initialized&&this._request_resource()};cls.ResourceFrame=function(a){this._init(a)};cls.ResourceFramePrototype=function(){this._init=function(a){this.id=a.frameID;this.resourceID=a.resourceID;this.parentFrameID=a.parentFrameID;this.windowID=a.windowID;this.closed=!!a.parentFrameID;this.groups={markup:new cls.ResourceGroup("markup","markup"),css:new cls.ResourceGroup("stylesheets","css"),script:new cls.ResourceGroup("scripts","script"),image:new cls.ResourceGroup("images","image"),font:new cls.ResourceGroup("fonts","font"),other:new cls.ResourceGroup("other","other")}}};window.cls.ResourceFrame.prototype=new window.cls.ResourceFramePrototype;cls.ResourceContext=function(a){this.resourcesDict={};this.resourcesUrlDict={};this.frames={};this.update=function(a,b){var c;if(a=="abouttoloaddocument"){c=new cls.ResourceFrame(b);this.frames[c.id]=c}else{var d=this.get_resource(b.resourceID);if(a=="urlload"&&!d){d=new cls.Resource(b.resourceID);d.frameID=b.frameID;this.resourcesDict[d.id]=d}if(d){d.update(a,b);c=this.frames[d.frameID];if(!c){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Invalidating orphan resource "+d.id);d.invalid=!0}else if(a=="urlload"){if(d.id==c.resourceID){c.resource=d;if(c.parentFrameID){var e=this.frames[c.parentFrameID];e&&e.resource?c.sameOrigin=cls.ResourceUtil.sameOrigin(e.resource,c.resource):c.sameOrigin=!1}}}else if(a=="urlfinished")if(c&&c.resource){var f=d.type;c.groups[f]||(f="other");c.groups[f].push(d.id);this.resourcesUrlDict[d.url]=d.id;d.sameOrigin=cls.ResourceUtil.sameOrigin(c.resource,d)}else{opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Invalidating the resource "+d.id+": "+(c?"Unkown top level resource "+c.resourceId+" for the frame "+c.id:"Unknown frameID "+d.frameID));d.invalid=!0}else if(a=="urlredirect"&&c&&c.resourceID==d.id){c.resourceID=b.toResourceID;delete c.resource}if(!d.invalid)return d;if(c&&c.resource&&c.resource.id==d.id){delete this.frames[c.id];for(var g in this.resourcesDict){var h=this.resourcesDict[g];h.frameID==c.id&&delete this.resourcesDict[g]}}delete this.resourcesDict[d.id]}}};this.get_resource=function(a){return this.resourcesDict[a]}};cls.ResourceGroup=function(a,b){this.ids=[];this.name=null;this.type=null;this.closed=!0;this._init=function(a,b){this.name=a;this.type=b;this.ids.length=0};this.push=function(a){this.ids.indexOf(a)===-1&&this.ids.push(a)};this._init(a)};cls.Resource=function(a){this._init(a)};cls.ResourcePrototype=function(){this._init=function(a){this.id=a;this.finished=!1;this.location="No URL";this.result=null;this.mime=null;this.encoding=null;this.size=0;this.type=null;this.urltype=null;this.invalid=!1};this.update=function(a,b){if(a=="urlload"){this.url=b.url;this.urltype=b.urlType;this.urltypeName=({0:"Unknown",1:"HTTP",2:"HTTPS",3:"File",4:"Data"})[b.urlType];this._humanize_url()}else if(a=="urlfinished"){this.url||(this.url=b.url);this.result=b.result;this.mime=b.mimeType;this.encoding=b.characterEncoding;this.size=b.contentLength||0;this.finished=!0;this._guess_type();this._humanize_url();b.content&&this.update("responsefinished",b)}else if(a=="response")[200,206,304].indexOf(b.responseCode)!=-1;else if(a=="urlredirect")this.invalid=!0;else if(a=="responsefinished"){this.data=new cls.ResourceManager["1.0"].ResourceData(b);this._get_meta_data()}else opera.postError("got unknown event: "+a)};this._get_meta_data=function(){if(this.type=="image"){var a=new Image;a.src=this.data.content.stringData;a.naturalWidth?this.data.meta=a.naturalWidth+"x"+a.naturalHeight:this.data.meta="vectorial image"}};this._guess_type=function(){if(!this.finished||!this.mime)this.type=undefined;else{this.mime.toLowerCase()=="application/octet-stream"&&(this.type=cls.ResourceUtil.extension_type_map[this.extension]);this.type||(this.type=cls.ResourceUtil.mime_to_type(this.mime))}};this._humanize_url=function(){this.urltype==4?this.type?this.human_url=this.type+" data URI":this.human_url="data URI":this.human_url=this.url};this._on_fetch_data_bound=function(a){return function(b,c){b||this.update("responsefinished",c);a&&a(this)}.bind(this)};this.fetch_data=function(a){const b=1,c=3,d=4,e=1,f=1e7;if(!this.data){var g=window.tagManager.set_callback(null,this._on_fetch_data_bound(a)),h=cls.ResourceUtil.type_to_content_mode(this.type),i=({datauri:c})[h]||b;window.services["resource-manager"].requestGetResource(g,[this.id,[i,e,f]])}else a&&a(this)}};window.cls.ResourcePrototype.prototype=new URIPrototype("url");window.cls.Resource.prototype=new window.cls.ResourcePrototype;window.templates=window.templates||{};templates.resource_icon=function(a){return["span","class","resource-icon resource-type-"+a.type]};templates.resource_tree={update:function(a){return["ul",this.frame(a,null),"style","overflow:auto;height:100%;"]},frame:function(a,b){var c=[];for(var d in a.frames){var e=a.frames[d];if(e.parentFrameID!=b)continue;r=e.resource;if(!r)continue;var f="-expand-collapse",g={time:e.time||0,tpl:["li",["div",["input","type","button","class","button"+f],["span","class","resource-icon resource-type-storage"]," ",["span",r.filename||r.human_url,[],"class",e.sameOrigin!==!1?"":"resource-different-origin","data-tooltip",r&&"js-script-select","data-tooltip-text",r&&"frame: "+r.human_url],"handler","resources-expand-collapse","class","header"+f],["ul",this.groups(a,d),this.frame(a,d),"class","children"+f],"data-frame-id",d,"class","item"+f+(e.closed?" collapsed":"")]};c.push(g)}return c.sort(function(a,b){return a.time-b.time}).map(function(a){return a.tpl})},groups:function(a,b){var c=[],d=a.frames[b],e=d.groups,f={};for(var g in e){var h=e[g],i=h.ids.length;if(!i)continue;var j="-expand-collapse";c.push(["li",["div",["input","type","button","class","button"+j],templates.resource_icon({type:g})," ",["span",h.name+" ("+i+")",[],"class","resource-group"],f[g]?f[g]:[],"handler","resources-expand-collapse","class","header"+j],["ul",this.group_resources(a,b,g),"class","children"+j],"data-frame-id",b,"data-resource-group",g,"class","item"+j+(h.closed?" collapsed":"")])}return c},group_resources:function(a,b,c){var d=a.frames[b],e=d.groups[c],f="-expand-collapse";return e.ids.map(function(b){var d=a.get_resource(b);return["li",["span",d.filename||d.human_url,[],"class",d.sameOrigin!==!1?"":"resource-different-origin","data-tooltip",d&&"js-script-select","data-tooltip-text",d&&c+": "+d.human_url],"id",d.selected==!0?"target-element":"","class","header"+f,"handler","resource-detail","data-resource-id",""+d.id]})}};templates.resource_detail={update:function(a){if(!a)return this.no_resource_selected();if(!a.data)return this.no_data_available(a);var b=this[a.type]?a.type:"text";return["div",this.overview(a),["div",this[b](a,a.data),"class","resource-detail-"+b+"-container"],"class","resource-detail-container","style","height:100%;overflow:auto;"]},no_resource_selected:function(){return["div","No resource selected","class","resource-detail-container-empty"]},no_data_available:function(a){return["div","No data available for the resource "+a.url,"class","resource-detail-container-empty"]},formatting_data:function(a){if(!a)return this.no_resource_selected();if(!a.data)return this.no_data_available(a);return["div","Formatting the resource "+a.url+"...","class","resource-detail-container-empty"]},overview:function(a){var b={human_url:a.human_url,type:a.type,mimeType:a.data.mimeType,size:a.size||a.data.contentLength||a.data.content.length,characterEncoding:a.encoding||a.data.characterEncoding};return["div",["span",["a",b.human_url,"href",a.url,"target","_blank","class","external"],"class","resource-detail-overview-url"],["span",b.mimeType+" treated as "+b.type+" "+[a.data.meta],"class","resource-detail-overview-type"],["span",cls.ResourceUtil.bytes_to_human_readable(b.size)+(b.characterEncoding&&" in "+b.characterEncoding),"data-tooltip","js-script-select","data-tooltip-text",b.size+" bytes","class","resource-detail-overview-size"],"class","resource-detail-overview"]},text:function(a){return[["pre",a.data.content.stringData],["ptr",(new Option(JSON.stringify(a))).innerHTML]]},markup:function(a){var b=0,c=[++b],d=templates.highlight_markup(a.data.content.stringData,function(){c.push(++b)});return["div",d,["div",c.join("\n"),"class","resource-line-numbers","unselectable","on"],"class","resource-detail-markup mono line-numbered-resource"]},script:function(a){var b=0,c=[++b],d=templates.highlight_js_source(a.data.content.stringData,function(){c.push(++b)});return["div",d,["div",c.join("\n"),"class","resource-line-numbers","unselectable","on"],"class","resource-detail-script mono line-numbered-resource"]},css:function(a){var b=0,c=[++b],d=templates.highlight_css(a.data.content.stringData,function(){c.push(++b)});return["div",d,["div",c.join("\n"),"class","resource-line-numbers","unselectable","on"],"class","resource-detail-css mono line-numbered-resource"]},font:function(a){var b='@font-face{font-family:"resource-'+a.id+'";src:url("'+a.data.content.stringData+'");}';return["object",["div","The quick brown fox jumps over the lazy dog 0123456789",["style",b],"style","font-family:resource-"+
a.id],"data","data:text/html;base64,"+btoa("<!doctype html><style>"+b+'</style><div contenteditable="true" style="font-size:64px;margin:0;font-family:resource-'+a.id+';">The quick brown fox jumps over the lazy dog 0123456789'),"class","resource-detail-font"]},flash:function(a){return["object",["div","Type not supported"],"type","resource.mimeType","data",a.data.content.stringData,"class","resource-detail-flash"]},image:function(a){return["img","src",a.data.content.stringData,"class","resource-detail-image"]}};window.cls=window.cls||{};cls.ResourceUtil={};cls.ResourceUtil.bytes_to_human_readable=function(a){var b=String;window.helpers&&window.helpers.pretty_print_number&&(b=window.helpers.pretty_print_number);return a>=1048576?""+b(Number(a/1048576).toFixed(2))+" MB":a>=1024?""+b(Number(a/1024).toFixed(2))+" kB":""+b(a)+" B"};cls.ResourceUtil.extension_type_map={html:"markup",xhtml:"markup",xml:"markup",xslt:"markup",xsl:"markup",wml:"markup",rss:"markup",png:"image",jpg:"image",bmp:"image",pcx:"image",ico:"image",jpeg:"image",gif:"image",oex:"extension",woff:"font",otf:"font",ttf:"font",txt:"text",css:"css",js:"script",es:"script",rss:"feed"};cls.ResourceUtil.mime_type_map={"text/html":"markup","application/xhtml+xml":"markup","application/mathml+xml":"markup","application/xslt+xml":"markup","text/xsl":"markup","text/xml":"markup","application/xml":"markup","application/vnd.wap.xhtml+xml":"markup","text/css":"css","text/plain":"text","application/x-javascript":"script","application/javascript":"script","text/javascript":"script","application/json":"script","text/json":"script","image/png":"image","image/gif":"image","image/jpg":"image","image/jpeg":"image","image/x-icon":"image","image/vnd.microsoft.icon":"image","image/svg+xml":"image","image/vnd.wap.wbmp":"image","application/vnd.ms-fontobject":"font","application/x-font-ttf":"font","application/x-font-otf":"font","application/x-font-woff":"font","application/x-woff":"font","font/opentype":"font","font/ttf":"font","font/otf":"font","font/truetype":"font","font/woff":"font","audio/mid":"audio","audio/mpeg":"audio","audio/ogg":"audio","audio/vorbis":"audio","audio/x-pn-realaudio":"audio","audio/wav":"audio","audio/x-wav":"audio","audio/vnd.wave":"audio","audio/x-ms-wax":"audio","audio/x-ms-wma":"audio","video/3gpp":"video","video/x-matroska":"video","video/mp4":"video","video/mpeg":"video","video/ogg":"video","video/quicktime":"video","video/webm":"video","video/x-ms-wmv":"video","application/rdf+xml":"data","text/rdf+n3":"data","application/x-turtle":"data","text/turtle":"data","application/atom+xml":"feed","application/rss+xml":"feed","application/pdf":"pdf","application/postscript":"postscript","application/x-shockwave-flash":"flash","application/x-silverlight-app":"silverlight"};cls.ResourceUtil.type_to_string_map={css:"CSS",pdf:"PDF",postscript:"PostScript"};cls.ResourceUtil.mime_to_content_mode=function(a){var b=cls.ResourceUtil.mime_to_type(a);switch(b){case"image":case"video":case"audio":case"pdf":case"flash":case"font":return"datauri";case"markup":case"css":case"xml":case"script":return"text"}return"text"};cls.ResourceUtil.type_to_content_mode=function(a){switch(a){case"image":case"video":case"audio":case"pdf":case"flash":case"font":return"datauri"}return"text"};cls.ResourceUtil.mime_to_type=function(a,b){if(a)return this.mime_type_map[a.contains(";")?a.split(";")[0].trim():a]};cls.ResourceUtil.path_to_type=function(a){if(a){var b=a.slice(a.lastIndexOf(".")+1).toLowerCase(),c=b.indexOf("?");c!=-1&&(b=b.slice(0,c));var d=b.indexOf("#");d!=-1&&(b=b.slice(0,d));return b&&this.extension_type_map[b]}};cls.ResourceUtil.url_path=function(a){if(!a)return null;var b=a.replace("://","xxx").indexOf("/"),c=a.indexOf("?");c==-1&&(c=a.length);var d=a.slice(b,c);return d};cls.ResourceUtil.url_filename=function(a){var b=cls.ResourceUtil.url_path(a),c=b.lastIndexOf("/");return c===-1||b==="/"?null:b.slice(c+1)};cls.ResourceUtil.url_host=function(a){if(!a)return null;var b=a.replace(/\w+?:\/\//,""),c=b.indexOf("/");b=b.slice(0,c==-1?b.length:c);return b};cls.ResourceUtil.header_presets=[{name:ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESET_NONE,headers:""},{name:"Chrome 18",headers:["Connection: keep-alive","User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.142 Safari/535.19","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding: gzip,deflate,sdch","Accept-Language: en-US,en;q=0.8","Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3"].join("\n")},{name:"Firefox 11",headers:["User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20100101 Firefox/11.0","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language: en-us,en;q=0.5","Accept-Encoding: gzip,deflate","Connection: keep-alive"].join("\n")},{name:"Safari 5.1.5",headers:["User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language: en-us","Accept-Encoding: gzip, deflate","Connection: keep-alive"].join("\n")},{name:"IE8 (compatibility mode)",headers:["Accept: */*","Accept-Encoding: gzip, deflate","Accept-Language: en-gb","Connection: Keep-Alive","User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Trident/4.0; chromeframe; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; MDDC; .NET CLR 3.5.30729; .NET CLR 1.1.4322; .NET CLR 3.0.30729; .NET4.0C)"].join("\n")},{name:"IE8",headers:["Accept: image/gif, image/jpeg, image/pjpeg, application/x-ms-application, application/vnd.ms-xpsdocument, application/xaml+xml, application/x-ms-xbap, application/x-shockwave-flash, */*","Accept-Encoding: gzip, deflate","Accept-Language: en-gb","Connection: Keep-Alive","User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; chromeframe; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; MDDC; .NET CLR 3.5.30729; .NET CLR 1.1.4322; .NET CLR 3.0.30729; .NET4.0C)"].join("\n")},{name:"IE9",headers:["Accept: text/html, application/xhtml+xml, */*","Accept-Language: en-gb","User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")},{name:"Opera 11.62 on Windows",headers:["Opera/9.80 (Windows NT 6.1; WOW64; U; en) Presto/2.10.229 Version/11.62","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en-gb,en;q=0.9","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")},{name:"Opera 11.62 on Linux",headers:["User-Agent: Opera/9.80 (X11; Linux x86_64; U; en) Presto/2.10.229 Version/11.62","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en-gb,en;q=0.9","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")},{name:"Opera 11.62 on Mac OS",headers:["User-Agent: Opera/9.80 (Macintosh; Intel Mac OS X 10.7.3; U; en) Presto/2.10.229 Version/11.62","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en-gb,en;q=0.9","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")},{name:"Mobile Safari on iOS 5.1, iPhone",headers:["User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B176 Safari/7534.48.3","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language: en-us","Accept-Encoding: gzip, deflate","Connection: keep-alive"].join("\n")},{name:"Mobile Safari on iOS 5.1, iPad",headers:["User-Agent: Mozilla/5.0 (iPad; CPU OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B176 Safari/7534.48.3","Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language: en-us","Accept-Encoding: gzip, deflate","Connection: keep-alive"].join("\n")},{name:"Android 2.3.3 browser",headers:["Connection: keep-alive","Accept-Encoding: gzip","Accept-Language: en-US","x-wap-profile: http://wap.samsungmobile.com/uaprof/GT-I9100.xml","User-Agent: Mozilla/5.0 (Linux; U; Android 2.3.3; en-us; GT-I9100 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1","Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5","Accept-Charset: utf-8, iso-8859-1, utf-16, *;q=0.7"].join("\n")},{name:"Blackberry PlayBook 2.0 browser",headers:["Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding: gzip,deflate","Accept-Language: en-GB, en;q=0.8, en-GB, en;q=0.8","User-Agent: Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.0.0; en-US) AppleWebKit/535.8+ (KHTML, like Gecko) Version/7.2.0.0 Safari/535.8+"].join("\n")},{name:"Opera Mini 7.0.1 on iPhone",headers:["User-Agent: Opera/9.80 (iPhone; Opera Mini/7.1.32694/27.1366; U; en) Presto/2.8.119 Version/11.10","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en","Accept-Encoding: gzip, deflate","Connection: Keep-Alive","X-OperaMini-Features: advanced, download, file_system, touch, viewport, routing","X-OperaMini-Phone: Apple # iPhone","X-OperaMini-Phone-UA: Mozilla/5.0 (iPhone; U; CPU iPhone OS 5_1 like Mac OS X; en-us)"].join("\n")},{name:"Opera Mini 6.5 on SonyEricsson K800i",headers:["User-Agent: Opera/9.80 (J2ME/MIDP; Opera Mini/6.5.26955/27.1382; U; en) Presto/2.8.119 Version/11.10","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en","Accept-Encoding: gzip, deflate","Connection: Keep-Alive","X-OperaMini-Phone: SonyEricsson # K800i","X-OperaMini-Phone-UA: SonyEricssonK800i/R1KG Browser/NetFront/3.3 Profile/MIDP-2.0 Configuration/CLDC-1.1","X-OperaMini-Features: advanced, file_system, camera, folding, routing"].join("\n")},{name:"Opera Mobile 12 on Samsung Galaxy S II",headers:["User-Agent: Opera/9.80 (Android 4.0.3; Linux; Opera Mobi/ADR-1203051631; U; en-GB) Presto/2.10.254 Version/12.00","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, multipart/mixed, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en-GB, en","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")},{name:"Opera Mobile 12 on Motorola Xoom",headers:["User-Agent: Opera/9.80 (Android 4.0.5; Linux; Opera Tablet/ADR-1204201824; U; en) Presto/2.10.254 Version/12.00","Accept: text/html, application/xml;q=0.9, application/xhtml+xml, multipart/mixed, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en","Accept-Encoding: gzip, deflate","Connection: Keep-Alive"].join("\n")}];cls.ResourceUtil.http_status_codes={200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",100:"Continue",101:"Switching Protocols",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};cls.ResourceUtil.sameOrigin=function(a,b){if(a.protocol==b.protocol){if(a.host==b.host)return!0;if(a.host.match(new RegExp("\\."+b.host+"$"))!=null)return!0}return!1};window.cls=window.cls||{};cls.ResourceDisplayBroker=function(){if(cls.ResourceDisplayBroker.instance)return cls.ResourceDisplayBroker.instance;cls.ResourceDisplayBroker.instance=this;this._show_resource=function(a,b){var c={},d=window.services["resource-manager"],e=window.views.resource_detail_view;if(d&&e){b&&(c.lines=[b]);e.show_resource(a,c);return!0}return!1};this.show_resource_for_id=function(a,b){this._show_resource(a,b)};this.show_resource_for_url=function(a,b){this._show_resource(a,b)||window.open(a)};this.show_resource_for_ele=function(a){var b=Number(a.getAttribute("data-resource-id")),c=a.getAttribute("data-resource-url"),d=a.getAttribute("data-resource-line-number"),e;if(b)this.show_resource_for_id(b,d);else if(c){if(c[0].indexOf("://")==-1){e=a.get_attr("parent-node-chain","rt-id");e&&(c=window.helpers.resolveURLS(runtimes.getURI(e),c))}this.show_resource_for_url(c,d)}}};cls.ResourceDisplayBroker.get_instance=function(){return this.instance||new cls.ResourceDisplayBroker};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.2"]||(cls.ResourceManager["1.2"]={});cls.ResourceManager["1.2"].UrlLoad=function(a){this.windowID=a[0];this.frameID=a[1];this.documentID=a[2];this.resourceID=a[3];this.url=a[4];this.urlType=a[5];this.time=a[6];this.loadOrigin=a[7]};cls.ResourceManager["1.2"].UrlLoad.URLType={0:"UNKNOWN",1:"HTTP",2:"HTTPS",3:"FILE",4:"DATA",5:"FTP",6:"GOPHER",7:"WAIS",8:"NEWS",9:"SNEWS",10:"NEWSATTACHMENT",11:"SNEWSATTACHMENT",12:"EMAIL",13:"ATTACHMENT",14:"TELNET",15:"MAILTO",16:"OPERA",17:"JAVASCRIPT",18:"CONTENT_ID",19:"TN3270",21:"SOURCE",22:"CLIENT",23:"NNTP",25:"NNTPS",26:"SHARE",27:"GHTTP",28:"TV",29:"EDITED",30:"ERROR",31:"DVB",32:"TEL",33:"MAIL",34:"IRC",35:"SMS",36:"SMSTO",39:"CHAT_TRANSFER",40:"DEVICE",41:"MOUNTPOINT",42:"WIDGET",43:"OBMLSERVER",44:"UNITE",100:"INTERNAL"};cls.ResourceManager["1.2"].UrlLoad.URLType.UNKNOWN=0;cls.ResourceManager["1.2"].UrlLoad.URLType.HTTP=1;cls.ResourceManager["1.2"].UrlLoad.URLType.HTTPS=2;cls.ResourceManager["1.2"].UrlLoad.URLType.FILE=3;cls.ResourceManager["1.2"].UrlLoad.URLType.DATA=4;cls.ResourceManager["1.2"].UrlLoad.URLType.FTP=5;cls.ResourceManager["1.2"].UrlLoad.URLType.GOPHER=6;cls.ResourceManager["1.2"].UrlLoad.URLType.WAIS=7;cls.ResourceManager["1.2"].UrlLoad.URLType.NEWS=8;cls.ResourceManager["1.2"].UrlLoad.URLType.SNEWS=9;cls.ResourceManager["1.2"].UrlLoad.URLType.NEWSATTACHMENT=10;cls.ResourceManager["1.2"].UrlLoad.URLType.SNEWSATTACHMENT=11;cls.ResourceManager["1.2"].UrlLoad.URLType.EMAIL=12;cls.ResourceManager["1.2"].UrlLoad.URLType.ATTACHMENT=13;cls.ResourceManager["1.2"].UrlLoad.URLType.TELNET=14;cls.ResourceManager["1.2"].UrlLoad.URLType.MAILTO=15;cls.ResourceManager["1.2"].UrlLoad.URLType.OPERA=16;cls.ResourceManager["1.2"].UrlLoad.URLType.JAVASCRIPT=17;cls.ResourceManager["1.2"].UrlLoad.URLType.CONTENT_ID=18;cls.ResourceManager["1.2"].UrlLoad.URLType.TN3270=19;cls.ResourceManager["1.2"].UrlLoad.URLType.SOURCE=21;cls.ResourceManager["1.2"].UrlLoad.URLType.CLIENT=22;cls.ResourceManager["1.2"].UrlLoad.URLType.NNTP=23;cls.ResourceManager["1.2"].UrlLoad.URLType.NNTPS=25;cls.ResourceManager["1.2"].UrlLoad.URLType.SHARE=26;cls.ResourceManager["1.2"].UrlLoad.URLType.GHTTP=27;cls.ResourceManager["1.2"].UrlLoad.URLType.TV=28;cls.ResourceManager["1.2"].UrlLoad.URLType.EDITED=29;cls.ResourceManager["1.2"].UrlLoad.URLType.ERROR=30;cls.ResourceManager["1.2"].UrlLoad.URLType.DVB=31;cls.ResourceManager["1.2"].UrlLoad.URLType.TEL=32;cls.ResourceManager["1.2"].UrlLoad.URLType.MAIL=33;cls.ResourceManager["1.2"].UrlLoad.URLType.IRC=34;cls.ResourceManager["1.2"].UrlLoad.URLType.SMS=35;cls.ResourceManager["1.2"].UrlLoad.URLType.SMSTO=36;cls.ResourceManager["1.2"].UrlLoad.URLType.CHAT_TRANSFER=39;cls.ResourceManager["1.2"].UrlLoad.URLType.DEVICE=40;cls.ResourceManager["1.2"].UrlLoad.URLType.MOUNTPOINT=41;cls.ResourceManager["1.2"].UrlLoad.URLType.WIDGET=42;cls.ResourceManager["1.2"].UrlLoad.URLType.OBMLSERVER=43;cls.ResourceManager["1.2"].UrlLoad.URLType.UNITE=44;cls.ResourceManager["1.2"].UrlLoad.URLType.INTERNAL=100;cls.ResourceManager["1.2"].LoadOrigin={1:"XHR"};cls.ResourceManager["1.2"].LoadOrigin.XHR=1;window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].UrlRedirect=function(a,b){this.parent=b||null;this.fromResourceID=a[0];this.toResourceID=a[1];this.time=a[2];this.toString=function(){return"[message UrlRedirect]"}};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].UrlFinished=function(a,b){this.parent=b||null;this.resourceID=a[0];this.result=a[1];this.time=a[2];this.mimeType=a[3];this.characterEncoding=a[4];this.contentLength=a[5];this.toString=function(){return"[message UrlFinished]"}};cls.ResourceManager["1.0"].UrlFinished.Result={1:"FINISHED",2:"FAILED",3:"STOPPED"};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].Request=function(a){this.parent=parent||null;this.requestID=a[0];this.resourceID=a[1];this.windowID=a[2];this.frameID=a[3];this.documentID=a[4];this.url=a[5];this.time=a[6];this.method=a[7]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].RequestHeader=function(a){this.requestID=a[0];this.resourceID=a[1];this.time=a[2];this.raw=a[3];this.headerList=(a[4]||[]).map(function(a){return new cls.ResourceManager["1.0"].Header(a)})};cls.ResourceManager["1.0"].Header=function(a){this.name=a[0];this.value=a[1]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].RequestFinished=function(a){this.requestID=a[0];this.resourceID=a[1];this.time=a[2];this.data=a[3]?new cls.ResourceManager["1.0"].RequestData(a[3],this):null};cls.ResourceManager["1.0"].RequestData=function(a){this.requestID=a[0];this.resourceID=a[1];this.mimeType=a[2];this.characterEncoding=a[3];this.contentLength=a[4];this.content=a[5]?new cls.ResourceManager["1.0"].Content(a[5],this):null;var b=this;this.partList=(a[6]||[]).map(function(a){return new cls.ResourceManager["1.0"].Part(a,b)})};cls.ResourceManager["1.0"].Content=function(a){this.length=a[0];this.characterEncoding=a[1];this.byteData=a[2];this.stringData=a[3]};cls.ResourceManager["1.0"].Part=function(a){var b=this;this.headerList=(a[0]||[]).map(function(a){return new cls.ResourceManager["1.0"].Header(a,b)});this.contentLength=a[1];this.content=a[2]?new cls.ResourceManager["1.0"].Content(a[2],this):null};cls.ResourceManager["1.0"].Header=function(a){this.name=a[0];this.value=a[1]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].RequestRetry=function(a){this.resourceID=a[0];this.fromRequestID=a[1];this.toRequestID=a[2];this.time=a[3];this.requestID=a[1]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].Response=function(a,b){this.parent=b||null;this.requestID=a[0];this.resourceID=a[1];this.time=a[2];this.responseCode=a[3];this.toString=function(){return"[message Response]"}};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].ResponseHeader=function(a){this.parent=parent||null;this.requestID=a[0];this.resourceID=a[1];this.time=a[2];this.raw=a[3];this.headerList=(a[4]||[]).map(function(a){return new cls.ResourceManager["1.0"].Header(a)})};cls.ResourceManager["1.0"].Header=function(a){this.name=a[0];this.value=a[1]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.0"]||(cls.ResourceManager["1.0"]={});cls.ResourceManager["1.0"].ResponseFinished=function(a){this.requestID=a[0];this.resourceID=a[1];this.time=a[2];this.contentLength=a[3];this.data=a[4]?new cls.ResourceManager["1.0"].ResourceData(a[4]):null};cls.ResourceManager["1.0"].ResourceData=function(a){this.resourceID=a[0];this.url=a[1];this.mimeType=a[2];this.characterEncoding=a[3];this.contentLength=a[4];this.content=a[5]?new cls.ResourceManager["1.0"].Content(a[5]):null};cls.ResourceManager["1.0"].Content=function(a){this.length=a[0];this.characterEncoding=a[1];this.byteData=a[2];this.stringData=a[3]};window.cls||(window.cls={});cls.DocumentManager||(cls.DocumentManager={});cls.DocumentManager["1.0"]||(cls.DocumentManager["1.0"]={});cls.DocumentManager["1.0"].AboutToLoadDocument=function(a){this.windowID=a[0];this.frameID=a[1];this.resourceID=a[2];this.time=a[3];this.parentDocumentID=a[4];this.parentFrameID=a[5]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.2"]||(cls.ResourceManager["1.2"]={});cls.ResourceManager["1.2"].UrlUnload=function(a){this.resourceID=a[0];this.time=a[1]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.2"]||(cls.ResourceManager["1.2"]={});cls.ResourceManager["1.2"].ResourceData=function(a){this.resourceID=a[0];this.url=a[1];this.mimeType=a[2];this.characterEncoding=a[3];this.contentLength=a[4];this.content=a[5]?new cls.ResourceManager["1.2"].Content(a[5],this):null};cls.ResourceManager["1.2"].Content=function(a){this.length=a[0];this.characterEncoding=a[1];this.byteData=a[2];this.stringData=a[3]};window.cls||(window.cls={});cls.ResourceManager||(cls.ResourceManager={});cls.ResourceManager["1.3"]||(cls.ResourceManager["1.3"]={});cls.ResourceManager["1.3"].ResourceID=function(a){this.resourceID=a[0]};window.cls||(window.cls={});cls.ResourceTreeView=function(a,b,c,d,e){if(cls.ResourceTreeView.instance)return cls.ResourceTreeView.instance;cls.ResourceTreeView.instance=this;var f=500;this._service=new cls.ResourceManagerService(this);this._loading=!1;this._updateTime=0;this._updateThrottled=!1;this.createView=function(a){var b=Date.now()-this._updateTime;if(b<f){if(!this._updateThrottled){this._updateThrottled=!0;setTimeout(this.update.bind(this),f-b)}}else{this._updateThrottled=!1;this._updateTime=Date.now();var c=this._service,d=this._service.get_resource_context();d&&Object.keys(d.resourcesDict).length?a.clearAndRender(templates.resource_tree.update(d)):this._loading?a.clearAndRender(["div",["p","Loading page..."],"class","info-box"]):a.clearAndRender(["div",["span","class","container-button ui-button reload-window","handler","reload-window","tabindex","1"],["p",ui_strings.S_RESOURCE_CLICK_BUTTON_TO_FETCH_RESOURCES],"class","info-box"])}};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._on_abouttoloaddocument_bound=function(){this._loading=!0;this.update()}.bind(this);this._on_documentloaded_bound=function(){this._loading=!1;this.update()}.bind(this);this._type_class_map={image:cls.ImageResourceDetail,font:cls.FontResourceDetail,script:cls.JSResourceDetail,markup:cls.MarkupResourceDetail,css:cls.CSSResourceDetail,text:cls.TextResourceDetail};this._open_resource_views={};this._open_resource_tab=function(a,b){var c=UI.get_instance();if(!this._open_resource_views[a.id]){var d=this._type_class_map[a.type]||cls.GenericResourceDetail,e=new d(a,this._service);this._open_resource_views[a.id]=e.id}window.views[this._open_resource_views[a.id]].data=b;c.get_tabbar("resources").add_tab(this._open_resource_views[a.id]);c.show_view(this._open_resource_views[a.id])};var g=window.services["document-manager"];g.addListener("abouttoloaddocument",this._on_abouttoloaddocument_bound);g.addListener("documentloaded",this._on_documentloaded_bound);this.init(a,b,c,d,e)};cls.ResourceTreeView.prototype=ViewBase;window.cls||(window.cls={});cls.ResourceDetailView=function(a,b,c,d,e){if(cls.ResourceDetailView.instance)return cls.ResourceDetailView.instance;cls.ResourceDetailView.instance=this;this._service=new cls.ResourceManagerService(this);this.createView=function(a){this.resource&&this.resource.data&&a.clearAndRender(templates.resource_detail.formatting_data(this.resource));a.clearAndRender(templates.resource_detail.update(this.resource));this.data&&this.go_to_line(a,this.data);this.text_search.update_search();this.data=null};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};const f="highlighted-line",g="resource-detail-container",h=document.TEXT_NODE,i=document.ELEMENT_NODE;this._span=document.createElement("span");this._span.textContent=" ";this._line_count=0;this._line_found=!1;this._target_line=0;this._root_ele=null;this._tops=[];this._highlight_line=function(a){const b="\r",c="\n";var d=a.firstChild;while(d&&!this._line_found){if(d.nodeType==i)this._highlight_line(d);else if(d.nodeType==h){var e=d.nodeValue;for(var g=0,j=e.length;g<j;g++){var k=e.charAt(g);if(k==b||k==c){this._line_count++;if(this._line_count==this._target_line){var l=d.splitText(g);d.parentNode.insertBefore(this._span,l);this._tops.push(this._span.getBoundingClientRect().top);d.parentNode.removeChild(this._span);d.parentNode.normalize();if(this._tops.length<2)this._target_line+=1;else{var m=a,n=m.getBoundingClientRect().top,o=this._tops[1]-this._tops[0],p=m.scrollTop;a.addClass(f);a.style.cssText="background-size: 100% "+o+"px;"+"background-position: 0 "+(this._tops[0]-n+p)+"px;";var q=p+this._tops[0]-n;q<=this._root_ele.parentNode.clientHeight&&(q-=64);this._root_ele.scrollTop=q;this._line_found=!0;return}}k==b&&e.charAt(g+1)==c&&g++}}}d=d&&d.nextSibling}};this.clear_line_highlight=function(a){this._line_count=0;this._line_found=!1;this._target_line=0;this._tops=[];var b=a.querySelectorAll("."+f)[0];b&&b.removeClass(f)};this.go_to_line=function(a,b){if(!(!b||!b.lines||!b.lines.length)){this._root_ele=a.getElementsByClassName(g)[0];if(this._root_ele){this.clear_line_highlight(this._root_ele);this._target_line=parseInt(b.lines[0]);this._highlight_line(this._root_ele)}}};this.on_resource_data_bound=function(a,b){var c=b[0],d=this._service.get_resource(c);d&&(d.data=new cls.ResourceManager["1.0"].ResourceData(b));return d}.bind(this);this._show_resource_by_instance=function(a){this.resource=a;a&&!a.data&&a.fetch_data(cls.ResourceDetailView.instance.update.bind(cls.ResourceDetailView.instance))};this._show_resource_by_id=function(a){var b=this._service.get_resource(b);this._show_resource_by_instance(b)};this._show_resource_url=function(a){var b=this._service.get_resource_for_url(a);b?this._show_resource_by_instance(b):new cls.ResourceRequest(a,this.show_resource.bind(this),this.data)};this.show_resource=function(a,b){this.data=b;a instanceof cls.Resource?this._show_resource_by_instance(a):a==Number(a)?this._show_resource_by_id(a):a==String(a)&&this._show_resource_url(a);this.update();window.UI.instance.show_view(window.views.resource_detail_view.id)};this.show_resource_group=function(a){return};this.init(a,b,c,d,e)};cls.ResourceDetailView.create_ui_widgets=function(){new ToolbarConfig({view:"resource_detail_view",groups:[{type:UI.TYPE_INPUT,items:[{handler:"resource-text-search",shortcuts:"resource-text-search",title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH}]}]});var a=window.views.resource_detail_view.text_search=new TextSearch;window.eventHandlers.input["resource-text-search"]=function(b,c){a.searchDelayed(c.value)};ActionBroker.get_instance().get_global_handler().register_shortcut_listener("resource-text-search",cls.Helpers.shortcut_search_cb.bind(a));var b=function(b){if(b.id==="resource_detail_view"){var c=b.container.querySelector(".request-details");c||(c=b.container.querySelector(".resource-detail-container"));if(c){a.setContainer(c);a.setFormInput(views.resource_detail_view.getToolbarControl(b.container,"resource-text-search"))}}},c=function(b){b.id=="resource_detail_view"&&a.cleanup()};window.messages.addListener("view-created",b);window.messages.addListener("view-destroyed",c)};cls.ResourceDetailView.prototype=ViewBase;cls.NetworkLogger=function(){this._get_matching_context=function(a){var b=this._contexts[cls.NetworkLogger.CONTEXT_TYPE_CRAFTER];if(b&&a in b.allocated_res_ids)return b;var c=this._contexts[cls.NetworkLogger.CONTEXT_TYPE_LOGGER];return c};this._get_request_context=function(a,b){var c=this._contexts[a];if(!c&&b){var d=a===cls.NetworkLogger.CONTEXT_TYPE_MAIN;c=this._contexts[a]=new cls.RequestContext(this,d);this.post("context-added",{context_type:a,context:c})}return c};this.get_logger_context=function(){return this._get_request_context(cls.NetworkLogger.CONTEXT_TYPE_LOGGER)};this.get_crafter_context=function(a){return this._get_request_context(cls.NetworkLogger.CONTEXT_TYPE_CRAFTER,a)};this._remove_request_context=function(a){a=a||cls.NetworkLogger.CONTEXT_TYPE_MAIN;this._contexts[a]=null;this.post("context-removed",{context_type:a})};this.remove_logger_request_context=function(){return this._remove_request_context(cls.NetworkLogger.CONTEXT_TYPE_LOGGER)};this.remove_crafter_request_context=function(){return this._remove_request_context(cls.NetworkLogger.CONTEXT_TYPE_CRAFTER)};this.get_window_contexts=function(a){var b=this._get_request_context(cls.NetworkLogger.CONTEXT_TYPE_MAIN);return b&&b.get_window_contexts()};this._queue_message=function(a,b){var c=this._contexts[cls.NetworkLogger.CONTEXT_TYPE_CRAFTER];if(c&&c.is_waiting_for_create_request){this._message_queue.push([a,b]);return!0}while(this._message_queue.length)this._playback_message_bound(this._message_queue.shift());return!1};this._playback_message_bound=function(a){var b=0,c=1;a[b].call(this,a[c],!0)}.bind(this);this._on_abouttoloaddocument=function a(b,c){if(!!c||!this._queue_message(a,b)){var d=new cls.DocumentManager["1.0"].AboutToLoadDocument(b),e=this._get_request_context(cls.NetworkLogger.CONTEXT_TYPE_LOGGER,!0);d.parentDocumentID||e.remove_window_context(d.windowID);var f=e.get_window_context(d.windowID,!0);d.parentDocumentID||(f.saw_main_document=!0)}};this._on_abouttoloaddocument_bound=this._on_abouttoloaddocument.bind(this);this._on_urlload=function b(a,c){if(!!c||!this._queue_message(b,a)){var d=new cls.ResourceManager["1.2"].UrlLoad(a),e=this._get_matching_context(d.resourceID);if(!e){var f=cls.NetworkLogger.CONTEXT_TYPE_LOGGER,g=f===cls.NetworkLogger.CONTEXT_TYPE_MAIN;e=this._contexts[f]=new cls.RequestContext(this,g);this.post("context-added",{context_type:f,context:e})}e.update("urlload",d)}};this._on_urlload_bound=this._on_urlload.bind(this);this._on_urlredirect=function c(a,b){if(!!b||!this._queue_message(c,a)){var d=new cls.ResourceManager["1.0"].UrlRedirect(a),e=this._get_matching_context(d.fromResourceID);if(!e)return;d.fromResourceID in e.allocated_res_ids&&(e.allocated_res_ids[d.toResourceID]=e.allocated_res_ids[d.fromResourceID]);d.resourceID=d.fromResourceID;e.update("urlredirect",d)}};this._on_urlredirect_bound=this._on_urlredirect.bind(this);this._on_urlfinished=function d(a,b){if(!!b||!this._queue_message(d,a)){var c=new cls.ResourceManager["1.0"].UrlFinished(a),e=this._get_matching_context(c.resourceID);if(!e)return;e.update("urlfinished",c);delete e.allocated_res_ids[c.resourceID]}};this._on_urlfinished_bound=this._on_urlfinished.bind(this);this._on_response_bound=function e(a,b){if(!!b||!this._queue_message(e,a)){var c=new cls.ResourceManager["1.0"].Response(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("response",c)}};this._on_response_bound=this._on_response_bound.bind(this);this._on_request=function f(a,b){if(!!b||!this._queue_message(f,a)){var c=new cls.ResourceManager["1.0"].Request(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("request",c)}};this._on_request_bound=this._on_request.bind(this);this._on_requestheader=function g(a,b){if(!!b||!this._queue_message(g,a)){var c=new cls.ResourceManager["1.0"].RequestHeader(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("requestheader",c)}};this._on_requestheader_bound=this._on_requestheader.bind(this);this._on_requestfinished=function h(a,b){if(!!b||!this._queue_message(h,a)){var c=new cls.ResourceManager["1.0"].RequestFinished(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("requestfinished",c)}};this._on_requestfinished_bound=this._on_requestfinished.bind(this);this._on_requestretry=function i(a,b){if(!!b||!this._queue_message(i,a)){var c=new cls.ResourceManager
["1.0"].RequestRetry(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("requestretry",c)}};this._on_requestretry_bound=this._on_requestretry.bind(this);this._on_responseheader=function j(a,b){if(!!b||!this._queue_message(j,a)){var c=new cls.ResourceManager["1.0"].ResponseHeader(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("responseheader",c)}};this._on_responseheader_bound=this._on_responseheader.bind(this);this._on_responsefinished=function k(a,b){if(!!b||!this._queue_message(k,a)){var c=new cls.ResourceManager["1.0"].ResponseFinished(a),d=this._get_matching_context(c.resourceID);if(!d)return;var e=!1;if(d){var f=d.get_entries_with_res_id(c.resourceID)[0];f.events.last&&f.events.last.name=="urlredirect"&&(e=!0)}d.update("responsefinished",c);e&&delete d.allocated_res_ids[c.resourceID]}};this._on_responsefinished_bound=this._on_responsefinished.bind(this);this._on_urlunload=function l(a,b){if(!!b||!this._queue_message(l,a)){var c=new cls.ResourceManager["1.2"].UrlUnload(a),d=this._get_matching_context(c.resourceID);if(!d)return;d.update("urlunload",c)}};this._on_urlunload_bound=this._on_urlunload.bind(this);this._setup_request_body_behaviour_bound=function(){var a=["text/html","application/xhtml+xml","application/mathml+xml","application/xslt+xml","text/xsl","application/xml","text/css","text/plain","application/x-javascript","application/json","application/javascript","text/javascript","application/x-www-form-urlencoded","text/json","text/xml",""],b=1,c=1,d=4,e=[[d],a.map(function(a){return[a,[b,c]]})];window.services["resource-manager"].requestSetRequestMode(null,e);this.setup_content_tracking_bound()}.bind(this);this.init=function(){this._res_service=window.services["resource-manager"];this._res_service.addListener("enable-success",this._setup_request_body_behaviour_bound);this._res_service.addListener("urlload",this._on_urlload_bound);this._res_service.addListener("request",this._on_request_bound);this._res_service.addListener("requestheader",this._on_requestheader_bound);this._res_service.addListener("requestfinished",this._on_requestfinished_bound);this._res_service.addListener("requestretry",this._on_requestretry_bound);this._res_service.addListener("responseheader",this._on_responseheader_bound);this._res_service.addListener("response",this._on_response_bound);this._res_service.addListener("responsefinished",this._on_responsefinished_bound);this._res_service.addListener("urlredirect",this._on_urlredirect_bound);this._res_service.addListener("urlfinished",this._on_urlfinished_bound);this._res_service.addListener("urlunload",this._on_urlunload_bound);this._doc_service=window.services["document-manager"];this._doc_service.addListener("abouttoloaddocument",this._on_abouttoloaddocument_bound);messages.addListener("debug-context-selected",this._remove_request_context.bind(this,null));messages.addListener("setting-changed",this._on_setting_changed_bound);this._message_queue=[];this._contexts={};window.cls.MessageMixin.apply(this)};this._on_setting_changed_bound=function(a){a.id==="network_logger"&&a.key==="track-content"&&this.setup_content_tracking_bound()}.bind(this);this.setup_content_tracking_bound=function(){var a=4,b=3,c=1,d=1;this._track_bodies=settings.network_logger.get("track-content");if(this._track_bodies)var e=["text/html","application/xhtml+xml","application/mathml+xml","application/xslt+xml","text/xsl","application/xml","text/css","text/plain","application/x-javascript","application/json","application/javascript","text/javascript","application/x-www-form-urlencoded","text/json"],f=[[b,d],e.map(function(a){return[a,[c,d]]})];else var f=[[a]];this._res_service.requestSetResponseMode(cls.TagManager.IGNORE_RESPONSE,f)}.bind(this);this.get_resource_info=function(a){var b=this._current_context&&this._current_context.get_entries_with_res_id(a).last;if(b&&b.current_response&&b.current_response.responsebody)return new cls.ResourceInfo(b);return null};this.get_request_context=function(){return this._current_context};this.init()};cls.NetworkLogger.CONTEXT_TYPE_LOGGER=1;cls.NetworkLogger.CONTEXT_TYPE_CRAFTER=2;cls.NetworkLogger.CONTEXT_TYPE_MAIN=cls.NetworkLogger.CONTEXT_TYPE_LOGGER;cls.NetworkLogger.WindowContext=function(a,b,c){this._logger=b;this._context=c;this.id=a;this.saw_main_document=!1;this.incomplete_warn_discarded=!1;this.entry_ids=[]};cls.NetworkLogger.WindowContextPrototype=function(){this._filter_entries=function(a,b,c,d){var e=window.helpers.eq("resource_id",b.resource_id);return this.entry_ids.contains(b.id)&&(!a||a.contains(b.resource_id))&&d.slice(c+1).filter(e).length==0};this.get_resources=function(a){var b=this._filter_entries.bind(this,a),c=this._context.get_entries().filter(b);return c.map(function(a){return new cls.ResourceInfo(a)})};this.discard_incomplete_warning=function(){this.incomplete_warn_discarded=!0}};cls.NetworkLogger.WindowContext.prototype=new cls.NetworkLogger.WindowContextPrototype;cls.RequestContext=function(a,b){this.FILTER_ALLOW_ALL={type_list:[],is_blacklist:!0};this.allocated_res_ids=[];this.is_paused=!1;this.is_waiting_for_create_request=!1;this._logger_entries=[];this._filters=[this.FILTER_ALLOW_ALL];this._is_main_context=b;this._logger=a;this._window_contexts=[];this._init()};cls.RequestContextPrototype=function(){this._init=function(){this._is_main_context&&settings.network_logger.get("pause")!=!1&&settings.network_logger.set("pause",!1);this._filter_function_bound=this._filter_function.bind(this);window.cls.MessageMixin.apply(this)};this._filter_function=function(a){var b=!1;for(var c=0,d;d=this._filters[c];c++){d.is_blacklist=Boolean(d.is_blacklist);if(d.type_list){var e=d.type_list.contains(a.type);e!=d.is_blacklist&&(b=!0)}if(d.origin_list){var e=d.origin_list.contains(a.load_origin_name);e!=d.is_blacklist&&(b=!0)}}return b};this.get_entries_filtered=function(){return this.get_entries().filter(this._filter_function_bound)};this.get_entries=function(){var a=this._logger_entries;this.is_paused&&(a=this._paused_entries);return a};this.get_entries_with_res_id=function(a){return this._logger_entries.filter(function(b){return b.resource_id===a})};this.set_filters=function(a){this._filters=a};this.pause=function(){this._paused_entries=this._logger_entries.slice(0);this.is_paused=!0};this.unpause=function(){this._paused_entries=null;this.is_paused=!1};this.get_duration=function(){var a=this.get_entries_filtered();if(a.length){var b=a.map(function(a){return a.starttime}),c=a.map(function(a){return a.endtime});return Math.max.apply(null,c)-Math.min.apply(null,b)}return 0};this.get_coarse_duration=function(a,b){var c=this.get_duration();if(a&&b){var d=c/b;c+=d*a}return c};this.get_starttime=function(){var a=this.get_entries_filtered();if(a.length)return Math.min.apply(null,a.map(function(a){return a.starttime}))};this._event_changes_req_id=function(a,b){return a.requestID&&b.request_id!==a.requestID};this.update=function(a,b){var c=b.resourceID,d=this.get_entries_with_res_id(c);if(!!d.length||a==="urlload"){var e=d.last;if(e&&e.request_id){var f=this._event_changes_req_id(b,e);f&&opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" Unexpected change in requestID on "+a+": Change from "+e.request_id+" to "+b.requestID+", URL: "+e.human_url)}if(a=="urlload"||f){var g=this._get_uid();e=new cls.NetworkLoggerEntry(g,b.resourceID,b.documentID,this.get_starttime());this._logger_entries.push(e);var h=this.get_window_context(b.windowID);h&&h.entry_ids.push(g)}e.request_id=b.requestID;e.update(a,b);this.is_paused||this.post_on_context_or_logger("resource-update",{id:b.resourceID})}};this.post_on_context_or_logger=function(a,b){var c=this._is_main_context?this._logger:this;c.post(a,b)};this.get_window_contexts=function(a){return this._window_contexts};this.get_window_context=function(a,b){var c=window.helpers,d=this._window_contexts.filter(c.eq("id",a))[0];if(!d&&b){d=new cls.NetworkLogger.WindowContext(a,this._logger,this);this._window_contexts.push(d);this.post_on_context_or_logger("window-context-added",{"window-context":d})}return d};this.remove_window_context=function(a){var b=this.get_window_context(a),c=b&&b.entry_ids;c&&c.length&&(this._logger_entries=this._logger_entries.filter(function(a){return!c.contains(a.id)}));this._window_contexts=this._window_contexts.filter(function(b){return a!=b.id});this.post_on_context_or_logger("window-context-removed",{"window-id":a})};this.get_entry_from_filtered=function(a){return this.get_entries_filtered().filter(function(b){return b.id==a})[0]};this.get_entry=function(a){return this.get_entries().filter(function(b){return b.id==a})[0]};this._get_uid=function(){var a=1;return function(){return"uid-"+a++}}();this.send_request=function(a,b){var c=window.window_manager_data.get_debug_context(),d=null,e=2,f=3,g=2,h=null,i=[1,1],j=[c,a,b.method,b.headers,d,f,g,h,i];this.is_waiting_for_create_request=!0;var k=this._get_uid(),l=window.tag_manager.set_callback(this,this._handle_create_request,[k]);window.services["resource-manager"].requestCreateRequest(l,j);return k};this._handle_create_request=function(a,b,c){this.is_waiting_for_create_request=!1;var d=0;if(a==d){var e=new cls.ResourceManager["1.3"].ResourceID(b);this.allocated_res_ids[e.resourceID]=c}}};cls.RequestContext.prototype=new cls.RequestContextPrototype;cls.NetworkLoggerEntry=function(a,b,c,d){this.id=a;this.request_id=0;this.resource_id=b;this.document_id=c;this.context_starttime=d;this.url=null;this.human_url="No URL";this.result=null;this.mime=null;this.encoding=null;this.size=null;this.type=null;this.urltype=null;this.starttime=0;this.starttime_relative=0;this.endtime=null;this.is_unloaded=!1;this.is_finished=!1;this.events=[];this.event_sequence=[];this.requests_responses=[];this.current_responsecode=null;this.error_in_current_response=!1;this.called_get_body=!1;this.get_body_unsuccessful=!1;this._current_request=null;this._current_response=null;this._set_is_finished_on_responsefinished=!1;this.crafter_request_id=null};cls.NetworkLoggerEntryPrototype=function(){var a=["urlunload"],b="blocked",c="request",d="waiting",e="receiving",f="irregular",g={urlload:{request:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_SCHEDULING,classname:b},urlfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_READING_LOCAL_DATA,classname:b},responsefinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_CLOSING_RESPONSE_PHASE,classname:b}},requestretry:{request:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_SCHEDULING,classname:b}},responsefinished:{urlfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING_RESPONSE,classname:b}},urlredirect:{urlfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_READING_LOCAL_DATA,classname:b},responsefinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_CLOSING_RESPONSE_PHASE,classname:b}},requestheader:{requestfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_BODY,classname:c}},request:{requestheader:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_HEADER,classname:c},requestfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_WRITING_REQUEST_BODY,classname:c}},requestfinished:{response:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_WAITING_FOR_RESPONSE,classname:d},responsefinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_CLOSING_RESPONSE_PHASE,classname:d}},response:{responseheader:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_HEADER,classname:e}},responseheader:{responsefinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_READING_RESPONSE_BODY,classname:e},response:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_WAITING_FOR_RESPONSE,classname:d},urlfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_PROCESSING,classname:b}}},h={urlredirect:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_REDIRECTING,classname:b},requestretry:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORT_RETRYING,classname:f},urlfinished:{title:ui_strings.S_HTTP_EVENT_SEQUENCE_INFO_ABORTING_REQUEST,classname:f}};this.update=function(b,c){var d=this["_update_event_"+b];if(!this.events.length){this.starttime=c.time;this.context_starttime&&(this.starttime_relative=this.starttime-this.context_starttime);var e=new Date(this.starttime),f=String(e.getHours()).zfill(2),g=String(e.getMinutes()).zfill(2),h=String(e.getSeconds()).zfill(2),i=String(e.getMilliseconds()).zfill(3);this.start_time_string=f+":"+g+":"+h+"."+i}if(!a.contains(b)){this.endtime=c.time;this._add_event(b,c)}d?d.call(this,c):opera.postError("got unknown event: "+b)};this._update_event_urlload=function(a){this.url=a.url;this.urltype=a.urlType;this.document_id=a.documentID;a.loadOrigin&&(this.load_origin_name=cls.ResourceManager["1.2"].LoadOrigin[a.loadOrigin].toLowerCase());this.urltype_name=cls.ResourceManager["1.2"].UrlLoad.URLType[a.urlType];this._humanize_url();this._guess_response_type()};this._update_event_urlunload=function(a){this.is_unloaded=!0};this._update_event_urlfinished=function(a){this.result=a.result;this.mime=a.mimeType;this.encoding=a.characterEncoding;this.size=a.contentLength;this.is_finished=!0;this._current_response&&(this._current_response.logger_entry_is_finished=!0);this._guess_response_type();this._humanize_url()};this._update_event_request=function(a){this._current_request=new cls.NetworkLoggerRequest(this);this.requests_responses.push(this._current_request);this._current_request._update_event_request(a)};this._update_event_requestheader=function(a){if(!this._current_request){this._current_request=new cls.NetworkLoggerRequest(this);this.requests_responses.push(this._current_request)}this._current_request._update_event_requestheader(a)};this._update_event_requestfinished=function(a){if(!this._current_request){this._current_request=new cls.NetworkLoggerRequest(this);this.requests_responses.push(this._current_request)}this._current_request._update_event_requestfinished(a)};this._update_event_requestretry=function(a){this.request_id=a.toRequestID};this._update_event_response=function(a){this._current_request&&(this._current_request.was_responded_to=!0);this.current_responsecode=a.responseCode;this.error_in_current_response=/^[45]/.test(this.current_responsecode);this._current_response=new cls.NetworkLoggerResponse(this);this.requests_responses.push(this._current_response);this._current_response.update_event_response(a)};this._update_event_responseheader=function(a){if(!this._current_response){this._current_request&&(this._current_request.was_responded_to=!0);this._current_response=new cls.NetworkLoggerResponse(this);this.requests_responses.push(this._current_response)}this._current_response.update_event_responseheader(a)};this._update_event_responsefinished=function(a){this._current_response&&this._current_response.update_event_responsefinished(a);a.data&&a.data.mimeType&&(this.mime=a.data&&a.data.mimeType);this._set_is_finished_on_responsefinished&&(this.is_finished=!0);this._guess_response_type()};this._update_event_urlredirect=function(a){this._set_is_finished_on_responsefinished=!0};this._guess_response_type=function(){if(!!cls&&!!cls.ResourceUtil){!this.mime||this.mime.toLowerCase()==="application/octet-stream"?this.type=cls.ResourceUtil.extension_type_map[this.extension]:this.type=cls.ResourceUtil.mime_to_type(this.mime);if(this._current_response){this._current_response.logger_entry_mime=this.mime;this._current_response.logger_entry_type=this.type}}};this._humanize_url=function(){this.human_url=this.url;this.urltype==cls.ResourceManager["1.2"].UrlLoad.URLType.DATA&&(this.type?this.human_url=this.type+" data URI":this.human_url="data URI")};this.get_gap_def=function(a){var b=g[a.from_event.name]&&g[a.from_event.name][a.to_event.name];b||(b=h[a.to_event.name]);b||opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Unexpected event sequence between "+a.from_event.name+" and "+a.to_event.name);return b};this._add_event=function(a,b){var c={name:a,time:b.time,request_id:b.requestID};if(this.events.length){var d={from_event:this.events.last,to_event:c,val:c.time-this.events.last.time},e=this.get_gap_def(d);d.val_string=d.val.toFixed(2)+" ms";d.classname=e&&e.classname||f;d.title=e&&e.title||"";this.event_sequence.push(d)}this.events.push(c)};this.check_to_get_body=function(){var a=this.is_finished&&!this.called_get_body&&(!this._current_response||!this._current_response.responsebody)&&(!this._current_response||this._current_response.saw_responsefinished);if(a){this.called_get_body=!0;this._current_response&&(this._current_response.logger_entry_called_get_body=!0);var b=cls.ResourceUtil.mime_to_content_mode(this.mime),c=({text:1,datauri:3})[b],d=window.tag_manager.set_callback(this,this._handle_get_resource),e=1;window.services["resource-manager"].requestGetResource(d,[this.resource_id,[c,e]])}};this._handle_get_resource=function(a,b){if(!this._current_response){this._current_response=new cls.NetworkLoggerResponse(this);this.requests_responses.push(this._current_response)}var c=0;if(a==c){var d=new cls.ResourceManager["1.2"].ResourceData(b);this.responsebody=d;this._current_response.update_responsebody(d)}else this.get_body_unsuccessful=this._current_response.logger_entry_get_body_unsuccessful=!0;window.messages.post("network-resource-updated",{id:this.resource_id})};this.__defineGetter__("duration",function(){return this.events.length&&this.endtime-this.starttime||0});this.__defineSetter__("duration",function(){});this.__defineGetter__("waiting_time",function(){var a=window.helpers,b=this.event_sequence.filter(a.eq("classname",d)).sum(a.prop("val"));return b||0});this.__defineSetter__("waiting_time",function(){});this.__defineGetter__("touched_network",function(){return Boolean(this._current_request)});this.__defineSetter__("touched_network",function(){});this.__defineGetter__("current_response",function(){return this._current_response});this.__defineSetter__("current_response",function(){});this.__defineGetter__("current_request",function(){return this._current_request});this.__defineSetter__("current_request",function(){})};cls.NetworkLoggerEntryPrototype.prototype=new URIPrototype("url");cls.NetworkLoggerEntry.prototype=new cls.NetworkLoggerEntryPrototype;cls.NetworkLoggerRequest=function(a){this.method=null;this.request_headers=null;this.request_headers_raw=null;this.request_type=null;this.request_body=null;this.boundary="";this.was_responded_to=!1;this.header_tokens=null;this.request_id=a.request_id};cls.NetworkLoggerRequestPrototype=function(){this._update_event_request=function(a){this.method=a.method};this._update_event_requestheader=function(a){this.request_headers=a.headerList;for(var b=0,c;c=this.request_headers[b];b++)if(c.name.toLowerCase()=="content-type"){this.request_type=c.value;this.boundary=c.value.split("; boundary=")[1]||"";break}this.request_headers_raw=a.raw.split("\r\n\r\n")[0]};this._update_event_requestfinished=function(a){if(a.data){this.request_body=a.data;this.request_body.mimeType=this.request_type}}};cls.NetworkLoggerRequest.prototype=new cls.NetworkLoggerRequestPrototype;cls.NetworkLoggerResponse=function(a){this.responsecode=null;this.response_headers=null;this.response_headers_raw=null;this.responsebody=null;this.header_tokens=null;this.is_response=!0;this.saw_responsefinished=!1;this.logger_entry_type=a.type;this.logger_entry_id=a.id;this.logger_entry_mime=a.mime;this.logger_entry_is_finished=a.is_finished;this.logger_entry_touched_network=a.touched_network;this.logger_entry_called_get_body=a.called_get_body;this.logger_entry_get_body_unsuccessful=a.get_body_unsuccessful};cls.NetworkLoggerResponsePrototype=function(){this.update_event_response=function(a){this.responsecode=a.responseCode};this.update_event_responseheader=function(a){this.response_headers=a.headerList;this.response_headers_raw=a.raw.split("\r\n\r\n")[0]};this.update_event_responsefinished=function(a){this.saw_responsefinished=!0;a.data&&a.data.content&&(this.responsebody=a.data)};this.update_responsebody=function(a){this.responsebody=a}};cls.NetworkLoggerResponse.prototype=new cls.NetworkLoggerResponsePrototype;cls.ResourceInfo=function(a){this.url=a.url;this.document_id=a.document_id;this.type=a.type;this.is_unloaded=a.is_unloaded};cls.ResourceInfo.prototype=new URIPrototype("url");window.cls=window.cls||{};cls.NetworkLogView=function(a,b,c,d,e,f){var g=200,h="default",i="details";this._network_logger=f;this._container_scroll_top=0;this._details_scroll_top=0;this._details_scroll_left=0;this._selected=null;this._rendertime=0;this._render_timeout=0;this._graph_tooltip_id=null;this._type_filters=null;this._last_render_speed=0;this.needs_instant_update=!1;this.required_services=["resource-manager","document-manager"];this.createView=function(a){if(!this.needs_instant_update){if(this._render_timeout)return;var b=Date.now()-this._rendertime,c=Math.max(g,this._last_render_speed*2);if(b<c){this._render_timeout=window.setTimeout(this._create_delayed_bound,c-b);return}}this.needs_instant_update=!1;var d=Date.now();a&&(this._container=a);this.mode==i?this.text_search.set_query_selector(null):this.text_search.set_query_selector("[handler='select-network-request']");var e=this._network_logger.get_logger_context();if(e){this._type_filters&&e.set_filters(this._type_filters);this._render_main_view(this._container);this.text_search.update_search()}else this._render_click_to_fetch_view(this._container);var f=Date.now();this._last_render_speed=f-d;this._rendertime=f};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._create_delayed_bound=function(){this._render_timeout=0;this.update()}.bind(this);this.onresize=function(){this.needs_instant_update=!0;this.update()}.bind(this);this._render_details_view=function(a){var b=100,c=settings.network_logger.get("detail-view-left-pos");c=Math.min(c,window.innerWidth-b);var d=settings.network_logger.get("view-raw");return templates.network.details(a,c,d)};this._render_click_to_fetch_view=function(a){a.clearAndRender(["div",["span","class","ui-button reload-window","handler","reload-window","tabindex","1"],["p",ui_strings.S_RESOURCE_CLICK_BUTTON_TO_FETCH_RESOURCES],"class","info-box"])};this._render_main_view=function(a){var b=settings.network_logger.get("selected-viewmode"),c=this._network_logger.get_logger_context(),d=c.get_entries_filtered(),e;if(b==="data"){if(!this._table){this._table=new SortableTable(this._tabledef,null,["method","responsecode","mime","size_h","waiting","duration","graph"],null,null,null,"network-inspector");this._table.add_listener("after-render",this._continue_render_main)}this._table.set_data(d);e=this._table.render()}this._continue_render_main({template:e},d)};this._continue_render_main=function(a,b){var c=a&&a.template,d=Boolean(c),e=this._network_logger.get_logger_context();d&&(b=this._table.get_data());if(!this._list_cont_width){var f=document.styleSheets.getDeclaration("#network-url-list-container");this._list_cont_width=parseInt(f.getPropertyValue("width"),10);this._list_cont_min_width=parseInt(f.getPropertyValue("min-width"),10)}var g=Math.ceil(Math.max(this._list_cont_min_width,parseInt(this._container.style.width,10)*this._list_cont_width/100)),h=parseInt(this._container.style.width,10)-g,i=e.get_window_contexts(),j=["div",templates.network.main(e,i,b,this._selected,h,c),"id","network-outer-container","data-menu","network-logger-context"];if(this._selected){var k=e.get_entry_from_filtered(this._selected);if(k){k.check_to_get_body();j=[j,this._render_details_view(k)]}}var l=this._container.clearAndRender(j);if(this._selected){var m=l.querySelector(".entry-details");if(m){this._details_scroll_top&&(m.scrollTop=this._details_scroll_top);this._details_scroll_left&&(m.scrollLeft=this._details_scroll_left)}if(d){var n=l.querySelector("tr[data-object-id='"+this._selected+"']");n&&n.addClass("selected")}}if(this._container_scroll_top){var o=l.getAttribute("id")==="network-outer-container"?l:l.firstChild;o.scrollTop=this._container_scroll_top}}.bind(this);this._tabledef={column_order:["method","responsecode","mime","protocol","size_h","waiting","duration","started","graph"],handler:"select-network-request",nowrap:!0,idgetter:function(a){return String(a.id)},columns:{method:{label:ui_strings.S_HTTP_LABEL_METHOD,getter:function(a){return a.current_request&&a.current_request.method||""}},responsecode:{label:ui_strings.S_HTTP_LABEL_RESPONSECODE,headertooltip:ui_strings.S_HTTP_TOOLTIP_RESPONSECODE,renderer:function(a){return a.current_responsecode&&String(a.current_responsecode)||""},title_getter:function(a,b){var c=cls.ResourceUtil.http_status_codes[a.current_responsecode];return c?String(c):b(a)},getter:function(a){return a.current_responsecode||0}},mime:{label:ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_MIME,headertooltip:ui_strings.S_HTTP_TOOLTIP_MIME,getter:function(a){return a.mime||ui_strings.S_RESOURCE_ALL_NOT_APPLICABLE},renderer:function(a,b){return b(a)}},protocol:{label:ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PROTOCOL,headertooltip:ui_strings.S_HTTP_TOOLTIP_PROTOCOL,getter:function(a){return a.urltype_name.toLowerCase()}},size_h:{label:ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_PPSIZE,headerlabel:ui_strings.S_RESOURCE_ALL_TABLE_COLUMN_SIZE,headertooltip:ui_strings.S_HTTP_TOOLTIP_SIZE_PRETTYPRINTED,align:"right",getter:function(a){return a.size},renderer:function(a){return String(a.size?cls.ResourceUtil.bytes_to_human_readable(a.size):ui_strings.S_RESOURCE_ALL_NOT_APPLICABLE)},title_getter:function(a){return a.size?String(a.size)+" "+ui_strings.S_BYTES_UNIT:ui_strings.S_RESOURCE_ALL_NOT_APPLICABLE}},waiting:{label:ui_strings.S_HTTP_LABEL_WAITING,headertooltip:ui_strings.S_HTTP_TOOLTIP_WAITING,align:"right",getter:function(a){return a.waiting_time||""},renderer:function(a,b){var c=b(a);return c&&c.toFixed(2)+" ms"}},started:{label:ui_strings.S_HTTP_LABEL_STARTED,headertooltip:ui_strings.S_HTTP_TOOLTIP_STARTED,align:"right",getter:function(a){return a.starttime_relative},renderer:function(a){return a.starttime_relative.toFixed(2)+" ms"}},duration:{label:ui_strings.S_HTTP_LABEL_DURATION,headertooltip:ui_strings.S_HTTP_TOOLTIP_DURATION,align:"right",getter:function(a){return a.duration},renderer:function(a){var b=a.duration;return b&&b.toFixed(2)+" ms"||""}},graph:{label:ui_strings.S_HTTP_LABEL_GRAPH,headertooltip:ui_strings.S_HTTP_TOOLTIP_GRAPH,attributes:["class","network-graph-column"],getter:function(a){return a.starttime},renderer:function(a){var b=50;return templates.network.graph_sections(a,b,a.duration,!0)}}}};this._on_clicked_close_bound=function(a,b){this._selected=null;this.mode=h;this.needs_instant_update=!0;this.update();return!1}.bind(this);this._on_start_resize_detail_bound=function(a,b){if(a.target.hasClass("resize-request-detail")){document.addEventListener("mousemove",this._on_drag_detail_bound,!1);document.addEventListener("mouseup",this._on_stop_resize_detail_bound,!1);this._resize_interval||(this._resize_interval=setInterval(this._on_drag_interval_bound,30));a.preventDefault()}}.bind(this);this._on_drag_detail_bound=function(a){this._resize_detail_evt=a}.bind(this);this._on_drag_interval_bound=function(){var a=document.querySelector(".network-details-container");if(a&&this._resize_detail_evt){this._detail_left=Math.max(this._resize_detail_evt.clientX,15);this._detail_left=Math.min(this._detail_left,window.innerWidth-100);a.style.left=this._detail_left+"px";settings.network_logger.set("detail-view-left-pos",this._detail_left)}}.bind(this);this._on_stop_resize_detail_bound=function(a){document.removeEventListener("mousemove",this._on_drag_detail_bound,!1);document.removeEventListener("mouseup",this._on_stop_resize_detail_bound,!1);this._resize_interval=clearInterval(this._resize_interval);this._resize_detail_evt=null}.bind(this);this._move_selection=function(a){if(this._selected){var b=document.querySelector("[data-object-id='"+this._selected+"']");if(b&&b[a]&&b[a].dataset.objectId){this._selected=b[a].dataset.objectId;b=document.querySelector("[data-object-id='"+this._selected+"']");if(b){var c=this._container.firstChild,d=b.offsetTop+b.offsetHeight;d>c.offsetHeight+this._container_scroll_top?this._container_scroll_top=d-c.offsetHeight:b.offsetTop<this._container_scroll_top&&(this._container_scroll_top=b.offsetTop)}this.needs_instant_update=!0;this.update();return!1}}};this._on_clicked_request_bound=function(a,b){var c=b.get_attr("parent-node-chain","data-object-id");if(this._selected==c){this._selected=null;this.mode=h}else{this._selected=c;this.mode=i}this.needs_instant_update=!0;this.update();this.graph_tooltip&&this.graph_tooltip.hide()}.bind(this);this._on_mouseover_entry_bound=function(a,b){var c=b.get_attr("parent-node-chain","data-object-id"),d=this._container.querySelectorAll("[data-object-id='"+c+"']");for(var e=0,f;f=d[e];e++)f.addClass("hovered")}.bind(this);this._on_mouseout_entry_bound=function(a,b){var c=b.get_attr("parent-node-chain","data-object-id"),d=this._container.querySelectorAll("[data-object-id='"+c+"']");for(var e=0,f;f=d[e];e++)f.removeClass("hovered")}.bind(this);this._on_scroll_bound=function(a,b){if(a.target.hasClass("entry-details")){this._details_scroll_top=a.target.scrollTop;this._details_scroll_left=a.target.scrollLeft}else this._container_scroll_top=b.firstChild.scrollTop}.bind(this);this._on_graph_tooltip_bound=function(a,b){var c=this._network_logger.get_logger_context();this._graph_tooltip_id=b.get_attr("parent-node-chain","data-object-id");var d=c.get_entry(this._graph_tooltip_id);this.mono_lineheight||this._update_mono_lineheight();var e=templates.network.graph_tooltip(d,this.mono_lineheight);this.graph_tooltip.show(e)}.bind(this);this._on_graph_tooltip_enter_bound=function(a,b){if(!!this._graph_tooltip_id){var c=this._container.querySelectorAll("[data-object-id='"+this._graph_tooltip_id+"']");for(var d=0,e;e=c[d];d++)e.addClass("hovered")}}.bind(this);this._on_graph_tooltip_leave_bound=function(a,b){if(!!this._graph_tooltip_id){var c=this._container.querySelectorAll("[data-object-id='"+this._graph_tooltip_id+"']");for(var d=0,e;e=c[d];d++)e.removeClass("hovered");this._graph_tooltip_id=null}}.bind(this);this._on_url_tooltip_bound=function(a,b){var c=this._network_logger.get_logger_context();if(c){var d=b.get_attr("parent-node-chain","data-object-id"),e=c.get_entry(d);if(e){var f=templates.network.url_tooltip(e);this.url_tooltip.show(f)}}}.bind(this);this._update_mono_lineheight=function(){this.mono_lineheight=window.defaults["js-source-line-height"]}.bind(this);this.url_tooltip=Tooltips.register("network-url-list-tooltip");this.url_tooltip.ontooltip=this._on_url_tooltip_bound;this.graph_tooltip=Tooltips.register("network-graph-tooltip",{type:Tooltips.TYPE_SUPPORT_CONTEXT});this.graph_tooltip.ontooltip=this._on_graph_tooltip_bound;this.graph_tooltip.ontooltipenter=this._on_graph_tooltip_enter_bound;this.graph_tooltip.ontooltipleave=this._on_graph_tooltip_leave_bound;this._on_clear_log_bound=function(a,b){this._network_logger.remove_logger_request_context();this.needs_instant_update=!0}.bind(this);this._on_close_incomplete_warning_bound=function(a,b){var c=this._network_logger.get_logger_context(),d=Number(b.get_attr("parent-node-chain","data-reload-window-id")),e=c.get_window_context(d);e&&e.discard_incomplete_warning();this.needs_instant_update=!0;this.update()}.bind(this);this._on_setting_changed_bound=function(a){switch(a.id){case"monospacefont":this.mono_lineheight=null;break;case"network_logger":if(a.key==="pause"){var b=this._network_logger.get_logger_context();if(b){var c=b.is_paused,d=settings.network_logger.get(a.key);c&&!d?b.unpause():!c&&d&&b.pause()}}else if(a.key==="network-profiler-mode"){var e=settings.network_logger.get(a.key)?window.app.profiles.HTTP_PROFILER:window.app.profiles.DEFAULT,f=settings.general.get("profile-mode");f!==e&&window.services.scope.enable_profile(e)}if(a.key!=="detail-view-left-pos"){this.needs_instant_update=!0;this.update()}break;case"general":if(a.key==="profile-mode"){var g=settings.general.get(a.key)===window.app.profiles.HTTP_PROFILER,h=settings.network_logger.get("network-profiler-mode");h!==g&&settings.network_logger.set("network-profiler-mode",g)}}}.bind(this);this._map_filter_bound=function(a){return({all:{type_list:[],is_blacklist:!0},markup:{type_list:["markup"]},css:{type_list:["css"]},script:{type_list:["script"]},image:{type_list:["image"]},other_types:{type_list:["markup","css","script","image"],is_blacklist:!0},xhr:{origin_list:["xhr"]}})[a]}.bind(this);this._on_single_select_changed_bound=function(a){if(a.view_id==="network_logger"){a.name==="selected-viewmode"?settings.network_logger.set(a.name,a.values[0]):a.name==="type-filter"&&(this._type_filters=a.values.map(this._map_filter_bound));this.needs_instant_update=!0;this.update()}}.bind(this);this._toggle_profile_mode=function(a){var b="network-profiler-mode",c=!settings.network_logger.get(b);settings.network_logger.
set(b,c);views.settings_view.syncSetting("network_logger",b,c);c?a.addClass("is-active"):a.removeClass("is-active")};this._on_toggle_network_profiler_bound=function(a){var b=!a.target.hasClass("is-active");b?(new ConfirmDialog(ui_strings.S_CONFIRM_SWITCH_TO_NETWORK_PROFILER,this._toggle_profile_mode.bind(this,a.target))).show():this._toggle_profile_mode(a.target)}.bind(this);this._on_context_established_bound=function(a){if(a.context_type===cls.NetworkLogger.CONTEXT_TYPE_LOGGER){var b=this._network_logger.get_logger_context();this._type_filters&&b.set_filters(this._type_filters)}}.bind(this);this._on_context_removed_bound=function(a){a.context_type===cls.NetworkLogger.CONTEXT_TYPE_LOGGER&&this.update()}.bind(this);this._init=function(a,b,c,d,e){this.id=a;var f=window.event_handlers,g=window.messages;f.click["select-network-request"]=this._on_clicked_request_bound;f.mouseover["select-network-request"]=this._on_mouseover_entry_bound;f.mouseout["select-network-request"]=this._on_mouseout_entry_bound;f.scroll["network-logger"]=this._on_scroll_bound;f.click["close-request-detail"]=this._on_clicked_close_bound;f.mousedown["resize-request-detail"]=this._on_start_resize_detail_bound;f.click["toggle-raw-cooked-response"]=this._on_clicked_toggle_response_bound;f.click["toggle-raw-cooked-request"]=this._on_clicked_toggle_request_bound;f.click["clear-log-network-view"]=this._on_clear_log_bound;g.addListener("single-select-changed",this._on_single_select_changed_bound);g.addListener("setting-changed",this._on_setting_changed_bound);f.click["select-network-viewmode"]=this._on_select_network_viewmode_bound;f.click["type-filter-network-view"]=this._on_change_type_filter_bound;f.click["profiler-mode-switch"]=this._on_toggle_network_profiler_bound;f.click["close-incomplete-warning"]=this._on_close_incomplete_warning_bound;this._network_logger.addListener("context-added",this._on_context_established_bound);this._network_logger.addListener("context-removed",this._on_context_removed_bound);this._network_logger.addListener("resource-update",this.update.bind(this));this._handlers={"select-next-entry":this._move_selection.bind(this,"nextElementSibling"),"select-previous-entry":this._move_selection.bind(this,"previousElementSibling"),"close-details":this._on_clicked_close_bound};ActionBroker.get_instance().register_handler(this);var h=ContextMenu.get_instance();h.register("network-logger-context",[{label:ui_strings.S_CLEAR_NETWORK_LOG,handler:this._on_clear_log_bound}]);this.init(a,b,c,d,e)};ActionHandlerInterface.apply(this);this._init(a,b,c,d,e)};cls.NetworkLogView.prototype=ViewBase;cls.NetworkLog={};cls.NetworkLog.create_ui_widgets=function(){new Settings("network_logger",{"selected-viewmode":"graphs",pause:!1,"network-profiler-mode":!1,"detail-view-left-pos":120,"track-content":!0,"view-raw":!1},{pause:ui_strings.S_TOGGLE_PAUSED_UPDATING_NETWORK_VIEW,"network-profiler-mode":ui_strings.S_BUTTON_SWITCH_TO_NETWORK_PROFILER,"track-content":ui_strings.S_NETWORK_CONTENT_TRACKING_SETTING_TRACK_LABEL,"view-raw":ui_strings.S_NETWORK_RAW_VIEW_LABEL},{checkboxes:["track-content","view-raw"]},{},"general");new ToolbarConfig({view:"network_logger",groups:[{type:UI.TYPE_BUTTONS,items:[{handler:"clear-log-network-view",icon:"clear-log-network-view",title:ui_strings.S_CLEAR_NETWORK_LOG}]},{type:UI.TYPE_SWITCH,items:[{key:"network_logger.pause",icon:"pause-network-view"}]},{type:UI.TYPE_SINGLE_SELECT,name:"selected-viewmode",default_value:window.settings.network_logger.get("selected-viewmode"),items:[{value:"graphs",title:ui_strings.S_HTTP_LABEL_GRAPH_VIEW,icon:"network-view-toggle-graphs"},{value:"data",title:ui_strings.S_HTTP_LABEL_DATA_VIEW,icon:"network-view-toggle-data"}]},{type:UI.TYPE_SINGLE_SELECT,name:"type-filter",allow_multiple_select:!0,items:[{text:ui_strings.S_HTTP_LABEL_FILTER_ALL,title:ui_strings.S_HTTP_TOOLTIP_FILTER_ALL,value:"all"},{text:ui_strings.S_HTTP_LABEL_FILTER_MARKUP,title:ui_strings.S_HTTP_TOOLTIP_FILTER_MARKUP,value:"markup"},{text:ui_strings.S_HTTP_LABEL_FILTER_STYLESHEETS,title:ui_strings.S_HTTP_TOOLTIP_FILTER_STYLESHEETS,value:"css"},{text:ui_strings.S_HTTP_LABEL_FILTER_SCRIPTS,title:ui_strings.S_HTTP_TOOLTIP_FILTER_SCRIPTS,value:"script"},{text:ui_strings.S_HTTP_LABEL_FILTER_IMAGES,title:ui_strings.S_HTTP_TOOLTIP_FILTER_IMAGES,value:"image"},{text:ui_strings.S_HTTP_LABEL_FILTER_OTHER,title:ui_strings.S_HTTP_TOOLTIP_FILTER_OTHER,value:"other_types"},{text:ui_strings.S_HTTP_LABEL_FILTER_XHR,title:ui_strings.S_HTTP_TOOLTIP_FILTER_XHR,value:"xhr"}]},{type:UI.TYPE_SWITCH_CUSTOM_HANDLER,items:[{key:"network_logger.network-profiler-mode",icon:""}],handler:"profiler-mode-switch"},{type:UI.TYPE_SWITCH,items:[{key:"network_logger.view-raw",icon:"view-raw-requests-responses"}]},{type:UI.TYPE_INPUT,items:[{handler:"network-text-search",shortcuts:"network-text-search",title:ui_strings.S_SEARCH_INPUT_TOOLTIP,label:ui_strings.S_INPUT_DEFAULT_TEXT_SEARCH}]}]});var a=window.views.network_logger.text_search=new TextSearch;window.eventHandlers.input["network-text-search"]=function(b,c){a.searchDelayed(c.value)};ActionBroker.get_instance().get_global_handler().register_shortcut_listener("network-text-search",cls.Helpers.shortcut_search_cb.bind(a));var b=function(b){if(b.id==="network_logger"){var c=b.container.querySelector(".entry-details");c||(c=b.container.querySelector("#network-outer-container"));if(c){a.setContainer(c);a.setFormInput(views.network_logger.getToolbarControl(b.container,"network-text-search"))}}},c=function(b){b.id=="network_logger"&&a.cleanup()};messages.addListener("view-created",b);messages.addListener("view-destroyed",c)};window.cls=window.cls||{};cls.RequestCraftingView=function(a,b,c,d,e,f){this._network_logger=f;this._input=null;this._output=null;this._urlfield=null;this._requests=[];this._uastring=window.services.scope.get_hello_message().userAgent;this._request_template=["GET / HTTP/1.1","Host: example.org","User-Agent: "+this._uastring,"Accept: text/html, application/xml;q=0.9, application/xhtml xml, image/png, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1","Accept-Language: en","Accept-Charset: iso-8859-1, utf-8, utf-16, *;q=0.1","Accept-Encoding: deflate, gzip, x-gzip, identity, *;q=0","Connection: Keep-Alive, TE","TE: deflate, gzip, chunked, identity, trailers"].join("\r\n");this._prev_request=this._request_template;this._prev_url="";this.ondestroy=function(){this._prev_url=this._urlfield?this._urlfield.get_value():"";this._prev_request=this._input?this._input.get_value():""};this.createView=function(a){this._render_main_view(a)};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._render_main_view=function(a){var b=this._network_logger.get_crafter_context(),c=[];b&&(c=b.get_entries());a.clearAndRender(templates.network.request_crafter_main(this._prev_url,this._prev_request,c,this._error_message));this._urlfield=new cls.BufferManager(a.querySelector("input"));this._input=new cls.BufferManager(a.querySelector("textarea"));this._output=a.querySelector("code")};this._parse_url=function(a){var b=a.match(/^(?:(http(?:s)?):\/\/)(\S*?)(?:\/|$)(?:(.*))/);if(b)return{protocol:b[1].toUpperCase(),host:b[2],path:"/"+(b[3]||"")};return null};this._parse_request=function(a){var b={},c=a.split(/\r?\n/),d=c.shift(),e=d.match(/(\w*?) (.*) (.*)/);if(!e||(e=e.slice(1)).length!=3){this._error_message=ui_strings.M_NETWORK_CRAFTER_FAILED_PARSE_REQUEST;return null}b.method=e[0];b.path=e[1];b.protocol=e[2];b.headers=this._parse_headers(c);b.host=b.headers.Host;for(var f=0,g;g=b.headers[f];f++)g[0]=="Host"&&(b.host=g[1]);b.url=this._protocol+b.host+b.path;return b};this._parse_headers=function(a){var b=[];for(var c=0,d;d=a[c];c++)if(d.indexOf(" ")==0||d.indexOf("\t")==0){var e="line".replace(/^[ \t]+/," ");if(b.length){var f=b.pop();b.push([f[0],f[1]+e])}else opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+" Crafter: this header is malformed\n"+d)}else{var g=d.match(/([\w-]*?):(.*)/);if(!g||g.length!=3){opera.postError(ui_strings.S_DRAGONFLY_INFO_MESSAGE+"Crafter could not parse header!:\n"+d);continue}b.push([g[1],g[2].trim()])}return b};this._handle_send_request_bound=function(){this._network_logger.remove_crafter_request_context();this._prev_url=this._urlfield.get_value();this._prev_request=this._input.get_value();var a=this._parse_request(this._prev_request);if(a){var b=this._network_logger.get_crafter_context(!0);this._error_message=null;var c=b.send_request(this._prev_url,a);this._requests.push(c)}else this.update()}.bind(this);this._handle_url_change_bound=function(a,b){var c=b.value;this._add_url_info_to_request(this._parse_url(c))}.bind(this);this._add_url_info_to_request=function(a){if(!!a){var b=this._input.get_value();b=b.replace(/^(\w+? )(.*?)( .*)/,function(b,c,d,e,f){return c+a.path+" "+a.protocol+"/1.1"});b=b.replace(/^Host: .*$?/m,"Host: "+a.host);this._input.set_value(b)}};this._on_context_added_bound=function(a){a.context_type===cls.NetworkLogger.CONTEXT_TYPE_CRAFTER&&a.context.addListener("resource-update",this.update.bind(this))}.bind(this);var g=window.eventHandlers;g.click["request-crafter-send"]=this._handle_send_request_bound;g.change["request-crafter-url-change"]=this._handle_url_change_bound;g.keyup["request-crafter-url-change"]=this._handle_url_change_bound;this._network_logger.addListener("context-added",this._on_context_added_bound);this.required_services=["resource-manager","document-manager"];this.init(a,b,c,d,e)};cls.RequestCraftingView.prototype=ViewBase;window.cls=window.cls||{};cls.NetworkOptionsView=function(a,b,c,d,e){this._cache_policy="default";this._bypass_cache=!1;this._track_bodies=!1;this._service=window.services["resource-manager"];this._overrides=!1;this._headers=[{name:ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_NAME,value:ui_strings.S_NETWORK_HEADER_EXAMPLE_VAL_VALUE}];this._headerele=null;this.createView=function(a){this._render_main_view(a)};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this._render_main_view=function(a){a.clearAndRender(templates.network.options_main(this._bypass_cache,this._track_bodies,this._headers,this._overrides));this._output=a.querySelector("code");this._headerele=a.querySelector(".header-override-input")};this._update_header_table=function(){var a=[];for(var b=1,c;c=this._headertable[b];b++)!c.childNodes[0].textContent.trim()&&!c.childNodes[1].textContent.trim()&&a.push(c)};this._handle_toggle_caching_bound=function(a,b){this._bypass_cache=b.checked;const c=1,d=2;this._service.requestSetReloadPolicy(null,[this._bypass_cache?d:c])}.bind(this);this._handle_toggle_header_overrides_bound=function(a,b){this._overrides=b.checked;this._overrides?this._set_header_overrides(this._headers):this._clear_header_overrides();this.update()}.bind(this);this._get_headers=function(){var a=this._headerele?this._headerele.value:"";return a.split("\n").map(function(a){var b=a.split(": ");if(b.length!=2)return null;return{name:b[0],value:b[1].trim()}}).filter(Boolean)};this._handle_update_header_overrides_bound=function(a,b){var c=this._get_headers();this._headers=c;this._set_header_overrides(c)}.bind(this);this._handle_select_preset_bound=function(a,b){this._headerele.value=b.value;this._headerele.releaseEvent("input")}.bind(this);this._clear_header_overrides=function(){this._service.requestClearHeaderOverrides(null,[])};this._set_header_overrides=function(a){this._clear_header_overrides();var b=[a.map(function(a){return[a.name,a.value]})];this._service.requestAddHeaderOverrides(null,b)};this.required_services=["resource-manager","document-manager"];var f=window.eventHandlers;f.change["network-options-toggle-caching"]=this._handle_toggle_caching_bound;f.change["network-options-toggle-body-tracking"]=this._handle_toggle_content_tracking_bound;f.change["toggle-header-overrides"]=this._handle_toggle_header_overrides_bound;f.change["network-options-select-preset"]=this._handle_select_preset_bound;f.click["update-header-overrides"]=this._handle_update_header_overrides_bound;this.init(a,b,c,d,e)};cls.NetworkOptionsView.prototype=ViewBase;window.templates||(window.templates={});window.templates.network||(window.templates.network={});(function(a){var b=16,c=6,d=60,e=d/2+b+c,f="unreferenced",g="error_response",h="not_requested";a.options_main=function(b,c,d,e){return["div",["div",["h2",ui_strings.S_NETWORK_CACHING_SETTING_TITLE],["p",ui_strings.S_NETWORK_CACHING_SETTING_DESC],["p",["label",["input","type","checkbox","class","checkbox","name","network-options-caching","handler","network-options-toggle-caching","checked",b?!0:!1],ui_strings.S_NETWORK_CACHING_SETTING_DISABLED_LABEL]],["h2",ui_strings.S_NETWORK_HEADER_OVERRIDES_TITLE],["p",ui_strings.S_NETWORK_HEADER_OVERRIDES_DESC],["p",["label",["input","type","checkbox","class","checkbox","handler","toggle-header-overrides"].concat(e?["checked","checked"]:[]),ui_strings.S_NETWORK_HEADER_OVERRIDES_LABEL],a.options_override_list(d,e)]],"class","network-options"]};a.options_override_list=function(b,c){var d=["_auto_height_textarea",b.map(function(a){return a.name+": "+a.value}).join("\n"),"class","header-override-input"].concat(c?[]:["disabled","disabled"]);return[["br"],ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_LABEL+":",a.options_override_presets(c),["br"],d,["br"],["span",ui_strings.S_NETWORK_HEADER_OVERRIDES_PRESETS_SAVE,"handler","update-header-overrides","class","ui-button","tabindex","1"].concat(c?[]:["disabled","disabled"])]};a.options_override_presets=function(a){return["select",cls.ResourceUtil.header_presets.map(function(a){return["option",a.name,"value",a.headers]}),"handler","network-options-select-preset"].concat(a?[]:["disabled","disabled"])};a.request_crafter_main=function(a,b,c,d){var e=ui_strings.M_NETWORK_CRAFTER_SEND;if(d)e=d;else{var f=c[0];if(f&&f.is_finished){var g=window.helpers,h=f.requests_responses.filter(g.eq("is_response",!0))[0];if(h){e=h.response_headers_raw;h.responsebody&&h.responsebody.content&&h.responsebody.content.stringData&&(e+="\n\n"+h.responsebody.content.stringData)}}}return["div",["div",["h2",ui_strings.S_HTTP_LABEL_URL],["p",["input","type","text","value",a||"http://example.org","handler","request-crafter-url-change"]],["h2",ui_strings.S_NETWORK_REQUEST],["p",["_auto_height_textarea",b]],["p",["span",ui_strings.M_NETWORK_CRAFTER_SEND,"handler","request-crafter-send","unselectable","on","class","ui-button","tabindex","1"]],["h2",ui_strings.S_NETWORK_REQUEST_DETAIL_RESPONSE_TITLE],["p",["textarea",e]],"class","padding request-crafter"]]};a.incomplete_warning=function(a,b,c){if(a.incomplete_warn_discarded||a.saw_main_document)return[];var d="";if(c.length>1){var e=window.window_manager_data.get_window(a.id);d=e&&e.title&&" – "+e.title}return["div",["div",["span","class","ui-button reload-window","handler","reload-window","tabindex","1"]],["p",ui_strings.S_HTTP_INCOMPLETE_LOADING_GRAPH+d],["span"," ","class","close_incomplete_warning","handler","close-incomplete-warning","tabindex","1"],"class","info-box network_incomplete_warning","data-reload-window-id",String(a.id)]};a.main=function(b,c,d,e,f,g){return[["div",a.url_list(b,d,e),"id","network-url-list-container"],["div",["div",g||a.viewmode_graphs(b,d,e,f),"class","network-data-container "+(g?"data":"graphs")],"class","network-main-container"],[a.summary(d)],c.map(a.incomplete_warning)]};a.viewmode_graphs=function(d,e,f,g){var h=d.get_starttime(),i=d.get_coarse_duration(b+c,g),j=a.graph_rows(d,e,f,g,h,i),k=[];if(i){var l=a.grid_info(i,g),m=Math.round(g/i*l),n=a.timeline_row(g,l,m);k=["div",n,j,"id","graph","style","background-size: "+m+"px 100%;"]}return k};a.url_list_entry=function(b,c){var d=c.error_in_current_response,e=!c.touched_network;return["li",a.icon(c),["span",(c.short_distinguisher||c.human_url).slice(0,200),"class","network-url","data-tooltip","network-url-list-tooltip"],"handler","select-network-request","data-object-id",String(c.id),"data-copy",c.url,"data-copy-label",ui_strings.M_CONTEXTMENU_COPY_URL,"class",(b===c.id?"selected":"")+(d?" "+g:"")+(e?" "+h:"")]};a.url_list=function(b,c,d){return[["ol",c.map(a.url_list_entry.bind(null,d)),"class","network-log-url-list sortable-table-style-list"]]};a.url_tooltip=function(a){var b=cls.ResourceManager["1.2"].UrlLoad.URLType,c=cls.ResourceUtil.http_status_codes,d=[],e="",i="";if(a.is_unloaded){e=ui_strings.S_HTTP_UNREFERENCED;i=f}else if(a.error_in_current_response){e=a.current_responsecode+" ("+c[a.current_responsecode]+")";i=g}else if(!a.touched_network)if(a.urltype_name===b[b.FILE]){e=ui_strings.S_HTTP_SERVED_OVER_FILE;i=h}else if(a.urltype_name!==b[b.DATA]){e=ui_strings.S_HTTP_NOT_REQUESTED;i=h}e&&i&&d.push(["span",e,"class",i]);d.push(["span"," "+a.human_url]);a.search&&d.push(["table",a.params.map(function(a){return["tr",["th",a.key],["td",a.value]]}),"class","network_get_params"]);return d};a.summary=function(a){var b=a.map(function(a){return a.size||0}).reduce(function(a,b){return a+b},0),c=a.length,d=c+" "+(c===1?ui_strings.S_NETWORK_REQUEST:ui_strings.S_NETWORK_REQUESTS);b&&(d+=", "+cls.ResourceUtil.bytes_to_human_readable(b));return["div",d,"class","network-summary"]};a.icon=function(a){var b="resource-icon resource-type-"+a.type;a.load_origin_name&&(b+=" load-origin-"+a.load_origin_name);return["span","class",b]};a.timeline_row=function(a,b,c){var e=[],f=Math.ceil(a/c),g=b*f,h=[1,"ms"];g>1e3&&(h=[1e3,"s"]);while(b&&--f>=0){var i=c*f-d/2,j=b*f/h[0];j=Math.round(j*100)/100;i+d<a&&e.push(["span",j+" "+h[1],"style","left: "+i+"px;","class","timeline-marker"])}return["div",e,"class","network-timeline-row"]};a.graph_rows=function(b,c,d,e,f,g){return c.map(function(b){return a.graph_row(b,d,e,f,g)})};a.graph_row=function(b,c,d,e,f){var g=d/f,h=(b.starttime-e)*g,i=3,j=["span",a.graph_sections(b,d,f),"class","network-graph-sections-hitarea","data-tooltip","network-graph-tooltip","style","margin-left:"+(h-i)+"px;"];return["div",j,"class","network-graph-row "+(c===b.id?"selected ":""),"handler","select-network-request","data-object-id",String(b.id)]};a.graph_section_colors={waiting:"#7381FF",request:"#de5b5b",receiving:"#79db86",blocked:"#adadad",irregular:"#ebcc78"};a.graph_sections=function(b,c,d,e){if(!!d){var f=c/d,g=b.duration*f;return["span","class","network-graph-sections","data-tooltip",e?"network-graph-tooltip":"","style","width: "+g+"px;"+"background-image: "+"-o-linear-gradient(90deg,"+"transparent 0%,"+"rgba(255, 255, 255, 0.25) 100%), "+"-o-linear-gradient(0deg,"+a.graph_sections_style(b,c,d)+");"+"background-image: "+"linear-gradient(0deg,"+"transparent 0%,"+"rgba(255, 255, 255, 0.25) 100%), "+"linear-gradient(90deg,"+a.graph_sections_style(b,c,d)+");"]}};a.graph_sections_style=function(b,c,d){if(!b.event_sequence.length)return"transparent 0, transparent 100%";var e=c/d,f=0,g=b.event_sequence.map(function(b){var c=f,d=b.val*e;f+=d;var g=a.graph_section_colors[b.classname];return g+" "+Math.round(c)+"px,"+g+" "+Math.round(f)+"px"}).join(",");g+=",transparent "+Math.round(f)+"px";return g};a.graph_tooltip_tr=function(a,b,c){return["tr",["td",a.val_string,"class","time_data"],["td",a.title,"class","gap_title"],window.ini&&ini.debug?["td","("+a.from_event.name+" to "+a.to_event.name+")","class","gap_title"]:[]]};a.graph_tooltip=function(b,c){if(!!b){var d=155,e=b.duration,f=d/e;if(e&&b.events){var g=b.event_sequence.map(a.graph_tooltip_tr);g.push(["tr",["td",e.toFixed(2)+" ms","class","time_data"],["td",ui_strings.S_HTTP_LABEL_DURATION,"class","gap_title"],"class","sum"]);if(!a.tt_vert_padding){var h=document.styleSheets.getDeclaration(".network-tooltip-legend .time_data").getPropertyValue("padding").split(" ").map(function(a){return parseInt(a,10)});a.tt_vert_padding=h[0]+h[2]}var i=c+a.tt_vert_padding,j=100.5,k=1.5,l=.5,m=0,n=j,o=0,p=b.event_sequence.map(function(a,b,c){if(!a.val)return"";var d=Math.round(a.val*f);l=m+d/2;m+=d;o=b*i+i/2+.5;return["path","d","M"+k+" "+l+" L"+n+" "+o,"stroke","#BABABA"]}),q=Math.max(l,o,m);return["div",[window.ini&&ini.debug?["h2","Requested "+b.resource_id+" at "+b.start_time_string]:["h2",ui_strings.S_HTTP_REQUESTED_HEADLINE.replace("%s",b.start_time_string)],["div",["div",["div","style","height: "+d+"px; "+"background-image: -o-linear-gradient(270deg,"+a.graph_sections_style(b,d,e)+");"+"background-image: linear-gradient(180deg,"+a.graph_sections_style(b,d,e)+");","class","network-tooltip-graph"],"class","network-tooltip-col"],["div",["svg:svg",p,"width",Math.ceil(j)+"px","height",Math.ceil(q)+"px","version","1.1"],"class","network-tooltip-col network-tooltip-pointers"],["div",["table",g],"class","network-tooltip-col network-tooltip-legend"],"class","network-tooltip-row"]],"class","network-tooltip-container"]}}};a.grid_info=function(a,b){if(a>0){var c=150,d=Math.round(b/c),f=Number((a/d).toPrecision(1)),g=b/a*f;while(b%(g*d)<e){f--;g=b/a*f}return f}}})(window.templates.network);window.templates||(window.templates={});window.templates.network||(window.templates.network={});(function(a){var b="http-token-type-boundary",c=["markup","script","css","text"];a._col_or_row=function(a){if(Array.isArray(a[0])&&a[1])return["tr",a[0],a[1]];return["tr",["td",a,"colspan","2"]]};a._pre=function(a,b){var c="mono";b&&(c+=" "+b);return["pre",a,"class",c]};a.details=function(a,b,c){return["div",["span",["span","class","close-request-detail","handler","close-request-detail","tabindex","1"],"class","resize-request-detail","handler","resize-request-detail"],["div",this._details_content(a,c),"data-object-id",String(a.id),"class","entry-details"],"class","network-details-container","style","left:"+b+"px"]};a._details_content=function(a,b){var c=a.requests_responses.map(b?this._requests_responses_raw_bound:this._requests_responses_parsed_bound);if(b)return c;var d=a.current_responsecode;d&&d in cls.ResourceUtil.http_status_codes&&(d=d+" "+cls.ResourceUtil.http_status_codes[d]);return["table",["tbody",this._col_or_row(["h1",[["span",a.touched_network&&d?String(d)+" – ":"","data-spec","http#"+a.current_responsecode],["span",a.url]]])],a.touched_network?[]:this.did_not_touch_network(a),c]};a.did_not_touch_network=function(a){var b=[cls.ResourceManager["1.2"].UrlLoad.URLType.FILE,cls.ResourceManager["1.2"].UrlLoad.URLType.DATA];return["tbody",this._col_or_row(["p",b.contains(a.urltype)?ui_strings.S_NETWORK_NOT_REQUESTED:ui_strings.S_NETWORK_SERVED_FROM_CACHE])]};a.requests_responses=function(a,b,c,d){var e=!0;for(var f=c+1,g;g=d[f];f++)if(b.is_response==g.is_response){e=!1;break}return b.is_response?this._response(b,e,a):this._request(b,e,a)};a._requests_responses_raw_bound=a.requests_responses.bind(a,!0);a._requests_responses_parsed_bound=a.requests_responses.bind(a,!1);a._request=function(b,c,d){if(!c&&!b.was_responded_to)return[];return[a._request_headers(b,d),a._request_body(b,d)]};a._response=function(a,b,c){return[this._response_headers(a,c),this._response_body(a,c,b)]};a._header_token_templ=function(a,b){var c=0,d=1,e=["class","header-token-type-"+cls.HTTPHeaderTokenizer.classnames[b[c]]];if(b[c]===cls.HTTPHeaderTokenizer.types.NAME)e.extend(["data-spec","http#"+b[d].trim()]);else if(b[c]===cls.HTTPHeaderTokenizer.types.FIRST_LINE_PART){a.data_spec_firstline_tokens.contains(a.firstline_tokens)&&e.extend(["data-spec","http#"+b[d].trim()]);a.firstline_tokens++}return["span",b[d]].concat(e)};a._token_receiver=function(a,b,c){a.push([b,c])};a._request_headers=function(a,b){if(b){if(a.request_headers_raw){if(!a.header_tokens){a.header_tokens=[];var c=new cls.HTTPHeaderTokenizer;c.tokenize(a.request_headers_raw,this._token_receiver.bind(this,a.header_tokens))}if(a.header_tokens.length){var d=[0],e=new cls.HTTPHeaderTokenizer.TokenStateholder(d),f=this._header_token_templ.bind(this,e);return[["h2",ui_strings.S_NETWORK_REQUEST_DETAIL_REQUEST_TITLE],this._pre(a.header_tokens.map(f))]}}return[]}var g=[],h=a.method||"";h&&(h=" – "+h);a.request_body&&a.request_body.partList&&a.request_body.partList.length?g.push(["h2",ui_strings.S_NETWORK_MULTIPART_REQUEST_TITLE+h]):g.push(["h2",ui_strings.S_NETWORK_REQUEST_DETAIL_REQUEST_TITLE+h]);a.request_headers?g.extend(this.headers_list(a.request_headers)):g.push(ui_strings.S_NETWORK_REQUEST_NO_HEADERS_LABEL);return["tbody",g.map(this._col_or_row)]};a._response_headers=function(a,b){if(!a.response_headers)return[];if(b){if(!a.header_tokens){a.header_tokens=[];var c=new cls.HTTPHeaderTokenizer;c.tokenize(a.response_headers_raw,this._token_receiver.bind(this,a.header_tokens))}if(a.header_tokens.length){var d=[1],e=new cls.HTTPHeaderTokenizer.TokenStateholder(d),f=this._header_token_templ.bind(this,e);return[["h2",ui_strings.S_NETWORK_REQUEST_DETAIL_RESPONSE_TITLE],this._pre(a.header_tokens.map(f))]}return[]}var g=[],h=a.responsecode||"",i=cls.ResourceUtil.http_status_codes[h];i&&(h=h+" "+i);h&&(h=" – "+h);if(a.logger_entry_touched_network){var j=["h2",ui_strings.S_NETWORK_REQUEST_DETAIL_RESPONSE_TITLE+h];h&&j.extend(["data-spec","http#"+a.responsecode]);g.push(j)}g.extend(this.headers_list(a.response_headers));return["tbody",g.map(this._col_or_row)]};a._headers_pseudo_raw=function(a){var b=[["span",a.name+":","data-spec","http#"+a.name.trim()],["span"," "+a.value]];return this._pre(b)};a._headers=function(a){return[["th",a.name+":","data-spec","http#"+a.name.trim()],["td",a.value]]};a.headers_list=function(a,b){return a.map(b?this._headers_pseudo_raw:this._headers,this)};a.param_cells=function(a){var b=a.replace(/\+/g," ").split("=");return[["td",decodeURIComponent(b[0])],["td",decodeURIComponent(b[1])]]};a._request_body=function(a,d){if(a.request_body==null)return[];var e=[this._pre("\n")];if(a.request_body.partList.length){var f=Boolean(d&&a.boundary);for(var g=0,h;h=a.request_body.partList[g];g++){f&&g===0&&e.push(this._pre(a.boundary,b));e.extend(this.headers_list(h.headerList,d));e.push(this._pre("\n"));h.content&&h.content.stringData?e.push(this._pre(h.content.stringData,"mono network-body")):e.push(["p",ui_strings.S_NETWORK_N_BYTE_BODY.replace("%s",h.contentLength)]);var i=f?a.boundary:["hr"];f&&h===a.request_body.partList.last&&(i+="--\n");e.push(this._pre(i,b))}}else if(a.request_body.mimeType.startswith("application/x-www-form-urlencoded"))if(d)e.push(this._pre(a.request_body.content.stringData,"network-body"));else{var j=a.request_body.content.stringData.split("&");e.push([["th",ui_strings.S_LABEL_NETWORK_POST_DATA_NAME],["th",ui_strings.S_LABEL_NETWORK_POST_DATA_VALUE]]);e.extend(j.map(this.param_cells))}else if(a.request_body.content){var k=cls.ResourceUtil.mime_to_type(a.request_body.mimeType);c.contains(k)?e.push(this._pre(a.request_body.content.stringData,"network-body")):a.request_body.mimeType?e.push(["p",ui_strings.S_NETWORK_CANT_DISPLAY_TYPE.replace("%s",a.request_body.mimeType)]):e.push(["p",ui_strings.S_NETWORK_UNKNOWN_MIME_TYPE])}return d?e:["tbody",e.map(this._col_or_row)]};a._response_body=function(a,b,d){var e=[],f="",g=a.saw_responsefinished&&(!a.responsebody||!a.responsebody.content)&&(!a.logger_entry_called_get_body||a.logger_entry_get_body_unsuccessful);if(g){f="network_info";e.push(ui_strings.S_NETWORK_REQUEST_DETAIL_NO_RESPONSE_BODY)}else if(!a.responsebody){if(d&&!a.logger_entry_is_finished){f="network_info";e.push(ui_strings.S_NETWORK_REQUEST_DETAIL_BODY_UNFINISHED)}}else c.contains(a.logger_entry_type)?e.push(this._pre(a.responsebody.content.stringData,"network-body")):a.logger_entry_type=="image"?e.push(["img","src",a.responsebody.content.stringData,"class","network-body"]):e.push(["span",ui_strings.S_NETWORK_REQUEST_DETAIL_UNDISPLAYABLE_BODY_LABEL.replace("%s",a.logger_entry_mime),"class","network-body"]);e.length&&e.unshift(this._pre("\n"));return b?e:["tbody",e.map(this._col_or_row),"class",f]}})(window.templates.network);window.cls||(window.cls={});cls.DragState=function(a,b){this.start_drag=function(a){};this._onmousemove=function(a){this.event=a}.bind(this);this._onmouseup=function(a){document.removeEventListener("mousemove",this._onmousemove,!1);document.removeEventListener("mouseup",this._onmouseup,!1);this.interval=clearInterval(this.interval);this.event=null;this._event_target&&this._event_target.style.removeProperty("cursor");this.is_cursor_style_set=!1}.bind(this);this._updateondrag=function(){if(this.event){if(!this.is_cursor_style_set&&(this.dx-this.event.clientX||this.dy-this.event.clientY)){this._event_target=this.event.target;this._event_target.style.cursor="move";this.is_cursor_style_set=!0}var a=(this.dx-this.event.clientX)/this._pixelmagnifier.scale,b=(this.dy-this.event.clientY)/this._pixelmagnifier.scale;this._pixelmagnifier.x=Math.round(this.x+a);this._pixelmagnifier.y=Math.round(this.y+b);this._pixelmagnifier.draw()}}.bind(this);this.start_drag=function(a){this.dx=a.clientX;this.dy=a.clientY;this.x=this._pixelmagnifier.x;this.y=this._pixelmagnifier.y;this.is_cursor_style_set=!1;document.addEventListener("mousemove",this._onmousemove,!1);document.addEventListener("mouseup",this._onmouseup,!1);this.interval=setInterval(this._updateondrag,30);a.preventDefault();a.stopPropagation()};this._init=function(a){this._pixelmagnifier=a};this._init(a,b)};cls.ScreenShotView=function(a,b,c){this.update_screenshot=function(){};this.zoom_center=function(a){};this.set_sample_size=function(a){};this._get_window_size=function(){if(this._top_rt_id){var a="return scrollX + ',' + scrollY + ',' + innerWidth + ',' + innerHeight",b=this._tagman.set_callback(this,this._handle_window_size);this._esdb.requestEval(b,[this._top_rt_id,0,0,a])}};this._handle_window_size=function(a,b){const c=0,d=1,e=2;if(a||b[c]!="completed"||b[d]!="string")opera.postError("Evaling innerWidth and innerHeight failed.");else{var f=[10,b[e].split(",").map(Number),[],window.window_manager_data.get_debug_context(),[],1],g=this._tagman.set_callback(this,this._handle_screenshot);this._exec.requestSetupScreenWatcher(g,f)}};this._handle_screenshot=function(a,b){const c=2;if(a)opera.postError("Taking screenshot failed.");else{this._set_canvas_and_px_magnifier_size(this.get_container());this._screenshot=b[c];this._pixel_magnifier.set_source_base_64(this._screenshot,"image/png")}};this._on_active_tab=function(a){this._top_rt_id=a.runtimes_with_dom[0];if(this._take_screenshot&&this.isvisible()){this._pixel_magnifier.scale=1;window.messages.post("screenshot-scale",{scale:this._pixel_magnifier.scale});this._get_window_size()}};this._on_profile_disabled=function(a){a.profile==window.app.profiles.DEFAULT&&(this._screenshot="")};ActionHandlerInterface.apply(this);this._handlers.zoom=function(a,b){if(this._screenshot){var c=this._pixel_magnifier.scale+(a.wheelDelta>0?1:-1);this._pixel_magnifier.zoom(a.offsetX,a.offsetY,c);this._pixel_magnifier.draw();window.messages.post("screenshot-scale",{scale:this._pixel_magnifier.scale})}}.bind(this);this._handlers.dragstart=function(a){this._screenshot&&!this._drag_state.interval&&this._drag_state.start_drag(a)}.bind(this);this._handlers.click=function(a){if(this._screenshot){this._sample_event=a;var b=this._pixel_magnifier.get_average_color(a.offsetX,a.offsetY,this._sample_size),c=this._pixel_magnifier.get_colors_of_area(a.offsetX,a.offsetY,this._sample_size);window.messages.post("sceenshot-sample-color",{color:b,colors:c})}}.bind(this);this._handlers["take-first-screenshot"]=function(a){this._take_screenshot=!0;this.update()}.bind(this);this._init=function(a,b,c){this.required_services=["ecmascript-debugger","exec"];this.init(a,b,c,"","screenshot-tool");this._pixel_magnifier=new PixelMagnifier;this._pixel_magnifier.onload=function(){this.draw()};this._screenshot="";this._tagman=window.tag_manager;this._esdb=window.services["ecmascript-debugger"];this._exec=window.services.exec;this._drag_state=new cls.DragState(this._pixel_magnifier);this._setting=window.settings["screenshot-controls"];this._sample_size=1;this._take_screenshot=this._setting.get("auto-screenshot");var d=window.eventHandlers;d.mousewheel["screenshot-tool"]=this._handlers.zoom;d.mousedown["screenshot-tool"]=this._handlers.dragstart;d.click["screenshot-tool"]=this._handlers.click;d.click["take-first-screenshot"]=this._handlers["take-first-screenshot"];window.messages.addListener("active-tab",this._on_active_tab.bind(this));window.messages.addListener("setting-changed",this._on_setting_change.bind(this));messages.addListener("profile-disabled",this._on_profile_disabled.bind(this))};this._on_setting_change=function(a){a.id=="screenshot-controls"&&a.key=="auto-screenshot"&&(this._take_screenshot=this._setting.get("auto-screenshot"))};this._first_start_tmpl=function(){return["div",["span",ui_strings.S_BUTTON_TAKE_SCREENSHOT,"class","ui-button","handler","take-first-screenshot","tabindex","1"],["p",window.templates.settingCheckbox("screenshot-controls","auto-screenshot",!1,ui_strings.S_SWITCH_TAKE_SCREENSHOT_AUTOMATICALLY)],"class","info-box"]};this._set_canvas_and_px_magnifier_size=
function(a){if(this._pixel_magnifier&&a){this._pixel_magnifier.set_canvas(a.clearAndRender(["canvas"]));this._pixel_magnifier.width=a.clientWidth;this._pixel_magnifier.height=a.clientHeight}};this.createView=function(a){if(this._take_screenshot){this._set_canvas_and_px_magnifier_size(a);this._screenshot?this._pixel_magnifier.draw():this._get_window_size()}else a.clearAndRender(this._first_start_tmpl())};this.create_disabled_view=function(a){a.clearAndRender(window.templates.disabled_view())};this.onresize=function(a){if(this.isvisible()){this._pixel_magnifier.width=a.clientWidth;this._pixel_magnifier.height=a.clientHeight;this._pixel_magnifier.draw()}};this.update_screenshot=function(a){if(!a){this._pixel_magnifier.scale=1;window.messages.post("screenshot-scale",{scale:this._pixel_magnifier.scale})}this._get_window_size()};this.zoom_center=function(a){if(a>=1&&a<=this._pixel_magnifier.max_scale){this._pixel_magnifier.zoom(this._pixel_magnifier.width/2>>0,this._pixel_magnifier.height/2>>0,a);this._pixel_magnifier.draw()}};this.set_sample_size=function(a){this._sample_size=a;if(this._sample_event){this._handlers.click(this._sample_event);this._handlers.click(this._sample_event)}};this._init(a,b,c)};cls.ScreenShotView.prototype=ViewBase;window.cls||(window.cls={});window.cls.ScreenShotControlsView=function(a,b,c){this._onscalechange=function(a){if(this._scale_control){this._scale_control.value=a.scale;this._ruler.scale=a.scale}this._scale=a.scale};this._onsamplecolor=function(a){if(this._sample_color_container){this._sample_colors=a.colors;var b=this._sample_color_template(this._sample_color.setRGB(a.color));this._sample_color_container.clearAndRender(b);this._update_sample_colors()}};this._onviewcreated=function(a){a.id=="screenshot"&&this._ruler.set_container(a.container)};this._onrulerdimesions=function(a){this._ruler_dimensions&&(this._ruler_dimensions.textContent="width: "+a.w+"px\n"+"height: "+a.h+"px")};this._onrulerclose=function(a){this._ruler_dimensions&&(this._ruler_dimensions.textContent="")};this._update_sample_colors=function(){if(this._sample_colors&&this._sample_color_container){var a=this._sample_color_container.getElementsByTagName("canvas")[0];if(a){a.height=a.width=65;var b=a.getContext("2d"),c=65/this._settings.get("sample-size")>>0,d=1,e=1,f=63;if(c%13==0){d=0;e=0;f=65}for(var g=0,h,i;g<this._sample_colors.length;g++){b.fillStyle="rgb("+this._sample_colors[g].join(",")+")";h=g*c%f;i=(g*c-h)/f*c;b.fillRect(d+h,e+i,c,c)}}}};this._init=function(a,b,c){this.required_services=["ecmascript-debugger","exec"];this.init(a,b,c);this._screenshot=null;this._sample_color=new Color;this._sample_color.setRGB([255,255,255]);this._sample_color_container=null;this._sample_colors=null;this._sample_color_template=window.templates.sample_color;this._scale=1;this._ruler=new cls.Ruler;this._ruler.callback=this._onrulerdimesions.bind(this);this._ruler.onclose=this._onrulerclose.bind(this);var d={"sample-size":3,"color-palette":[],"auto-screenshot":!1},e={"auto-screenshot":ui_strings.S_SWITCH_TAKE_SCREENSHOT_AUTOMATICALLY},f={checkboxes:["auto-screenshot"]};this._settings=new Settings("screenshot-controls",d,e,f,null,"general");this._screenshot=new cls.ScreenShotView("screenshot","Screen Shot","screenshot");window.eventHandlers.click["screenshot-update"]=this._handlers["screenshot-update"];window.eventHandlers.click["screenshot-store-color"]=this._handlers["screenshot-store-color"];window.eventHandlers.click["screenshot-show-ruler"]=this._handlers["screenshot-show-ruler"];window.eventHandlers.input["screenshot-zoom"]=this._handlers["screenshot-zoom"];window.eventHandlers.input["screenshot-sample-size"]=this._handlers["screenshot-sample-size"];window.messages.addListener("screenshot-scale",this._onscalechange.bind(this));window.messages.addListener("sceenshot-sample-color",this._onsamplecolor.bind(this));window.messages.addListener("view-created",this._onviewcreated.bind(this));this._screenshot.set_sample_size(this._settings.get("sample-size"))};ActionHandlerInterface.apply(this);this._handlers["screenshot-update"]=function(a,b){this._screenshot||(this._screenshot=window.views.screenshot);this._screenshot._take_screenshot=!0;this._screenshot.update_screenshot(a.shiftKey)}.bind(this);this._handlers["screenshot-zoom"]=function(a,b){this._screenshot||(this._screenshot=window.views.screenshot);this._scale=parseInt(a.target.value);this._screenshot.zoom_center(this._scale);this._ruler.scale=this._scale}.bind(this);this._handlers["screenshot-sample-size"]=function(a,b){this._screenshot||(this._screenshot=window.views.screenshot);var c=parseInt(a.target.value);this._settings.set("sample-size",c);this._screenshot.set_sample_size(c)}.bind(this);this._handlers["screenshot-store-color"]=function(a,b){cls.ColorPalette.get_instance().store_color(a.target.getAttribute("data-color"))};this._handlers["screenshot-show-ruler"]=function(a,b){this._ruler.show_ruler(window.views.screenshot.get_container())}.bind(this);this.createView=function(a){var b=window.templates.screenshot_controls(this._sample_color);a.clearAndRender(b);this._scale_control=a.getElementsByTagName("input")[0];this._scale_control.value=this._scale;this._sample_size_control=a.getElementsByTagName("input")[1];this._sample_size_control.value=this._settings.get("sample-size");this._sample_color_container=a.getElementsByClassName("screenshot-sample-container")[0];this._ruler_dimensions=a.getElementsByClassName("screenshot-ruler-dimensions")[0];this._update_sample_colors()};this.ondestroy=function(){this._scale_control=null;this._sample_size_control=null;this._sample_color_container=null;this._ruler_dimensions=null;UIWindowBase.closeWindow("color-selector")};this._init(a,b,c)};cls.ScreenShotControlsView.prototype=ViewBase;(function(){this.screenshot_controls=function(a){return["div",["p",["span",ui_strings.S_BUTTON_UPDATE_SCREESHOT,"handler","screenshot-update","class","ui-button","tabindex","1"]],["table",["tr",["td",ui_strings.S_LABEL_COLOR_PICKER_ZOOM+":"],["td","100%"],["td",["input","type","range","min","1","max","30","step","1","handler","screenshot-zoom"],"class","selectable"],["td","3000%"]],["tr",["td",ui_strings.S_LABEL_COLOR_PICKER_SAMPLE_SIZE+":"],["td","1 x 1"],["td",["input","type","range","min","1","max","9","step","2","handler","screenshot-sample-size"],"class","selectable"],["td","9 x 9"]]],["div",this.sample_color(a),"class","screenshot-sample-container"],this._ruler_controls(),"class","padding screenshot-max-height"]};this._ruler_controls=function(){return["div",["span","Show ruler","handler","screenshot-show-ruler","class","ui-button","tabindex","1"],["pre","class","screenshot-ruler-dimensions"],"class","screenshot-ruler"]};this.sample_color=function(a){return["div",["pre",["span","RGB: "],a.getRGB().join(", ")+"\n",["span","HSL: "],a.getHSL().join("%, ").replace("%","")+"%\n",["span","HEX: "],"#"+a.getHex()+"\n","class","mono screenshot-sample-values selectable"],["span",ui_strings.S_BUTTON_STORE_COLOR,"handler","screenshot-store-color","data-color",a.getHex(),"class","ui-button","tabindex","1"],["div",["canvas"],"class","screenshot-sample-color","style","background-color:"+a.hhex],"class","screenshot-sample-color-container"]};this.color_palette=function(a){return[["ul",a.map(this.color_palette_item,this),"handler","color-palette-edit-color","edit-handler","color-palette-edit-color","class","color-palette mono"],["p",["span",ui_strings.M_CONTEXTMENU_ADD_COLOR,"handler","color-palette-add-color","class","color-palette-add-button ui-button","tabindex","1"]]]};this.color_palette_item=function(a,b){return["li",["span","class","color-palette-sample","style","background-color: #"+a.color],"#"+a.color,"data-color-id",String(a.id),"class","color-palette-item"]}}).apply(window.templates||(window.templates={}));window.cls||(window.cls={});cls.ColorPalette=function(){if(cls.ColorPalette.instance)return cls.ColorPalette.instance;cls.ColorPalette.instance=this;this.store_color=function(a){};this.delete_color=function(a){};this.update_color=function(a,b){};this.get_color_palette=function(){};this._init=function(){this._setting=window.settings["screenshot-controls"];this._data=this._setting.get("color-palette");this._id_count=0};this.store_color=function(a){if(!this._id_count){this._id_count=this._data.reduce(function(a,b){return Math.max(a,b.id)},0);this._id_count++}var b=this._id_count++;this._data.unshift({color:a,id:b});this._setting.set("color-palette",this._data);return this._data[this._data.length-1]};this.delete_color=function(a){for(var b=0;b<this._data.length;b++)if(this._data[b].id==a){var c=this._data.splice(b,1)[0];this._setting.set("color-palette",this._data);return c}return null};this.update_color=function(a,b){for(var c=0;c<this._data.length;c++)if(this._data[c].id==a){this._data[c].color=b;this._setting.set("color-palette",this._data);return!0}return!1};this.get_color_palette=function(){return this._data};this._init()};cls.ColorPalette.get_instance=function(){return this.instance||new cls.ColorPalette};window.cls||(window.cls={});cls.ColorPaletteView=function(a,b,c){this._oneditcolor=function(a){this._edit_context.ele_color_sample.style.backgroundColor=a.hhex;this._edit_context.ele_color_value.nodeValue=a.hhex;cls.ColorPalette.get_instance().update_color(this._edit_context.color_id,a.getHex())}.bind(this);ActionHandlerInterface.apply(this);this._handlers["color-palette-edit-color"]=function(a,b){var c=a.target.has_attr("parent-node-chain","data-color-id");if(c){var d=c.firstElementChild;this._edit_context={color_id:Number(c.getAttribute("data-color-id")),initial_color:(new Color).parseCSSColor(d.style.backgroundColor),ele_value:c,vertical_anchor_selector:".color-palette-sample",horizontal_anchor_selector:"container",ele_color_sample:d,ele_color_value:d.nextSibling,callback:this._oneditcolor,edit_class:"edited-color",alpha_disabled:!0,palette_disabled:!0};window.views["color-selector"].show_color_picker(d,this._edit_context)}}.bind(this);this._handlers["color-palette-add-color"]=function(a,b){var c=cls.ColorPalette.get_instance().store_color("FF0000"),d=window.templates.color_palette_item(c),e=this._color_palette_list.render(d);this._handlers["color-palette-edit-color"]({target:e})}.bind(this);this._handlers["color-palette-delete-color"]=function(a,b){var c=a.target.has_attr("parent-node-chain","data-color-id"),d=c&&Number(c.getAttribute("data-color-id"));d&&cls.ColorPalette.get_instance().delete_color(d)&&c.parentNode.removeChild(c)}.bind(this);this._menu_common_items=[{label:ui_strings.M_CONTEXTMENU_ADD_COLOR,handler:this._handlers["color-palette-add-color"]}];this._menu_editable_items=[{label:ui_strings.M_CONTEXTMENU_EDIT_COLOR,handler:this._handlers["color-palette-edit-color"]},{label:ui_strings.M_CONTEXTMENU_DELETE_COLOR,handler:this._handlers["color-palette-delete-color"]}].concat(ContextMenu.separator).concat(this._menu_common_items);this._menu=[{callback:function(a,b){return a.target.get_attr("parent-node-chain","data-color-id")?this._menu_editable_items:this._menu_common_items}.bind(this)}];this._init=function(a,b,c){this.required_services=["ecmascript-debugger","exec"];this.init(a,b,c);window.eventHandlers.click["color-palette-add-color"]=this._handlers["color-palette-add-color"];window.eventHandlers.dblclick["color-palette-edit-color"]=this._handlers["color-palette-edit-color"];window.eventHandlers.mouseup["color-palette-edit-color"]=function(){window.getSelection()&&window.getSelection().removeAllRanges()};ContextMenu.get_instance().register("color-palette",this._menu,!0)};this.createView=function(a){var b=cls.ColorPalette.get_instance().get_color_palette();a.clearAndRender(window.templates.color_palette(b));this._color_palette_list=a.firstElementChild};this.ondestroy=function(){UIWindowBase.closeWindow("color-selector")};this._init(a,b,c)};cls.ColorPaletteView.prototype=ViewBase